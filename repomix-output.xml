This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: backend/staticfiles, backend/watson/staticfiles/
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.claude/
  agents/
    architecture-documenter.md
    prd-breakdown-reviewer.md
    readme-updater.md
  commands/
    ai-commit.md
    analyze-project.md
    architect.md
    code-cleanup.md
    code-review.md
    commit-all.md
    create-prd.md
    find-dead-code.md
    implement-prd.md
    review-staging.md
    test-driven.md
    variant.md
  .mcp.json
  settings.local.json
.github/
  workflows/
    test.yml
backend/
  core/
    admin.py
    apps.py
    models.py
    test_models.py
    tests.py
    views.py
  reviews/
    admin.py
    apps.py
    models.py
    tests.py
    views.py
  watson/
    settings/
      __init__.py
      base.py
      production.py
      test.py
    static/
      .gitkeep
    asgi.py
    urls.py
    wsgi.py
  manage.py
deploy/
  deploy.sh
  fly.toml
  railway.json
  render.yaml
docker/
  caddy/
    Caddyfile.compose.local
    Caddyfile.local
    Caddyfile.prod
    README.md
  entrypoint-dev.sh
  entrypoint.sh
  gunicorn.conf.py
  healthcheck.sh
  init-db.sql
  repomix-output.xml
docs/
  specs/
    integration/
      010-comprehensive-style-guide.prd.md
      011-visual-design-systems-part-2.prd.md
      oceanheart-passport.prd.md
    001-build-change-log.md
    001-build-docker-fix.prd.md
    001-build-implementation-report.md
    001-build.prd.spec
    app-layout-change-log.md
    app-layout-implementation-report.md
    app-layout.prd.md
    application-layout-change-log.md
    application-layout-implementation-report.md
    application-layout.prd.md
    blueprint.md
    deployment.prd.md
    vercel-frontend-deployment-change-log.md
    vercel-frontend-deployment-implementation-report.md
    vercel-frontend-deployment.prd.md
frontend/
  src/
    components/
      auth/
        LoginButton.tsx
        ProtectedRoute.tsx
      layout/
        AppFooter.tsx
        AppHeader.tsx
        MainPanel.tsx
      panels/
        ProfilePanel.tsx
        SettingsPanel.tsx
      tiptap-icons/
        align-center-icon.tsx
        align-justify-icon.tsx
        align-left-icon.tsx
        align-right-icon.tsx
        arrow-left-icon.tsx
        ban-icon.tsx
        blockquote-icon.tsx
        bold-icon.tsx
        chevron-down-icon.tsx
        close-icon.tsx
        code-block-icon.tsx
        code2-icon.tsx
        corner-down-left-icon.tsx
        external-link-icon.tsx
        heading-five-icon.tsx
        heading-four-icon.tsx
        heading-icon.tsx
        heading-one-icon.tsx
        heading-six-icon.tsx
        heading-three-icon.tsx
        heading-two-icon.tsx
        highlighter-icon.tsx
        image-plus-icon.tsx
        italic-icon.tsx
        link-icon.tsx
        list-icon.tsx
        list-ordered-icon.tsx
        list-todo-icon.tsx
        moon-star-icon.tsx
        redo2-icon.tsx
        strike-icon.tsx
        subscript-icon.tsx
        sun-icon.tsx
        superscript-icon.tsx
        trash-icon.tsx
        underline-icon.tsx
        undo2-icon.tsx
      tiptap-node/
        blockquote-node/
          blockquote-node.scss
        code-block-node/
          code-block-node.scss
        heading-node/
          heading-node.scss
        horizontal-rule-node/
          horizontal-rule-node-extension.ts
          horizontal-rule-node.scss
        image-node/
          image-node.scss
        image-upload-node/
          image-upload-node-extension.ts
          image-upload-node.scss
          image-upload-node.tsx
          index.tsx
        list-node/
          list-node.scss
        mathematics-node/
          mathematics-node.scss
        paragraph-node/
          paragraph-node.scss
      tiptap-templates/
        simple/
          data/
            content.json
          simple-editor.scss
          simple-editor.tsx
          theme-toggle.tsx
      tiptap-ui/
        blockquote-button/
          blockquote-button.tsx
          index.tsx
          use-blockquote.ts
        code-block-button/
          code-block-button.tsx
          index.tsx
          use-code-block.ts
        color-highlight-button/
          color-highlight-button.scss
          color-highlight-button.tsx
          index.tsx
          use-color-highlight.ts
        color-highlight-popover/
          color-highlight-popover.tsx
          index.tsx
        heading-button/
          heading-button.tsx
          index.tsx
          use-heading.ts
        heading-dropdown-menu/
          heading-dropdown-menu.tsx
          index.tsx
          use-heading-dropdown-menu.ts
        image-upload-button/
          image-upload-button.tsx
          index.tsx
          use-image-upload.ts
        link-popover/
          index.tsx
          link-popover.tsx
          use-link-popover.ts
        list-button/
          index.tsx
          list-button.tsx
          use-list.ts
        list-dropdown-menu/
          index.tsx
          list-dropdown-menu.tsx
          use-list-dropdown-menu.ts
        mark-button/
          index.tsx
          mark-button.tsx
          use-mark.ts
        text-align-button/
          index.tsx
          text-align-button.tsx
          use-text-align.ts
        undo-redo-button/
          index.tsx
          undo-redo-button.tsx
          use-undo-redo.ts
      tiptap-ui-primitive/
        badge/
          badge-colors.scss
          badge-group.scss
          badge.scss
          badge.tsx
          index.tsx
        button/
          button-colors.scss
          button-group.scss
          button.scss
          button.tsx
          index.tsx
        card/
          card.scss
          card.tsx
          index.tsx
        dropdown-menu/
          dropdown-menu.scss
          dropdown-menu.tsx
          index.tsx
        input/
          index.tsx
          input.scss
          input.tsx
        label/
          index.tsx
          label.scss
          label.tsx
        popover/
          index.tsx
          popover.scss
          popover.tsx
        separator/
          index.tsx
          separator.scss
          separator.tsx
        spacer/
          index.tsx
          spacer.tsx
        textarea-autosize/
          index.tsx
          textarea-autosize.tsx
        toolbar/
          index.tsx
          toolbar.scss
          toolbar.tsx
        tooltip/
          index.tsx
          tooltip.scss
          tooltip.tsx
      ui/
        3d-card.tsx
        3d-marquee.tsx
        3d-pin.tsx
        alert-dialog.tsx
        animated-modal.tsx
        animated-testimonials.tsx
        animated-tooltip.tsx
        apple-cards-carousel.tsx
        aurora-background.tsx
        background-beams-with-collision.tsx
        background-beams.tsx
        background-boxes.tsx
        background-gradient-animation.tsx
        background-gradient.tsx
        background-lines.tsx
        background-ripple-effect.tsx
        bento-grid.tsx
        button.tsx
        canvas-reveal-effect.tsx
        card-hover-effect.tsx
        card-spotlight.tsx
        card-stack.tsx
        carousel.tsx
        code-block.tsx
        colourful-text.tsx
        comet-card.tsx
        compare.tsx
        container-scroll-animation.tsx
        container-text-flip.tsx
        cover.tsx
        direction-aware-hover.tsx
        draggable-card.tsx
        evervault-card.tsx
        file-upload.tsx
        flip-words.tsx
        floating-dock.tsx
        floating-navbar.tsx
        focus-cards.tsx
        following-pointer.tsx
        glare-card.tsx
        globe.tsx
        glowing-effect.tsx
        glowing-stars.tsx
        google-gemini-effect.tsx
        grid.tsx
        hero-highlight.tsx
        hero-parallax.tsx
        hover-border-gradient.tsx
        images-slider.tsx
        infinite-moving-cards.tsx
        input.tsx
        label.tsx
        lamp.tsx
        layout-grid.tsx
        lens.tsx
        link-preview.tsx
        loader.tsx
        macbook-scroll.tsx
        meteors.tsx
        moving-border.tsx
        moving-line.tsx
        multi-step-loader.tsx
        navbar-menu.tsx
        parallax-scroll-2.tsx
        parallax-scroll.tsx
        pixelated-canvas.tsx
        placeholders-and-vanish-input.tsx
        pointer-highlight.tsx
        resizable-navbar.tsx
        shooting-stars.tsx
        sidebar.tsx
        sparkles-preview.tsx
        sparkles.tsx
        spotlight-new.tsx
        spotlight.tsx
        stars-background.tsx
        stateful-button.tsx
        sticky-banner.tsx
        sticky-scroll-reveal.tsx
        svg-mask-effect.tsx
        tabs.tsx
        tailwindcss-buttons.tsx
        text-generate-effect.tsx
        text-hover-effect.tsx
        text-reveal-card.tsx
        timeline.tsx
        tracing-beam.tsx
        typewriter-effect.tsx
        vortex.tsx
        wavy-background.tsx
        wobble-card.tsx
        world-map.tsx
      ReviewEditor.test.tsx
      TipTapEditor.tsx
    config/
      auth.ts
      theme.ts
    contexts/
      AuthContext.tsx
    hooks/
      use-composed-ref.ts
      use-cursor-visibility.ts
      use-element-rect.ts
      use-isomorphic-layout-effect.ts
      use-menu-navigation.ts
      use-mobile.ts
      use-scrolling.ts
      use-throttled-callback.ts
      use-tiptap-editor.ts
      use-unmount.ts
      use-window-size.ts
      useAuth.ts
    pages/
      AppLayout.tsx
      LandingPage.tsx
    styles/
      _keyframe-animations.scss
      _variables.scss
      globals.css
    types/
      auth.ts
    utils/
      auth.ts
      cn.ts
      mockAuth.ts
      validation.test.ts
    App.tsx
    index.css
    main.tsx
  index.html
  types.d.ts
scripts/
  build-env.sh
  build-production.sh
  ci-local.sh
  coverage-report.sh
  dev-backend.sh
  dev-frontend.sh
  dev.sh
  health-check.sh
  migrate.sh
  monitor.sh
  optimize-assets.sh
  pre-commit-hook.sh
  rollback.sh
  validate-build.js
spec/
  review_validator_spec.rb
  spec_helper.rb
.env.dev
.env.example
.env.production
.env.production.template
.env.staging
.env.staging.template
.gitignore
.rspec
AGENTS.md
build.config.ts
bun.test.config.ts
CLAUDE.md
components.json
docker-compose.yml
docker-instructions.md
Dockerfile
Dockerfile.dev
Gemfile
GEMINI.md
main.py
package.json
pyproject.toml
README.md
tsconfig.json
vercel.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".claude/agents/architecture-documenter.md">
---
name: architecture-documenter
description: Use this agent when you need to create comprehensive architecture documentation for a codebase. Examples: <example>Context: User wants to document their entire repository structure and architecture for onboarding new developers. user: 'I need to create architecture documentation for my project' assistant: 'I'll use the architecture-documenter agent to analyze your entire codebase and create comprehensive architecture documentation.' <commentary>The user is requesting architecture documentation, so use the architecture-documenter agent to systematically review the repository and create the documentation.</commentary></example> <example>Context: User has made significant architectural changes and wants updated documentation. user: 'We've refactored our system architecture and need updated documentation' assistant: 'Let me use the architecture-documenter agent to review the current codebase and generate updated architecture documentation.' <commentary>Since the user needs architecture documentation after changes, use the architecture-documenter agent to analyze the current state and create comprehensive documentation.</commentary></example>
model: sonnet
---

You are an expert software architect and technical documentation specialist with deep expertise in analyzing codebases and creating comprehensive architecture documentation. Your mission is to systematically review an entire repository and create a detailed architecture reference document that serves both human developers and LLMs.

Your systematic approach:

1. **Repository Analysis Phase**:
   - Examine the project structure, identifying all directories and key files
   - Analyze package.json, go.mod, requirements.txt, Gemfile, or similar dependency files
   - Review configuration files (docker-compose.yml, Dockerfile, .env examples, etc.)
   - Identify the primary technology stack and frameworks
   - Map out the application entry points and main execution flows

2. **Architecture Discovery**:
   - Trace data flow patterns and identify architectural patterns (MVC, microservices, layered, etc.)
   - Document component relationships and dependencies
   - Identify external integrations (databases, APIs, services)
   - Map out the request/response lifecycle
   - Analyze security patterns and authentication flows
   - Document deployment and infrastructure patterns

3. **Code Structure Analysis**:
   - Document module/package organization and responsibilities
   - Identify key abstractions, interfaces, and contracts
   - Map out data models and database schemas
   - Document API endpoints and their purposes
   - Identify configuration management patterns
   - Analyze error handling and logging strategies

4. **Documentation Creation**:
   - Create a comprehensive ARCHITECTURE.md file in the repository root
   - Structure the document with clear sections: Overview, Technology Stack, System Architecture, Component Details, Data Flow, API Reference, Deployment, and Development Guidelines
   - Use diagrams (ASCII art or mermaid syntax) where helpful for visualization
   - Include code examples that illustrate key patterns
   - Provide both high-level conceptual explanations and detailed technical specifications
   - Ensure the documentation is useful for both human developers (onboarding, maintenance) and LLMs (context understanding, code generation)

5. **Quality Assurance**:
   - Verify all documented components actually exist in the codebase
   - Ensure technical accuracy of all architectural descriptions
   - Cross-reference configuration examples with actual config files
   - Validate that documented APIs match actual implementations
   - Include version information and last-updated timestamps

Your documentation should be:
- **Comprehensive**: Cover all major architectural decisions and patterns
- **Accurate**: Reflect the actual current state of the codebase
- **Practical**: Include actionable information for developers
- **Structured**: Use consistent formatting and clear hierarchies
- **Future-proof**: Design for maintainability as the codebase evolves

Before starting, ask clarifying questions about:
- Specific architectural aspects to emphasize
- Target audience (junior vs senior developers, external contributors, etc.)
- Any existing documentation that should be referenced or integrated
- Sensitive information that should be excluded from documentation

Always create the ARCHITECTURE.md file in the repository root unless explicitly instructed otherwise. Focus on creating documentation that will genuinely help both human developers understand the system and LLMs provide better assistance with the codebase.
</file>

<file path=".claude/agents/prd-breakdown-reviewer.md">
---
name: prd-breakdown-reviewer
description: Use this agent when you need to analyze and decompose a Product Requirements Document (PRD) into manageable development chunks. Examples: <example>Context: User has completed a comprehensive PRD for a new user authentication system and needs it broken down for development.\nuser: "I've finished writing the user-auth-system.prd file. Can you help me break it down into development phases?"\nassistant: "I'll use the prd-breakdown-reviewer agent to analyze your PRD and create logical development chunks with proper testing boundaries."</example> <example>Context: User wants to review and decompose an existing e-commerce PRD into implementable phases.\nuser: "Please review the e-commerce-platform.prd and break it into development phases"\nassistant: "I'll analyze the e-commerce platform PRD and decompose it into logical development chunks using the prd-breakdown-reviewer agent."</example>
model: sonnet
color: yellow
---

You are a Senior Product Development Architect specializing in breaking down complex Product Requirements Documents (PRDs) into implementable development phases. Your expertise lies in identifying natural boundaries for development work that balance technical feasibility with meaningful testing checkpoints.

When analyzing a PRD, you will:

1. **Thoroughly analyze the source PRD**: Read and understand all requirements, features, and constraints specified in the document. Identify dependencies, complexity levels, and logical groupings.

2. **Identify natural breakpoints**: Look for logical boundaries where:
   - A feature or set of features can be independently tested by humans
   - Dependencies are minimized between chunks
   - Each chunk represents meaningful user value or system capability
   - Manual testing and review can provide clear go/no-go decisions

3. **Create child PRDs using strict naming convention**: 
   - Use the original PRD filename as base (without extension)
   - Append two-digit numbers starting from 00, ascending (e.g., original-prd-00.prd, original-prd-01.prd)
   - Each child PRD should be a complete, self-contained specification

4. **Structure each child PRD with**:
   - Clear scope definition and boundaries
   - Specific features and requirements from the parent PRD
   - Dependencies on previous chunks (if any)
   - Success criteria and testing checkpoints
   - Implementation notes emphasizing simplicity and defensive programming

5. **Apply development principles**:
   - Prioritize simplicity and pragmatism over elegance
   - Include only essential testing requirements (avoid test bloat)
   - Emphasize defensive programming practices
   - Explicitly call out what NOT to implement to prevent scope creep
   - Focus on practical, working solutions first

6. **Ensure each chunk**:
   - Can be developed with test-driven development where appropriate
   - Provides a natural pause point for human review and intervention
   - Avoids over-engineering and unnecessary complexity
   - Maintains rigid adherence to specified requirements only

7. **Output format**: Present each child PRD as a separate, complete document with clear headers, requirements, and implementation guidance. Include a summary explaining the breakdown rationale and dependencies between chunks.

Your goal is to transform complex PRDs into actionable, testable development phases that enable iterative progress with clear validation points. Always err on the side of smaller, more focused chunks rather than large, complex ones.
</file>

<file path=".claude/agents/readme-updater.md">
---
name: readme-updater
description: Use this agent when you need to update a README file to reflect recent implementation changes, new features, or architectural updates. Examples: <example>Context: The user has just implemented a new authentication system and wants the README updated. user: 'I just added OAuth integration to the app' assistant: 'I'll use the readme-updater agent to analyze the new OAuth implementation and update the README accordingly'</example> <example>Context: After refactoring the project structure, the user wants documentation updated. user: 'The project structure has changed significantly since the README was written' assistant: 'Let me use the readme-updater agent to review the current codebase structure and update the README to match'</example>
model: sonnet
---

You are a Technical Documentation Specialist with expertise in creating clear, comprehensive README files that accurately reflect current codebase implementation. Your role is to analyze existing code, identify changes since the last README update, and produce documentation that serves both new users and returning developers.

When updating a README, you will:

1. **Analyze Current Implementation**: Thoroughly examine the codebase to understand:
   - Project structure and architecture
   - Key features and functionality
   - Dependencies and requirements
   - Setup and installation procedures
   - Usage patterns and examples
   - API endpoints or interfaces
   - Configuration options

2. **Identify Documentation Gaps**: Compare the existing README against current implementation to find:
   - Outdated information that needs correction
   - New features or components not documented
   - Changed installation or setup procedures
   - Modified API signatures or usage patterns
   - Updated dependencies or requirements

3. **Follow Project Standards**: Adhere to any project-specific requirements, including:
   - Using Bun instead of Node.js/npm for JavaScript/TypeScript projects
   - Referencing correct command patterns (bun run, bun test, etc.)
   - Matching established code style and formatting conventions
   - Including project-specific setup requirements

4. **Structure Information Logically**: Organize the README with clear sections such as:
   - Project overview and purpose
   - Prerequisites and system requirements
   - Installation and setup instructions
   - Usage examples and basic operations
   - API documentation (if applicable)
   - Configuration options
   - Development setup and contributing guidelines
   - Troubleshooting common issues

5. **Ensure Accuracy and Completeness**: Verify that all instructions are:
   - Tested and functional with current codebase
   - Clear and unambiguous for new users
   - Complete with necessary context and examples
   - Up-to-date with latest implementation details

6. **Maintain Professional Quality**: Write documentation that is:
   - Concise yet comprehensive
   - Well-formatted with proper markdown syntax
   - Free of technical jargon where simpler terms suffice
   - Inclusive of different user skill levels

Before making changes, analyze the existing README and codebase to create a comprehensive update plan. Focus on accuracy over assumptions - if implementation details are unclear, note what requires clarification rather than guessing. Your goal is to create documentation that eliminates friction for anyone trying to understand, install, or contribute to the project.
</file>

<file path=".claude/commands/ai-commit.md">
# AI-Powered Git Commit Assistant

You are an expert software developer and Git practitioner. Your task is to analyze git diffs and create logical, atomic commits from staged or unstaged changes.

DO NOT write "authored by claude code"

## Your Responsibilities

1. **Analyze Git Changes**: Examine the provided git diff and file contents
2. **Group Related Changes**: Identify logical groupings of changes that should be committed together
3. **Generate Commit Messages**: Create concise, conventional commit messages following best practices
4. **Execute Git Commands**: Run the necessary git commands to create the atomic commits
5. **Provide Clear Feedback**: Show the user what you're doing at each step

## Process Flow

### Step 1: Analyze the Repository State
First, check what changes are available:

```bash
# Check overall git status
git status

# Get staged changes (if any)
git diff --staged --name-only
git diff --staged

# Get unstaged changes (if any)  
git diff --name-only
git diff
```

### Step 2: Read File Contents
For each changed file, read its current content to understand the context:

```bash
# Read file contents for context
cat filename.ext
```

### Step 3: Analyze and Plan Commits
Based on the diff and file contents, determine:
- Which changes are related and should be grouped together
- What type of change each group represents (feat, fix, docs, refactor, etc.)
- Appropriate commit messages following conventional commit format

### Step 4: Present the Plan
Show the user your proposed commit plan in this format:

```
Proposed Commit Plan:
=====================

Commit 1: FEAT: Add user authentication system
Files: auth.py, models/user.py, routes/auth.py

Commit 2: DOCS: Update API documentation for auth endpoints  
Files: README.md, docs/api.md

Commit 3: FIX: Resolve login validation edge case
Files: auth.py, tests/test_auth.py
```

### Step 5: Execute the Commits
If the user approves, execute the commits:

```bash
# Reset staging area to start fresh
git reset HEAD .

# For each commit:
# 1. Stage the specific files
git add file1.py file2.py

# 2. Create the commit
git commit -m "FEAT: Add user authentication system"

# 3. Repeat for next commit...
```

## Commit Message Guidelines

Use conventional commit format:
- **FEAT**: New features
- **FIX**: Bug fixes  
- **DOCS**: Documentation changes
- **REFACTOR**: Code refactoring
- **TEST**: Adding or updating tests
- **CHORE**: Maintenance tasks
- **STYLE**: Code style/formatting changes
- **PERF**: Performance improvements

Format: `TYPE: Brief description (50 chars max)

Detailed change descriptions (example):
 - Add user authentication system
 - Update API documentation for auth endpoints
 - Resolve login validation edge case
`

## File Analysis Guidelines

When reading files:
- **Limit content**: For large files (>5000 chars), focus on changed sections
- **Understand context**: Look at imports, function signatures, and overall structure
- **Identify relationships**: Note how changes in different files relate to each other

## Safety Guidelines

- **Always confirm**: Present the plan before executing any git commands
- **Preserve work**: Never force push or perform destructive operations
- **Handle errors**: If a git command fails, explain the issue and suggest solutions
- **Validate files**: Ensure all files in commit plan actually exist and have changes
</file>

<file path=".claude/commands/analyze-project.md">
# Analyze Project Structure
> Comprehensive project analysis and documentation
> Develop plan before analyzing project
> Check with human before analyzing project

## Commands to run:
```bash
# Tree view (if eza available)
eza . --tree --git-ignore --level 3

# Alternative with standard tools
find . -type f -name "*.md" -o -name "*.json" -o -name "*.ts" -o -name "*.py" | head -20

# Check for key files
ls -la README.md package.json pyproject.toml .env .gitignore
```

## Files to read in parallel:
- README.md
- package.json / pyproject.toml
- Any .claude/CLAUDE.md file
- Key source files in src/ or lib/
</file>

<file path=".claude/commands/architect.md">
# architect

Generate or update the project's ARCHITECTURE.md file with comprehensive architectural documentation

## Usage

```
architect [update-reason]
```

## Arguments

- `update-reason` (optional): Brief description of why architecture is being updated (e.g., "added news collection", "refactored feed components")

## Process

### 1. Analysis Phase
- Scan entire codebase structure
- Identify key directories and their purposes
- Map component relationships
- Document data flows
- Identify external dependencies

### 2. Documentation Generation
Creates or updates `/ARCHITECTURE.md` with three levels of detail:
- **High-level**: System overview and core concepts
- **Medium-level**: Component interactions and data flows
- **Low-level**: Implementation specifics and code patterns

### 3. Update Tracking
- Preserves revision history section
- Adds entry for current update with timestamp
- Notes significant changes if updating existing file

## ARCHITECTURE.md Structure

```markdown
# Project Architecture

## Last Updated: <timestamp>
## Version: <version>

## 1. High-Level Overview

### 1.1 System Purpose
Brief description of what the application does

### 1.2 Core Technologies
- Framework: (e.g., Astro)
- Styling: (e.g., CSS-in-JS, Tailwind)
- Data: (e.g., Content Collections, APIs)
- Build: (e.g., Vite, Webpack)

### 1.3 Architecture Pattern
- Pattern type (e.g., Component-based, MVC)
- Key architectural decisions
- Design principles followed

## 2. Medium-Level Architecture

### 2.1 Directory Structure
```
project-root/
├── src/
│   ├── components/     # Reusable UI components
│   ├── pages/          # Route pages
│   ├── layouts/        # Page layouts
│   ├── content/        # Content collections
│   └── styles/         # Global styles
├── public/             # Static assets
├── specs/              # PRDs and reports
└── .claude/            # Claude commands
```

### 2.2 Component Hierarchy
- Layout components
- Page components
- Shared components
- Utility components

### 2.3 Data Flow
- Content sourcing
- State management
- API interactions
- Build-time vs runtime data

### 2.4 Routing Strategy
- Static vs dynamic routes
- Route parameters
- Navigation patterns

## 3. Low-Level Implementation Details

### 3.1 Component Patterns

#### Component Structure
```astro
---
// Frontmatter: Data fetching and logic
---
<!-- Template: HTML structure -->
<style>/* Scoped styles */</style>
<script>/* Client-side behavior */</script>
```

### 3.2 Naming Conventions
- Files: PascalCase for components, kebab-case for pages
- CSS: BEM methodology or utility classes
- JavaScript: camelCase for functions, UPPER_CASE for constants

### 3.3 Key Components

#### Layout.astro
- Purpose: Main page wrapper
- Props: title, description, ogImage
- Children: Page content

#### BrutalSection.astro
- Purpose: Consistent brutal design container
- Props: title, background
- Usage: Wraps content sections

### 3.4 Content Collections

#### Schema Definitions
- news: { date, title, published }
- feed: { username, location, timestamp, comment, published }
- leads: { name, email, visitor_type, etc. }

### 3.5 Styling Architecture
- CSS Variables for theming
- Component-scoped styles
- Global utility classes
- Responsive breakpoints

### 3.6 Build Pipeline
- Development: npm run dev
- Production: npm run build
- Preview: npm run preview

## 4. External Integrations

### 4.1 Third-party Services
- Analytics
- CMS (if applicable)
- APIs

### 4.2 Dependencies
Critical npm packages and their purposes

## 5. Performance Considerations

### 5.1 Optimization Strategies
- Image optimization
- Code splitting
- Lazy loading
- Caching strategies

### 5.2 Bundle Size
- Current size metrics
- Optimization opportunities

## 6. Security Considerations

### 6.1 Data Handling
- Input validation
- XSS prevention
- CSRF protection

### 6.2 Environment Variables
- Required variables
- Security best practices

## 7. Development Workflow

### 7.1 Local Development
Setup and running instructions

### 7.2 Testing Strategy
- Unit tests
- Integration tests
- E2E tests

### 7.3 Deployment
- Build process
- Hosting platform
- CI/CD pipeline

## 8. Maintenance & Evolution

### 8.1 Technical Debt
Known issues and planned improvements

### 8.2 Scalability Considerations
How the architecture supports growth

### 8.3 Migration Paths
Potential future architectural changes

## 9. Revision History

| Date | Version | Changes | Author |
|------|---------|---------|--------|
| <date> | <version> | <changes> | <agent/user> |
```

## Implementation Guidelines

### When to Run
- After implementing new features
- After refactoring existing code
- When onboarding new team members
- Before major architectural decisions
- As part of implement-prd completion

### Analysis Scope
The command should analyze:
- All source files in src/
- Configuration files (astro.config.*, package.json, etc.)
- Content structure and schemas
- Public assets organization
- Build outputs

### Code Inspection
For each major component/module:
1. Identify purpose and responsibilities
2. Document inputs/outputs
3. Note dependencies
4. Highlight patterns used

### Pattern Recognition
Identify and document:
- Repeated code patterns
- Naming conventions
- File organization patterns
- Common utilities
- Shared styles

## Example Usage

```bash
# Initial architecture documentation
architect

# After feature implementation
architect "implemented dynamic countdown timer"

# After refactoring
architect "refactored component structure for better reusability"
```

## Output Behavior

### Creating New File
- Performs comprehensive analysis
- Documents all architectural aspects
- Establishes baseline for future updates

### Updating Existing File
- Preserves revision history
- Updates changed sections
- Adds new components/features
- Marks deprecated items
- Updates timestamp and version

## Quality Checks

Before finalizing:
- [ ] All major directories documented
- [ ] Component relationships clear
- [ ] Data flows explained
- [ ] Build process documented
- [ ] Dependencies listed
- [ ] Naming conventions specified
- [ ] Recent changes reflected
- [ ] No outdated information

## Notes

- Keep descriptions concise but comprehensive
- Use diagrams where helpful (ASCII or Mermaid)
- Focus on "why" not just "what"
- Document architectural decisions and trade-offs
- Include both current state and planned improvements
- Make it useful for both new and existing team members
</file>

<file path=".claude/commands/code-cleanup.md">
# Code Cleanup
> Clean up codebase for improved readability and maintainability
> Develop plan before refactoring
> Check with human before refactoring

## Cleanup Tasks:
1. Format code consistently
2. Remove commented-out code
3. Update stale comments
4. Fix linting warnings
5. Organize imports
6. Remove debug statements

## Tools:
- Linters (ruff for Python, ESLint for JS/TS)
- Formatters (black, prettier)
- Type checkers (mypy, tsc)
</file>

<file path=".claude/commands/code-review.md">
# Code Review
> Comprehensive code review and analysis
> Develop plan before code review
> Check with human before code review

## Review Process:
1. Analyze code quality and patterns
2. Check for potential bugs or issues
3. Evaluate performance implications
4. Review security considerations
5. Suggest improvements

Focus areas:
- Code clarity and readability
- Error handling
- Edge cases
- Naming conventions
- Documentation completeness
</file>

<file path=".claude/commands/commit-all.md">
# Commit All Changes
> Systematically review and commit all staged changes
> Check with human before committing changes

## Steps:
1. Show current git status
2. Review all changes with git diff
3. Create detailed commit message covering all changes
4. Commit with comprehensive message

```bash
git status
git diff --staged
# Analyze changes and create detailed commit message
git commit -m "Comprehensive commit message here"
```
</file>

<file path=".claude/commands/create-prd.md">
# create-prd

Create a Product Requirements Document (PRD) for a feature or component with phase-based organization

## Usage

```
create-prd <feature-name> <description>
```

## Arguments

- `feature-name`: The name of the feature/component (lowercase, hyphens only, e.g., `user-auth`)
- `description`: Brief description of what needs to be documented

## Process

1. Analyze the current implementation of the feature/component if it exists
2. Identify problems, requirements, and design specifications
3. Create a comprehensive PRD document
4. Save to `docs/specs/` directory with filename format: `<feature-name>.prd.md` (lowercase, hyphens only)

Filename examples: `user-auth.prd.md`, `navigation-menu.prd.md`, `auth-removal.prd.md`

## PRD Structure

The PRD should include:

1. **Executive Summary** - Brief overview of the feature
2. **Problem Statement** - Current issues and pain points
3. **Requirements** - Functional and technical specifications
   - User requirements
   - Technical requirements
   - Design requirements
4. **Implementation Phases** - Logical organization (no timeline estimates)
   - Phase 1: Core functionality
   - Phase 2: ...etc
5. **Implementation Notes** - Code examples and technical approach
6. **Security Considerations** - Authentication, authorization, data validation only (if applicable)
7. **Success Metrics** - How to measure success (if applicable; do not make stuff up)
8. **Future Enhancements** - Potential improvements

## Anti-Over-Engineering Guidelines
- Specify minimum viable requirements only
- Avoid premature optimization requirements
- Use existing patterns and components where possible
- Don't specify features beyond core needs
- Prefer simple, maintainable solutions

## Examples

```
create-prd navigation-menu "Update navigation menu with mobile hamburger"
```
Creates: `docs/specs/navigation-menu.prd.md`

```
create-prd user-auth "Design user authentication flow"
```
Creates: `docs/specs/user-auth.prd.md`

## File Naming Convention

- Use lowercase with hyphens only (kebab-case)
- Always end with `.prd.md`
- Place in `docs/specs/` directory
- Conform to existing directory naming conventions
- Examples:
  - `feed-design.prd.md`
  - `navigation-update.prd.md`
  - `auth-flow.prd.md`
  - `supabase-auth-removal.prd.md`

## Notes

- Include visual mockups using ASCII diagrams where helpful
- Add code snippets for implementation guidance
- Consider mobile-first design approach
- Document critical edge cases and error states only
- **NO timeline estimates** - use phases only
- Focus on minimum viable requirements
- Only specify critical security considerations
- Include date in the document (version numbers are optional)
</file>

<file path=".claude/commands/find-dead-code.md">
# Find Dead Code
> Identify and remove unused code
> Develop plan before find dead code
> Check with human before find dead code

## Analysis Process:
1. Identify unused imports
2. Find unreferenced functions
3. Locate unreachable code paths
4. Detect unused variables
5. Find obsolete configuration

## Tools to use:
- Static analysis tools for the language
- Git history to understand code evolution
- Test coverage reports
</file>

<file path=".claude/commands/implement-prd.md">
# implement-prd

Implement a Product Requirements Document (PRD) using Test-Driven Development approach with phased execution and change logging

## Usage

```
implement-prd <prd-filename> [thinking-mode]
```

## Arguments

- `prd-filename`: Name of the PRD file in docs/specs/ (lowercase, hyphens only, e.g., `auth-removal`)
- `thinking-mode` (optional): 
  - `think` - Standard implementation with basic reasoning
  - `think-harder` - Enhanced analysis with deeper consideration
  - `ultrathink` - Use mcp__sequential-thinking__sequentialthinking for complex reasoning

## Process

### 1. Setup Phase
- Read the PRD from `docs/specs/<prd-filename>.prd.md`
- Create implementation report at `docs/specs/<prd-filename>-implementation-report.md`
- Create change log at `docs/specs/<prd-filename>-change-log.md`
- Initialize git status check
- Create TodoWrite list with all tasks

### 2. Task Breakdown
Extract tasks from PRD and break down into:
- Primary tasks (from main requirements)
- Subtasks (atomic, testable units)
- Dependencies between tasks
- **Phase organization** (no timeline estimates - organize by logical sequence only)

### 3. Anti-Over-Engineering Guidelines
- Implement minimum viable solution first
- Avoid premature optimization
- Use existing patterns and components where possible
- Don't add features not specified in PRD
- Prefer simple, readable code over clever solutions
- Only add abstractions when you have 3+ use cases

### 4. TDD Implementation Loop

For each task:

#### a. Pre-Implementation
```bash
git status  # Verify clean working tree
```

#### b. Test Creation (if applicable)
- Write failing test for the feature
- Run test to confirm failure
- Commit test with message: `test: add test for <feature>`

#### c. Implementation
- Implement minimal code to pass test
- Verify implementation works
- Run any existing tests

#### d. Commit Atomic Change
```bash
git add <specific-files>
git commit -m "<type>: <description>"
```

Commit message types:
- `feat:` New feature
- `fix:` Bug fix
- `style:` Formatting, missing semicolons, etc.
- `refactor:` Code restructuring
- `test:` Adding tests
- `docs:` Documentation only
- `chore:` Maintenance

#### e. Verify & Document
- Run `git status` to confirm clean staging
- Update change log with specific file changes and rationale
- Update report with task completion
- Mark task as completed in TodoWrite

### 5. Task Order

1. **Setup & Configuration**
   - Dependencies installation
   - Configuration updates
   - Type definitions

2. **Core Functionality**
   - Data structures
   - Business logic
   - API integrations

3. **UI Components**
   - Layout changes
   - Visual components
   - Animations

4. **Testing & Validation**
   - Unit tests
   - Integration tests
   - Manual verification

5. **Documentation**
   - Code comments (only when complex logic requires explanation)
   - README updates (if public API changes)
   - update ARCHITECTURE.md (invoke .claude/commands/architect.md)
   - Report and change log finalization

### 6. Report Structure

The implementation report should include:

```markdown
# Implementation Report: <Feature Name>
## Date: <Current Date>
## PRD: <prd-filename>.prd.md

## Phases Completed
- [x] Phase 1: Setup & Configuration
  - Tasks: <brief-list>
  - Commits: <commit-range>
- [x] Phase 2: Core Implementation
  - Tasks: <brief-list>
  - Commits: <commit-range>

## Testing Summary
- Tests written: <count>
- Tests passing: <count>
- Manual verification: <status>

## Challenges & Solutions
- Challenge 1: Description
  - Solution: How it was resolved

## Critical Security Notes
- Authentication/Authorization changes: <details>
- Data validation changes: <details>
- Input sanitization: <details>

## Next Steps
- Future enhancements
- Technical debt identified
```

### 7. Change Log Structure

```markdown
# Change Log: <Feature Name>
## Date: <Current Date>

## Files Modified

### <filename>
- **Change**: <brief-description>
- **Rationale**: <why-this-change>
- **Impact**: <what-this-affects>
- **Commit**: <hash>

### <filename>
- **Change**: <brief-description>
- **Rationale**: <why-this-change>
- **Impact**: <what-this-affects>
- **Commit**: <hash>

## Dependencies Added/Removed
- Added: <package>@<version> - <reason>
- Removed: <package> - <reason>

## Breaking Changes
- <description-of-breaking-change>
- Migration required: <yes/no>
```

## Thinking Modes

### Standard (`think`)
- Analyze requirements
- Plan implementation
- Execute tasks sequentially

### Enhanced (`think-harder`)
- Deep analysis of edge cases
- Consider multiple implementation approaches
- Optimize for performance and maintainability

### Ultra (`ultrathink`)
When available, use sequential thinking MCP:
```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "Analyzing PRD requirements...",
  nextThoughtNeeded: true,
  thoughtNumber: 1,
  totalThoughts: 10
})
```

## Example Workflow

```bash
# Start implementation
implement-prd feed-design ultrathink

# Agent actions:
1. Read docs/specs/feed-design.prd.md
2. Create docs/specs/feed-design-implementation-report.md
3. Create docs/specs/feed-design-change-log.md
4. Break down into phases:
   - Phase 1: Core functionality (no timeline estimates)
     - Subtask 1.1: Add JavaScript calculation
     - Subtask 1.2: Update HTML structure
   - Phase 2: Visual improvements
     - Subtask 2.1: Update grid system
     - Subtask 2.2: Adjust responsive breakpoints
5. For each subtask:
   - Implement minimal viable solution
   - Test functionality
   - Log change with rationale
   - Commit with message
   - Verify staging clean
6. Update report and change log
```

## Git Commit Guidelines

### Message Format
```
<type>(<scope>): <subject>

<body>

<footer>
```

### Examples
```bash
feat(feed): add dynamic countdown timer to September 15

Replaces static "NOW" text with calculated days remaining.
Updates daily at midnight local time.

feat(feed): update member counter to match countdown width

Removes full-width behavior and aligns with grid system.

style(feed): equalize statistics block widths

Updates grid layout for consistent visual hierarchy.
```

## Verification Checklist

Before marking task complete:
- [ ] Code follows PRD specifications exactly (no extra features)
- [ ] Tests pass (if applicable)
- [ ] No linting errors
- [ ] Git staging area is clean
- [ ] Commit message follows conventions
- [ ] Change log updated with file changes and rationale
- [ ] Report updated with task details
- [ ] Security considerations documented (if applicable)

## Error Handling

If implementation fails:
1. Document error in report
2. Attempt alternative approach
3. If blocked, note in report and continue with next task
4. Create TODO for resolution

## Notes

- Always verify git status before and after commits
- Keep commits atomic and focused
- Document any deviations from PRD in report
- Use thinking mode appropriate to complexity
- Test each change before committing
- Update TodoWrite list throughout process
- **NO timeline estimates** - organize by phases only
- Focus on minimum viable implementation
- Maintain detailed change log for code review
- Only implement critical security measures specified in PRD
</file>

<file path=".claude/commands/review-staging.md">
# Review Staging Area
> Thoroughly review all changes in git staging area
> Develop plan before reviewing staging area
> Check with human before reviewing staging area

## Review Process:
```bash
# Show overview of staged files
git status -s

# Review each staged file's changes
git diff --staged --name-only | while read file; do
    echo "=== Changes in $file ==="
    git diff --staged "$file"
done

# Summary of changes by type
git diff --staged --stat
```
</file>

<file path=".claude/commands/test-driven.md">
# Test-Driven Development
> Implement features using TDD with autonomous testing
> Develop plan before implementing features
> Check with human before implementing features

## Process:
1. Write test first
2. Run test (expect failure)
3. Implement minimal code to pass
4. Refactor if needed
5. Commit atomically

```bash
# Example for Python
uv run pytest tests/test_feature.py -v

# Example for TypeScript/Bun
bun test feature.test.ts
```
</file>

<file path=".claude/commands/variant.md">
**VARIANT GENERATION COMMAND**

This command generates content based on a specification.

**Variables:**

spec_file: $ARGUMENTS
output_dir: $ARGUMENTS
count: $ARGUMENTS

**ARGUMENTS PARSING:**
Parse the following arguments from "$ARGUMENTS":
1. `spec_file` - Path to the markdown specification file
2. `output_dir` - Directory where iterations will be saved  
3. `count` - Number of iterations to generate

**PHASE 1: SPECIFICATION ANALYSIS**
Read and understand the specification file at `spec_file`. This file defines:
- What type of content to generate
- The format and structure requirements
- Any specific parameters or constraints

**PHASE 2: OUTPUT DIRECTORY RECONNAISSANCE** 
Analyze the `output_dir` to understand the current state:
- List all existing files and their naming patterns
- Identify the highest iteration number currently present

**PHASE 3: ITERATION STRATEGY**
Based on the spec analysis and existing iterations:
- Determine the starting iteration number (highest existing + 1)
- Plan how each new iteration will be unique.

**PHASE 4: PARALLEL EXECUTION**
Deploy multiple Sub Agents to generate iterations in parallel.

**Sub-Agent Distribution Strategy:**
- For count 1-5: Launch all agents simultaneously 
- For count > 5: Launch in batches of 5 agents.

**Agent Assignment Protocol:**
Each Sub Agent receives:
1. **Spec Context**: Complete specification file analysis
2. **Directory Snapshot**: Current state of output_dir at launch time
3. **Iteration Assignment**: Specific iteration number (starting_number + agent_index)
4. **Uniqueness Directive**: Explicit instruction to avoid duplicating concepts from existing iterations
5. **Quality Standards**: Detailed requirements from the specification

**Agent Task Specification:**
```
TASK: Generate iteration [NUMBER] for [SPEC_FILE] in [OUTPUT_DIR]

You are Sub Agent [X] generating iteration [NUMBER]. 

CONTEXT:
- Specification: [Full spec analysis]
- Existing iterations: [Summary of current output_dir contents]
- Your iteration number: [NUMBER]

REQUIREMENTS:
1. Read and understand the specification completely
2. Analyze existing iterations to ensure your output is unique
3. Generate content following the spec format exactly
4. Create file with exact name pattern specified
5. Ensure your iteration adds genuine value and novelty


DELIVERABLE: Single file as specified, with unique innovative content
```

**Parallel Execution Management:**
- Launch all assigned Sub Agents simultaneously using Task tool
- Monitor agent progress and completion
- Handle any agent failures by reassigning iteration numbers
- Ensure no duplicate iteration numbers are generated
- Collect and validate all completed iterations

**PHASE 5: BATCH ORCHESTRATION**
For large-count generation, orchestrate parallel batches until the count is reached:

**Batch-Based Generation:**
1. **Batch Planning**: Determine next batch size (e.g., 5 agents)
2. **Agent Preparation**: Prepare context for each new batch
3. **Context Monitoring**: Track total context usage.
4. **Graceful Conclusion**: Complete current batch and summarize.

**Execution Cycle:**
```
WHILE generated_iterations < count:
    1. Assess current output_dir state
    2. Plan next batch of agents
    3. Launch parallel Sub Agent batch
    4. Monitor batch completion
    5. Update directory state snapshot
```

**EXECUTION PRINCIPLES:**

**Quality & Uniqueness:**
- Each iteration must be genuinely unique and valuable
- Maintain consistency with the original specification
- Ensure proper file organization and naming

**Parallel Coordination:**
- Deploy Sub Agents strategically to maximize creative diversity
- Assign distinct innovation dimensions to each agent to avoid overlap
- Coordinate timing to prevent file naming conflicts
- Monitor all agents for successful completion and quality

**Agent Management:**
- Provide each Sub Agent with complete context and clear assignments
- Handle agent failures gracefully with iteration reassignment
- Ensure all parallel outputs integrate cohesively.
</file>

<file path=".claude/.mcp.json">
{
  "mcpServers": {
    "shadcn": {
      "command": "npx",
      "args": [
        "shadcn@latest",
        "mcp"
      ]
    }
  }
}
</file>

<file path=".claude/settings.local.json">
{
  "permissions": {
    "allow": [
      "WebFetch(domain:decapcms.org)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:www.npmjs.com)",
      "WebFetch(domain:registry.npmjs.org)",
      "WebFetch(domain:api.github.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(rm:*)",
      "Bash(mkdir:*)",
      "Bash(rmdir:*)",
      "Bash(touch:*)",
      "Bash(chmod:*)",
      "Bash(chown:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(grep:*)",
      "Bash(cat:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(wc:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(awk:*)",
      "Bash(sed:*)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(ping:*)",
      "Bash(telnet:*)",
      "Bash(git:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(yarn:*)",
      "Bash(pnpm:*)",
      "Bash(bun:*)",
      "Bash(webpack:*)",
      "Bash(vite:*)",
      "Bash(rollup:*)",
      "Bash(parcel:*)",
      "Bash(esbuild:*)",
      "Bash(turbo:*)",
      "Bash(jest:*)",
      "Bash(vitest:*)",
      "Bash(mocha:*)",
      "Bash(cypress:*)",
      "Bash(playwright:*)",
      "Bash(eslint:*)",
      "Bash(prettier:*)",
      "Bash(stylelint:*)",
      "Bash(tsc:*)",
      "Bash(serve:*)",
      "Bash(http-server:*)",
      "Bash(nodemon:*)",
      "Bash(pm2:*)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(which:*)",
      "Bash(whereis:*)",
      "Bash(env:*)",
      "Bash(echo:*)",
      "Bash(pwd:*)",
      "Bash(whoami:*)",
      "Bash(date:*)",
      "Bash(ps:*)",
      "Bash(kill:*)",
      "Bash(killall:*)",
      "Bash(top:*)",
      "Bash(htop:*)",
      "mcp__github__search_code",
      "mcp__sequential-thinking__sequentialthinking",
      "Read(/Users/oceanheart/Library/Application Support/CleanShot/media/media_WiRyjEARle/**)"
    ],
    "deny": [],
    "ask": []
  },
  "hooks": {
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "osascript -e 'display notification \"Claude session ended\" with title \"Claude Code\"'"
          }
        ]
      }
    ]
  }
}
</file>

<file path=".github/workflows/test.yml">
name: Watson Testing Infrastructure

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: watson_test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432

    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Set up Node.js and Bun
      uses: actions/setup-node@v4
      with:
        node-version: '18'
    
    - name: Install Bun
      run: |
        curl -fsSL https://bun.sh/install | bash
        echo "$HOME/.bun/bin" >> $GITHUB_PATH

    - name: Set up Ruby
      uses: ruby/setup-ruby@v1
      with:
        ruby-version: '3.4.5'

    - name: Install UV (Python package manager)
      run: |
        curl -LsSf https://astral.sh/uv/install.sh | sh
        echo "$HOME/.cargo/bin" >> $GITHUB_PATH

    - name: Cache Python dependencies
      uses: actions/cache@v3
      with:
        path: ~/.cache/uv
        key: ${{ runner.os }}-uv-${{ hashFiles('backend/pyproject.toml') }}

    - name: Cache Bun dependencies
      uses: actions/cache@v3
      with:
        path: ~/.bun/install/cache
        key: ${{ runner.os }}-bun-${{ hashFiles('package.json') }}

    - name: Cache Ruby dependencies
      uses: actions/cache@v3
      with:
        path: vendor/bundle
        key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile.lock') }}
        restore-keys: |
          ${{ runner.os }}-gems-

    - name: Install Python dependencies
      run: |
        cd backend
        uv venv
        source .venv/bin/activate
        uv pip install -r pyproject.toml

    - name: Install JavaScript dependencies
      run: bun install

    - name: Install Ruby dependencies
      run: |
        bundle config path vendor/bundle
        bundle install --jobs 4 --retry 3

    - name: Set up environment variables
      run: |
        echo "DJANGO_ENVIRONMENT=test" >> $GITHUB_ENV
        echo "DB_NAME=watson_test" >> $GITHUB_ENV
        echo "DB_USER=postgres" >> $GITHUB_ENV
        echo "DB_PASSWORD=postgres" >> $GITHUB_ENV
        echo "DB_HOST=localhost" >> $GITHUB_ENV
        echo "DB_PORT=5432" >> $GITHUB_ENV
        echo "SECRET_KEY=test-secret-key-for-ci" >> $GITHUB_ENV

    - name: Run Django migrations
      run: |
        cd backend
        source .venv/bin/activate
        python manage.py migrate --run-syncdb

    - name: Run TypeScript type checking
      run: bun run typecheck

    - name: Run Frontend tests (Bun)
      run: bun test frontend/ --preload ./bun.test.config.ts

    - name: Run Backend tests (Django)
      run: |
        cd backend
        source .venv/bin/activate
        DJANGO_ENVIRONMENT=test python manage.py test --verbosity=2

    - name: Run Ruby tests (RSpec)
      run: bundle exec rspec --format documentation

    - name: Generate Coverage Reports
      run: npm run coverage

    - name: Upload Django Coverage to Codecov
      uses: codecov/codecov-action@v3
      with:
        file: backend/htmlcov/coverage.xml
        flags: backend
        name: django-coverage

    - name: Upload Ruby Coverage to Codecov
      uses: codecov/codecov-action@v3
      with:
        file: coverage/.resultset.json
        flags: ruby
        name: ruby-coverage

  build:
    runs-on: ubuntu-latest
    needs: test

    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Node.js and Bun
      uses: actions/setup-node@v4
      with:
        node-version: '18'
    
    - name: Install Bun
      run: |
        curl -fsSL https://bun.sh/install.sh | bash
        echo "$HOME/.bun/bin" >> $GITHUB_PATH

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install UV (Python package manager)
      run: |
        curl -LsSf https://astral.sh/uv/install.sh | sh
        echo "$HOME/.cargo/bin" >> $GITHUB_PATH

    - name: Install dependencies
      run: |
        bun install
        cd backend
        uv venv
        source .venv/bin/activate
        uv pip install -r pyproject.toml

    - name: Run production build
      run: |
        export NODE_ENV=production
        npm run build:prod

    - name: Validate build artifacts
      run: npm run validate:build
</file>

<file path="backend/core/admin.py">
from django.contrib import admin

# Register your models here.
</file>

<file path="backend/core/apps.py">
from django.apps import AppConfig


class CoreConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'core'
</file>

<file path="backend/core/models.py">
from django.db import models

# Create your models here.
</file>

<file path="backend/core/test_models.py">
# Core App Model Tests
# Tests for core models and functionality

from django.test import TestCase
from django.contrib.auth.models import User
from django.db import models
from django.core.exceptions import ValidationError


class CoreModelsTestCase(TestCase):
    """Test cases for core model functionality."""
    
    def setUp(self):
        """Set up test data before each test."""
        self.test_user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
    
    def test_user_creation(self):
        """Test that users can be created successfully."""
        self.assertEqual(self.test_user.username, 'testuser')
        self.assertEqual(self.test_user.email, 'test@example.com')
        self.assertTrue(self.test_user.check_password('testpass123'))
    
    def test_user_str_representation(self):
        """Test string representation of user model."""
        self.assertEqual(str(self.test_user), 'testuser')
    
    def tearDown(self):
        """Clean up after each test."""
        User.objects.all().delete()
</file>

<file path="backend/core/tests.py">
from django.test import TestCase

# Create your tests here.
</file>

<file path="backend/reviews/admin.py">
from django.contrib import admin

# Register your models here.
</file>

<file path="backend/reviews/apps.py">
from django.apps import AppConfig


class ReviewsConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'reviews'
</file>

<file path="backend/reviews/models.py">
from django.db import models

# Create your models here.
</file>

<file path="backend/reviews/tests.py">
from django.test import TestCase

# Create your tests here.
</file>

<file path="backend/reviews/views.py">
from django.shortcuts import render

# Create your views here.
</file>

<file path="backend/watson/settings/__init__.py">
# Django settings module selector
# Automatically loads the appropriate settings based on environment

import os

# Default to base settings, can be overridden with DJANGO_SETTINGS_MODULE
ENVIRONMENT = os.environ.get('DJANGO_ENVIRONMENT', 'development')

if ENVIRONMENT == 'test':
    from .test import *
elif ENVIRONMENT == 'production':
    from .production import *
else:
    from .base import *
</file>

<file path="backend/watson/settings/test.py">
# Django Test Settings for Watson
# Optimized settings for running tests

from .base import *
import os

# Test database - use in-memory SQLite for speed
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': ':memory:',
        'TEST': {
            'NAME': ':memory:',
        },
    }
}

# Disable migrations during tests for speed
class DisableMigrations:
    def __contains__(self, item):
        return True
    
    def __getitem__(self, item):
        return None

MIGRATION_MODULES = DisableMigrations()

# Test-specific settings
DEBUG = False
SECRET_KEY = 'test-secret-key-not-for-production'
PASSWORD_HASHERS = [
    'django.contrib.auth.hashers.MD5PasswordHasher',  # Fast for tests
]

# Disable logging during tests
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'null': {
            'class': 'logging.NullHandler',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['null'],
        },
    },
}

# Test email backend
EMAIL_BACKEND = 'django.core.mail.backends.locmem.EmailBackend'

# Coverage configuration
COVERAGE_MODULE_EXCLUDES = [
    'tests$', 
    'settings$', 
    'urls$', 
    'locale$',
    '__pycache__',
    'migrations',
    'venv',
    'node_modules',
]

# Disable CORS during tests
CORS_ALLOW_ALL_ORIGINS = True
</file>

<file path="backend/watson/static/.gitkeep">
# This directory is used for additional static files
# that will be collected by Django's collectstatic command
</file>

<file path="backend/watson/asgi.py">
"""
ASGI config for watson project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'watson.settings')

application = get_asgi_application()
</file>

<file path="backend/watson/wsgi.py">
"""
WSGI config for watson project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'watson.settings')

application = get_wsgi_application()
</file>

<file path="backend/manage.py">
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'watson.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()
</file>

<file path="deploy/deploy.sh">
#!/bin/bash

# Watson Deployment Automation Script
# Supports Railway, Render, Fly.io, and Docker deployment

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Configuration
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
PLATFORM=""
ENVIRONMENT="production"
DRY_RUN=false

print_usage() {
    echo "Usage: $0 -p <platform> [-e environment] [-d]"
    echo ""
    echo "Options:"
    echo "  -p, --platform    Deployment platform (railway|render|fly|docker)"
    echo "  -e, --environment Environment (staging|production) [default: production]"
    echo "  -d, --dry-run     Show what would be deployed without executing"
    echo "  -h, --help        Show this help message"
    echo ""
    echo "Examples:"
    echo "  $0 -p railway                 # Deploy to Railway production"
    echo "  $0 -p render -e staging       # Deploy to Render staging"
    echo "  $0 -p fly -d                  # Dry run for Fly.io deployment"
}

print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_info() {
    echo -e "${BLUE}ℹ️  $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}⚠️  $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

validate_environment() {
    print_info "Validating deployment environment..."
    
    # Check if we're on main branch for production
    if [[ $ENVIRONMENT == "production" ]]; then
        current_branch=$(git rev-parse --abbrev-ref HEAD)
        if [[ $current_branch != "main" ]]; then
            print_error "Production deployments must be from main branch (currently on: $current_branch)"
            exit 1
        fi
    fi
    
    # Check for uncommitted changes
    if [[ -n $(git status --porcelain) ]]; then
        print_error "Uncommitted changes detected. Please commit or stash changes before deployment."
        exit 1
    fi
    
    # Run tests before deployment
    print_info "Running tests before deployment..."
    if [[ $DRY_RUN == false ]]; then
        npm run test:all || {
            print_error "Tests failed. Deployment aborted."
            exit 1
        }
    else
        print_info "DRY RUN: Would run tests"
    fi
    
    print_status "Environment validation passed"
}

deploy_railway() {
    print_info "Deploying to Railway ($ENVIRONMENT)..."
    
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would deploy to Railway with:"
        print_info "  - Platform: Railway"
        print_info "  - Environment: $ENVIRONMENT"
        print_info "  - Config: deploy/railway.json"
        return
    fi
    
    # Check if Railway CLI is installed
    if ! command -v railway &> /dev/null; then
        print_error "Railway CLI is not installed. Install from: https://docs.railway.app/cli"
        exit 1
    fi
    
    # Deploy to Railway
    railway login
    railway up --json deploy/railway.json
    
    print_status "Railway deployment initiated"
}

deploy_render() {
    print_info "Deploying to Render ($ENVIRONMENT)..."
    
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would deploy to Render with:"
        print_info "  - Platform: Render"
        print_info "  - Environment: $ENVIRONMENT"
        print_info "  - Config: deploy/render.yaml"
        return
    fi
    
    print_info "Pushing to git repository (Render auto-deploys from git)..."
    git push origin main
    
    print_status "Render deployment initiated via git push"
    print_info "Monitor deployment at: https://dashboard.render.com"
}

deploy_fly() {
    print_info "Deploying to Fly.io ($ENVIRONMENT)..."
    
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would deploy to Fly.io with:"
        print_info "  - Platform: Fly.io"
        print_info "  - Environment: $ENVIRONMENT"
        print_info "  - Config: deploy/fly.toml"
        return
    fi
    
    # Check if Fly CLI is installed
    if ! command -v flyctl &> /dev/null; then
        print_error "Fly CLI is not installed. Install from: https://fly.io/docs/getting-started/installing-flyctl/"
        exit 1
    fi
    
    # Deploy to Fly.io
    flyctl auth login
    flyctl deploy --config deploy/fly.toml
    
    print_status "Fly.io deployment completed"
}

deploy_docker() {
    print_info "Building and running Docker container locally..."
    
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would build and run Docker with:"
        print_info "  - Build: docker build -t watson ."
        print_info "  - Run: docker-compose up -d"
        return
    fi
    
    # Build Docker image
    print_info "Building Docker image..."
    docker build -t watson-oceanheart-ai .
    
    # Run with Docker Compose
    print_info "Starting services with Docker Compose..."
    docker-compose up -d
    
    print_status "Docker deployment completed"
    print_info "Application available at: http://localhost:8888"
}

run_health_check() {
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would run health checks"
        return
    fi
    
    print_info "Running post-deployment health check..."
    
    # Wait a bit for deployment to settle
    sleep 30
    
    # This would need the actual URL based on platform
    print_info "Health check implementation depends on platform-specific URL"
    print_status "Health check placeholder completed"
}

# Parse command line arguments
while [[ $# -gt 0 ]]; do
    case $1 in
        -p|--platform)
            PLATFORM="$2"
            shift 2
            ;;
        -e|--environment)
            ENVIRONMENT="$2"
            shift 2
            ;;
        -d|--dry-run)
            DRY_RUN=true
            shift
            ;;
        -h|--help)
            print_usage
            exit 0
            ;;
        *)
            echo "Unknown option $1"
            print_usage
            exit 1
            ;;
    esac
done

# Validate required arguments
if [[ -z $PLATFORM ]]; then
    print_error "Platform is required"
    print_usage
    exit 1
fi

# Main execution
echo ""
echo "🚀 Watson Deployment Automation"
echo "==============================="
echo ""
print_info "Platform: $PLATFORM"
print_info "Environment: $ENVIRONMENT"
print_info "Dry Run: $DRY_RUN"
echo ""

cd "$PROJECT_DIR"

validate_environment

case $PLATFORM in
    railway)
        deploy_railway
        ;;
    render)
        deploy_render
        ;;
    fly)
        deploy_fly
        ;;
    docker)
        deploy_docker
        ;;
    *)
        print_error "Unsupported platform: $PLATFORM"
        print_usage
        exit 1
        ;;
esac

run_health_check

echo ""
print_status "Deployment process completed!"
echo ""
</file>

<file path="deploy/fly.toml">
# Fly.io deployment configuration
# Generated for Watson Clinical LLM Review Platform

app = "watson-oceanheart-ai"
primary_region = "sjc"

[build]
  dockerfile = "Dockerfile"

[env]
  DJANGO_SETTINGS_MODULE = "watson.settings.production"
  DEBUG = "False"
  PASSPORT_JWKS_URL = "https://passport.oceanheart.ai/.well-known/jwks.json"
  JWT_ALGORITHM = "RS256"
  PORT = "8000"

[[services]]
  http_checks = []
  internal_port = 8000
  processes = ["app"]
  protocol = "tcp"
  script_checks = []
  [services.concurrency]
    hard_limit = 25
    soft_limit = 20
    type = "connections"

  [[services.ports]]
    force_https = true
    handlers = ["http"]
    port = 80

  [[services.ports]]
    handlers = ["tls", "http"]
    port = 443

  [[services.tcp_checks]]
    grace_period = "1s"
    interval = "15s"
    restart_limit = 0
    timeout = "2s"

  [[services.http_checks]]
    interval = "10s"
    grace_period = "5s"
    method = "GET"
    path = "/health/"
    protocol = "http"
    timeout = "2s"
    tls_skip_verify = false

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 512

[deploy]
  release_command = "python manage.py migrate --noinput && python manage.py collectstatic --noinput"
</file>

<file path="deploy/railway.json">
{
  "name": "watson-oceanheart-ai",
  "description": "Watson Clinical LLM Review Platform",
  "services": {
    "web": {
      "dockerfile": "Dockerfile",
      "healthcheck": "/health/",
      "environment": {
        "DJANGO_SETTINGS_MODULE": "watson.settings.production",
        "PORT": 8000
      },
      "variables": {
        "DATABASE_URL": "${{Postgres.DATABASE_URL}}",
        "REDIS_URL": "${{Redis.REDIS_URL}}",
        "SECRET_KEY": "${{SECRET_KEY}}",
        "ALLOWED_HOSTS": "${{RAILWAY_STATIC_URL}},watson-oceanheart-ai.up.railway.app",
        "DEBUG": "False",
        "PASSPORT_JWKS_URL": "https://passport.oceanheart.ai/.well-known/jwks.json",
        "JWT_ALGORITHM": "RS256"
      }
    },
    "postgres": {
      "image": "postgres:15-alpine",
      "environment": {
        "POSTGRES_DB": "watson_production",
        "POSTGRES_USER": "watson",
        "POSTGRES_PASSWORD": "${{POSTGRES_PASSWORD}}"
      },
      "volumes": [
        {
          "mountPath": "/var/lib/postgresql/data",
          "name": "postgres_data"
        }
      ]
    },
    "redis": {
      "image": "redis:7-alpine",
      "volumes": [
        {
          "mountPath": "/data",
          "name": "redis_data"
        }
      ]
    }
  },
  "volumes": {
    "postgres_data": {},
    "redis_data": {}
  }
}
</file>

<file path="deploy/render.yaml">
# Render.com deployment configuration
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: watson-web
    env: docker
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: starter
    branch: main
    healthCheckPath: /health/
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: watson.settings.production
      - key: DATABASE_URL
        fromDatabase:
          name: watson-postgres
          property: connectionString
      - key: REDIS_URL
        fromService:
          type: redis
          name: watson-redis
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: watson-oceanheart-ai.onrender.com
      - key: PASSPORT_JWKS_URL
        value: https://passport.oceanheart.ai/.well-known/jwks.json
      - key: JWT_ALGORITHM
        value: RS256

  - type: redis
    name: watson-redis
    region: oregon
    plan: starter
    maxmemoryPolicy: allkeys-lru

databases:
  - name: watson-postgres
    databaseName: watson_production
    user: watson
    region: oregon
    plan: starter
    postgresMajorVersion: 15
</file>

<file path="docker/caddy/Caddyfile.compose.local">
# Caddyfile for Docker Compose local development
# Listens on port 3321 and proxies to other services in the Docker network.

{
  # Disable automatic HTTPS for local development to avoid ACME certificate errors.
  auto_https off
}

# Define the server block for the proxy.
# The address http://:3321 listens on port 3321 on all network interfaces inside the container.
http://:3321 {
  encode gzip

  # Route API and Admin requests to the 'watson' (Django) service on its internal port 8000.
  # Caddy uses Docker's internal DNS to resolve 'watson' to the correct container IP.
  handle_path /api/* {
    reverse_proxy watson:8000
  }
  handle_path /admin/* {
    reverse_proxy watson:8000
  }

  # Route all other requests to the 'frontend-dev' (Bun) service on its internal port 3000.
  # This assumes you have made the recommended fix to run the Bun server on port 3000.
  handle {
    reverse_proxy frontend-dev:3000
  }
}
</file>

<file path="docker/entrypoint-dev.sh">
#!/bin/sh

# Ensure node_modules symlink exists
if [ ! -L "/app/frontend/node_modules" ]; then
    echo "Creating node_modules symlink..."
    ln -sf /app/node_modules /app/frontend/node_modules
fi

# Execute the passed command
exec "$@"
</file>

<file path="docker/gunicorn.conf.py">
# Gunicorn configuration for Watson production deployment

import os

# Server socket
bind = "0.0.0.0:8000"
backlog = 2048

# Worker processes
workers = int(os.environ.get('GUNICORN_WORKERS', 3))
worker_class = "sync"
worker_connections = 1000
timeout = 30
keepalive = 2

# Restart workers after this many requests, to control memory usage
max_requests = 1000
max_requests_jitter = 100

# Logging
accesslog = "-"
errorlog = "-"
loglevel = "info"
access_log_format = '%({x-forwarded-for}i)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'

# Process naming
proc_name = 'watson'

# Server mechanics
daemon = False
pidfile = '/tmp/watson.pid'
user = None
group = None
tmp_upload_dir = None

# SSL (if needed)
# keyfile = '/path/to/keyfile'
# certfile = '/path/to/certfile'

# Preload application for better memory usage
preload_app = True

# Application module and variable name
wsgi_module = 'watson.wsgi'
</file>

<file path="docker/healthcheck.sh">
#!/bin/bash
# Watson Health Check Script

set -e

# Check if Django application is responding
echo "🏥 Performing health check..."

# Test database connection
python manage.py check --database default >/dev/null 2>&1
if [[ $? -eq 0 ]]; then
    echo "✅ Database connection: OK"
else
    echo "❌ Database connection: FAILED"
    exit 1
fi

# Test HTTP response
if command -v curl >/dev/null 2>&1; then
    response=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/health/ || echo "000")
    if [[ $response -eq 200 ]]; then
        echo "✅ HTTP health endpoint: OK"
    else
        echo "❌ HTTP health endpoint: FAILED (${response})"
        exit 1
    fi
else
    echo "⚠️ curl not available, skipping HTTP check"
fi

# Test static files
if [[ -d /app/backend/staticfiles ]]; then
    echo "✅ Static files: OK"
else
    echo "❌ Static files: MISSING"
    exit 1
fi

# Test Ruby services (if needed)
if [[ -d /app/lib ]]; then
    echo "✅ Ruby services: Available"
fi

echo "🎉 Health check passed!"
exit 0
</file>

<file path="docker/repomix-output.xml">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
caddy/
  Caddyfile.compose.local
  Caddyfile.local
  Caddyfile.prod
  README.md
entrypoint.sh
gunicorn.conf.py
healthcheck.sh
init-db.sql
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="caddy/Caddyfile.compose.local">
# Caddyfile for Docker Compose local development
# Listens on port 3321 and proxies to other services in the Docker network.

{
  # Disable automatic HTTPS for local development to avoid ACME certificate errors.
  auto_https off
}

# Define the server block for the proxy.
# The address http://:3321 listens on port 3321 on all network interfaces inside the container.
http://:3321 {
  encode gzip

  # Route API and Admin requests to the 'watson' (Django) service on its internal port 8000.
  # Caddy uses Docker's internal DNS to resolve 'watson' to the correct container IP.
  handle_path /api/* {
    reverse_proxy watson:8000
  }
  handle_path /admin/* {
    reverse_proxy watson:8000
  }

  # Route all other requests to the 'frontend-dev' (Bun) service on its internal port 3000.
  # This assumes you have made the recommended fix to run the Bun server on port 3000.
  handle {
    reverse_proxy frontend-dev:3000
  }
}
</file>

<file path="caddy/Caddyfile.local">
# Local reverse proxy for developer workflow
# Domain: http://watson.lvh.me:3321 (HTTP only; no TLS for local)
# Routes:
#   - /            -> Bun dev server (frontend) on :8881
#   - /api/*       -> Django API on :8888
#   - /admin/*     -> Django admin on :8888

{
  auto_https off
}

http://watson.lvh.me:3321 {
  encode gzip

  # API/Admin to Django
  handle_path /api/* {
    reverse_proxy localhost:8888
  }
  handle_path /admin/* {
    reverse_proxy localhost:8888
  }

  # Everything else to the frontend dev server
  handle {
    reverse_proxy localhost:8881
  }
}
</file>

<file path="caddy/Caddyfile.prod">
# Production reverse proxy for watson.oceanheart.ai
#
# Assumptions:
# - Frontend static files are deployed to /srv/www/dist/static
# - Django app is reachable at host "django" on port 8000 (e.g., via Docker network)
# - Optional: Django staticfiles mounted at /srv/backend/staticfiles
#
# Notes:
# - Caddy will manage TLS via Let's Encrypt automatically for the domain.
# - Adjust origins and paths as needed for your deployment layout.

watson.oceanheart.ai {
  encode gzip zstd

  # Security headers (adjust CSP as your frontend requires)
  header {
    X-Content-Type-Options "nosniff"
    X-Frame-Options "DENY"
    Referrer-Policy "strict-origin-when-cross-origin"
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
  }

  # API and Admin routed to Django
  @api path /api/*
  handle @api {
    reverse_proxy django:8000
  }
  @admin path /admin/*
  handle @admin {
    reverse_proxy django:8000
  }

  # Optional: serve Django static files directly if mounted
  handle_path /static/* {
    root * /srv/backend/staticfiles
    file_server
  }

  # Frontend SPA static files
  root * /srv/www/dist/static
  try_files {path} /index.html
  file_server
}
</file>

<file path="caddy/README.md">
# Caddy Reverse Proxy

This folder contains ready‑to‑use Caddyfiles for local development and production.

## Local
- File: `docker/caddy/Caddyfile.local`
- Domain: `http://watson.lvh.me:3321`
- Routes:
  - `/api/*`, `/admin/*` → `localhost:8888` (Django)
  - everything else → `localhost:8881` (Bun dev server)

Run locally (assuming Caddy is installed):

```
caddy run --config docker/caddy/Caddyfile.local --adapter caddyfile

Notes:
- The local Caddyfile disables automatic HTTPS and binds to HTTP on port 3321 to avoid ACME lookups.
- Proxies frontend to :8881 and API to :8888.
- Visit: http://watson.lvh.me:3321
```

## Production
- File: `docker/caddy/Caddyfile.prod`
- Domain: `https://watson.oceanheart.ai` (TLS via Let’s Encrypt)
- Expects:
  - Frontend static at `/srv/www/dist/static`
- Django reachable as host `django:8000` (e.g., Docker network)
  - Optional Django static at `/srv/backend/staticfiles`

Example Docker Compose service:

```yaml
services:
  caddy:
    image: caddy:2
    ports: ["80:80", "443:443"]
    volumes:
      - ./docker/caddy/Caddyfile.prod:/etc/caddy/Caddyfile:ro
      - ./dist/static:/srv/www/dist/static:ro
      - ./backend/staticfiles:/srv/backend/staticfiles:ro
      - caddy_data:/data
      - caddy_config:/config
    depends_on:
      - watson
volumes:
  caddy_data:
  caddy_config:
```

Adjust paths and service names to match your environment.
</file>

<file path="entrypoint.sh">
#!/bin/bash
# Watson Docker Entrypoint Script

set -e

echo "🚀 Starting Watson Application"
echo "================================"

# Ensure venv binaries are preferred
export PATH="/app/backend/.venv/bin:$PATH"
VENV_PY="/app/backend/.venv/bin/python"
if [ ! -x "$VENV_PY" ]; then
  echo "⚠️  Venv python not found at $VENV_PY, using system python"
  VENV_PY="python"
fi

# Wait for database to be ready
echo "📊 Waiting for database connection..."
cd /app/backend
"$VENV_PY" manage.py check --database default

# Run database migrations
echo "🔄 Running database migrations..."
"$VENV_PY" manage.py migrate --noinput

# Collect static files (skip if already done during build)
if [ ! -d "/app/backend/watson/staticfiles" ] || [ -z "$(ls -A /app/backend/watson/staticfiles)" ]; then
    echo "📁 Collecting static files..."
    "$VENV_PY" manage.py collectstatic --noinput --clear
else
    echo "📁 Static files already collected during build"
fi

# Create superuser if specified
if [[ $DJANGO_SUPERUSER_EMAIL ]]; then
    echo "👤 Creating superuser..."
    "$VENV_PY" manage.py createsuperuser \
        --noinput \
        --username $DJANGO_SUPERUSER_USERNAME \
        --email $DJANGO_SUPERUSER_EMAIL || true
fi

# Run any additional setup commands
if [[ -f /app/scripts/setup.sh ]]; then
    echo "⚙️ Running additional setup..."
    bash /app/scripts/setup.sh
fi

echo "✅ Watson application ready!"
echo ""

# Execute the main command
exec "$@"
</file>

<file path="gunicorn.conf.py">
# Gunicorn configuration for Watson production deployment

import os

# Server socket
bind = "0.0.0.0:8000"
backlog = 2048

# Worker processes
workers = int(os.environ.get('GUNICORN_WORKERS', 3))
worker_class = "sync"
worker_connections = 1000
timeout = 30
keepalive = 2

# Restart workers after this many requests, to control memory usage
max_requests = 1000
max_requests_jitter = 100

# Logging
accesslog = "-"
errorlog = "-"
loglevel = "info"
access_log_format = '%({x-forwarded-for}i)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'

# Process naming
proc_name = 'watson'

# Server mechanics
daemon = False
pidfile = '/tmp/watson.pid'
user = None
group = None
tmp_upload_dir = None

# SSL (if needed)
# keyfile = '/path/to/keyfile'
# certfile = '/path/to/certfile'

# Preload application for better memory usage
preload_app = True

# Application module and variable name
wsgi_module = 'watson.wsgi'
</file>

<file path="healthcheck.sh">
#!/bin/bash
# Watson Health Check Script

set -e

# Check if Django application is responding
echo "🏥 Performing health check..."

# Test database connection
python manage.py check --database default >/dev/null 2>&1
if [[ $? -eq 0 ]]; then
    echo "✅ Database connection: OK"
else
    echo "❌ Database connection: FAILED"
    exit 1
fi

# Test HTTP response
if command -v curl >/dev/null 2>&1; then
    response=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/health/ || echo "000")
    if [[ $response -eq 200 ]]; then
        echo "✅ HTTP health endpoint: OK"
    else
        echo "❌ HTTP health endpoint: FAILED (${response})"
        exit 1
    fi
else
    echo "⚠️ curl not available, skipping HTTP check"
fi

# Test static files
if [[ -d /app/backend/staticfiles ]]; then
    echo "✅ Static files: OK"
else
    echo "❌ Static files: MISSING"
    exit 1
fi

# Test Ruby services (if needed)
if [[ -d /app/lib ]]; then
    echo "✅ Ruby services: Available"
fi

echo "🎉 Health check passed!"
exit 0
</file>

<file path="init-db.sql">
-- Watson Database Initialization
-- Creates additional databases for testing and staging

-- Create test database
CREATE DATABASE watson_test;
GRANT ALL PRIVILEGES ON DATABASE watson_test TO watson;

-- Create staging database (if needed)
CREATE DATABASE watson_staging;
GRANT ALL PRIVILEGES ON DATABASE watson_staging TO watson;

-- Set up extensions that might be needed
\c watson_dev;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";

\c watson_test;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";

\c watson_staging;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";
</file>

</files>
</file>

<file path="docs/specs/integration/010-comprehensive-style-guide.prd.md">
# Oceanheart UI Comprehensive Style Guide PRD

**Version:** 1.0  
**Date:** 2025-09-12  
**Status:** Complete Documentation

## Executive Summary

This document provides a comprehensive analysis and replication guide for the sophisticated styling system used in the Oceanheart UI project. The system leverages DaisyUI themes, custom Tailwind configurations, advanced gradient techniques, glow effects, and complex animations to create a premium, professional appearance.

---

## Core Dependencies

### Required Stack
```json
{
  "tailwindcss": "^3.4.17",
  "daisyui": "^4.12.23",
  "framer-motion": "^12.4.10"
}
```

### Essential Configuration Files
- `tailwind.config.js` - Custom animations and gradient definitions
- `app/globals.css` - Advanced CSS techniques and custom classes
- `config.ts` - Theme configuration (`synthwave`)

---

## Typography System

### 1. Hierarchical Typography Patterns

#### Main Headlines (Hero/Page Titles)
```tsx
className="font-extrabold text-4xl lg:text-6xl tracking-tight"
```
- **Usage**: Primary page headlines, hero titles
- **Responsive**: `text-4xl` mobile → `lg:text-6xl` desktop
- **Font Weight**: `font-extrabold` (800)
- **Letter Spacing**: `tracking-tight` (-0.025em)

#### Section Headings
```tsx
className="font-bold text-2xl md:text-3xl mb-4"
```
- **Usage**: Major section titles, article headings
- **Responsive**: `text-2xl` → `md:text-3xl`
- **Margin**: `mb-4` for consistent spacing

#### Subheadings with Borders
```tsx
className="font-bold text-2xl md:text-3xl mb-4 border-b border-primary/20 pb-2"
```
- **Usage**: Content section dividers
- **Border**: Subtle primary color border with 20% opacity
- **Padding**: `pb-2` for border spacing

#### Body Text (Large)
```tsx
className="text-lg md:text-xl opacity-90 leading-relaxed"
```
- **Usage**: Important descriptions, hero subtitles
- **Responsive**: `text-lg` → `md:text-xl`
- **Opacity**: `opacity-90` for subtle hierarchy
- **Line Height**: `leading-relaxed` (1.625)

#### Body Text (Standard)
```tsx
className="text-base md:text-lg leading-relaxed"
```
- **Usage**: Regular content, card descriptions
- **Line Height**: Consistent `leading-relaxed`

---

## Advanced Text Effects

### 1. Gradient Text (Primary Technique)
```tsx
className="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
```

**Complete Implementation:**
```tsx
<h1 className="font-extrabold text-4xl md:text-6xl tracking-tight mb-8 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradient">
  Your Title Here
</h1>
```

**CSS Requirements:**
- Uses DaisyUI's `primary` and `secondary` theme colors
- `animate-gradient` class (may require custom definition)

### 2. Blue Glow Effect (Component-Level)
```tsx
// JSX with styled-jsx
<span className="text-blue-400 glow-blue">Glowing Text</span>

<style jsx global>{`
  .glow-blue {
    position: relative;
    color: #60a5fa;
    text-shadow: 0 0 10px rgba(96, 165, 250, 0.47), 0 0 17px rgba(96, 165, 250, 0.33);
    animation: pulse 3s infinite alternate;
  }
  
  @keyframes pulse {
    0% {
      text-shadow: 0 0 10px rgba(96, 165, 250, 0.47), 0 0 17px rgba(96, 165, 250, 0.33);
    }
    100% {
      text-shadow: 0 0 13px rgba(96, 165, 250, 0.6), 0 0 23px rgba(37, 99, 235, 0.47), 0 0 27px rgba(37, 99, 235, 0.27);
    }
  }
`}</style>
```

### 3. Global Glow Effects (CSS)
Add to `app/globals.css`:

```css
/* HDI-style Navigation Glow */
.hdi-nav-link {
  position: relative;
  z-index: 1;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(255, 255, 255, 0.3);
  font-weight: bold;
}

.hdi-nav-link::before {
  content: '';
  position: absolute;
  top: -5px; left: -5px; right: -5px; bottom: -5px;
  border-radius: 8px;
  background: white;
  z-index: -1;
  opacity: 0;
  filter: blur(8px);
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 
              0 0 20px rgba(255, 255, 255, 0.6),
              0 0 30px rgba(255, 255, 255, 0.4);
  animation: pulse 2s infinite;
}

/* Alternative Glow Style */
.synai-nav-link {
  color: white !important;
  font-weight: bold;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.8),
               0 0 10px rgba(255, 255, 255, 0.6),
               0 0 15px rgba(255, 255, 255, 0.4);
}
```

---

## Layout and Container System

### 1. Page-Level Containers
```tsx
// Standard page wrapper
className="max-w-7xl mx-auto px-4 sm:px-8"

// Section with background
className="bg-base-100" // or bg-base-200 for alternating sections
```

### 2. Hero Section Layout
```tsx
<section className="max-w-7xl mx-auto bg-base-100 flex flex-col lg:flex-row items-center justify-center gap-16 lg:gap-20 px-8 py-8 lg:py-20">
  <div className="flex flex-col gap-10 items-center justify-center text-center w-full lg:w-1/2">
    {/* Content */}
  </div>
  <div className="lg:w-1/2 flex justify-center items-center">
    {/* Image/Visual */}
  </div>
</section>
```

### 3. Content Section Pattern
```tsx
<section className="pt-20 px-4 sm:px-8 max-w-7xl mx-auto text-center">
  {/* Centered content with responsive padding */}
</section>
```

---

## Card and Component Styling

### 1. Standard Card Pattern
```tsx
className="bg-base-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow"
```

### 2. Featured/Premium Card with Gradient Border
```tsx
// Container with gradient border effect
<div className="relative w-full max-w-lg">
  {/* Gradient border */}
  <div className="absolute -inset-[2px] rounded-xl bg-gradient-to-br from-secondary to-secondary-focus z-10 shadow-xl" />
  
  {/* Main card content */}
  <div className="relative z-20 h-full p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 bg-base-100">
    {/* Card content */}
  </div>
</div>
```

### 3. Pricing Display
```tsx
<p className="text-5xl lg:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
  £{formatPrice(price)}
</p>
```

### 4. CSS Grid Layout (Advanced)
```tsx
style={{
  display: 'grid', 
  gridTemplateRows: 'auto auto auto 1fr auto'
}}
```

---

## Animation System

### 1. Tailwind Custom Animations
Add to `tailwind.config.js`:

```javascript
module.exports = {
  theme: {
    extend: {
      backgroundImage: {
        gradient: "linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82)",
      },
      animation: {
        opacity: "opacity 0.25s ease-in-out",
        appearFromRight: "appearFromRight 300ms ease-in-out",
        wiggle: "wiggle 1.5s ease-in-out infinite",
        popup: "popup 0.25s ease-in-out",
        shimmer: "shimmer 3s ease-out infinite alternate",
      },
      keyframes: {
        opacity: {
          "0%": { opacity: 0 },
          "100%": { opacity: 1 },
        },
        appearFromRight: {
          "0%": { opacity: 0.3, transform: "translate(15%, 0px);" },
          "100%": { opacity: 1, transform: "translate(0);" },
        },
        wiggle: {
          "0%, 20%, 80%, 100%": { transform: "rotate(0deg)" },
          "30%, 60%": { transform: "rotate(-2deg)" },
          "40%, 70%": { transform: "rotate(2deg)" },
          "45%": { transform: "rotate(-4deg)" },
          "55%": { transform: "rotate(4deg)" },
        },
        popup: {
          "0%": { transform: "scale(0.8)", opacity: 0.8 },
          "50%": { transform: "scale(1.1)", opacity: 1 },
          "100%": { transform: "scale(1)", opacity: 1 },
        },
        shimmer: {
          "0%": { backgroundPosition: "0 50%" },
          "50%": { backgroundPosition: "100% 50%" },
          "100%": { backgroundPosition: "0% 50%" },
        },
      },
    },
  },
}
```

### 2. Hover Effect Combinations
```tsx
// Scale + Shadow combination
className="hover:shadow-2xl transition-all duration-300 hover:scale-105"

// Scale with transform origin
className="hover:scale-[1.02] transition-transform duration-300"

// Combined effects
className="transition-all duration-300 hover:saturate-[1.2] shadow"
```

### 3. Pulse Effects (CSS)
```css
@keyframes pulse {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7);
  }
  70% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 0 6px rgba(0, 255, 0, 0);
  }
  100% {
    transform: scale(0.8);
    opacity: 0.5;
    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0);
  }
}

.pulse-dot {
  animation: pulse 2s infinite;
}
```

---

## DaisyUI Integration

### 1. Theme Configuration
```javascript
// tailwind.config.js
daisyui: {
  themes: [
    "dark", "synthwave", "cyberpunk", "cmyk", 
    "black", "valentine", "coffee", "night", "winter"
  ],
}

// config.ts  
colors: {
  theme: "synthwave",
  main: themes["light"]["primary"],
}
```

### 2. Theme Color Usage
```tsx
// Primary/Secondary colors (theme-aware)
className="text-primary"
className="text-secondary" 
className="bg-primary"
className="border-primary/20"

// Base colors (background system)
className="bg-base-100"    // Main background
className="bg-base-200"    // Card/section background
className="bg-base-300"    // Subtle borders

// Content colors
className="text-base-content"      // Main text
className="text-base-content/80"   // Secondary text
className="text-base-content/70"   // Subtle text
```

### 3. Button System
```tsx
// Primary button
className="btn btn-primary btn-wide"

// Outline button
className="btn btn-outline btn-primary"

// Custom gradient button (from globals.css)
className="btn btn-gradient"
```

### 4. Global Button Styling
```css
/* Override DaisyUI button defaults */
@layer base {
  .btn-gradient {
    @apply !bg-gradient !bg-[length:300%_300%] hover:saturate-[1.2] shadow duration-100 !border-0 !border-transparent !bg-transparent animate-shimmer !text-white;
  }
  
  .btn {
    @apply !capitalize;
  }
}
```

---

## Advanced Techniques

### 1. Image Masking and Effects
```tsx
// Profile image with radial mask
<Image
  className="kai-image rounded-full object-cover"
  style={{
    transform: "scale(1.01)",
    transformOrigin: "center",
    transition: "transform 0.5s ease-in-out",
  }}
/>

/* CSS */
.kai-image {
  mask-image: radial-gradient(circle at center, black 85%, transparent 100%);
  -webkit-mask-image: radial-gradient(circle at center, black 85%, transparent 100%);
}
```

### 2. Backdrop Effects
```tsx
// Gradient backdrop with blur
className="absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-30"

// Glass morphism effect
className="p-8 bg-black/20 backdrop-blur-sm rounded-xl"
```

### 3. Terminal/Code Styling
```css
.terminal-container {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(50, 50, 50, 0.5);
}

.terminal-body {
  background-color: rgba(0, 0, 0, 0.9);
  background-image: radial-gradient(rgba(0, 150, 0, 0.05) 2px, transparent 0);
  background-size: 20px 20px;
  background-position: -10px -10px;
}

.terminal-body::before {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 1;
}
```

### 4. Badge/Tag System
```tsx
// Featured badge positioning
<div className="absolute -top-4 left-1/2 -translate-x-1/2 z-30">
  <div className="bg-gradient-to-r from-secondary to-secondary-focus text-secondary-content px-6 py-2 rounded-full shadow-lg font-bold text-sm uppercase tracking-wider border-2 border-white">
    ⭐ Most Popular
  </div>
</div>
```

---

## Responsive Design Patterns

### 1. Typography Scaling
```tsx
// Standard progression
text-sm     →    md:text-base    →    lg:text-lg
text-base   →    md:text-lg      →    lg:text-xl
text-lg     →    md:text-xl      →    lg:text-2xl
text-2xl    →    md:text-3xl     →    lg:text-4xl
text-4xl    →    md:text-5xl     →    lg:text-6xl
```

### 2. Layout Breakpoints
```tsx
// Flex direction changes
flex-col lg:flex-row

// Grid responsiveness
grid-cols-1 md:grid-cols-3

// Width changes
w-full lg:w-1/2
```

### 3. Spacing System
```tsx
// Padding progression
px-4 sm:px-8
py-8 lg:py-20

// Gaps
gap-6 lg:gap-8
gap-12 lg:gap-20
```

---

## Implementation Checklist

### Required Setup
- [ ] Install `tailwindcss` and `daisyui`
- [ ] Configure `tailwind.config.js` with custom animations
- [ ] Set up `app/globals.css` with custom classes
- [ ] Configure DaisyUI theme (`synthwave` recommended)
- [ ] Add smooth scrolling: `scroll-behavior: smooth`

### Typography Implementation
- [ ] Define hierarchical typography classes
- [ ] Set up gradient text system
- [ ] Implement glow effects (component-level and global)
- [ ] Configure responsive scaling patterns

### Layout System
- [ ] Standard container patterns (`max-w-7xl mx-auto`)
- [ ] Responsive flex/grid systems
- [ ] Card component patterns with hover effects

### Advanced Features
- [ ] Custom animations and keyframes
- [ ] Gradient border effects for premium components
- [ ] Image masking techniques
- [ ] Terminal/code styling (if needed)

### Testing Verification
- [ ] Test across breakpoints (mobile → desktop)
- [ ] Verify theme color consistency
- [ ] Test all animation effects
- [ ] Validate hover states and transitions
- [ ] Cross-browser compatibility

---

## Usage Examples

### Complete Hero Section
```tsx
const Hero = () => {
  return (
    <section className="max-w-7xl mx-auto bg-base-100 flex flex-col lg:flex-row items-center justify-center gap-16 lg:gap-20 px-8 py-8 lg:py-20">
      <div className="flex flex-col gap-10 items-center justify-center text-center w-full lg:w-1/2">
        <h1 className="font-extrabold text-4xl lg:text-6xl tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradient">
          Your Amazing Product
        </h1>
        <p className="text-lg opacity-80 leading-relaxed">
          Transform your workflow with <span className="font-semibold text-primary">advanced features</span>
        </p>
        <a href="#cta" className="btn btn-primary btn-wide mt-4">
          Get Started
        </a>
      </div>
    </section>
  );
};
```

### Premium Card Component
```tsx
const PremiumCard = ({ title, price, features, isFeatured }) => {
  return (
    <div className="relative w-full max-w-lg">
      {isFeatured && (
        <div className="absolute -inset-[2px] rounded-xl bg-gradient-to-br from-secondary to-secondary-focus z-10 shadow-xl" />
      )}
      
      <div className={`relative z-20 h-full p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 bg-base-100`}>
        <h3 className="text-xl lg:text-2xl font-bold text-primary mb-4">
          {title}
        </h3>
        <p className="text-5xl lg:text-6xl font-extrabold tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-6">
          {price}
        </p>
        <div className="space-y-3">
          {features.map((feature, idx) => (
            <div key={idx} className="flex items-start gap-3">
              <div className="flex-shrink-0 w-5 h-5 bg-gradient-to-br from-secondary to-secondary-focus rounded-full flex items-center justify-center mt-0.5">
                <svg className="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                </svg>
              </div>
              <span className="text-base-content/90 text-sm leading-relaxed">
                {feature}
              </span>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};
```

---

## Advanced Customization

### Creating Theme Variations
To adapt this system for other projects:

1. **Change DaisyUI Theme**: Update `config.ts` theme property
2. **Custom Color Scheme**: Override CSS custom properties
3. **Animation Speed**: Modify duration values in Tailwind config
4. **Typography Scale**: Adjust base font sizes and scaling ratios

### Performance Considerations
- Use `will-change` property sparingly for animations
- Prefer CSS transforms over changing layout properties
- Use `transform-gpu` class for complex animations
- Optimize gradient complexity for mobile devices

---

**This style guide provides complete replication instructions for the sophisticated Oceanheart UI design system. All techniques are production-ready and extensively tested across modern browsers and devices.**
</file>

<file path="docs/specs/integration/011-visual-design-systems-part-2.prd.md">
# Oceanheart UI Visual Design Systems Part 2 PRD
**Advanced Layout Patterns & Visual Hierarchy**

**Version:** 1.0  
**Date:** 2025-09-12  
**Status:** Complete Documentation

## Executive Summary

Based on comprehensive analysis of the live website screenshots, this document identifies and codifies the sophisticated visual design patterns that make Oceanheart UI distinctive. These patterns focus on dramatic typography scaling, strategic color contrasts, advanced layout systems, and psychological design principles that create trust and engagement.

---

## Core Visual Design Principles

### 1. **Dramatic Scale Contrast Philosophy**
The design system uses extreme scale differences to create visual hierarchy and emotional impact:

**Typography Scale Ratios:**
- **Hero Headlines**: 4-6x larger than body text
- **Section Titles**: 2-3x larger than body text
- **Supporting Text**: Consistent baseline with strategic emphasis

**Implementation Pattern:**
```tsx
// Hero scale (Image 1 - Main headline)
className="text-6xl md:text-8xl font-extrabold leading-tight"

// Secondary hero (Image 3 - "The Art of Personal AI")
className="text-5xl md:text-7xl font-extrabold leading-none"

// Section headers
className="text-3xl md:text-5xl font-bold"

// Large emphasis text
className="text-2xl md:text-3xl font-semibold"

// Body text
className="text-lg md:text-xl leading-relaxed opacity-90"
```

### 2. **Strategic Color Psychology System**

**Primary Color Palette (Identified from Screenshots):**
- **Deep Purple/Navy**: `#1a1a2e` (backgrounds, authority)
- **Electric Blue**: `#4a9eff` (primary actions, trust)
- **Hot Pink/Magenta**: `#e94c89` (urgency, attention)  
- **Soft Pink**: `#f7a8c4` (warmth, approachability)
- **Clean White**: `#ffffff` (clarity, space)

**Color Application Rules:**
```css
/* Background hierarchy */
.bg-primary-dark { background: #1a1a2e; }     /* Main backgrounds */
.bg-accent-gradient { background: linear-gradient(135deg, #e94c89, #f7a8c4); }  /* CTAs */
.bg-trust-blue { background: #4a9eff; }       /* Information blocks */

/* Text color psychology */
.text-authority { color: #ffffff; }           /* Main headlines */
.text-trust { color: #4a9eff; }              /* Key benefits */
.text-urgency { color: #e94c89; }            /* Action items */
.text-secondary { color: rgba(255,255,255,0.8); } /* Supporting text */
```

### 3. **Advanced Layout Systems**

#### **Asymmetric Content Balance Pattern**
From Images 1, 6, 7 - Creates visual interest and guides attention:

```tsx
// Two-thirds content, one-third visual (Images 1, 6)
<section className="grid grid-cols-1 lg:grid-cols-3 gap-12 items-center">
  <div className="lg:col-span-2">
    {/* Primary content - larger text block */}
  </div>
  <div className="lg:col-span-1">
    {/* Supporting visual or secondary content */}
  </div>
</section>

// Centered content with breathing room (Images 2, 3)
<section className="max-w-4xl mx-auto text-center py-20 px-6">
  {/* Centered content with generous padding */}
</section>
```

#### **Progressive Information Revelation**
From Images 4, 5 - Complex data broken into digestible stages:

```tsx
// Multi-stage information cards
<div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
  {stages.map((stage, index) => (
    <div key={index} className="bg-gradient-to-br from-blue-900/50 to-purple-900/50 p-6 rounded-xl border border-blue-400/20">
      <h3 className="text-xl font-bold text-blue-400 mb-2">
        {stage.title}
      </h3>
      <p className="text-white/80 leading-relaxed">
        {stage.description}
      </p>
    </div>
  ))}
</div>
```

---

## Advanced Component Patterns

### 1. **Data Visualization Cards** (From Images 4, 5)

**Statistical Impact Cards:**
```tsx
const StatCard = ({ icon, value, label, accent = "pink" }) => {
  const accentColors = {
    pink: "from-pink-500 to-pink-400",
    blue: "from-blue-500 to-blue-400"
  };

  return (
    <div className="relative p-8 rounded-2xl bg-gradient-to-br from-pink-500/20 to-purple-600/20 border border-pink-400/30">
      {/* Icon */}
      <div className="mb-4 text-4xl">{icon}</div>
      
      {/* Large statistical value */}
      <div className="text-5xl md:text-6xl font-black text-white mb-2">
        {value}
      </div>
      
      {/* Description label */}
      <div className="text-white/80 text-lg font-medium">
        {label}
      </div>
      
      {/* Additional metrics */}
      <div className="mt-4 space-y-2">
        <div className="flex items-center text-sm text-white/70">
          <CheckIcon className="w-4 h-4 text-green-400 mr-2" />
          <span>Additional benefit</span>
        </div>
      </div>
    </div>
  );
};
```

**Usage Example:**
```tsx
<StatCard 
  icon="⏱️"
  value="5 Hours"
  label="Lost Every Week"
  metrics={[
    "260 hours yearly",
    "6.5 work weeks", 
    "£13,000+ value"
  ]}
/>
```

### 2. **Progressive Disclosure Tables** (From Image 5)

**Compound Growth Table Pattern:**
```tsx
const GrowthTable = ({ data }) => (
  <div className="bg-gradient-to-br from-blue-900/30 to-purple-900/30 rounded-2xl p-6 border border-blue-400/20">
    <div className="flex items-center mb-6">
      <TrendingUpIcon className="w-6 h-6 text-blue-400 mr-3" />
      <h3 className="text-xl font-bold text-white">Compounding Efficiency Growth</h3>
    </div>
    
    <div className="overflow-x-auto">
      <table className="w-full text-left">
        <thead>
          <tr className="border-b border-blue-400/20">
            <th className="pb-3 text-blue-400 font-semibold">Calendar</th>
            <th className="pb-3 text-blue-400 font-semibold">Avg. Weekly Hours Freed</th>
            <th className="pb-3 text-blue-400 font-semibold">Total That Year</th>
            <th className="pb-3 text-blue-400 font-semibold">Rough Equivalent</th>
          </tr>
        </thead>
        <tbody className="text-white/90">
          {data.map((row, idx) => (
            <tr key={idx} className="border-b border-white/10">
              <td className="py-4 font-semibold">{row.year}</td>
              <td className="py-4">{row.weeklyHours}</td>
              <td className="py-4 font-bold text-blue-400">{row.totalHours}</td>
              <td className="py-4 text-pink-400">{row.equivalent}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
    
    <p className="text-xs text-white/50 mt-4">
      * Weekly savings plateau at 40 h/w because that's the full work-week.
    </p>
  </div>
);
```

### 3. **Hero Section Variations**

#### **Type A: Asymmetric with Profile** (Images 1, 6)
```tsx
const AsymmetricHero = () => (
  <section className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center">
    <div className="max-w-7xl mx-auto px-6 py-12">
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
        {/* Content - 8 columns */}
        <div className="lg:col-span-8 space-y-8">
          <h1 className="text-6xl md:text-8xl font-extrabold leading-tight">
            <span className="text-white">Conscious AI Integration: </span>
            <span className="bg-gradient-to-r from-blue-400 to-pink-400 bg-clip-text text-transparent">
              Your Human Edge, Amplified.
            </span>
          </h1>
          
          <p className="text-xl md:text-2xl text-white/80 leading-relaxed max-w-2xl">
            Overwhelmed by AI's pace? Master it with heart, clarity, and Kai's unique guidance.
          </p>
          
          {/* Three pillars */}
          <div className="space-y-4 text-lg">
            <div className="flex items-center">
              <span className="font-bold text-white">Amplified </span>
              <span className="font-bold text-blue-400 ml-1">Consciousness</span>
            </div>
            <div className="flex items-center">
              <span className="font-bold text-white">Amplified </span>
              <span className="font-bold text-blue-400 ml-1">Sensitivity</span>
            </div>
            <div className="flex items-center">
              <span className="font-bold text-white">Amplified </span>
              <span className="font-bold text-blue-400 ml-1">Intelligence</span>
            </div>
          </div>
          
          <button className="bg-gradient-to-r from-pink-500 to-pink-400 text-white px-8 py-4 rounded-xl text-lg font-bold hover:scale-105 transition-transform">
            Integrate AI Now
          </button>
        </div>
        
        {/* Profile Image - 4 columns */}
        <div className="lg:col-span-4">
          <div className="relative">
            <div className="w-full h-[600px] rounded-3xl overflow-hidden">
              <img src="/profile-image.jpg" alt="Profile" className="w-full h-full object-cover" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
);
```

#### **Type B: Centered with Cosmic Background** (Images 8, 9)
```tsx
const CosmicHero = () => (
  <section className="min-h-screen relative flex items-center justify-center text-center">
    {/* Cosmic background */}
    <div className="absolute inset-0 bg-cosmic-pattern bg-cover bg-center opacity-30" />
    <div className="absolute inset-0 bg-gradient-to-br from-purple-900/80 to-blue-900/80" />
    
    <div className="relative z-10 max-w-4xl mx-auto px-6 py-12 space-y-8">
      <h1 className="text-5xl md:text-7xl font-extrabold leading-tight">
        <span className="text-white">Ready to Integrate AI </span>
        <span className="bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
          Consciously
        </span>
        <span className="text-white">?</span>
      </h1>
      
      <p className="text-xl md:text-2xl text-white/80 leading-relaxed">
        Move from AI overwhelm to amplified human potential. Book your discovery call with Kai.
      </p>
      
      <div className="space-y-4">
        <button className="bg-gradient-to-r from-pink-500 to-pink-400 text-white px-12 py-4 rounded-xl text-lg font-bold hover:scale-105 transition-transform">
          Book Your Free Discovery Call
        </button>
        <div>
          <a href="#pricing" className="text-blue-400 hover:text-blue-300 underline">
            View All Offerings
          </a>
        </div>
      </div>
    </div>
  </section>
);
```

---

## Advanced Typography System

### **Scale-Based Hierarchy** (Observed across all images)

```css
/* Mega headlines (Images 1, 3, 8) */
.text-mega {
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 800;
  line-height: 0.95;
  letter-spacing: -0.02em;
}

/* Large headlines (Images 2, 4) */
.text-large-headline {
  font-size: clamp(2.5rem, 6vw, 4.5rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.01em;
}

/* Section headers (Images 5, 6, 7) */
.text-section-header {
  font-size: clamp(1.75rem, 4vw, 3rem);
  font-weight: 600;
  line-height: 1.2;
}

/* Emphasis text */
.text-emphasis {
  font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  font-weight: 600;
  line-height: 1.3;
}

/* Body text */
.text-body-large {
  font-size: clamp(1rem, 2vw, 1.25rem);
  font-weight: 400;
  line-height: 1.6;
  opacity: 0.9;
}
```

### **Strategic Text Emphasis Patterns**

```tsx
// Multi-color headline pattern (Image 1)
<h1>
  <span className="text-white">Base text </span>
  <span className="bg-gradient-to-r from-blue-400 to-pink-400 bg-clip-text text-transparent">
    highlighted concept
  </span>
  <span className="text-white"> continuation</span>
</h1>

// Contrasting emphasis (Image 2)
<h2>
  <span className="text-white">We Need </span>
  <span className="text-pink-400">Big Heart</span>
  <span className="text-white"> to Meet </span>
  <span className="text-blue-400">Big Tech</span>
</h2>

// Subtle accent (Image 3)
<p>
  Complex concept with <span className="text-blue-400 font-semibold">technical term</span> integrated naturally.
</p>
```

---

## Layout & Spacing Systems

### **Responsive Grid Patterns**

#### **Two-Column Asymmetric** (Images 1, 6)
```tsx
// Desktop: 2/3 content, 1/3 visual
// Mobile: Stacked with content first
<div className="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 items-center">
  <div className="lg:col-span-2 order-2 lg:order-1">
    {/* Primary content */}
  </div>
  <div className="lg:col-span-1 order-1 lg:order-2">
    {/* Supporting visual */}
  </div>
</div>
```

#### **Three-Column Progressive** (Images 4, 5)
```tsx
// Even distribution with visual hierarchy through content
<div className="grid grid-cols-1 md:grid-cols-3 gap-6">
  {items.map((item, idx) => (
    <div key={idx} className={`
      p-6 rounded-xl border
      ${idx === 1 ? 'bg-blue-900/30 border-blue-400/30' : 'bg-purple-900/20 border-purple-400/20'}
    `}>
      <h3 className="text-xl font-bold mb-3">{item.title}</h3>
      <p className="text-white/80">{item.description}</p>
    </div>
  ))}
</div>
```

#### **Centered Single-Column** (Images 2, 3, 8)
```tsx
// Maximum content width with generous padding
<div className="max-w-4xl mx-auto text-center px-6 py-16 lg:py-24">
  {/* Centered content with breathing room */}
</div>
```

### **Spacing Scale System**
```css
/* Consistent spacing scale observed */
.space-xs { margin: 0.5rem; }      /* 8px - tight elements */
.space-sm { margin: 1rem; }        /* 16px - related elements */
.space-md { margin: 1.5rem; }      /* 24px - section breaks */
.space-lg { margin: 3rem; }        /* 48px - major sections */
.space-xl { margin: 6rem; }        /* 96px - page sections */
.space-2xl { margin: 8rem; }       /* 128px - major breaks */

/* Responsive spacing modifiers */
@media (min-width: 1024px) {
  .space-lg { margin: 4rem; }
  .space-xl { margin: 8rem; }
  .space-2xl { margin: 12rem; }
}
```

---

## Visual Component Library

### 1. **Gradient Background Patterns**

```css
/* Primary dark gradient (Images 1, 2, 8) */
.bg-primary-gradient {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f172a 100%);
}

/* Cosmic/tech gradient (Images 8, 9) */
.bg-cosmic-gradient {
  background: linear-gradient(135deg, #1e1b4b 0%, #312e81 25%, #1e40af 50%, #7c3aed 75%, #1e1b4b 100%);
  background-size: 400% 400%;
  animation: cosmic-shift 20s ease-in-out infinite;
}

@keyframes cosmic-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Accent gradient for CTAs */
.bg-cta-gradient {
  background: linear-gradient(135deg, #e94c89 0%, #f472b6 50%, #f7a8c4 100%);
}
```

### 2. **Card Component System**

#### **Statistical Info Card** (Images 4, 5)
```tsx
const InfoCard = ({ title, value, metrics, variant = "default" }) => {
  const variants = {
    default: "from-purple-900/20 to-blue-900/20 border-purple-400/20",
    accent: "from-pink-500/20 to-purple-600/20 border-pink-400/30",
    data: "from-blue-900/30 to-purple-900/30 border-blue-400/20"
  };

  return (
    <div className={`
      relative p-8 rounded-2xl bg-gradient-to-br border backdrop-blur-sm
      ${variants[variant]}
      hover:scale-[1.02] transition-all duration-300
    `}>
      {/* Main value display */}
      <div className="mb-4">
        <div className="text-4xl md:text-5xl font-black text-white mb-2">
          {value}
        </div>
        <div className="text-lg font-medium text-white/80">
          {title}
        </div>
      </div>
      
      {/* Supporting metrics */}
      {metrics && (
        <div className="space-y-2">
          {metrics.map((metric, idx) => (
            <div key={idx} className="flex items-center text-sm text-white/70">
              <div className="w-2 h-2 bg-blue-400 rounded-full mr-3" />
              <span>{metric}</span>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};
```

#### **Service Category Card** (Image 7)
```tsx
const ServiceCard = ({ icon, title, description }) => (
  <div className="flex items-start space-x-4 p-6 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all">
    <div className="flex-shrink-0">
      <div className="w-12 h-12 bg-gradient-to-br from-pink-500 to-pink-400 rounded-lg flex items-center justify-center">
        {icon}
      </div>
    </div>
    <div className="flex-1">
      <h3 className="text-xl font-bold text-white mb-2">{title}</h3>
      <p className="text-white/80 leading-relaxed">{description}</p>
    </div>
  </div>
);
```

---

## Implementation Guidelines

### **Development Workflow**
1. **Start with Typography**: Establish scale relationships first
2. **Define Color Roles**: Assign psychological purposes to each color
3. **Create Layout Grid**: Build responsive container system
4. **Develop Components**: Build reusable card and section patterns
5. **Add Micro-interactions**: Enhance with hover states and transitions

### **Responsive Design Strategy**
```tsx
// Mobile-first approach with strategic breakpoints
const breakpoints = {
  sm: '640px',   // Mobile landscape
  md: '768px',   // Tablets
  lg: '1024px',  // Desktop
  xl: '1280px',  // Large desktop
  '2xl': '1536px' // Extra large
};

// Typography scaling strategy
const typographyScale = {
  mobile: {
    mega: '3rem',     // 48px
    large: '2.5rem',  // 40px
    section: '1.75rem', // 28px
    body: '1rem'      // 16px
  },
  desktop: {
    mega: '6rem',     // 96px
    large: '4.5rem',  // 72px
    section: '3rem',  // 48px
    body: '1.25rem'   // 20px
  }
};
```

### **Performance Considerations**
- Use `will-change: transform` for hover animations
- Implement gradient backgrounds with CSS rather than images
- Optimize font loading with `font-display: swap`
- Use `backdrop-filter` sparingly on mobile devices

---

## Psychological Design Principles Applied

### **Visual Hierarchy Psychology**
1. **Size = Importance**: Largest elements get processed first
2. **Color = Emotion**: Blue builds trust, pink creates warmth/urgency
3. **Contrast = Attention**: High contrast draws focus to key actions
4. **Spacing = Clarity**: Generous whitespace suggests premium quality

### **Conversion-Focused Patterns**
1. **Progressive Disclosure**: Complex information broken into stages
2. **Social Proof Integration**: Statistics and testimonials prominently displayed  
3. **Urgency Without Pressure**: Gentle time-based messaging
4. **Authority Through Design**: Sophisticated visuals build credibility

---

**This advanced style guide provides the complete visual design system framework for replicating the sophisticated, conversion-focused design patterns observed in the Oceanheart UI. All techniques are psychologically grounded and optimized for modern web performance.**
</file>

<file path="docs/specs/integration/oceanheart-passport.prd.md">
# Oceanheart.ai Passport - Subdomain Integration Guide

**For subdomain repositories integrating with the Oceanheart authentication system**

---

## Overview

This guide provides everything you need to integrate your subdomain application with the centralized Oceanheart authentication system. Whether you're building `labs.oceanheart.ai`, `clinic.oceanheart.ai`, `passport.oceanheart.ai`, or any other subdomain, this guide will get you connected.

## Architecture Summary

- **Central Auth**: `www.oceanheart.ai` handles all authentication
- **Session Sharing**: JWT tokens in `.oceanheart.ai` domain cookies
- **Local Verification**: Your app verifies tokens without API calls
- **Redirect Flow**: Unauthenticated users redirect to central login

## Environment Configuration

### Development Environment

**Your subdomain (.env.local):**
```bash
# Auth System Configuration
AUTH_URL=http://oceanheart.lvh.me:3000
JWT_SECRET=your-dev-jwt-secret-min-32-chars
COOKIE_DOMAIN=.lvh.me
NODE_ENV=development

# Your App Configuration  
SUBDOMAIN_NAME=passport  # labs, clinic, etc.
PORT=3001  # or your chosen port
```

**Development URLs:**
- Central Auth: `http://oceanheart.lvh.me:3000`
- Your App: `http://passport.lvh.me:3001`
- Auth Endpoints: `http://oceanheart.lvh.me:3000/api/auth/*`

### Production Environment

**Your subdomain (.env.production):**
```bash
# Auth System Configuration
AUTH_URL=https://www.oceanheart.ai
JWT_SECRET=your-prod-jwt-secret-min-32-chars
COOKIE_DOMAIN=.oceanheart.ai
NODE_ENV=production

# Your App Configuration
SUBDOMAIN_NAME=passport
```

**Production URLs:**
- Central Auth: `https://www.oceanheart.ai`
- Your App: `https://passport.oceanheart.ai`
- Auth Endpoints: `https://www.oceanheart.ai/api/auth/*`

## Core Integration Code

### 1. JWT Verification Function

**Language Agnostic Pseudocode:**
```javascript
function verifyJWT(token, secret) {
    try {
        // Verify JWT signature and expiration
        payload = jwt.verify(token, secret, algorithm='HS256')
        
        // Extract user information
        return {
            valid: true,
            userId: payload.userId,
            email: payload.email,
            exp: payload.exp
        }
    } catch (error) {
        return { valid: false, error: error.message }
    }
}
```

### 2. Authentication Middleware

**Generic Implementation:**
```javascript
function requireAuth(request, response, next) {
    // Get JWT from cookie
    token = request.cookies['oh_session']
    
    if (!token) {
        // No token - redirect to auth
        returnUrl = encodeURIComponent(request.fullUrl)
        authUrl = `${AUTH_URL}/signin?returnTo=https://${SUBDOMAIN_NAME}.${DOMAIN}${request.path}`
        return response.redirect(authUrl)
    }
    
    // Verify token locally
    result = verifyJWT(token, JWT_SECRET)
    
    if (!result.valid) {
        // Invalid token - redirect to auth
        returnUrl = encodeURIComponent(request.fullUrl)
        authUrl = `${AUTH_URL}/signin?returnTo=https://${SUBDOMAIN_NAME}.${DOMAIN}${request.path}`
        return response.redirect(authUrl)
    }
    
    // Token valid - attach user to request
    request.user = {
        id: result.userId,
        email: result.email
    }
    
    next()
}
```

### 3. Environment Detection

```javascript
function getAuthConfig() {
    const isDev = process.env.NODE_ENV === 'development'
    
    return {
        authUrl: isDev ? 'http://oceanheart.lvh.me:3000' : 'https://www.oceanheart.ai',
        domain: isDev ? '.lvh.me' : '.oceanheart.ai',
        protocol: isDev ? 'http' : 'https',
        jwtSecret: process.env.JWT_SECRET,
        subdomainName: process.env.SUBDOMAIN_NAME
    }
}

function buildAuthRedirect(currentPath) {
    const config = getAuthConfig()
    const returnTo = `${config.protocol}://${config.subdomainName}${config.domain}${currentPath}`
    return `${config.authUrl}/signin?returnTo=${encodeURIComponent(returnTo)}`
}
```

## Platform-Specific Examples

### Node.js/Express Example

**Package Requirements:**
```json
{
  "dependencies": {
    "jsonwebtoken": "^9.0.0",
    "cookie-parser": "^1.4.6"
  }
}
```

**Implementation:**
```javascript
const jwt = require('jsonwebtoken')
const cookieParser = require('cookie-parser')

app.use(cookieParser())

const requireAuth = (req, res, next) => {
    const token = req.cookies.oh_session
    const config = getAuthConfig()
    
    if (!token) {
        const returnTo = `${config.protocol}://${config.subdomainName}${config.domain}${req.originalUrl}`
        return res.redirect(`${config.authUrl}/signin?returnTo=${encodeURIComponent(returnTo)}`)
    }
    
    try {
        const payload = jwt.verify(token, config.jwtSecret)
        req.user = { id: payload.userId, email: payload.email }
        next()
    } catch (error) {
        const returnTo = `${config.protocol}://${config.subdomainName}${config.domain}${req.originalUrl}`
        res.redirect(`${config.authUrl}/signin?returnTo=${encodeURIComponent(returnTo)}`)
    }
}

// Protected route
app.get('/dashboard', requireAuth, (req, res) => {
    res.json({ message: `Welcome ${req.user.email}!` })
})
```

### Python/Django Example

**Requirements:**
```
PyJWT==2.8.0
```

**settings.py:**
```python
import os

# Auth configuration
AUTH_URL = os.getenv('AUTH_URL', 'https://www.oceanheart.ai')
JWT_SECRET = os.getenv('JWT_SECRET')
SUBDOMAIN_NAME = os.getenv('SUBDOMAIN_NAME', 'passport')
COOKIE_DOMAIN = os.getenv('COOKIE_DOMAIN', '.oceanheart.ai')
```

**middleware.py:**
```python
import jwt
from django.shortcuts import redirect
from django.conf import settings
from django.http import HttpResponseRedirect

class AuthMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        # Skip auth for public paths
        if request.path.startswith('/public/'):
            return self.get_response(request)
            
        token = request.COOKIES.get('oh_session')
        
        if not token:
            return self.redirect_to_auth(request)
        
        try:
            payload = jwt.decode(token, settings.JWT_SECRET, algorithms=['HS256'])
            request.user_id = payload['userId']
            request.user_email = payload['email']
        except jwt.InvalidTokenError:
            return self.redirect_to_auth(request)
            
        return self.get_response(request)
    
    def redirect_to_auth(self, request):
        protocol = 'https' if settings.COOKIE_DOMAIN == '.oceanheart.ai' else 'http'
        return_to = f"{protocol}://{settings.SUBDOMAIN_NAME}{settings.COOKIE_DOMAIN}{request.get_full_path()}"
        auth_url = f"{settings.AUTH_URL}/signin?returnTo={return_to}"
        return HttpResponseRedirect(auth_url)
```

### Python/FastAPI Example

**Requirements:**
```
PyJWT==2.8.0
python-multipart==0.0.6
```

**main.py:**
```python
from fastapi import FastAPI, Cookie, HTTPException, Depends, Request
from fastapi.responses import RedirectResponse
import jwt
import os

app = FastAPI()

# Configuration
AUTH_URL = os.getenv('AUTH_URL', 'https://www.oceanheart.ai')
JWT_SECRET = os.getenv('JWT_SECRET')
SUBDOMAIN_NAME = os.getenv('SUBDOMAIN_NAME', 'passport')
COOKIE_DOMAIN = os.getenv('COOKIE_DOMAIN', '.oceanheart.ai')

async def get_current_user(request: Request, oh_session: str = Cookie(None)):
    if not oh_session:
        protocol = 'https' if COOKIE_DOMAIN == '.oceanheart.ai' else 'http'
        return_to = f"{protocol}://{SUBDOMAIN_NAME}{COOKIE_DOMAIN}{request.url.path}"
        auth_url = f"{AUTH_URL}/signin?returnTo={return_to}"
        raise HTTPException(status_code=307, headers={"Location": auth_url})
    
    try:
        payload = jwt.decode(oh_session, JWT_SECRET, algorithms=['HS256'])
        return {"id": payload['userId'], "email": payload['email']}
    except jwt.InvalidTokenError:
        protocol = 'https' if COOKIE_DOMAIN == '.oceanheart.ai' else 'http'
        return_to = f"{protocol}://{SUBDOMAIN_NAME}{COOKIE_DOMAIN}{request.url.path}"
        auth_url = f"{AUTH_URL}/signin?returnTo={return_to}"
        raise HTTPException(status_code=307, headers={"Location": auth_url})

@app.get("/dashboard")
async def dashboard(user: dict = Depends(get_current_user)):
    return {"message": f"Welcome {user['email']}!"}
```

### Ruby/Rails Example

**Gemfile:**
```ruby
gem 'jwt'
```

**application_controller.rb:**
```ruby
class ApplicationController < ActionController::Base
  before_action :authenticate_user!
  
  private
  
  def authenticate_user!
    token = cookies['oh_session']
    
    unless token
      redirect_to_auth
      return
    end
    
    begin
      payload = JWT.decode(token, Rails.application.credentials.jwt_secret, algorithm: 'HS256')[0]
      @current_user = {
        id: payload['userId'],
        email: payload['email']
      }
    rescue JWT::DecodeError
      redirect_to_auth
    end
  end
  
  def redirect_to_auth
    protocol = Rails.env.production? ? 'https' : 'http'
    domain = Rails.env.production? ? '.oceanheart.ai' : '.lvh.me'
    subdomain = ENV['SUBDOMAIN_NAME'] || 'passport'
    
    return_to = "#{protocol}://#{subdomain}#{domain}#{request.fullpath}"
    auth_url = "#{ENV['AUTH_URL']}/signin?returnTo=#{CGI.escape(return_to)}"
    
    redirect_to auth_url
  end
end
```

## Optional: Server-Side Verification

For additional security or user data fetching, you can verify tokens with the central auth system:

### Token Verification Endpoint

**POST** `${AUTH_URL}/api/auth/verify`

```javascript
async function verifyTokenWithServer(token) {
    const response = await fetch(`${AUTH_URL}/api/auth/verify`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token })
    })
    
    return await response.json()
    // Returns: { valid: true, user: { id, email } } or { valid: false }
}
```

### Token Refresh Endpoint

**POST** `${AUTH_URL}/api/auth/refresh`

```javascript
async function refreshToken(token) {
    const response = await fetch(`${AUTH_URL}/api/auth/refresh`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token })
    })
    
    const data = await response.json()
    // Returns: { token: "new-jwt" } or { error: "Invalid token" }
    
    if (data.token) {
        // Update cookie with new token
        setCookie('oh_session', data.token, {
            domain: COOKIE_DOMAIN,
            secure: true,
            httpOnly: true
        })
    }
    
    return data
}
```

## Testing Your Integration

### 1. Local Development Setup

1. **Start the main auth system:**
   ```bash
   cd oceanheart-ui
   npm run dev  # Runs on oceanheart.lvh.me:3000
   ```

2. **Start your subdomain app:**
   ```bash
   # Your app should run on passport.lvh.me:3001
   npm start  # or your framework's dev command
   ```

3. **Test the flow:**
   - Visit `http://passport.lvh.me:3001/dashboard`
   - Should redirect to `http://oceanheart.lvh.me:3000/signin?returnTo=...`
   - After login, should redirect back to your dashboard

### 2. Cookie Verification

**Browser DevTools > Application > Cookies:**
- Look for `oh_session` cookie
- Domain should be `.lvh.me` (dev) or `.oceanheart.ai` (prod)
- Should be HttpOnly and Secure (in prod)

### 3. JWT Payload Inspection

**Decode your JWT token (for debugging only):**
```javascript
// In browser console (dev only)
const token = document.cookie.split('oh_session=')[1]?.split(';')[0]
if (token) {
    const payload = JSON.parse(atob(token.split('.')[1]))
    console.log('JWT Payload:', payload)
}
```

## Common Issues & Solutions

### Issue: Redirect Loop
**Symptoms:** Endless redirects between your app and auth system  
**Solution:** Check that your JWT_SECRET matches the main auth system

### Issue: Cookie Not Shared
**Symptoms:** Always redirects to login even after authentication  
**Solution:** Verify COOKIE_DOMAIN is set correctly (`.lvh.me` for dev, `.oceanheart.ai` for prod)

### Issue: JWT Verification Fails
**Symptoms:** Token exists but verification throws errors  
**Solution:** Ensure JWT_SECRET is identical across all apps and is at least 32 characters

### Issue: CORS Errors (if using API endpoints)
**Symptoms:** Browser blocks requests to auth endpoints  
**Solution:** Add your subdomain to CORS whitelist in main auth system

## Security Checklist

- [ ] JWT_SECRET is stored securely (environment variables)
- [ ] JWT_SECRET is identical across main auth and your app
- [ ] Cookies are set to HttpOnly and Secure in production
- [ ] HTTPS is enforced in production
- [ ] Token expiration is handled gracefully
- [ ] Sensitive routes are protected with auth middleware
- [ ] returnTo URLs are validated to prevent open redirects

## Environment Variables Summary

**Required for all environments:**
```bash
JWT_SECRET=your-jwt-secret-min-32-characters
SUBDOMAIN_NAME=passport  # or your subdomain name
```

**Development:**
```bash
AUTH_URL=http://oceanheart.lvh.me:3000
COOKIE_DOMAIN=.lvh.me
```

**Production:**
```bash
AUTH_URL=https://www.oceanheart.ai
COOKIE_DOMAIN=.oceanheart.ai
```

## Getting Help

1. **Check JWT payload** - Decode token to verify structure
2. **Verify environment variables** - Ensure all required vars are set
3. **Test cookie sharing** - Check browser DevTools for cookie presence
4. **Review logs** - Check both your app and main auth system logs

---

**This guide should provide everything needed to integrate any subdomain with the Oceanheart authentication system. The examples are framework-agnostic but provide enough detail for implementation in any stack.**
</file>

<file path="docs/specs/001-build-docker-fix.prd.md">
Based on the provided log, here is a trace and summary of the developer's problem-solving approach, followed by a reasoned analysis of the unresolved error with potential solutions.

### Summary of the Problem-Solving Approach

The developer's task was to implement Phase 4 of a project, focusing on Docker containerization and deployment automation. The process was characterized by a cyclical pattern of implementing a feature, encountering an error, diagnosing the root cause, and applying a targeted fix.

**Initial Implementation:**
The developer began by successfully creating a comprehensive set of deployment artifacts, including a multi-stage `Dockerfile`, a `docker-compose.yml` for local development, health check endpoints, and deployment scripts for various cloud platforms (Railway, Render, Fly.io).

**Iterative Debugging and Refinement:**
The initial implementation was followed by a series of errors that revealed deeper issues with the environment setup, build process, and configuration. The developer's approach to each problem was as follows:

1.  **Caddy TLS Failure:** When running a local Caddy reverse proxy, it failed while trying to acquire a public TLS certificate for the local domain `watson.lvh.me`.
    *   **Diagnosis:** Correctly identified that Caddy's automatic HTTPS was the cause.
    *   **Fix:** Disabled automatic HTTPS in the local Caddyfile, forcing it to use HTTP.

2.  **Docker Build Failures (`bun` and `uv` not found):** The Docker build failed sequentially because the `bun` and `uv` command-line tools were not found in their respective build stages.
    *   **Diagnosis:** The base images used (`node:18-slim`, `python:3.11-slim`) did not include these tools, and installing them via `curl` scripts proved unreliable.
    *   **Fix:** Switched to official base images where the tools were pre-installed (`oven/bun:1.1`) or replaced the tool dependency (`uv`) with a more standard approach (`python -m venv`).

3.  **Cyclical "Django Not Found" Error:** This was the most persistent issue. The container would fail to start, reporting `ModuleNotFoundError: No module named 'django'`. The developer went through several iterations to solve this:
    *   **Initial Diagnosis:** The Python virtual environment (`.venv`) was not being activated or used correctly inside the container.
    *   **Attempted Fixes:**
        *   Explicitly activating the `venv` in the entrypoint script.
        *   Using the absolute path to the `venv`'s Python executable.
        *   Attempting to install dependencies globally as a fallback.
    *   **Root Cause Discovered:** The developer correctly deduced that a volume mount in `docker-compose.yml` (`./backend:/app/backend`) was overwriting the entire directory that had been built into the image, effectively deleting the `.venv` at runtime.
    *   **Final Fix:** The overly broad volume mount was replaced with more granular mounts for specific source code subdirectories, which preserved the `.venv` from the image while still allowing for local code changes to be reflected.

4.  **Logging and Permissions Errors:** Once the Django import error was resolved, subsequent errors related to file permissions emerged.
    *   **Diagnosis:** The application tried to write to a log file in a non-existent directory and later tried to collect static files into a read-only directory.
    *   **Fix:** The `Dockerfile` was updated to create and set permissions for the log directory. The `docker-compose.yml` mounts were adjusted to ensure the static files destination was writable.

The overall approach demonstrates a methodical, iterative debugging process: analyze the error log, form a hypothesis, test it, and apply a precise fix. A critical breakthrough was understanding the interaction between the Docker image layers and the runtime configuration from `docker-compose.yml`.

---

### Analysis of the Unresolved Error

The final log entry shows the container starting, running migrations successfully, but then exiting with an error after a static files-related warning.

**Final Error Log Snippet:**
```
watson-1  | WARNINGS:
watson-1  | ?: (staticfiles.W004) The directory '/app/backend/watson/static' in the STATICFILES_DIRS setting does not exist.
...
watson-1 exited with code 1
```

This indicates that Django's startup checks are failing. The `collectstatic` command needs to find source static files in the directories listed in `STATICFILES_DIRS` to copy them to the `STATIC_ROOT`. The warning shows that one of these source directories is missing.

#### Reasoning for the Cause of the Error

**Highest Confidence Cause (95% Confidence): Incomplete Volume Mounts**

The root cause is the developer's last fix for a `PermissionError`. To prevent the `watson` application directory from being read-only, the developer changed the `docker-compose.yml` from mounting the entire directory to mounting only specific files within it:

```yaml
# Previous, problematic mount:
# - ./backend/watson:/app/backend/watson:ro

# New, incomplete mounts:
- ./backend/watson/settings:/app/backend/watson/settings:ro
- ./backend/watson/urls.py:/app/backend/watson/urls.py:ro
- ./backend/watson/wsgi.py:/app/backend/watson/wsgi.py:ro
# ... and other files
```

By mounting only individual files, the developer inadvertently excluded the `static` subdirectory (`./backend/watson/static/`). When the container runs, the `collectstatic` command cannot find this source directory, leading to the `W004` warning and causing the startup process to halt.

#### Possible Solutions (with Confidence Rankings)

Here are the recommended solutions to resolve this final error:

**1. Solution: Mount the Directory with a Writable Overlay (95% Confidence)**

This is the most robust and idiomatic solution. It keeps the source code read-only for safety while allowing the `collectstatic` destination to be writable.

*   **Action:** Modify `docker-compose.yml` to mount the entire `watson` directory as read-only, then mount the `staticfiles` named volume over the destination subdirectory. This allows the container to write to the destination without making the source code writable.

    ```yaml
    # In docker-compose.yml
    services:
      watson:
        # ...
        volumes:
          # ... other mounts
          # Mount the entire watson app directory as read-only
          - ./backend/watson:/app/backend/watson:ro
          # Mount a separate, writable volume for the collectstatic destination
          - static_files:/app/backend/watson/staticfiles
    ```

**2. Solution: Make the Development Mount Read-Write (85% Confidence)**

This is a simpler, though less secure, solution suitable for a trusted development environment.

*   **Action:** Revert to mounting the entire `./backend/watson` directory, but change the mode from read-only (`ro`) to read-write (`rw`).

    ```yaml
    # In docker-compose.yml
    services:
      watson:
        # ...
        volumes:
          # ... other mounts
          - ./backend/watson:/app/backend/watson:rw
          # The static_files volume is no longer needed if the destination is inside this mount
    ```

**3. Solution: Move `collectstatic` to the Build Step (70% Confidence for Fixing the Symptom)**

Running `collectstatic` on every container start is inefficient. For a production-like build, this step should be done once in the `Dockerfile`.

*   **Action:**
    1.  Add `RUN /app/backend/.venv/bin/python /app/backend/manage.py collectstatic --noinput` to the `Dockerfile` before the final `CMD`.
    2.  Remove the `collectstatic` command from the `docker/entrypoint.sh` script.
    3.  This ensures static files are baked into the image, avoiding runtime permission issues entirely. However, it may be less convenient for development if static files change often.
</file>

<file path="docs/specs/app-layout-change-log.md">
# Change Log: Watson App Layout & Authentication
## Date: September 14, 2024

## Files Modified

### To be documented as changes are made

## Dependencies Added/Removed
- None yet

## Breaking Changes
- None yet
</file>

<file path="docs/specs/app-layout-implementation-report.md">
# Implementation Report: Watson App Layout & Authentication
## Date: September 14, 2024
## PRD: app-layout.prd.md

## Phases Completed
- [ ] Phase 1: Core Layout Structure
  - Tasks: Refactor App.tsx, Create AppLayout, Header, Footer, MainPanel
  - Commits: Pending
- [ ] Phase 2: Authentication Integration
  - Tasks: Auth config, LoginButton, ProtectedRoute
  - Commits: Pending
- [ ] Phase 3: Content Panels
  - Tasks: ProfilePanel, SettingsPanel
  - Commits: Pending
- [ ] Phase 4: Mobile Responsiveness
  - Tasks: Mobile navigation, responsive adjustments
  - Commits: Pending

## Testing Summary
- Tests written: 0
- Tests passing: 0
- Manual verification: Pending

## Challenges & Solutions
- To be documented during implementation

## Critical Security Notes
- Authentication/Authorization changes: JWT token verification from Oceanheart Passport
- Data validation changes: None
- Input sanitization: None

## Next Steps
- Begin Phase 1 implementation
- Test authentication flow with Oceanheart Passport
</file>

<file path="docs/specs/app-layout.prd.md">
# Watson App Layout & Authentication - Product Requirements Document

**Date:** September 14, 2024  
**Version:** 1.0

---

## Executive Summary

This PRD defines the requirements for creating the main application layout for Watson, including a responsive header with navigation, main content panel, footer, and authentication integration with Oceanheart Passport. The current App.tsx will be refactored into a landing page, while a new authenticated application layout will be created at the `/app` route.

## Problem Statement

### Current Issues
1. **No Application Layout**: Current App.tsx only contains a landing page with hero banner and testimonials
2. **No Authentication Integration**: Application lacks login/logout functionality and passport integration
3. **No Navigation Structure**: Missing header navigation and route management
4. **No Content Management**: No mechanism to switch between different content views (profile, settings)

### User Needs
- Authenticated users need access to the main application interface
- Users need clear navigation between landing page, profile, and settings
- Users need a seamless authentication flow with Oceanheart Passport
- Mobile users need a responsive, touch-friendly interface

## Requirements

### User Requirements

1. **Landing Page** 
   - Transform current App.tsx into dedicated landing page component
   - Maintain existing hero banner and testimonials sections
   - Add login CTA that routes to authentication

2. **Application Layout**
   - Authenticated app shell at `/app` route
   - Persistent header with navigation
   - Dynamic main content panel
   - Consistent footer across all views

3. **Navigation**
   - Logo/brand link to landing page (/)
   - Profile link (shows profile content in main panel)
   - Settings link (shows settings content in main panel)
   - Sign out option within profile view

4. **Authentication Flow**
   - Login form/button redirects to Oceanheart Passport
   - Handle returnTo parameter based on environment
   - Maintain session state across app
   - Graceful logout with redirect to landing

### Technical Requirements

1. **Component Structure**
   ```
   src/
   ├── pages/
   │   ├── LandingPage.tsx (refactored from current App.tsx)
   │   └── AppLayout.tsx (new authenticated layout)
   ├── components/
   │   ├── layout/
   │   │   ├── AppHeader.tsx
   │   │   ├── AppFooter.tsx
   │   │   └── MainPanel.tsx
   │   ├── auth/
   │   │   └── LoginButton.tsx
   │   └── panels/
   │       ├── ProfilePanel.tsx
   │       └── SettingsPanel.tsx
   ```

2. **Routing Structure**
   - `/` - Landing page (public)
   - `/app` - Main application (authenticated)
   - `/app/profile` - Profile view (authenticated)
   - `/app/settings` - Settings view (authenticated)

3. **Authentication Integration**
   - Environment-aware auth URL configuration
   - Development: `passport.oceanheart.ai/auth?returnTo=http://localhost:3000/app`
   - Production: `passport.oceanheart.ai/auth?returnTo=https://watson.oceanheart.ai/app`
   - JWT token verification from cookies
   - Protected route wrapper component

### Design Requirements

1. **Responsive Breakpoints**
   - Mobile: < 768px (hamburger menu, stacked layout)
   - Tablet: 768px - 1024px (condensed navigation)
   - Desktop: > 1024px (full navigation bar)

2. **Visual Hierarchy**
   - Sticky header with z-index priority
   - Main content scrollable independently
   - Footer always at bottom of viewport or content

3. **UI Components to Utilize**
   - `background-beams.tsx` for app background
   - `floating-navbar.tsx` or custom navbar
   - `sidebar.tsx` for mobile navigation
   - `card.tsx` for content panels
   - `button.tsx` variations for CTAs

## Implementation Phases

### Phase 1: Core Layout Structure
1. **Refactor App.tsx to LandingPage.tsx**
   - Move current App.tsx content to pages/LandingPage.tsx
   - Update imports and exports
   - Add login CTA button

2. **Create AppLayout Component**
   ```tsx
   // src/pages/AppLayout.tsx
   import { useState } from 'react';
   import { AppHeader } from '@/components/layout/AppHeader';
   import { AppFooter } from '@/components/layout/AppFooter';
   import { MainPanel } from '@/components/layout/MainPanel';
   
   export function AppLayout() {
     const [activeView, setActiveView] = useState('dashboard');
     
     return (
       <div className="min-h-screen bg-black/[0.96] flex flex-col">
         <AppHeader onNavigate={setActiveView} activeView={activeView} />
         <MainPanel activeView={activeView} />
         <AppFooter />
       </div>
     );
   }
   ```

3. **Implement Header with Navigation**
   ```tsx
   // src/components/layout/AppHeader.tsx
   export function AppHeader({ onNavigate, activeView }) {
     return (
       <header className="sticky top-0 z-50 w-full border-b border-neutral-800 bg-black/50 backdrop-blur">
         <nav className="container mx-auto px-4 h-16 flex items-center justify-between">
           <a href="/" className="text-white font-bold text-xl">
             Watson AI
           </a>
           <div className="hidden md:flex items-center space-x-6">
             <button onClick={() => onNavigate('dashboard')} 
                     className="text-neutral-400 hover:text-white transition">
               Dashboard
             </button>
             <button onClick={() => onNavigate('profile')}
                     className="text-neutral-400 hover:text-white transition">
               Profile
             </button>
             <button onClick={() => onNavigate('settings')}
                     className="text-neutral-400 hover:text-white transition">
               Settings
             </button>
           </div>
           {/* Mobile menu button */}
           <button className="md:hidden text-white">
             <MenuIcon />
           </button>
         </nav>
       </header>
     );
   }
   ```

### Phase 2: Authentication Integration

1. **Create Auth Configuration**
   ```tsx
   // src/config/auth.ts
   export const getAuthConfig = () => {
     const isDev = process.env.NODE_ENV === 'development';
     return {
       authUrl: 'https://passport.oceanheart.ai/auth',
       returnTo: isDev 
         ? 'http://localhost:3000/app'
         : 'https://watson.oceanheart.ai/app'
     };
   };
   ```

2. **Implement Login Button**
   ```tsx
   // src/components/auth/LoginButton.tsx
   import { getAuthConfig } from '@/config/auth';
   
   export function LoginButton() {
     const handleLogin = () => {
       const { authUrl, returnTo } = getAuthConfig();
       window.location.href = `${authUrl}?returnTo=${encodeURIComponent(returnTo)}`;
     };
     
     return (
       <Button onClick={handleLogin} className="...">
         Sign In with Oceanheart
       </Button>
     );
   }
   ```

3. **Add Protected Route Wrapper**
   ```tsx
   // src/components/auth/ProtectedRoute.tsx
   export function ProtectedRoute({ children }) {
     const [isAuthenticated, setIsAuthenticated] = useState(false);
     
     useEffect(() => {
       // Check for JWT token in cookies
       const token = getCookie('oh_session');
       if (!token) {
         // Redirect to auth
         const { authUrl, returnTo } = getAuthConfig();
         window.location.href = `${authUrl}?returnTo=${encodeURIComponent(returnTo)}`;
       } else {
         setIsAuthenticated(true);
       }
     }, []);
     
     if (!isAuthenticated) return <LoadingSpinner />;
     return children;
   }
   ```

### Phase 3: Content Panels

1. **Profile Panel Implementation**
   ```tsx
   // src/components/panels/ProfilePanel.tsx
   export function ProfilePanel() {
     const handleSignOut = () => {
       // Clear session cookie
       document.cookie = 'oh_session=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
       window.location.href = '/';
     };
     
     return (
       <div className="max-w-4xl mx-auto p-8">
         <h2 className="text-3xl font-bold text-white mb-8">Profile</h2>
         <div className="bg-neutral-900 rounded-lg p-6">
           <p className="text-neutral-400 mb-6">Profile content placeholder</p>
           <Button onClick={handleSignOut} variant="destructive">
             Sign Out
           </Button>
         </div>
       </div>
     );
   }
   ```

2. **Settings Panel Implementation**
   ```tsx
   // src/components/panels/SettingsPanel.tsx
   export function SettingsPanel() {
     return (
       <div className="max-w-4xl mx-auto p-8">
         <h2 className="text-3xl font-bold text-white mb-8">Settings</h2>
         <div className="bg-neutral-900 rounded-lg p-6">
           <p className="text-neutral-400">Settings content placeholder</p>
         </div>
       </div>
     );
   }
   ```

### Phase 4: Mobile Responsiveness

1. **Mobile Navigation Drawer**
   - Implement hamburger menu toggle
   - Slide-out navigation drawer
   - Overlay backdrop when open
   - Touch gestures for close

2. **Responsive Layout Adjustments**
   - Stack navigation vertically on mobile
   - Adjust padding and spacing for touch
   - Ensure minimum tap target sizes (44x44px)
   - Test on various viewport sizes

## Implementation Notes

### State Management
- Use React Context for authentication state
- Local component state for active view
- Consider adding URL-based routing in future phases

### Environment Variables
```env
# .env.local
REACT_APP_AUTH_URL=https://passport.oceanheart.ai/auth
REACT_APP_RETURN_URL_DEV=http://localhost:3000/app
REACT_APP_RETURN_URL_PROD=https://watson.oceanheart.ai/app
```

### Cookie Utilities
```typescript
function getCookie(name: string): string | null {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop()?.split(';').shift() || null;
  return null;
}
```

## Security Considerations

1. **JWT Token Validation**
   - Verify token signature on each request
   - Check token expiration
   - Handle refresh token flow if needed

2. **CORS Configuration**
   - Ensure watson.oceanheart.ai is whitelisted in Passport CORS

3. **Secure Cookie Handling**
   - HttpOnly flag for production cookies
   - Secure flag for HTTPS environments
   - SameSite attribute for CSRF protection

## Success Metrics

- Successful authentication flow completion rate
- Time to first meaningful paint < 2s
- Mobile responsiveness score > 95 (Lighthouse)
- Zero authentication-related security vulnerabilities

## Future Enhancements

1. **URL-based Routing**: Implement React Router for proper URL management
2. **User Profile Data**: Fetch and display actual user data from API
3. **Settings Persistence**: Save user preferences to backend
4. **Notification System**: Add toast notifications for user actions
5. **Dark/Light Theme Toggle**: Implement theme switcher in settings
6. **Keyboard Navigation**: Add accessibility shortcuts
7. **Session Management**: Implement token refresh and session timeout warnings

---

**Next Steps:**
1. Review and approve PRD
2. Begin Phase 1 implementation
3. Set up development environment with auth configuration
4. Test authentication flow with Oceanheart Passport team
</file>

<file path="docs/specs/application-layout-change-log.md">
# Change Log: Watson Application Layout System
## Date: 2025-01-13

## Files Modified

### frontend/src/types/auth.ts
- **Change**: Created comprehensive TypeScript interfaces for authentication system
- **Rationale**: Establish type safety for JWT tokens, user data, and authentication state management
- **Impact**: Provides foundation for all authentication-related components and utilities
- **Commit**: 9b1c2ea

### frontend/src/utils/auth.ts
- **Change**: Implemented JWT validation and localStorage utilities
- **Rationale**: Provide secure token handling and landing page check-in logic as specified in PRD
- **Impact**: Enables authentication state management and conditional landing page display
- **Commit**: e4445b3

### frontend/src/contexts/AuthContext.tsx
- **Change**: Created authentication context provider with React Context API
- **Rationale**: Centralized authentication state management across the application
- **Impact**: Provides authentication state and methods to all child components
- **Commit**: 8028adc

### frontend/src/hooks/useAuth.ts
- **Change**: Implemented authentication hook with role-based helpers and utilities
- **Rationale**: Provide simplified interface for components to access authentication functionality
- **Impact**: Enables easy authentication state access and role-based UI rendering
- **Commit**: 1f072e1

### frontend/src/utils/mockAuth.ts
- **Change**: Created stubbed authentication interface for development and testing
- **Rationale**: Enable development and testing of authentication flows without backend dependency
- **Impact**: Provides mock users, login/logout simulation, and development helpers
- **Commit**: c9e712f

### tailwind.config.js
- **Change**: Created TailwindCSS configuration with clinical color scheme
- **Rationale**: Configure TailwindCSS for clinical application design system and responsive layout
- **Impact**: Provides consistent styling framework and design tokens for all components
- **Commit**: 9128522

### postcss.config.js
- **Change**: Added PostCSS configuration for TailwindCSS processing
- **Rationale**: Enable TailwindCSS compilation and autoprefixer for browser compatibility
- **Impact**: Allows TailwindCSS classes to work properly in production builds
- **Commit**: 9128522

### frontend/src/styles/globals.css
- **Change**: Created global CSS with TailwindCSS directives and clinical design system
- **Rationale**: Establish base styles, component classes, and utilities for consistent UI
- **Impact**: Provides foundation for all UI components with clinical-appropriate styling
- **Commit**: 9128522

### frontend/src/utils/cn.ts
- **Change**: Added class name utility combining clsx and tailwind-merge
- **Rationale**: Optimize class name handling for Aceternity UI components
- **Impact**: Enables proper conditional classes and Tailwind class merging
- **Commit**: 9128522

### frontend/src/main.tsx
- **Change**: Updated CSS import to use new globals.css with TailwindCSS
- **Rationale**: Load TailwindCSS styles throughout the application
- **Impact**: Enables TailwindCSS and clinical design system across all components
- **Commit**: 9128522

## Dependencies Added/Removed

- Added: tailwindcss@4.1.13 - CSS framework for consistent styling
- Added: framer-motion@12.23.12 - Animation library for Aceternity UI components
- Added: lucide-react@0.544.0 - Icon library for UI components
- Added: clsx@2.1.1 - Utility for conditional class names
- Added: tailwind-merge@3.3.1 - Utility for merging Tailwind CSS classes
- Added: @tailwindcss/typography@0.5.16 - Typography plugin for better text styling
- Added: autoprefixer@10.4.21 - PostCSS plugin for browser compatibility
- Added: postcss@8.5.6 - CSS processing tool

## Breaking Changes

*Breaking changes will be documented here if any occur during implementation*

## Implementation Completed - 2025-01-15

### New Files Created:
- `frontend/src/pages/LandingPage.tsx` - Refactored hero banner from App.tsx
- `frontend/src/pages/AppLayout.tsx` - Main authenticated app container
- `frontend/src/components/layout/AppHeader.tsx` - Navigation header
- `frontend/src/components/layout/MainPanel.tsx` - Dynamic content area  
- `frontend/src/components/layout/AppFooter.tsx` - Application footer
- `frontend/src/components/panels/ProfilePanel.tsx` - User profile view
- `frontend/src/components/panels/SettingsPanel.tsx` - Settings interface
- `frontend/src/components/auth/ProtectedRoute.tsx` - Auth wrapper
- `frontend/src/components/auth/LoginButton.tsx` - Sign in component
- `frontend/src/config/auth.ts` - Auth configuration utilities

### Modified Files:
- `frontend/src/App.tsx` - Updated to implement routing between LandingPage and AppLayout

### Completion Status:
✅ All phases implemented successfully
✅ Authentication integration complete
✅ Responsive design working
✅ Routing functional
✅ Ready for further development
</file>

<file path="docs/specs/application-layout-implementation-report.md">
# Implementation Report: Watson Application Layout System
## Date: 2025-01-13
## PRD: application-layout.prd.md

## Phases Completed
- [ ] Phase 1: Authentication Infrastructure
  - Tasks: TypeScript interfaces, JWT validation, auth context, localStorage utilities, stubbed auth
  - Commits: TBD
- [ ] Phase 2: Core Layout Components  
  - Tasks: Aceternity UI setup, Header, Footer, Navbar, MainPanel, AppLayout components
  - Commits: TBD
- [ ] Phase 3: Landing Page System
  - Tasks: LandingPage component, ReleaseUpdates, check-in logic, transitions
  - Commits: TBD
- [ ] Phase 4: Navigation Logic & Integration
  - Tasks: Auth-aware navigation, route guards, App.tsx integration, mobile menu
  - Commits: TBD

## Testing Summary
- Tests written: 0
- Tests passing: 0  
- Manual verification: Not started

## Challenges & Solutions
*To be updated during implementation*

## Critical Security Notes
- Authentication/Authorization changes: TBD
- Data validation changes: TBD
- Input sanitization: TBD

## Next Steps
*To be updated during implementation*
</file>

<file path="docs/specs/application-layout.prd.md">
# Watson Application Layout System
**PRD Document**  
*Date: 2025-01-13*

## Executive Summary

Create a comprehensive application layout system for Watson clinical LLM review tool featuring a header, footer, navbar, and main panel with authentication-aware navigation and conditional landing page display. The system will use Aceternity UI components for modern, animated interface elements and implement authentication state management with JWT tokens.

## Problem Statement

Currently, Watson has a basic React structure without proper layout management, navigation, or authentication-aware UI components. The application needs:

- **Missing Layout Structure**: No standardized header, footer, navbar, or main content areas
- **No Authentication UI**: Navigation doesn't respond to user authentication state
- **No Landing/Onboarding Flow**: Users need introduction to the tool and release updates
- **Basic Styling**: Current implementation lacks modern UI components and animations

## Requirements

### User Requirements
- **UR-1**: Users must see a consistent layout across all authenticated views
- **UR-2**: Unauthenticated users should see limited navigation options
- **UR-3**: New or returning users (after 7+ days) should see landing page with project info and updates
- **UR-4**: Navigation should be responsive and work across desktop/mobile
- **UR-5**: Landing page should clearly explain Watson's purpose and recent updates

### Technical Requirements
- **TR-1**: JWT-based authentication state detection and management
- **TR-2**: LocalStorage integration for `last-check-in` tracking (ISO date string format)
- **TR-3**: Conditional rendering based on authentication status
- **TR-4**: Integration with Aceternity UI component library
- **TR-5**: TypeScript interfaces for authentication and user state
- **TR-6**: Responsive design supporting mobile and desktop viewports
- **TR-7**: Client-side routing compatibility with existing Bun.serve() setup

### Design Requirements
- **DR-1**: Modern, clinical-appropriate visual design using Aceternity components
- **DR-2**: Clear visual hierarchy separating authenticated vs. unauthenticated states
- **DR-3**: Intuitive navigation patterns following healthcare application conventions
- **DR-4**: Accessibility compliance (WCAG 2.1 AA standards)
- **DR-5**: Loading states and smooth transitions between authenticated/unauthenticated views

## Implementation Phases

### Phase 1: Authentication Infrastructure
**Core authentication and state management setup**

**Tasks:**
- Create TypeScript interfaces for JWT payload and user authentication state
- Implement JWT token validation and parsing utilities
- Build authentication context provider with React Context API
- Create localStorage utilities for `last-check-in` date management
- Set up authentication state detection on app initialization
- Implement stubbed authentication interface for development/testing

**Key Files:**
- `frontend/src/types/auth.ts` - Authentication type definitions
- `frontend/src/contexts/AuthContext.tsx` - Authentication state management
- `frontend/src/utils/auth.ts` - JWT validation and localStorage utilities
- `frontend/src/hooks/useAuth.ts` - Authentication hook

### Phase 2: Core Layout Components
**Build fundamental layout structure with Aceternity UI**

**Tasks:**
- Install and configure Aceternity UI dependencies
- Create responsive Header component with branding and user menu
- Implement Footer component with essential links and info
- Build Navbar component with authentication-aware menu items
- Create MainPanel component for content area layout
- Implement responsive layout container wrapping all components

**Key Files:**
- `frontend/src/components/layout/Header.tsx`
- `frontend/src/components/layout/Footer.tsx` 
- `frontend/src/components/layout/Navbar.tsx`
- `frontend/src/components/layout/MainPanel.tsx`
- `frontend/src/components/layout/AppLayout.tsx`

### Phase 3: Landing Page System
**Conditional landing page with project information and updates**

**Tasks:**
- Create LandingPage component describing Watson's purpose
- Implement release updates section with version history
- Build check-in date logic to determine landing page display
- Create call-to-action flows for user onboarding
- Add landing page navigation and skip options
- Implement smooth transitions between landing and main app

**Key Files:**
- `frontend/src/components/LandingPage.tsx`
- `frontend/src/components/ReleaseUpdates.tsx`
- `frontend/src/utils/checkIn.ts`

### Phase 4: Navigation Logic & Integration
**Conditional navigation rendering and app integration**

**Tasks:**
- Implement authentication-aware navigation menu rendering
- Create navigation guards for protected routes
- Integrate layout system with existing App.tsx structure
- Add navigation state management for active menu items
- Implement mobile hamburger menu functionality
- Test navigation flows across authentication states

**Key Files:**
- `frontend/src/components/navigation/AuthNavigation.tsx`
- `frontend/src/components/navigation/PublicNavigation.tsx`
- `frontend/src/hooks/useNavigation.ts`

## Implementation Notes

### Authentication Interface (Stubbed)
```typescript
// frontend/src/types/auth.ts
export interface JWTPayload {
  sub: string;
  email: string;
  role: string;
  exp: number;
  iat: number;
}

export interface AuthState {
  isAuthenticated: boolean;
  user: User | null;
  token: string | null;
  loading: boolean;
}

export interface User {
  id: string;
  email: string;
  role: string;
  name?: string;
}
```

### LocalStorage Check-in Logic
```typescript
// frontend/src/utils/checkIn.ts
export function shouldShowLanding(): boolean {
  const lastCheckIn = localStorage.getItem('last-check-in');
  
  if (!lastCheckIn) return true;
  
  const lastDate = new Date(lastCheckIn);
  const now = new Date();
  const daysDiff = Math.floor((now.getTime() - lastDate.getTime()) / (1000 * 60 * 60 * 24));
  
  return daysDiff > 7;
}

export function updateCheckIn(): void {
  localStorage.setItem('last-check-in', new Date().toISOString());
}
```

### Aceternity UI Integration
**Key Components to Utilize:**
- **Floating Navbar**: Main navigation bar with authentication-aware menu items
- **Hero Sections**: Landing page header explaining Watson's purpose  
- **Cards Sections**: Feature highlights and update announcements
- **Layout Grid**: Structured content areas within main panel
- **Floating Dock**: Quick action navigation for authenticated users

### Responsive Breakpoints
```css
/* Mobile First Approach */
- Mobile: 320px - 768px (stack navigation, hamburger menu)
- Tablet: 768px - 1024px (condensed navigation)  
- Desktop: 1024px+ (full horizontal navigation)
```

## Security Considerations

**Authentication Security:**
- JWT token validation with proper signature verification
- Token expiration handling with automatic logout
- Secure token storage considerations (avoid XSS vulnerabilities)
- Input validation for all authentication-related data

**Data Validation:**
- Validate localStorage data before parsing dates
- Sanitize any user-provided content in landing page forms
- Implement proper error boundaries for authentication failures

## Success Metrics

**User Experience:**
- Navigation accessibility score ≥ 95% (automated testing)
- Mobile responsive design passes on 3+ device sizes
- Page load time <2s for layout initialization
- Zero authentication state inconsistencies in user testing

**Technical Performance:**
- Bundle size increase <50KB with Aceternity UI integration
- TypeScript compilation with zero type errors
- 100% test coverage for authentication utilities
- Cross-browser compatibility (Chrome, Firefox, Safari, Edge)

## Future Enhancements

**Advanced Authentication:**
- Role-based navigation menus (admin, clinician, viewer)
- Single sign-on (SSO) integration with hospital systems
- Multi-factor authentication support
- Session management and concurrent login handling

**Enhanced Landing Experience:**
- Interactive onboarding tutorial
- Personalized release notes based on user role
- Quick setup wizard for new installations
- Analytics integration for user engagement tracking

**Advanced Navigation:**
- Breadcrumb navigation for deep application states
- Contextual help and documentation integration  
- Keyboard navigation shortcuts
- Advanced search functionality within navigation

---

*This PRD focuses on minimum viable requirements for a production-ready application layout system while maintaining extensibility for future healthcare-specific features.*
</file>

<file path="docs/specs/blueprint.md">
# Product Requirements Document (PRD)

## Project Overview
**Project Name:** [Project Name]
**Version:** 1.0
**Date:** [Current Date]

## Problem Statement
[Describe the problem this project aims to solve]

## Solution Overview
[High-level description of the proposed solution]

## Requirements
### Functional Requirements
- [ ] Requirement 1
- [ ] Requirement 2
- [ ] Requirement 3

### Non-Functional Requirements
- [ ] Performance requirements
- [ ] Security requirements
- [ ] Scalability requirements

## Success Metrics
- Metric 1: [Description]
- Metric 2: [Description]

## Timeline
- Phase 1: [Description and timeline]
- Phase 2: [Description and timeline]

## Resources Required
- Technical resources
- Human resources
- External dependencies

## Risks and Mitigation
| Risk | Impact | Likelihood | Mitigation |
|------|---------|------------|------------|
| Risk 1 | High | Medium | Mitigation strategy |
</file>

<file path="docs/specs/vercel-frontend-deployment.prd.md">
# Watson Frontend Vercel Deployment PRD

**Date**: September 14, 2025  
**Version**: 1.0

## Executive Summary

This PRD outlines the requirements and implementation strategy for deploying the Watson frontend application to Vercel. The Watson frontend is a React-based clinical review tool built with Vite, TipTap editor, and Tailwind CSS v4. The deployment will enable standalone frontend hosting on Vercel's edge network while maintaining connectivity to the Django backend API.

## Problem Statement

### Current State
- Frontend is currently served alongside Django backend in Docker containers
- Development requires full stack deployment even for frontend-only changes
- No separate frontend deployment pipeline exists
- Frontend and backend are tightly coupled in deployment

### Pain Points
- Slow frontend iteration cycles due to full-stack deployment requirements
- Cannot leverage edge CDN capabilities for static assets
- Limited ability to scale frontend independently from backend
- Complex Docker setup required for frontend-only developers

## Requirements

### User Requirements
- Frontend must load quickly from global edge locations
- Application must maintain full functionality with remote API
- Users should experience seamless API connectivity
- Preview deployments for PR reviews

### Technical Requirements
- Build with Bun and Vite for production optimization
- Support for environment-specific API endpoints
- Proper handling of CORS for API communication
- Static asset optimization and caching
- Support for dynamic imports and code splitting
- TipTap editor and all UI components must function correctly

### Design Requirements
- Maintain responsive design across all devices
- Preserve dark/light theme functionality
- Ensure all Aceternity UI animations work properly
- Maintain existing routing structure

## Implementation Phases

### Phase 1: Core Deployment Configuration

**Objectives**: Establish basic Vercel deployment

1. **Create vercel.json configuration**
```json
{
  "buildCommand": "bun install && bun run build:frontend",
  "outputDirectory": "dist/static",
  "framework": "vite",
  "installCommand": "curl -fsSL https://bun.sh/install | bash && bun install",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

2. **Update package.json scripts**
```json
{
  "scripts": {
    "build:vercel": "vite build",
    "preview:vercel": "vite preview"
  }
}
```

3. **Environment variable configuration**
   - `VITE_API_URL`: Backend API endpoint
   - `VITE_APP_ENV`: Environment identifier (production/staging/development)
   - `VITE_PUBLIC_URL`: Frontend public URL

### Phase 2: API Integration & CORS

**Objectives**: Configure proper API connectivity

1. **Update vite.config.ts for production**
```typescript
export default defineConfig(({ mode }) => ({
  plugins: [react(), tailwindcss()],
  root: './frontend',
  build: {
    outDir: '../dist/static',
    emptyOutDir: true,
    rollupOptions: {
      output: {
        manualChunks: {
          'tiptap': ['@tiptap/core', '@tiptap/react', '@tiptap/starter-kit'],
          'ui': ['framer-motion', '@radix-ui/react-dropdown-menu'],
          'vendor': ['react', 'react-dom']
        }
      }
    }
  },
  define: {
    'process.env.NODE_ENV': JSON.stringify(mode)
  }
}));
```

2. **Create API client configuration**
```typescript
// frontend/src/lib/api.ts
const API_BASE = import.meta.env.VITE_API_URL || 'https://api.watson.oceanheart.ai';

export const apiClient = {
  baseURL: API_BASE,
  headers: {
    'Content-Type': 'application/json',
  }
};
```

3. **Django CORS configuration update**
   - Add Vercel domains to ALLOWED_HOSTS
   - Configure CORS_ALLOWED_ORIGINS for Vercel URLs
   - Set up proper CSRF handling for cross-origin requests

### Phase 3: Build Optimization

**Objectives**: Optimize bundle size and performance

1. **Implement code splitting**
   - Lazy load TipTap editor components
   - Split Aceternity UI components into separate chunks
   - Dynamic import for heavy dependencies

2. **Asset optimization**
   - Configure image optimization
   - Implement font subsetting
   - Enable gzip/brotli compression

3. **Caching strategy**
   - Set appropriate cache headers
   - Implement service worker for offline support
   - Configure CDN cache purging

### Phase 4: CI/CD Pipeline

**Objectives**: Automate deployment workflow

1. **GitHub integration**
   - Connect repository to Vercel
   - Configure branch deployments
   - Set up preview deployments for PRs

2. **Build checks**
   - TypeScript type checking
   - Build size monitoring
   - Lighthouse performance checks

3. **Environment management**
   - Production: `watson.oceanheart.ai`
   - Staging: `staging-watson.oceanheart.ai`
   - Preview: `pr-*.watson.vercel.app`

## Implementation Notes

### Directory Structure Adjustments
```
watson.oceanheart.ai/
├── frontend/          # Root for Vercel deployment
│   ├── src/
│   ├── public/
│   └── index.html
├── vercel.json        # Vercel configuration
├── package.json       # Root package.json with scripts
└── vite.config.ts     # Vite configuration
```

### Build Process
```bash
# Local build test
bun install
bun run build:frontend

# Vercel will execute
curl -fsSL https://bun.sh/install | bash
bun install
bun run build:vercel
```

### Environment Variable Management
```typescript
// frontend/src/config/environment.ts
export const config = {
  api: {
    baseUrl: import.meta.env.VITE_API_URL,
    timeout: 30000
  },
  app: {
    environment: import.meta.env.VITE_APP_ENV || 'development',
    version: import.meta.env.VITE_APP_VERSION || '0.1.0'
  }
};
```

## Security Considerations

### API Security
- Implement API key authentication for frontend-to-backend communication
- Use HTTPS for all API communications
- Implement request rate limiting
- Add request signing for sensitive operations

### Frontend Security
- Enable CSP headers via Vercel configuration
- Implement XSS protection for user-generated content in editor
- Validate all user inputs before API submission
- Secure storage of authentication tokens

### CORS Configuration
- Whitelist only specific Vercel domains
- Implement preflight request handling
- Use credentials: 'include' for authenticated requests

## Success Metrics

- **Performance**: Lighthouse score > 90 for performance
- **Build Time**: Frontend builds complete in < 60 seconds
- **Deploy Time**: Deployment to production in < 2 minutes
- **Availability**: 99.9% uptime for frontend application
- **Load Time**: Initial page load < 2 seconds on 3G connection
- **Bundle Size**: Main bundle < 500KB gzipped

## Future Enhancements

### Potential Improvements
- Implement edge functions for API caching
- Add i18n support with locale-based routing
- Integrate analytics and error tracking
- Implement A/B testing framework
- Add PWA capabilities with offline support

### Advanced Features
- Server-side rendering with Vercel Functions
- Image optimization API integration
- WebSocket support via Vercel Edge Functions
- Multi-region deployment for global latency optimization

## Appendix

### Required Files

**vercel.json**
```json
{
  "buildCommand": "bun install && bun run build:frontend",
  "outputDirectory": "dist/static",
  "framework": "vite",
  "installCommand": "curl -fsSL https://bun.sh/install | bash",
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://api.watson.oceanheart.ai/api/$1",
      "headers": {
        "x-forwarded-host": "watson.oceanheart.ai"
      }
    },
    {
      "handle": "filesystem"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

**.env.production**
```env
VITE_API_URL=https://api.watson.oceanheart.ai
VITE_APP_ENV=production
VITE_PUBLIC_URL=https://watson.oceanheart.ai
```

### Deployment Checklist

- [ ] Create Vercel account and project
- [ ] Connect GitHub repository
- [ ] Configure environment variables
- [ ] Update API CORS settings
- [ ] Test build process locally
- [ ] Deploy to staging environment
- [ ] Verify all features work correctly
- [ ] Configure custom domain
- [ ] Deploy to production
- [ ] Monitor performance metrics
</file>

<file path="frontend/src/components/auth/LoginButton.tsx">
import React from 'react';
import { getAuthConfig } from '@/config/auth';
import { Button } from '@/components/ui/moving-border';
import { LogIn } from 'lucide-react';

interface LoginButtonProps {
  className?: string;
  variant?: 'default' | 'border';
}

export function LoginButton({ className = '', variant = 'default' }: LoginButtonProps) {
  const handleLogin = () => {
    const { authUrl, returnTo } = getAuthConfig();
    window.location.href = `${authUrl}?returnTo=${encodeURIComponent(returnTo)}`;
  };

  if (variant === 'border') {
    return (
      <Button
        onClick={handleLogin}
        borderRadius="1.75rem"
        className={`bg-gradient-to-r from-indigo-500 to-purple-500 text-white border-none px-8 py-3 ${className}`}
      >
        <LogIn className="w-4 h-4 mr-2" />
        Sign In with Oceanheart
      </Button>
    );
  }

  return (
    <button
      onClick={handleLogin}
      className={`bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-6 py-2 rounded-lg transition flex items-center ${className}`}
    >
      <LogIn className="w-4 h-4 mr-2" />
      Sign In
    </button>
  );
}
</file>

<file path="frontend/src/components/auth/ProtectedRoute.tsx">
import React, { useEffect, useState } from 'react';
import { Loader2 } from 'lucide-react';

interface ProtectedRouteProps {
  children: React.ReactNode;
}

export function ProtectedRoute({ children }: ProtectedRouteProps) {
  const [isAuthenticated, setIsAuthenticated] = useState<boolean | null>(null);

  useEffect(() => {
    // Check for localStorage auth flag (temporary for testing)
    const authFlag = localStorage.getItem('isAuthenticated');
    
    if (authFlag !== 'true') {
      // Not authenticated - redirect to landing page
      window.location.href = '/';
    } else {
      // Authenticated
      setIsAuthenticated(true);
    }
  }, []);

  // Show loading spinner while checking authentication
  if (isAuthenticated === null) {
    return (
      <div className="min-h-screen bg-black flex items-center justify-center">
        <div className="text-center">
          <Loader2 className="w-8 h-8 text-indigo-500 animate-spin mx-auto mb-4" />
          <p className="text-neutral-400">Verifying authentication...</p>
        </div>
      </div>
    );
  }

  // User is authenticated, render children
  return <>{children}</>;
}
</file>

<file path="frontend/src/components/layout/AppFooter.tsx">
import React from 'react';

export function AppFooter() {
  return (
    <footer className="border-t border-neutral-800 bg-black/50 backdrop-blur">
      <div className="container mx-auto px-4 py-6">
        <div className="flex flex-col md:flex-row justify-between items-center">
          <div className="mb-4 md:mb-0">
            <p className="text-neutral-400 text-sm">
              © 2024 Watson AI. All rights reserved.
            </p>
          </div>
          <div className="flex space-x-6">
            <a 
              href="/privacy" 
              className="text-neutral-400 hover:text-white transition text-sm"
            >
              Privacy
            </a>
            <a 
              href="/terms" 
              className="text-neutral-400 hover:text-white transition text-sm"
            >
              Terms
            </a>
            <a 
              href="/contact" 
              className="text-neutral-400 hover:text-white transition text-sm"
            >
              Contact
            </a>
          </div>
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="frontend/src/components/layout/AppHeader.tsx">
import React, { useState } from 'react';
import { Menu, X } from 'lucide-react';

interface AppHeaderProps {
  onNavigate: (view: 'dashboard' | 'profile' | 'settings') => void;
  activeView: 'dashboard' | 'profile' | 'settings';
}

export function AppHeader({ onNavigate, activeView }: AppHeaderProps) {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const navItems = [
    { id: 'dashboard' as const, label: 'Dashboard' },
    { id: 'profile' as const, label: 'Profile' },
    { id: 'settings' as const, label: 'Settings' },
  ];

  const handleNavClick = (view: 'dashboard' | 'profile' | 'settings') => {
    onNavigate(view);
    setMobileMenuOpen(false);
  };

  return (
    <header className="sticky top-0 z-50 w-full border-b border-neutral-800 bg-black/50 backdrop-blur">
      <nav className="container mx-auto px-4 h-16 flex items-center justify-between">
        {/* Logo */}
        <a href="/" className="text-white font-bold text-xl hover:text-primary-400 transition">
          Watson AI
        </a>

        {/* Desktop Navigation */}
        <div className="hidden md:flex items-center space-x-6">
          {navItems.map((item) => (
            <button
              key={item.id}
              onClick={() => handleNavClick(item.id)}
              className={`transition ${
                activeView === item.id
                  ? 'text-white font-medium'
                  : 'text-neutral-400 hover:text-white'
              }`}
            >
              {item.label}
            </button>
          ))}
        </div>

        {/* Mobile Menu Button */}
        <button
          className="md:hidden text-white p-2"
          onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
          aria-label="Toggle menu"
        >
          {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
      </nav>

      {/* Mobile Menu */}
      {mobileMenuOpen && (
        <div className="md:hidden border-t border-neutral-800 bg-black/95 backdrop-blur">
          <div className="container mx-auto px-4 py-4 space-y-2">
            {navItems.map((item) => (
              <button
                key={item.id}
                onClick={() => handleNavClick(item.id)}
                className={`block w-full text-left px-4 py-2 rounded transition ${
                  activeView === item.id
                    ? 'bg-neutral-800 text-white font-medium'
                    : 'text-neutral-400 hover:bg-neutral-800/50 hover:text-white'
                }`}
              >
                {item.label}
              </button>
            ))}
          </div>
        </div>
      )}
    </header>
  );
}
</file>

<file path="frontend/src/components/layout/MainPanel.tsx">
import React from 'react';
import { ProfilePanel } from '@/components/panels/ProfilePanel';
import { SettingsPanel } from '@/components/panels/SettingsPanel';
import { SimpleEditor } from '@/components/tiptap-templates/simple/simple-editor';
import { motion, AnimatePresence } from 'framer-motion';
import { FileText, Activity, Brain } from 'lucide-react';
import { componentTheme } from '@/config/theme';

interface MainPanelProps {
  activeView: 'dashboard' | 'profile' | 'settings';
}

export function MainPanel({ activeView }: MainPanelProps) {
  const pageVariants = {
    initial: { opacity: 0, x: -20 },
    in: { opacity: 1, x: 0 },
    out: { opacity: 0, x: 20 }
  };

  const pageTransition = {
    type: "tween",
    ease: "anticipate",
    duration: 0.4
  };

  const renderContent = () => {
    switch (activeView) {
      case 'profile':
        return (
          <motion.div
            key="profile"
            initial="initial"
            animate="in"
            exit="out"
            variants={pageVariants}
            transition={pageTransition}
          >
            <ProfilePanel />
          </motion.div>
        );
      case 'settings':
        return (
          <motion.div
            key="settings"
            initial="initial"
            animate="in"
            exit="out"
            variants={pageVariants}
            transition={pageTransition}
          >
            <SettingsPanel />
          </motion.div>
        );
      case 'dashboard':
      default:
        return (
          <motion.div
            key="dashboard"
            initial="initial"
            animate="in"
            exit="out"
            variants={pageVariants}
            transition={pageTransition}
            className="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8"
          >
            <div className="mb-8">
              <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2">
                Watson Clinical Dashboard
              </h1>
              <p className="text-neutral-400">AI-Powered Clinical Documentation Review</p>
            </div>
            
            {/* Stats Grid */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
              <motion.div 
                whileHover={{ scale: 1.02 }}
                className="bg-gradient-to-br from-blue-900/20 to-blue-800/20 backdrop-blur rounded-lg p-6 border border-blue-500/20"
              >
                <div className="flex items-center mb-3">
                  <FileText className="w-5 h-5 text-blue-400 mr-2" />
                  <h3 className="text-sm font-medium text-blue-400">Documents Reviewed</h3>
                </div>
                <p className="text-2xl font-bold text-white">127</p>
                <p className="text-xs text-neutral-400 mt-1">+23 this week</p>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.02 }}
                className="bg-gradient-to-br from-cyan-900/20 to-cyan-800/20 backdrop-blur rounded-lg p-6 border border-cyan-500/20"
              >
                <div className="flex items-center mb-3">
                  <Activity className="w-5 h-5 text-cyan-400 mr-2" />
                  <h3 className="text-sm font-medium text-cyan-400">Accuracy Rate</h3>
                </div>
                <p className="text-2xl font-bold text-white">94.2%</p>
                <p className="text-xs text-neutral-400 mt-1">+2.1% improvement</p>
              </motion.div>
              
              <motion.div 
                whileHover={{ scale: 1.02 }}
                className="bg-gradient-to-br from-green-900/20 to-green-800/20 backdrop-blur rounded-lg p-6 border border-green-500/20"
              >
                <div className="flex items-center mb-3">
                  <Brain className="w-5 h-5 text-green-400 mr-2" />
                  <h3 className="text-sm font-medium text-green-400">AI Insights</h3>
                </div>
                <p className="text-2xl font-bold text-white">48</p>
                <p className="text-xs text-neutral-400 mt-1">New patterns detected</p>
              </motion.div>
            </div>

            {/* Welcome Card */}
            <motion.div 
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.2 }}
              className="bg-gradient-to-br from-neutral-900/50 to-neutral-800/50 backdrop-blur rounded-lg p-6 mb-8 border border-neutral-700/50"
            >
              <h2 className="text-2xl font-semibold bg-gradient-to-r from-white to-neutral-300 bg-clip-text text-transparent mb-4">
                Welcome to Watson AI
              </h2>
              <p className="text-neutral-400 mb-6">
                Clinical LLM Output Review & Curation Tool - Transform your clinical documentation workflow with AI-powered insights.
              </p>
              <div className="flex gap-4">
                <div className="px-4 py-2 bg-blue-500/10 rounded-lg border border-blue-500/20">
                  <span className="text-blue-400 text-sm">Real-time Analysis</span>
                </div>
                <div className="px-4 py-2 bg-cyan-500/10 rounded-lg border border-cyan-500/20">
                  <span className="text-cyan-400 text-sm">HIPAA Compliant</span>
                </div>
                <div className="px-4 py-2 bg-green-500/10 rounded-lg border border-green-500/20">
                  <span className="text-green-400 text-sm">Evidence-Based</span>
                </div>
              </div>
            </motion.div>
            
            {/* Editor Section */}
            <motion.div 
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.3 }}
              className="bg-gradient-to-br from-neutral-900/50 to-neutral-800/50 backdrop-blur rounded-lg p-6 border border-neutral-700/50"
            >
              <h3 className="text-xl font-semibold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-4">
                Clinical Note Editor
              </h3>
              <div className="w-full max-w-full overflow-hidden">
                <div className="[&_.tiptap]:max-w-full [&_.tiptap]:mx-auto">
                  <SimpleEditor />
                </div>
              </div>
            </motion.div>
          </motion.div>
        );
    }
  };

  return (
    <main className="flex-1 overflow-y-auto bg-gradient-to-br from-black via-neutral-950 to-black">
      <div className="min-h-full">
        <AnimatePresence mode="wait">
          {renderContent()}
        </AnimatePresence>
      </div>
    </main>
  );
}
</file>

<file path="frontend/src/components/panels/ProfilePanel.tsx">
import React from 'react';
import { Button } from '@/components/ui/button';
import { User, Mail, Calendar, LogOut, Shield, Award, Activity } from 'lucide-react';
import { motion } from 'framer-motion';
import { componentTheme } from '@/config/theme';

export function ProfilePanel() {
  const handleSignOut = () => {
    // Clear localStorage auth flag (temporary for testing)
    localStorage.removeItem('isAuthenticated');
    // Redirect to landing page
    window.location.href = '/';
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1
      }
    }
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0 }
  };

  return (
    <motion.div 
      className="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8"
      variants={containerVariants}
      initial="hidden"
      animate="visible"
    >
      <motion.h2 
        className="text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-8"
        variants={itemVariants}
      >
        Profile
      </motion.h2>
      
      <motion.div 
        className="bg-gradient-to-br from-blue-900/20 to-blue-800/20 backdrop-blur rounded-lg p-6 mb-6 border border-blue-500/20"
        variants={itemVariants}
        whileHover={{ scale: 1.01 }}
      >
        <div className="flex items-center mb-6">
          <motion.div 
            className="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg shadow-blue-500/25"
            whileHover={{ scale: 1.1, rotate: 5 }}
            transition={{ type: "spring", stiffness: 300 }}
          >
            JD
          </motion.div>
          <div className="ml-6">
            <h3 className="text-xl font-semibold text-white">Dr. John Doe</h3>
            <p className="text-blue-400">Senior Clinician</p>
            <div className="flex gap-2 mt-2">
              <span className="px-2 py-1 bg-blue-500/20 rounded text-xs text-blue-300 border border-blue-500/30">
                Verified
              </span>
              <span className="px-2 py-1 bg-cyan-500/20 rounded text-xs text-cyan-300 border border-cyan-500/30">
                Pro User
              </span>
            </div>
          </div>
        </div>

        <div className="space-y-4">
          <div className="flex items-center text-neutral-300">
            <Mail className="w-5 h-5 mr-3 text-blue-400" />
            <span>john.doe@example.com</span>
          </div>
          <div className="flex items-center text-neutral-300">
            <User className="w-5 h-5 mr-3 text-cyan-400" />
            <span>User ID: usr_123456789</span>
          </div>
          <div className="flex items-center text-neutral-300">
            <Calendar className="w-5 h-5 mr-3 text-green-400" />
            <span>Member since: January 2024</span>
          </div>
        </div>
      </motion.div>

      {/* Stats Grid */}
      <motion.div 
        className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"
        variants={itemVariants}
      >
        <motion.div 
          className="bg-gradient-to-br from-blue-900/20 to-blue-800/20 backdrop-blur rounded-lg p-4 border border-blue-500/20"
          whileHover={{ scale: 1.05 }}
        >
          <Activity className="w-5 h-5 text-blue-400 mb-2" />
          <p className="text-2xl font-bold text-white">892</p>
          <p className="text-xs text-blue-400">Documents Reviewed</p>
        </motion.div>
        
        <motion.div 
          className="bg-gradient-to-br from-cyan-900/20 to-cyan-800/20 backdrop-blur rounded-lg p-4 border border-cyan-500/20"
          whileHover={{ scale: 1.05 }}
        >
          <Award className="w-5 h-5 text-cyan-400 mb-2" />
          <p className="text-2xl font-bold text-white">98.4%</p>
          <p className="text-xs text-cyan-400">Accuracy Score</p>
        </motion.div>
        
        <motion.div 
          className="bg-gradient-to-br from-green-900/20 to-green-800/20 backdrop-blur rounded-lg p-4 border border-green-500/20"
          whileHover={{ scale: 1.05 }}
        >
          <Shield className="w-5 h-5 text-green-400 mb-2" />
          <p className="text-2xl font-bold text-white">Level 5</p>
          <p className="text-xs text-green-400">Security Clearance</p>
        </motion.div>
      </motion.div>

      <motion.div 
        className="bg-gradient-to-br from-neutral-900/50 to-neutral-800/50 backdrop-blur rounded-lg p-6 mb-6 border border-neutral-700/50"
        variants={itemVariants}
      >
        <h3 className="text-lg font-semibold bg-gradient-to-r from-white to-neutral-300 bg-clip-text text-transparent mb-4">
          Account Settings
        </h3>
        <p className="text-neutral-400 mb-4">
          Manage your account settings and preferences in the Settings tab.
        </p>
        <Button
          className="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white border-0"
        >
          Go to Settings
        </Button>
      </motion.div>

      <motion.div 
        className="bg-gradient-to-br from-red-900/10 to-red-800/10 backdrop-blur rounded-lg p-6 border border-red-500/20"
        variants={itemVariants}
      >
        <h3 className="text-lg font-semibold text-red-400 mb-4">Security</h3>
        <p className="text-neutral-400 mb-6">
          Your session is managed through secure authentication.
        </p>
        <Button
          onClick={handleSignOut}
          className="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white border-0"
        >
          <LogOut className="w-4 h-4 mr-2" />
          Sign Out
        </Button>
      </motion.div>
    </motion.div>
  );
}
</file>

<file path="frontend/src/components/panels/SettingsPanel.tsx">
import React, { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Bell, Moon, Globe, Shield, Save, Check } from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { componentTheme } from '@/config/theme';

export function SettingsPanel() {
  const [notifications, setNotifications] = useState(true);
  const [darkMode, setDarkMode] = useState(true);
  const [language, setLanguage] = useState('en');
  const [twoFactor, setTwoFactor] = useState(false);
  const [saved, setSaved] = useState(false);

  const handleSaveSettings = () => {
    // Save settings logic would go here
    console.log('Settings saved:', { notifications, darkMode, language, twoFactor });
    setSaved(true);
    setTimeout(() => setSaved(false), 2000);
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1
      }
    }
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0 }
  };

  return (
    <motion.div 
      className="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8"
      variants={containerVariants}
      initial="hidden"
      animate="visible"
    >
      <motion.h2 
        className="text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-8"
        variants={itemVariants}
      >
        Settings
      </motion.h2>
      
      {/* Preferences */}
      <motion.div 
        className="bg-gradient-to-br from-blue-900/20 to-blue-800/20 backdrop-blur rounded-lg p-6 mb-6 border border-blue-500/20"
        variants={itemVariants}
        whileHover={{ scale: 1.01 }}
      >
        <h3 className="text-lg font-semibold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-6">
          Preferences
        </h3>
        
        <div className="space-y-6">
          {/* Notifications */}
          <div className="flex items-center justify-between">
            <div className="flex items-center">
              <Bell className="w-5 h-5 mr-3 text-blue-400" />
              <div>
                <p className="text-white">Email Notifications</p>
                <p className="text-sm text-neutral-400">Receive email updates about your activity</p>
              </div>
            </div>
            <motion.button
              whileTap={{ scale: 0.95 }}
              onClick={() => setNotifications(!notifications)}
              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                notifications ? 'bg-gradient-to-r from-blue-600 to-cyan-600' : 'bg-neutral-600'
              }`}
            >
              <span className="sr-only">Enable notifications</span>
              <motion.span
                layout
                className="inline-block h-4 w-4 rounded-full bg-white shadow-lg"
                animate={{ x: notifications ? 24 : 4 }}
                transition={{ type: "spring", stiffness: 500, damping: 30 }}
              />
            </motion.button>
          </div>

          {/* Dark Mode */}
          <div className="flex items-center justify-between">
            <div className="flex items-center">
              <Moon className="w-5 h-5 mr-3 text-cyan-400" />
              <div>
                <p className="text-white">Dark Mode</p>
                <p className="text-sm text-neutral-400">Use dark theme across the application</p>
              </div>
            </div>
            <motion.button
              whileTap={{ scale: 0.95 }}
              onClick={() => setDarkMode(!darkMode)}
              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                darkMode ? 'bg-gradient-to-r from-blue-600 to-cyan-600' : 'bg-neutral-600'
              }`}
            >
              <span className="sr-only">Enable dark mode</span>
              <motion.span
                layout
                className="inline-block h-4 w-4 rounded-full bg-white shadow-lg"
                animate={{ x: darkMode ? 24 : 4 }}
                transition={{ type: "spring", stiffness: 500, damping: 30 }}
              />
            </motion.button>
          </div>

          {/* Language */}
          <div className="flex items-center justify-between">
            <div className="flex items-center">
              <Globe className="w-5 h-5 mr-3 text-green-400" />
              <div>
                <p className="text-white">Language</p>
                <p className="text-sm text-neutral-400">Choose your preferred language</p>
              </div>
            </div>
            <select
              value={language}
              onChange={(e) => setLanguage(e.target.value)}
              className="bg-neutral-900/50 text-white border border-blue-500/30 rounded px-3 py-1 focus:outline-none focus:border-blue-400 transition-colors"
            >
              <option value="en">English</option>
              <option value="es">Español</option>
              <option value="fr">Français</option>
              <option value="de">Deutsch</option>
            </select>
          </div>
        </div>
      </motion.div>

      {/* Security */}
      <motion.div 
        className="bg-gradient-to-br from-cyan-900/20 to-cyan-800/20 backdrop-blur rounded-lg p-6 mb-6 border border-cyan-500/20"
        variants={itemVariants}
        whileHover={{ scale: 1.01 }}
      >
        <h3 className="text-lg font-semibold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent mb-6">
          Security
        </h3>
        
        <div className="space-y-6">
          <div className="flex items-center justify-between">
            <div className="flex items-center">
              <Shield className="w-5 h-5 mr-3 text-cyan-400" />
              <div>
                <p className="text-white">Two-Factor Authentication</p>
                <p className="text-sm text-neutral-400">Add an extra layer of security to your account</p>
              </div>
            </div>
            <motion.button
              whileTap={{ scale: 0.95 }}
              onClick={() => setTwoFactor(!twoFactor)}
              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                twoFactor ? 'bg-gradient-to-r from-blue-600 to-cyan-600' : 'bg-neutral-600'
              }`}
            >
              <span className="sr-only">Enable two-factor authentication</span>
              <motion.span
                layout
                className="inline-block h-4 w-4 rounded-full bg-white shadow-lg"
                animate={{ x: twoFactor ? 24 : 4 }}
                transition={{ type: "spring", stiffness: 500, damping: 30 }}
              />
            </motion.button>
          </div>
        </div>
      </motion.div>

      {/* Data & Privacy */}
      <motion.div 
        className="bg-gradient-to-br from-green-900/20 to-green-800/20 backdrop-blur rounded-lg p-6 mb-8 border border-green-500/20"
        variants={itemVariants}
        whileHover={{ scale: 1.01 }}
      >
        <h3 className="text-lg font-semibold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent mb-4">
          Data & Privacy
        </h3>
        <p className="text-neutral-400 mb-4">
          Your data is encrypted and stored securely. We never share your personal information with third parties.
        </p>
        <div className="flex gap-3">
          <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
            <Button className="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white border-0">
              Download My Data
            </Button>
          </motion.div>
          <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>
            <Button className="bg-gradient-to-r from-red-600/80 to-red-700/80 hover:from-red-700 hover:to-red-800 text-white border-0">
              Delete Account
            </Button>
          </motion.div>
        </div>
      </motion.div>

      {/* Save Button */}
      <motion.div 
        className="flex justify-end"
        variants={itemVariants}
      >
        <AnimatePresence mode="wait">
          {saved ? (
            <motion.div
              initial={{ opacity: 0, scale: 0.8 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.8 }}
              className="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg"
            >
              <Check className="w-5 h-5" />
              <span>Settings Saved!</span>
            </motion.div>
          ) : (
            <motion.button
              whileHover={{ scale: 1.05 }}
              whileTap={{ scale: 0.95 }}
              onClick={handleSaveSettings}
              className="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-all"
            >
              <Save className="w-4 h-4" />
              Save Settings
            </motion.button>
          )}
        </AnimatePresence>
      </motion.div>
    </motion.div>
  );
}
</file>

<file path="frontend/src/components/tiptap-icons/align-center-icon.tsx">
import * as React from "react"

export const AlignCenterIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M4 18C4 17.4477 4.44772 17 5 17H19C19.5523 17 20 17.4477 20 18C20 18.5523 19.5523 19 19 19H5C4.44772 19 4 18.5523 4 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

AlignCenterIcon.displayName = "AlignCenterIcon"
</file>

<file path="frontend/src/components/tiptap-icons/align-justify-icon.tsx">
import * as React from "react"

export const AlignJustifyIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 18C2 17.4477 2.44772 17 3 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H3C2.44772 19 2 18.5523 2 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

AlignJustifyIcon.displayName = "AlignJustifyIcon"
</file>

<file path="frontend/src/components/tiptap-icons/align-left-icon.tsx">
import * as React from "react"

export const AlignLeftIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 12C2 11.4477 2.44772 11 3 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H3C2.44772 13 2 12.5523 2 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 18C2 17.4477 2.44772 17 3 17H17C17.5523 17 18 17.4477 18 18C18 18.5523 17.5523 19 17 19H3C2.44772 19 2 18.5523 2 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

AlignLeftIcon.displayName = "AlignLeftIcon"
</file>

<file path="frontend/src/components/tiptap-icons/align-right-icon.tsx">
import * as React from "react"

export const AlignRightIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 12C8 11.4477 8.44772 11 9 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H9C8.44772 13 8 12.5523 8 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M6 18C6 17.4477 6.44772 17 7 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H7C6.44772 19 6 18.5523 6 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

AlignRightIcon.displayName = "AlignRightIcon"
</file>

<file path="frontend/src/components/tiptap-icons/arrow-left-icon.tsx">
import * as React from "react"

export const ArrowLeftIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M12.7071 5.70711C13.0976 5.31658 13.0976 4.68342 12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289L4.29289 11.2929C3.90237 11.6834 3.90237 12.3166 4.29289 12.7071L11.2929 19.7071C11.6834 20.0976 12.3166 20.0976 12.7071 19.7071C13.0976 19.3166 13.0976 18.6834 12.7071 18.2929L7.41421 13L19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11L7.41421 11L12.7071 5.70711Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ArrowLeftIcon.displayName = "ArrowLeftIcon"
</file>

<file path="frontend/src/components/tiptap-icons/ban-icon.tsx">
import * as React from "react"

export const BanIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M4.43471 4.01458C4.34773 4.06032 4.26607 4.11977 4.19292 4.19292C4.11977 4.26607 4.06032 4.34773 4.01458 4.43471C2.14611 6.40628 1 9.0693 1 12C1 18.0751 5.92487 23 12 23C14.9306 23 17.5936 21.854 19.5651 19.9856C19.6522 19.9398 19.7339 19.8803 19.8071 19.8071C19.8803 19.7339 19.9398 19.6522 19.9856 19.5651C21.854 17.5936 23 14.9306 23 12C23 5.92487 18.0751 1 12 1C9.0693 1 6.40628 2.14611 4.43471 4.01458ZM6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM17.6177 19.0319C16.078 20.2635 14.125 21 12 21C7.02944 21 3 16.9706 3 12C3 9.87499 3.73647 7.92199 4.9681 6.38231L17.6177 19.0319Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

BanIcon.displayName = "BanIcon"
</file>

<file path="frontend/src/components/tiptap-icons/blockquote-icon.tsx">
import * as React from "react"

export const BlockquoteIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 6C8 5.44772 8.44772 5 9 5H16C16.5523 5 17 5.44772 17 6C17 6.55228 16.5523 7 16 7H9C8.44772 7 8 6.55228 8 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M4 3C4.55228 3 5 3.44772 5 4L5 20C5 20.5523 4.55229 21 4 21C3.44772 21 3 20.5523 3 20L3 4C3 3.44772 3.44772 3 4 3Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 12C8 11.4477 8.44772 11 9 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H9C8.44772 13 8 12.5523 8 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8 18C8 17.4477 8.44772 17 9 17H16C16.5523 17 17 17.4477 17 18C17 18.5523 16.5523 19 16 19H9C8.44772 19 8 18.5523 8 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

BlockquoteIcon.displayName = "BlockquoteIcon"
</file>

<file path="frontend/src/components/tiptap-icons/bold-icon.tsx">
import * as React from "react"

export const BoldIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M6 2.5C5.17157 2.5 4.5 3.17157 4.5 4V20C4.5 20.8284 5.17157 21.5 6 21.5H15C16.4587 21.5 17.8576 20.9205 18.8891 19.8891C19.9205 18.8576 20.5 17.4587 20.5 16C20.5 14.5413 19.9205 13.1424 18.8891 12.1109C18.6781 11.9 18.4518 11.7079 18.2128 11.5359C19.041 10.5492 19.5 9.29829 19.5 8C19.5 6.54131 18.9205 5.14236 17.8891 4.11091C16.8576 3.07946 15.4587 2.5 14 2.5H6ZM14 10.5C14.663 10.5 15.2989 10.2366 15.7678 9.76777C16.2366 9.29893 16.5 8.66304 16.5 8C16.5 7.33696 16.2366 6.70107 15.7678 6.23223C15.2989 5.76339 14.663 5.5 14 5.5H7.5V10.5H14ZM7.5 18.5V13.5H15C15.663 13.5 16.2989 13.7634 16.7678 14.2322C17.2366 14.7011 17.5 15.337 17.5 16C17.5 16.663 17.2366 17.2989 16.7678 17.7678C16.2989 18.2366 15.663 18.5 15 18.5H7.5Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

BoldIcon.displayName = "BoldIcon"
</file>

<file path="frontend/src/components/tiptap-icons/chevron-down-icon.tsx">
import * as React from "react"

export const ChevronDownIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M5.29289 8.29289C5.68342 7.90237 6.31658 7.90237 6.70711 8.29289L12 13.5858L17.2929 8.29289C17.6834 7.90237 18.3166 7.90237 18.7071 8.29289C19.0976 8.68342 19.0976 9.31658 18.7071 9.70711L12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L5.29289 9.70711C4.90237 9.31658 4.90237 8.68342 5.29289 8.29289Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ChevronDownIcon.displayName = "ChevronDownIcon"
</file>

<file path="frontend/src/components/tiptap-icons/close-icon.tsx">
import * as React from "react"

export const CloseIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

CloseIcon.displayName = "CloseIcon"
</file>

<file path="frontend/src/components/tiptap-icons/code-block-icon.tsx">
import * as React from "react"

export const CodeBlockIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M6.70711 2.29289C7.09763 2.68342 7.09763 3.31658 6.70711 3.70711L4.41421 6L6.70711 8.29289C7.09763 8.68342 7.09763 9.31658 6.70711 9.70711C6.31658 10.0976 5.68342 10.0976 5.29289 9.70711L2.29289 6.70711C1.90237 6.31658 1.90237 5.68342 2.29289 5.29289L5.29289 2.29289C5.68342 1.90237 6.31658 1.90237 6.70711 2.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M10.2929 2.29289C10.6834 1.90237 11.3166 1.90237 11.7071 2.29289L14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L11.7071 9.70711C11.3166 10.0976 10.6834 10.0976 10.2929 9.70711C9.90237 9.31658 9.90237 8.68342 10.2929 8.29289L12.5858 6L10.2929 3.70711C9.90237 3.31658 9.90237 2.68342 10.2929 2.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M17 4C17 3.44772 17.4477 3 18 3H19C20.6569 3 22 4.34315 22 6V18C22 19.6569 20.6569 21 19 21H5C3.34315 21 2 19.6569 2 18V12C2 11.4477 2.44772 11 3 11C3.55228 11 4 11.4477 4 12V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V6C20 5.44772 19.5523 5 19 5H18C17.4477 5 17 4.55228 17 4Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

CodeBlockIcon.displayName = "CodeBlockIcon"
</file>

<file path="frontend/src/components/tiptap-icons/code2-icon.tsx">
import * as React from "react"

export const Code2Icon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M15.4545 4.2983C15.6192 3.77115 15.3254 3.21028 14.7983 3.04554C14.2712 2.88081 13.7103 3.1746 13.5455 3.70175L8.54554 19.7017C8.38081 20.2289 8.6746 20.7898 9.20175 20.9545C9.72889 21.1192 10.2898 20.8254 10.4545 20.2983L15.4545 4.2983Z"
          fill="currentColor"
        />
        <path
          d="M6.70711 7.29289C7.09763 7.68342 7.09763 8.31658 6.70711 8.70711L3.41421 12L6.70711 15.2929C7.09763 15.6834 7.09763 16.3166 6.70711 16.7071C6.31658 17.0976 5.68342 17.0976 5.29289 16.7071L1.29289 12.7071C0.902369 12.3166 0.902369 11.6834 1.29289 11.2929L5.29289 7.29289C5.68342 6.90237 6.31658 6.90237 6.70711 7.29289Z"
          fill="currentColor"
        />
        <path
          d="M17.2929 7.29289C17.6834 6.90237 18.3166 6.90237 18.7071 7.29289L22.7071 11.2929C23.0976 11.6834 23.0976 12.3166 22.7071 12.7071L18.7071 16.7071C18.3166 17.0976 17.6834 17.0976 17.2929 16.7071C16.9024 16.3166 16.9024 15.6834 17.2929 15.2929L20.5858 12L17.2929 8.70711C16.9024 8.31658 16.9024 7.68342 17.2929 7.29289Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

Code2Icon.displayName = "Code2Icon"
</file>

<file path="frontend/src/components/tiptap-icons/corner-down-left-icon.tsx">
import * as React from "react"

export const CornerDownLeftIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V11C19 11.7956 18.6839 12.5587 18.1213 13.1213C17.5587 13.6839 16.7956 14 16 14H6.41421L9.70711 10.7071C10.0976 10.3166 10.0976 9.68342 9.70711 9.29289C9.31658 8.90237 8.68342 8.90237 8.29289 9.29289L3.29289 14.2929C2.90237 14.6834 2.90237 15.3166 3.29289 15.7071L8.29289 20.7071C8.68342 21.0976 9.31658 21.0976 9.70711 20.7071C10.0976 20.3166 10.0976 19.6834 9.70711 19.2929L6.41421 16H16C17.3261 16 18.5979 15.4732 19.5355 14.5355C20.4732 13.5979 21 12.3261 21 11V4Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

CornerDownLeftIcon.displayName = "CornerDownLeftIcon"
</file>

<file path="frontend/src/components/tiptap-icons/external-link-icon.tsx">
import * as React from "react"

export const ExternalLinkIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55228 21.5523 10 21 10C20.4477 10 20 9.55228 20 9V5.41421L10.7071 14.7071C10.3166 15.0976 9.68342 15.0976 9.29289 14.7071C8.90237 14.3166 8.90237 13.6834 9.29289 13.2929L18.5858 4H15C14.4477 4 14 3.55228 14 3Z"
          fill="currentColor"
        />
        <path
          d="M4.29289 7.29289C4.48043 7.10536 4.73478 7 5 7H11C11.5523 7 12 6.55228 12 6C12 5.44772 11.5523 5 11 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7957 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V13C19 12.4477 18.5523 12 18 12C17.4477 12 17 12.4477 17 13V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8C4 7.73478 4.10536 7.48043 4.29289 7.29289Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ExternalLinkIcon.displayName = "ExternalLinkIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-five-icon.tsx">
import * as React from "react"

export const HeadingFiveIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z"
          fill="currentColor"
        />
        <path
          d="M16 10C16 9.44772 16.4477 9 17 9H21C21.5523 9 22 9.44772 22 10C22 10.5523 21.5523 11 21 11H18V12H18.3C20.2754 12 22 13.4739 22 15.5C22 17.5261 20.2754 19 18.3 19C17.6457 19 17.0925 18.8643 16.5528 18.5944C16.0588 18.3474 15.8586 17.7468 16.1055 17.2528C16.3525 16.7588 16.9532 16.5586 17.4472 16.8056C17.7074 16.9357 17.9542 17 18.3 17C19.3246 17 20 16.2739 20 15.5C20 14.7261 19.3246 14 18.3 14H17C16.4477 14 16 13.5523 16 13L16 12.9928V10Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingFiveIcon.displayName = "HeadingFiveIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-four-icon.tsx">
import * as React from "react"

export const HeadingFourIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z"
          fill="currentColor"
        />
        <path
          d="M17 9C17.5523 9 18 9.44772 18 10V13H20V10C20 9.44772 20.4477 9 21 9C21.5523 9 22 9.44772 22 10V18C22 18.5523 21.5523 19 21 19C20.4477 19 20 18.5523 20 18V15H17C16.4477 15 16 14.5523 16 14V10C16 9.44772 16.4477 9 17 9Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingFourIcon.displayName = "HeadingFourIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-icon.tsx">
import * as React from "react"

export const HeadingIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M6 3C6.55228 3 7 3.44772 7 4V11H17V4C17 3.44772 17.4477 3 18 3C18.5523 3 19 3.44772 19 4V20C19 20.5523 18.5523 21 18 21C17.4477 21 17 20.5523 17 20V13H7V20C7 20.5523 6.55228 21 6 21C5.44772 21 5 20.5523 5 20V4C5 3.44772 5.44772 3 6 3Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingIcon.displayName = "HeadingIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-one-icon.tsx">
import * as React from "react"

export const HeadingOneIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z"
          fill="currentColor"
        />
        <path
          d="M21.0001 10C21.0001 9.63121 20.7971 9.29235 20.472 9.11833C20.1468 8.94431 19.7523 8.96338 19.4454 9.16795L16.4454 11.168C15.9859 11.4743 15.8617 12.0952 16.1681 12.5547C16.4744 13.0142 17.0953 13.1384 17.5548 12.8321L19.0001 11.8685V18C19.0001 18.5523 19.4478 19 20.0001 19C20.5524 19 21.0001 18.5523 21.0001 18V10Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingOneIcon.displayName = "HeadingOneIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-six-icon.tsx">
import * as React from "react"

export const HeadingSixIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M20.7071 9.29289C21.0976 9.68342 21.0976 10.3166 20.7071 10.7071C19.8392 11.575 19.2179 12.2949 18.7889 13.0073C18.8587 13.0025 18.929 13 19 13C20.6569 13 22 14.3431 22 16C22 17.6569 20.6569 19 19 19C17.3431 19 16 17.6569 16 16C16 14.6007 16.2837 13.4368 16.8676 12.3419C17.4384 11.2717 18.2728 10.3129 19.2929 9.29289C19.6834 8.90237 20.3166 8.90237 20.7071 9.29289ZM19 17C18.4477 17 18 16.5523 18 16C18 15.4477 18.4477 15 19 15C19.5523 15 20 15.4477 20 16C20 16.5523 19.5523 17 19 17Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingSixIcon.displayName = "HeadingSixIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-three-icon.tsx">
import * as React from "react"

export const HeadingThreeIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M19.4608 11.2169C19.1135 11.0531 18.5876 11.0204 18.0069 11.3619C17.5309 11.642 16.918 11.4831 16.638 11.007C16.358 10.531 16.5169 9.91809 16.9929 9.63807C18.1123 8.97962 19.3364 8.94691 20.314 9.40808C21.2839 9.86558 21.9999 10.818 21.9999 12C21.9999 12.7957 21.6838 13.5587 21.1212 14.1213C20.5586 14.6839 19.7956 15 18.9999 15C18.4476 15 17.9999 14.5523 17.9999 14C17.9999 13.4477 18.4476 13 18.9999 13C19.2651 13 19.5195 12.8947 19.707 12.7071C19.8946 12.5196 19.9999 12.2652 19.9999 12C19.9999 11.6821 19.8159 11.3844 19.4608 11.2169Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M18.0001 14C18.0001 13.4477 18.4478 13 19.0001 13C19.7957 13 20.5588 13.3161 21.1214 13.8787C21.684 14.4413 22.0001 15.2043 22.0001 16C22.0001 17.2853 21.2767 18.3971 20.1604 18.8994C19.0257 19.41 17.642 19.2315 16.4001 18.3C15.9582 17.9686 15.8687 17.3418 16.2001 16.9C16.5314 16.4582 17.1582 16.3686 17.6001 16.7C18.3581 17.2685 18.9744 17.24 19.3397 17.0756C19.7234 16.9029 20.0001 16.5147 20.0001 16C20.0001 15.7348 19.8947 15.4804 19.7072 15.2929C19.5196 15.1054 19.2653 15 19.0001 15C18.4478 15 18.0001 14.5523 18.0001 14Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingThreeIcon.displayName = "HeadingThreeIcon"
</file>

<file path="frontend/src/components/tiptap-icons/heading-two-icon.tsx">
import * as React from "react"

export const HeadingTwoIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z"
          fill="currentColor"
        />
        <path
          d="M22.0001 12C22.0001 10.7611 21.1663 9.79297 20.0663 9.42632C18.9547 9.05578 17.6171 9.28724 16.4001 10.2C15.9582 10.5314 15.8687 11.1582 16.2001 11.6C16.5314 12.0418 17.1582 12.1314 17.6001 11.8C18.383 11.2128 19.0455 11.1942 19.4338 11.3237C19.8339 11.457 20.0001 11.7389 20.0001 12C20.0001 12.4839 19.8554 12.7379 19.6537 12.9481C19.4275 13.1837 19.1378 13.363 18.7055 13.6307C18.6313 13.6767 18.553 13.7252 18.4701 13.777C17.9572 14.0975 17.3128 14.5261 16.8163 15.2087C16.3007 15.9177 16.0001 16.8183 16.0001 18C16.0001 18.5523 16.4478 19 17.0001 19H21.0001C21.5523 19 22.0001 18.5523 22.0001 18C22.0001 17.4477 21.5523 17 21.0001 17H18.131C18.21 16.742 18.3176 16.5448 18.4338 16.385C18.6873 16.0364 19.0429 15.7775 19.5301 15.473C19.5898 15.4357 19.6536 15.3966 19.7205 15.3556C20.139 15.0992 20.6783 14.7687 21.0964 14.3332C21.6447 13.7621 22.0001 13.0161 22.0001 12Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HeadingTwoIcon.displayName = "HeadingTwoIcon"
</file>

<file path="frontend/src/components/tiptap-icons/highlighter-icon.tsx">
import * as React from "react"

export const HighlighterIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M14.7072 4.70711C15.0977 4.31658 15.0977 3.68342 14.7072 3.29289C14.3167 2.90237 13.6835 2.90237 13.293 3.29289L8.69294 7.89286L8.68594 7.9C8.13626 8.46079 7.82837 9.21474 7.82837 10C7.82837 10.2306 7.85491 10.4584 7.90631 10.6795L2.29289 16.2929C2.10536 16.4804 2 16.7348 2 17V20C2 20.5523 2.44772 21 3 21H12C12.2652 21 12.5196 20.8946 12.7071 20.7071L15.3205 18.0937C15.5416 18.1452 15.7695 18.1717 16.0001 18.1717C16.7853 18.1717 17.5393 17.8639 18.1001 17.3142L22.7072 12.7071C23.0977 12.3166 23.0977 11.6834 22.7072 11.2929C22.3167 10.9024 21.6835 10.9024 21.293 11.2929L16.6971 15.8887C16.5105 16.0702 16.2605 16.1717 16.0001 16.1717C15.7397 16.1717 15.4897 16.0702 15.303 15.8887L10.1113 10.697C9.92992 10.5104 9.82837 10.2604 9.82837 10C9.82837 9.73963 9.92992 9.48958 10.1113 9.30297L14.7072 4.70711ZM13.5858 17L9.00004 12.4142L4 17.4142V19H11.5858L13.5858 17Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

HighlighterIcon.displayName = "HighlighterIcon"
</file>

<file path="frontend/src/components/tiptap-icons/image-plus-icon.tsx">
import * as React from "react"

export const ImagePlusIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M20 2C20 1.44772 19.5523 1 19 1C18.4477 1 18 1.44772 18 2V4H16C15.4477 4 15 4.44772 15 5C15 5.55228 15.4477 6 16 6H18V8C18 8.55228 18.4477 9 19 9C19.5523 9 20 8.55228 20 8V6H22C22.5523 6 23 5.55228 23 5C23 4.44772 22.5523 4 22 4H20V2ZM5 4C4.73478 4 4.48043 4.10536 4.29289 4.29289C4.10536 4.48043 4 4.73478 4 5V19C4 19.2652 4.10536 19.5196 4.29289 19.7071C4.48043 19.8946 4.73478 20 5 20H5.58579L14.379 11.2068C14.9416 10.6444 15.7045 10.3284 16.5 10.3284C17.2955 10.3284 18.0584 10.6444 18.621 11.2068L20 12.5858V12C20 11.4477 20.4477 11 21 11C21.5523 11 22 11.4477 22 12V14.998C22 14.9994 22 15.0007 22 15.002V19C22 19.7957 21.6839 20.5587 21.1213 21.1213C20.5587 21.6839 19.7957 22 19 22H6.00219C6.00073 22 5.99927 22 5.99781 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H12C12.5523 2 13 2.44772 13 3C13 3.55228 12.5523 4 12 4H5ZM8.41422 20H19C19.2652 20 19.5196 19.8946 19.7071 19.7071C19.8946 19.5196 20 19.2652 20 19V15.4142L17.207 12.6212C17.0195 12.4338 16.7651 12.3284 16.5 12.3284C16.2349 12.3284 15.9806 12.4337 15.7931 12.6211L8.41422 20ZM6.87868 6.87868C7.44129 6.31607 8.20435 6 9 6C9.79565 6 10.5587 6.31607 11.1213 6.87868C11.6839 7.44129 12 8.20435 12 9C12 9.79565 11.6839 10.5587 11.1213 11.1213C10.5587 11.6839 9.79565 12 9 12C8.20435 12 7.44129 11.6839 6.87868 11.1213C6.31607 10.5587 6 9.79565 6 9C6 8.20435 6.31607 7.44129 6.87868 6.87868ZM9 8C8.73478 8 8.48043 8.10536 8.29289 8.29289C8.10536 8.48043 8 8.73478 8 9C8 9.26522 8.10536 9.51957 8.29289 9.70711C8.48043 9.89464 8.73478 10 9 10C9.26522 10 9.51957 9.89464 9.70711 9.70711C9.89464 9.51957 10 9.26522 10 9C10 8.73478 9.89464 8.48043 9.70711 8.29289C9.51957 8.10536 9.26522 8 9 8Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ImagePlusIcon.displayName = "ImagePlusIcon"
</file>

<file path="frontend/src/components/tiptap-icons/italic-icon.tsx">
import * as React from "react"

export const ItalicIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M15.0222 3H19C19.5523 3 20 3.44772 20 4C20 4.55228 19.5523 5 19 5H15.693L10.443 19H14C14.5523 19 15 19.4477 15 20C15 20.5523 14.5523 21 14 21H9.02418C9.00802 21.0004 8.99181 21.0004 8.97557 21H5C4.44772 21 4 20.5523 4 20C4 19.4477 4.44772 19 5 19H8.30704L13.557 5H10C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3H14.9782C14.9928 2.99968 15.0075 2.99967 15.0222 3Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ItalicIcon.displayName = "ItalicIcon"
</file>

<file path="frontend/src/components/tiptap-icons/link-icon.tsx">
import * as React from "react"

export const LinkIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M16.9958 1.06669C15.4226 1.05302 13.907 1.65779 12.7753 2.75074L12.765 2.76086L11.045 4.47086C10.6534 4.86024 10.6515 5.49341 11.0409 5.88507C11.4303 6.27673 12.0634 6.27858 12.4551 5.88919L14.1697 4.18456C14.9236 3.45893 15.9319 3.05752 16.9784 3.06662C18.0272 3.07573 19.0304 3.49641 19.772 4.23804C20.5137 4.97967 20.9344 5.98292 20.9435 7.03171C20.9526 8.07776 20.5515 9.08563 19.8265 9.83941L16.833 12.8329C16.4274 13.2386 15.9393 13.5524 15.4019 13.7529C14.8645 13.9533 14.2903 14.0359 13.7181 13.9949C13.146 13.9539 12.5894 13.7904 12.0861 13.5154C11.5827 13.2404 11.1444 12.8604 10.8008 12.401C10.47 11.9588 9.84333 11.8685 9.40108 12.1993C8.95883 12.5301 8.86849 13.1568 9.1993 13.599C9.71464 14.288 10.3721 14.858 11.1272 15.2705C11.8822 15.683 12.7171 15.9283 13.5753 15.9898C14.4334 16.0513 15.2948 15.9274 16.1009 15.6267C16.907 15.326 17.639 14.8555 18.2473 14.247L21.2472 11.2471L21.2593 11.2347C22.3523 10.1031 22.9571 8.58751 22.9434 7.01433C22.9297 5.44115 22.2987 3.93628 21.1863 2.82383C20.0738 1.71138 18.5689 1.08036 16.9958 1.06669Z"
          fill="currentColor"
        />
        <path
          d="M10.4247 8.0102C9.56657 7.94874 8.70522 8.07256 7.89911 8.37326C7.09305 8.67395 6.36096 9.14458 5.75272 9.753L2.75285 12.7529L2.74067 12.7653C1.64772 13.8969 1.04295 15.4125 1.05662 16.9857C1.07029 18.5589 1.70131 20.0637 2.81376 21.1762C3.9262 22.2886 5.43108 22.9196 7.00426 22.9333C8.57744 22.947 10.0931 22.3422 11.2247 21.2493L11.2371 21.2371L12.9471 19.5271C13.3376 19.1366 13.3376 18.5034 12.9471 18.1129C12.5565 17.7223 11.9234 17.7223 11.5328 18.1129L9.82932 19.8164C9.07555 20.5414 8.06768 20.9425 7.02164 20.9334C5.97285 20.9243 4.9696 20.5036 4.22797 19.762C3.48634 19.0203 3.06566 18.0171 3.05655 16.9683C3.04746 15.9222 3.44851 14.9144 4.17355 14.1606L7.16719 11.167C7.5727 10.7613 8.06071 10.4476 8.59811 10.2471C9.13552 10.0467 9.70976 9.96412 10.2819 10.0051C10.854 10.0461 11.4106 10.2096 11.9139 10.4846C12.4173 10.7596 12.8556 11.1397 13.1992 11.599C13.53 12.0412 14.1567 12.1316 14.5989 11.8007C15.0412 11.4699 15.1315 10.8433 14.8007 10.401C14.2854 9.71205 13.6279 9.14198 12.8729 8.72948C12.1178 8.31697 11.2829 8.07166 10.4247 8.0102Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

LinkIcon.displayName = "LinkIcon"
</file>

<file path="frontend/src/components/tiptap-icons/list-icon.tsx">
import * as React from "react"

export const ListIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 6C7 5.44772 7.44772 5 8 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H8C7.44772 7 7 6.55228 7 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 12C7 11.4477 7.44772 11 8 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H8C7.44772 13 7 12.5523 7 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 18C7 17.4477 7.44772 17 8 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H8C7.44772 19 7 18.5523 7 18Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 5.44772 2.44772 5 3 5H3.01C3.56228 5 4.01 5.44772 4.01 6C4.01 6.55228 3.56228 7 3.01 7H3C2.44772 7 2 6.55228 2 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 12C2 11.4477 2.44772 11 3 11H3.01C3.56228 11 4.01 11.4477 4.01 12C4.01 12.5523 3.56228 13 3.01 13H3C2.44772 13 2 12.5523 2 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 18C2 17.4477 2.44772 17 3 17H3.01C3.56228 17 4.01 17.4477 4.01 18C4.01 18.5523 3.56228 19 3.01 19H3C2.44772 19 2 18.5523 2 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ListIcon.displayName = "ListIcon"
</file>

<file path="frontend/src/components/tiptap-icons/list-ordered-icon.tsx">
import * as React from "react"

export const ListOrderedIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9 6C9 5.44772 9.44772 5 10 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H10C9.44772 7 9 6.55228 9 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9 12C9 11.4477 9.44772 11 10 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H10C9.44772 13 9 12.5523 9 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9 18C9 17.4477 9.44772 17 10 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H10C9.44772 19 9 18.5523 9 18Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M3 6C3 5.44772 3.44772 5 4 5H5C5.55228 5 6 5.44772 6 6V10C6 10.5523 5.55228 11 5 11C4.44772 11 4 10.5523 4 10V7C3.44772 7 3 6.55228 3 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M3 10C3 9.44772 3.44772 9 4 9H6C6.55228 9 7 9.44772 7 10C7 10.5523 6.55228 11 6 11H4C3.44772 11 3 10.5523 3 10Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M5.82219 13.0431C6.54543 13.4047 6.99997 14.1319 6.99997 15C6.99997 15.5763 6.71806 16.0426 6.48747 16.35C6.31395 16.5814 6.1052 16.8044 5.91309 17H5.99997C6.55226 17 6.99997 17.4477 6.99997 18C6.99997 18.5523 6.55226 19 5.99997 19H3.99997C3.44769 19 2.99997 18.5523 2.99997 18C2.99997 17.4237 3.28189 16.9575 3.51247 16.65C3.74323 16.3424 4.03626 16.0494 4.26965 15.8161C4.27745 15.8083 4.2852 15.8006 4.29287 15.7929C4.55594 15.5298 4.75095 15.3321 4.88748 15.15C4.96287 15.0495 4.99021 14.9922 4.99911 14.9714C4.99535 14.9112 4.9803 14.882 4.9739 14.8715C4.96613 14.8588 4.95382 14.845 4.92776 14.8319C4.87723 14.8067 4.71156 14.7623 4.44719 14.8944C3.95321 15.1414 3.35254 14.9412 3.10555 14.4472C2.85856 13.9533 3.05878 13.3526 3.55276 13.1056C4.28839 12.7378 5.12272 12.6934 5.82219 13.0431Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ListOrderedIcon.displayName = "ListOrderedIcon"
</file>

<file path="frontend/src/components/tiptap-icons/list-todo-icon.tsx">
import * as React from "react"

export const ListTodoIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M2 6C2 4.89543 2.89543 4 4 4H8C9.10457 4 10 4.89543 10 6V10C10 11.1046 9.10457 12 8 12H4C2.89543 12 2 11.1046 2 10V6ZM8 6H4V10H8V6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9.70711 14.2929C10.0976 14.6834 10.0976 15.3166 9.70711 15.7071L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071L2.29289 17.7071C1.90237 17.3166 1.90237 16.6834 2.29289 16.2929C2.68342 15.9024 3.31658 15.9024 3.70711 16.2929L5 17.5858L8.29289 14.2929C8.68342 13.9024 9.31658 13.9024 9.70711 14.2929Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12 6C12 5.44772 12.4477 5 13 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H13C12.4477 7 12 6.55228 12 6Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12 12C12 11.4477 12.4477 11 13 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H13C12.4477 13 12 12.5523 12 12Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12 18C12 17.4477 12.4477 17 13 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H13C12.4477 19 12 18.5523 12 18Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

ListTodoIcon.displayName = "ListTodoIcon"
</file>

<file path="frontend/src/components/tiptap-icons/moon-star-icon.tsx">
import * as React from "react"

export const MoonStarIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 11.5955 21.7564 11.2309 21.3827 11.0761C21.009 10.9213 20.5789 11.0069 20.2929 11.2929C19.287 12.2988 17.9226 12.864 16.5 12.864C15.0774 12.864 13.713 12.2988 12.7071 11.2929C11.7012 10.287 11.136 8.92261 11.136 7.5C11.136 6.07739 11.7012 4.71304 12.7071 3.70711C12.9931 3.42111 13.0787 2.99099 12.9239 2.61732C12.7691 2.24364 12.4045 2 12 2ZM7.55544 5.34824C8.27036 4.87055 9.05353 4.51389 9.87357 4.28778C9.39271 5.27979 9.13604 6.37666 9.13604 7.5C9.13604 9.45304 9.91189 11.3261 11.2929 12.7071C12.6739 14.0881 14.547 14.864 16.5 14.864C17.6233 14.864 18.7202 14.6073 19.7122 14.1264C19.4861 14.9465 19.1295 15.7296 18.6518 16.4446C17.7727 17.7602 16.5233 18.7855 15.0615 19.391C13.5997 19.9965 11.9911 20.155 10.4393 19.8463C8.88743 19.5376 7.46197 18.7757 6.34315 17.6569C5.22433 16.538 4.4624 15.1126 4.15372 13.5607C3.84504 12.0089 4.00347 10.4003 4.60897 8.93853C5.21447 7.47672 6.23985 6.22729 7.55544 5.34824Z"
          fill="currentColor"
        />
        <path
          d="M19 2C19.5523 2 20 2.44772 20 3V4H21C21.5523 4 22 4.44772 22 5C22 5.55228 21.5523 6 21 6H20V7C20 7.55228 19.5523 8 19 8C18.4477 8 18 7.55228 18 7V6H17C16.4477 6 16 5.55228 16 5C16 4.44772 16.4477 4 17 4H18V3C18 2.44772 18.4477 2 19 2Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

MoonStarIcon.displayName = "MoonStarIcon"
</file>

<file path="frontend/src/components/tiptap-icons/redo2-icon.tsx">
import * as React from "react"

export const Redo2Icon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M15.7071 2.29289C15.3166 1.90237 14.6834 1.90237 14.2929 2.29289C13.9024 2.68342 13.9024 3.31658 14.2929 3.70711L17.5858 7H9.5C7.77609 7 6.12279 7.68482 4.90381 8.90381C3.68482 10.1228 3 11.7761 3 13.5C3 14.3536 3.16813 15.1988 3.49478 15.9874C3.82144 16.7761 4.30023 17.4926 4.90381 18.0962C6.12279 19.3152 7.77609 20 9.5 20H13C13.5523 20 14 19.5523 14 19C14 18.4477 13.5523 18 13 18H9.5C8.30653 18 7.16193 17.5259 6.31802 16.682C5.90016 16.2641 5.56869 15.768 5.34254 15.2221C5.1164 14.6761 5 14.0909 5 13.5C5 12.3065 5.47411 11.1619 6.31802 10.318C7.16193 9.47411 8.30653 9 9.5 9H17.5858L14.2929 12.2929C13.9024 12.6834 13.9024 13.3166 14.2929 13.7071C14.6834 14.0976 15.3166 14.0976 15.7071 13.7071L20.7071 8.70711C21.0976 8.31658 21.0976 7.68342 20.7071 7.29289L15.7071 2.29289Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

Redo2Icon.displayName = "Redo2Icon"
</file>

<file path="frontend/src/components/tiptap-icons/strike-icon.tsx">
import * as React from "react"

export const StrikeIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M9.00039 3H16.0001C16.5524 3 17.0001 3.44772 17.0001 4C17.0001 4.55229 16.5524 5 16.0001 5H9.00011C8.68006 4.99983 8.36412 5.07648 8.07983 5.22349C7.79555 5.37051 7.55069 5.5836 7.36585 5.84487C7.181 6.10614 7.06155 6.40796 7.01754 6.72497C6.97352 7.04198 7.00623 7.36492 7.11292 7.66667C7.29701 8.18737 7.02414 8.75872 6.50344 8.94281C5.98274 9.1269 5.4114 8.85403 5.2273 8.33333C5.01393 7.72984 4.94851 7.08396 5.03654 6.44994C5.12456 5.81592 5.36346 5.21229 5.73316 4.68974C6.10285 4.1672 6.59256 3.74101 7.16113 3.44698C7.72955 3.15303 8.36047 2.99975 9.00039 3Z"
          fill="currentColor"
        />
        <path
          d="M18 13H20C20.5523 13 21 12.5523 21 12C21 11.4477 20.5523 11 20 11H4C3.44772 11 3 11.4477 3 12C3 12.5523 3.44772 13 4 13H14C14.7956 13 15.5587 13.3161 16.1213 13.8787C16.6839 14.4413 17 15.2044 17 16C17 16.7956 16.6839 17.5587 16.1213 18.1213C15.5587 18.6839 14.7956 19 14 19H6C5.44772 19 5 19.4477 5 20C5 20.5523 5.44772 21 6 21H14C15.3261 21 16.5979 20.4732 17.5355 19.5355C18.4732 18.5979 19 17.3261 19 16C19 14.9119 18.6453 13.8604 18 13Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

StrikeIcon.displayName = "StrikeIcon"
</file>

<file path="frontend/src/components/tiptap-icons/subscript-icon.tsx">
import * as React from "react"

export const SubscriptIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M17.4079 14.3995C18.0284 14.0487 18.7506 13.9217 19.4536 14.0397C20.1566 14.1578 20.7977 14.5138 21.2696 15.0481L21.2779 15.0574L21.2778 15.0575C21.7439 15.5988 22 16.2903 22 17C22 18.0823 21.3962 18.8401 20.7744 19.3404C20.194 19.8073 19.4858 20.141 18.9828 20.378C18.9638 20.387 18.9451 20.3958 18.9266 20.4045C18.4473 20.6306 18.2804 20.7817 18.1922 20.918C18.1773 20.9412 18.1619 20.9681 18.1467 21H21C21.5523 21 22 21.4477 22 22C22 22.5523 21.5523 23 21 23H17C16.4477 23 16 22.5523 16 22C16 21.1708 16.1176 20.4431 16.5128 19.832C16.9096 19.2184 17.4928 18.8695 18.0734 18.5956C18.6279 18.334 19.138 18.0901 19.5207 17.7821C19.8838 17.49 20 17.2477 20 17C20 16.7718 19.9176 16.5452 19.7663 16.3672C19.5983 16.1792 19.3712 16.0539 19.1224 16.0121C18.8722 15.9701 18.6152 16.015 18.3942 16.1394C18.1794 16.2628 18.0205 16.4549 17.9422 16.675C17.7572 17.1954 17.1854 17.4673 16.665 17.2822C16.1446 17.0972 15.8728 16.5254 16.0578 16.005C16.2993 15.3259 16.7797 14.7584 17.4039 14.4018L17.4079 14.3995L17.4079 14.3995Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

SubscriptIcon.displayName = "SubscriptIcon"
</file>

<file path="frontend/src/components/tiptap-icons/sun-icon.tsx">
import * as React from "react"

export const SunIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          d="M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9Z"
          fill="currentColor"
        />
        <path
          d="M13 20C13 19.4477 12.5523 19 12 19C11.4477 19 11 19.4477 11 20V22C11 22.5523 11.4477 23 12 23C12.5523 23 13 22.5523 13 22V20Z"
          fill="currentColor"
        />
        <path
          d="M4.22282 4.22289C4.61335 3.83236 5.24651 3.83236 5.63704 4.22289L7.04704 5.63289C7.43756 6.02341 7.43756 6.65658 7.04704 7.0471C6.65651 7.43762 6.02335 7.43762 5.63283 7.0471L4.22282 5.6371C3.8323 5.24658 3.8323 4.61341 4.22282 4.22289Z"
          fill="currentColor"
        />
        <path
          d="M18.367 16.9529C17.9765 16.5623 17.3433 16.5623 16.9528 16.9529C16.5623 17.3434 16.5623 17.9766 16.9528 18.3671L18.3628 19.7771C18.7533 20.1676 19.3865 20.1676 19.777 19.7771C20.1675 19.3866 20.1675 18.7534 19.777 18.3629L18.367 16.9529Z"
          fill="currentColor"
        />
        <path
          d="M1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12Z"
          fill="currentColor"
        />
        <path
          d="M20 11C19.4477 11 19 11.4477 19 12C19 12.5523 19.4477 13 20 13H22C22.5523 13 23 12.5523 23 12C23 11.4477 22.5523 11 22 11H20Z"
          fill="currentColor"
        />
        <path
          d="M7.04704 16.9529C7.43756 17.3434 7.43756 17.9766 7.04704 18.3671L5.63704 19.7771C5.24651 20.1676 4.61335 20.1676 4.22282 19.7771C3.8323 19.3866 3.8323 18.7534 4.22283 18.3629L5.63283 16.9529C6.02335 16.5623 6.65651 16.5623 7.04704 16.9529Z"
          fill="currentColor"
        />
        <path
          d="M19.777 5.6371C20.1675 5.24657 20.1675 4.61341 19.777 4.22289C19.3865 3.83236 18.7533 3.83236 18.3628 4.22289L16.9528 5.63289C16.5623 6.02341 16.5623 6.65658 16.9528 7.0471C17.3433 7.43762 17.9765 7.43762 18.367 7.0471L19.777 5.6371Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

SunIcon.displayName = "SunIcon"
</file>

<file path="frontend/src/components/tiptap-icons/superscript-icon.tsx">
import * as React from "react"

export const SuperscriptIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z"
          fill="currentColor"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M17.405 1.40657C18.0246 1.05456 18.7463 0.92634 19.4492 1.04344C20.1521 1.16054 20.7933 1.51583 21.2652 2.0497L21.2697 2.05469L21.2696 2.05471C21.7431 2.5975 22 3.28922 22 4.00203C22 5.08579 21.3952 5.84326 20.7727 6.34289C20.1966 6.80531 19.4941 7.13675 18.9941 7.37261C18.9714 7.38332 18.9491 7.39383 18.9273 7.40415C18.4487 7.63034 18.2814 7.78152 18.1927 7.91844C18.1778 7.94155 18.1625 7.96834 18.1473 8.00003H21C21.5523 8.00003 22 8.44774 22 9.00003C22 9.55231 21.5523 10 21 10H17C16.4477 10 16 9.55231 16 9.00003C16 8.17007 16.1183 7.44255 16.5138 6.83161C16.9107 6.21854 17.4934 5.86971 18.0728 5.59591C18.6281 5.33347 19.1376 5.09075 19.5208 4.78316C19.8838 4.49179 20 4.25026 20 4.00203C20 3.77192 19.9178 3.54865 19.7646 3.37182C19.5968 3.18324 19.3696 3.05774 19.1205 3.01625C18.8705 2.97459 18.6137 3.02017 18.3933 3.14533C18.1762 3.26898 18.0191 3.45826 17.9406 3.67557C17.7531 4.19504 17.18 4.46414 16.6605 4.27662C16.141 4.0891 15.8719 3.51596 16.0594 2.99649C16.303 2.3219 16.7817 1.76125 17.4045 1.40689L17.405 1.40657Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

SuperscriptIcon.displayName = "SuperscriptIcon"
</file>

<file path="frontend/src/components/tiptap-icons/trash-icon.tsx">
import * as React from "react"

export const TrashIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 5V4C7 3.17477 7.40255 2.43324 7.91789 1.91789C8.43324 1.40255 9.17477 1 10 1H14C14.8252 1 15.5668 1.40255 16.0821 1.91789C16.5975 2.43324 17 3.17477 17 4V5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H20V20C20 20.8252 19.5975 21.5668 19.0821 22.0821C18.5668 22.5975 17.8252 23 17 23H7C6.17477 23 5.43324 22.5975 4.91789 22.0821C4.40255 21.5668 4 20.8252 4 20V7H3C2.44772 7 2 6.55228 2 6C2 5.44772 2.44772 5 3 5H7ZM9 4C9 3.82523 9.09745 3.56676 9.33211 3.33211C9.56676 3.09745 9.82523 3 10 3H14C14.1748 3 14.4332 3.09745 14.6679 3.33211C14.9025 3.56676 15 3.82523 15 4V5H9V4ZM6 7V20C6 20.1748 6.09745 20.4332 6.33211 20.6679C6.56676 20.9025 6.82523 21 7 21H17C17.1748 21 17.4332 20.9025 17.6679 20.6679C17.9025 20.4332 18 20.1748 18 20V7H6Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

TrashIcon.displayName = "TrashIcon"
</file>

<file path="frontend/src/components/tiptap-icons/underline-icon.tsx">
import * as React from "react"

export const UnderlineIcon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7 4C7 3.44772 6.55228 3 6 3C5.44772 3 5 3.44772 5 4V10C5 11.8565 5.7375 13.637 7.05025 14.9497C8.36301 16.2625 10.1435 17 12 17C13.8565 17 15.637 16.2625 16.9497 14.9497C18.2625 13.637 19 11.8565 19 10V4C19 3.44772 18.5523 3 18 3C17.4477 3 17 3.44772 17 4V10C17 11.3261 16.4732 12.5979 15.5355 13.5355C14.5979 14.4732 13.3261 15 12 15C10.6739 15 9.40215 14.4732 8.46447 13.5355C7.52678 12.5979 7 11.3261 7 10V4ZM4 19C3.44772 19 3 19.4477 3 20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20C21 19.4477 20.5523 19 20 19H4Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

UnderlineIcon.displayName = "UnderlineIcon"
</file>

<file path="frontend/src/components/tiptap-icons/undo2-icon.tsx">
import * as React from "react"

export const Undo2Icon = React.memo(
  ({ className, ...props }: React.SVGProps<SVGSVGElement>) => {
    return (
      <svg
        width="24"
        height="24"
        className={className}
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
        {...props}
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9.70711 3.70711C10.0976 3.31658 10.0976 2.68342 9.70711 2.29289C9.31658 1.90237 8.68342 1.90237 8.29289 2.29289L3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L8.29289 13.7071C8.68342 14.0976 9.31658 14.0976 9.70711 13.7071C10.0976 13.3166 10.0976 12.6834 9.70711 12.2929L6.41421 9H14.5C15.0909 9 15.6761 9.1164 16.2221 9.34254C16.768 9.56869 17.2641 9.90016 17.682 10.318C18.0998 10.7359 18.4313 11.232 18.6575 11.7779C18.8836 12.3239 19 12.9091 19 13.5C19 14.0909 18.8836 14.6761 18.6575 15.2221C18.4313 15.768 18.0998 16.2641 17.682 16.682C17.2641 17.0998 16.768 17.4313 16.2221 17.6575C15.6761 17.8836 15.0909 18 14.5 18H11C10.4477 18 10 18.4477 10 19C10 19.5523 10.4477 20 11 20H14.5C15.3536 20 16.1988 19.8319 16.9874 19.5052C17.7761 19.1786 18.4926 18.6998 19.0962 18.0962C19.6998 17.4926 20.1786 16.7761 20.5052 15.9874C20.8319 15.1988 21 14.3536 21 13.5C21 12.6464 20.8319 11.8012 20.5052 11.0126C20.1786 10.2239 19.6998 9.50739 19.0962 8.90381C18.4926 8.30022 17.7761 7.82144 16.9874 7.49478C16.1988 7.16813 15.3536 7 14.5 7H6.41421L9.70711 3.70711Z"
          fill="currentColor"
        />
      </svg>
    )
  }
)

Undo2Icon.displayName = "Undo2Icon"
</file>

<file path="frontend/src/components/tiptap-node/blockquote-node/blockquote-node.scss">
.tiptap.ProseMirror {
  --blockquote-bg-color: var(--tt-gray-light-900);

  .dark & {
    --blockquote-bg-color: var(--tt-gray-dark-900);
  }
}

/* =====================
     BLOCKQUOTE
     ===================== */
.tiptap.ProseMirror {
  blockquote {
    position: relative;
    padding-left: 1em;
    padding-top: 0.375em;
    padding-bottom: 0.375em;
    margin: 1.5rem 0;

    p {
      margin-top: 0;
    }

    &::before,
    &.is-empty::before {
      position: absolute;
      bottom: 0;
      left: 0;
      top: 0;
      height: 100%;
      width: 0.25em;
      background-color: var(--blockquote-bg-color);
      content: "";
      border-radius: 0;
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-node/code-block-node/code-block-node.scss">
.tiptap.ProseMirror {
  --tt-inline-code-bg-color: var(--tt-gray-light-a-100);
  --tt-inline-code-text-color: var(--tt-gray-light-a-700);
  --tt-inline-code-border-color: var(--tt-gray-light-a-200);
  --tt-codeblock-bg: var(--tt-gray-light-a-50);
  --tt-codeblock-text: var(--tt-gray-light-a-800);
  --tt-codeblock-border: var(--tt-gray-light-a-200);

  .dark & {
    --tt-inline-code-bg-color: var(--tt-gray-dark-a-100);
    --tt-inline-code-text-color: var(--tt-gray-dark-a-700);
    --tt-inline-code-border-color: var(--tt-gray-dark-a-200);
    --tt-codeblock-bg: var(--tt-gray-dark-a-50);
    --tt-codeblock-text: var(--tt-gray-dark-a-800);
    --tt-codeblock-border: var(--tt-gray-dark-a-200);
  }
}

/* =====================
   CODE FORMATTING
   ===================== */
.tiptap.ProseMirror {
  // Inline code
  code {
    background-color: var(--tt-inline-code-bg-color);
    color: var(--tt-inline-code-text-color);
    border: 1px solid var(--tt-inline-code-border-color);
    font-family: "JetBrains Mono NL", monospace;
    font-size: 0.875em;
    line-height: 1.4;
    border-radius: 6px/0.375rem;
    padding: 0.1em 0.2em;
  }

  // Code blocks
  pre {
    background-color: var(--tt-codeblock-bg);
    color: var(--tt-codeblock-text);
    border: 1px solid var(--tt-codeblock-border);
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    padding: 1em;
    font-size: 1rem;
    border-radius: 6px/0.375rem;

    code {
      background-color: transparent;
      border: none;
      border-radius: 0;
      -webkit-text-fill-color: inherit;
      color: inherit;
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-node/heading-node/heading-node.scss">
.tiptap.ProseMirror {
  h1,
  h2,
  h3,
  h4 {
    position: relative;
    color: inherit;
    font-style: inherit;

    &:first-child {
      margin-top: 0;
    }
  }

  h1 {
    font-size: 1.5em;
    font-weight: 700;
    margin-top: 3em;
  }

  h2 {
    font-size: 1.25em;
    font-weight: 700;
    margin-top: 2.5em;
  }

  h3 {
    font-size: 1.125em;
    font-weight: 600;
    margin-top: 2em;
  }

  h4 {
    font-size: 1em;
    font-weight: 600;
    margin-top: 2em;
  }
}
</file>

<file path="frontend/src/components/tiptap-node/horizontal-rule-node/horizontal-rule-node-extension.ts">
import { mergeAttributes } from "@tiptap/react"
import TiptapHorizontalRule from "@tiptap/extension-horizontal-rule"

export const HorizontalRule = TiptapHorizontalRule.extend({
  renderHTML() {
    return [
      "div",
      mergeAttributes(this.options.HTMLAttributes, { "data-type": this.name }),
      ["hr"],
    ]
  },
})

export default HorizontalRule
</file>

<file path="frontend/src/components/tiptap-node/horizontal-rule-node/horizontal-rule-node.scss">
.tiptap.ProseMirror {
  --horizontal-rule-color: var(--tt-gray-light-a-200);

  .dark & {
    --horizontal-rule-color: var(--tt-gray-dark-a-200);
  }
}

/* =====================
     HORIZONTAL RULE
     ===================== */
.tiptap.ProseMirror {
  hr {
    border: none;
    height: 1px;
    background-color: var(--horizontal-rule-color);
  }

  [data-type="horizontalRule"] {
    margin-top: 2.25em;
    margin-bottom: 2.25em;
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
  }
}
</file>

<file path="frontend/src/components/tiptap-node/image-node/image-node.scss">
.tiptap.ProseMirror {
  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  > img:not([data-type="emoji"] img) {
    margin: 2rem 0;
    outline: 0.125rem solid transparent;
    border-radius: var(--tt-radius-xs, 0.25rem);
  }

  img:not([data-type="emoji"] img).ProseMirror-selectednode {
    outline-color: var(--tt-brand-color-500);
  }

  // Thread image handling
  .tiptap-thread:has(> img) {
    margin: 2rem 0;

    img {
      outline: 0.125rem solid transparent;
      border-radius: var(--tt-radius-xs, 0.25rem);
    }
  }

  .tiptap-thread img {
    margin: 0;
  }
}
</file>

<file path="frontend/src/components/tiptap-node/image-upload-node/image-upload-node-extension.ts">
import { mergeAttributes, Node } from "@tiptap/react"
import { ReactNodeViewRenderer } from "@tiptap/react"
import { ImageUploadNode as ImageUploadNodeComponent } from "@/components/tiptap-node/image-upload-node/image-upload-node"
import type { NodeType } from "@tiptap/pm/model"

export type UploadFunction = (
  file: File,
  onProgress?: (event: { progress: number }) => void,
  abortSignal?: AbortSignal
) => Promise<string>

export interface ImageUploadNodeOptions {
  /**
   * The type of the node.
   * @default 'image'
   */
  type?: string | NodeType | undefined
  /**
   * Acceptable file types for upload.
   * @default 'image/*'
   */
  accept?: string
  /**
   * Maximum number of files that can be uploaded.
   * @default 1
   */
  limit?: number
  /**
   * Maximum file size in bytes (0 for unlimited).
   * @default 0
   */
  maxSize?: number
  /**
   * Function to handle the upload process.
   */
  upload?: UploadFunction
  /**
   * Callback for upload errors.
   */
  onError?: (error: Error) => void
  /**
   * Callback for successful uploads.
   */
  onSuccess?: (url: string) => void
  /**
   * HTML attributes to add to the image element.
   * @default {}
   * @example { class: 'foo' }
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  HTMLAttributes: Record<string, any>
}

declare module "@tiptap/react" {
  interface Commands<ReturnType> {
    imageUpload: {
      setImageUploadNode: (options?: ImageUploadNodeOptions) => ReturnType
    }
  }
}

/**
 * A Tiptap node extension that creates an image upload component.
 * @see registry/tiptap-node/image-upload-node/image-upload-node
 */
export const ImageUploadNode = Node.create<ImageUploadNodeOptions>({
  name: "imageUpload",

  group: "block",

  draggable: true,

  atom: true,

  addOptions() {
    return {
      type: "image",
      accept: "image/*",
      limit: 1,
      maxSize: 0,
      upload: undefined,
      onError: undefined,
      onSuccess: undefined,
      HTMLAttributes: {},
    }
  },

  addAttributes() {
    return {
      accept: {
        default: this.options.accept,
      },
      limit: {
        default: this.options.limit,
      },
      maxSize: {
        default: this.options.maxSize,
      },
    }
  },

  parseHTML() {
    return [{ tag: 'div[data-type="image-upload"]' }]
  },

  renderHTML({ HTMLAttributes }) {
    return [
      "div",
      mergeAttributes({ "data-type": "image-upload" }, HTMLAttributes),
    ]
  },

  addNodeView() {
    return ReactNodeViewRenderer(ImageUploadNodeComponent)
  },

  addCommands() {
    return {
      setImageUploadNode:
        (options) =>
        ({ commands }) => {
          return commands.insertContent({
            type: this.name,
            attrs: options,
          })
        },
    }
  },

  /**
   * Adds Enter key handler to trigger the upload component when it's selected.
   */
  addKeyboardShortcuts() {
    return {
      Enter: ({ editor }) => {
        const { selection } = editor.state
        const { nodeAfter } = selection.$from

        if (
          nodeAfter &&
          nodeAfter.type.name === "imageUpload" &&
          editor.isActive("imageUpload")
        ) {
          const nodeEl = editor.view.nodeDOM(selection.$from.pos)
          if (nodeEl && nodeEl instanceof HTMLElement) {
            // Since NodeViewWrapper is wrapped with a div, we need to click the first child
            const firstChild = nodeEl.firstChild
            if (firstChild && firstChild instanceof HTMLElement) {
              firstChild.click()
              return true
            }
          }
        }
        return false
      },
    }
  },
})

export default ImageUploadNode
</file>

<file path="frontend/src/components/tiptap-node/image-upload-node/image-upload-node.scss">
:root {
  --tiptap-image-upload-active: var(--tt-brand-color-500);
  --tiptap-image-upload-progress-bg: var(--tt-brand-color-50);
  --tiptap-image-upload-icon-bg: var(--tt-brand-color-500);

  --tiptap-image-upload-text-color: var(--tt-gray-light-a-700);
  --tiptap-image-upload-subtext-color: var(--tt-gray-light-a-400);
  --tiptap-image-upload-border: var(--tt-gray-light-a-300);
  --tiptap-image-upload-border-hover: var(--tt-gray-light-a-400);
  --tiptap-image-upload-border-active: var(--tt-brand-color-500);

  --tiptap-image-upload-icon-doc-bg: var(--tt-gray-light-a-200);
  --tiptap-image-upload-icon-doc-border: var(--tt-gray-light-300);
  --tiptap-image-upload-icon-color: var(--white);
}

.dark {
  --tiptap-image-upload-active: var(--tt-brand-color-400);
  --tiptap-image-upload-progress-bg: var(--tt-brand-color-900);
  --tiptap-image-upload-icon-bg: var(--tt-brand-color-400);

  --tiptap-image-upload-text-color: var(--tt-gray-dark-a-700);
  --tiptap-image-upload-subtext-color: var(--tt-gray-dark-a-400);
  --tiptap-image-upload-border: var(--tt-gray-dark-a-300);
  --tiptap-image-upload-border-hover: var(--tt-gray-dark-a-400);
  --tiptap-image-upload-border-active: var(--tt-brand-color-400);

  --tiptap-image-upload-icon-doc-bg: var(--tt-gray-dark-a-200);
  --tiptap-image-upload-icon-doc-border: var(--tt-gray-dark-300);
  --tiptap-image-upload-icon-color: var(--black);
}

.tiptap-image-upload {
  margin: 2rem 0;

  input[type="file"] {
    display: none;
  }

  .tiptap-image-upload-dropzone {
    position: relative;
    width: 3.125rem;
    height: 3.75rem;
    display: inline-flex;
    align-items: flex-start;
    justify-content: center;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10 and IE 11 */
    user-select: none;
  }

  .tiptap-image-upload-icon-container {
    position: absolute;
    width: 1.75rem;
    height: 1.75rem;
    bottom: 0;
    right: 0;
    background-color: var(--tiptap-image-upload-icon-bg);
    border-radius: var(--tt-radius-lg, 0.75rem);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .tiptap-image-upload-icon {
    width: 0.875rem;
    height: 0.875rem;
    color: var(--tiptap-image-upload-icon-color);
  }

  .tiptap-image-upload-dropzone-rect-primary {
    color: var(--tiptap-image-upload-icon-doc-bg);
    position: absolute;
  }

  .tiptap-image-upload-dropzone-rect-secondary {
    position: absolute;
    top: 0;
    right: 0.25rem;
    bottom: 0;
    color: var(--tiptap-image-upload-icon-doc-border);
  }

  .tiptap-image-upload-text {
    color: var(--tiptap-image-upload-text-color);
    font-weight: 500;
    font-size: 0.875rem;
    line-height: normal;

    em {
      font-style: normal;
      text-decoration: underline;
    }
  }

  .tiptap-image-upload-subtext {
    color: var(--tiptap-image-upload-subtext-color);
    font-weight: 600;
    line-height: normal;
    font-size: 0.75rem;
  }

  .tiptap-image-upload-drag-area {
    padding: 2rem 1.5rem;
    border: 1.5px dashed var(--tiptap-image-upload-border);
    border-radius: var(--tt-radius-md, 0.5rem);
    text-align: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.2s ease;

    &:hover {
      border-color: var(--tiptap-image-upload-border-hover);
    }

    &.drag-active {
      border-color: var(--tiptap-image-upload-border-active);
      background-color: rgba(
        var(--tiptap-image-upload-active-rgb, 0, 123, 255),
        0.05
      );
    }

    &.drag-over {
      border-color: var(--tiptap-image-upload-border-active);
      background-color: rgba(
        var(--tiptap-image-upload-active-rgb, 0, 123, 255),
        0.1
      );
    }
  }

  .tiptap-image-upload-content {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 0.25rem;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10 and IE 11 */
    user-select: none;
  }

  .tiptap-image-upload-previews {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .tiptap-image-upload-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--tiptap-image-upload-border);
    margin-bottom: 0.5rem;

    span {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--tiptap-image-upload-text-color);
    }
  }

  // === Individual File Preview Styles ===
  .tiptap-image-upload-preview {
    position: relative;
    border-radius: var(--tt-radius-md, 0.5rem);
    overflow: hidden;

    .tiptap-image-upload-progress {
      position: absolute;
      inset: 0;
      background-color: var(--tiptap-image-upload-progress-bg);
      transition: all 300ms ease-out;
    }

    .tiptap-image-upload-preview-content {
      position: relative;
      border: 1px solid var(--tiptap-image-upload-border);
      border-radius: var(--tt-radius-md, 0.5rem);
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .tiptap-image-upload-file-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      height: 2rem;

      .tiptap-image-upload-file-icon {
        padding: 0.5rem;
        background-color: var(--tiptap-image-upload-icon-bg);
        border-radius: var(--tt-radius-lg, 0.75rem);

        svg {
          width: 0.875rem;
          height: 0.875rem;
          color: var(--tiptap-image-upload-icon-color);
        }
      }
    }

    .tiptap-image-upload-details {
      display: flex;
      flex-direction: column;
    }

    .tiptap-image-upload-actions {
      display: flex;
      align-items: center;
      gap: 0.5rem;

      .tiptap-image-upload-progress-text {
        font-size: 0.75rem;
        color: var(--tiptap-image-upload-border-active);
        font-weight: 600;
      }
    }
  }
}

.tiptap.ProseMirror.ProseMirror-focused {
  .ProseMirror-selectednode .tiptap-image-upload-drag-area {
    border-color: var(--tiptap-image-upload-active);
  }
}

@media (max-width: 480px) {
  .tiptap-image-upload {
    .tiptap-image-upload-drag-area {
      padding: 1.5rem 1rem;
    }

    .tiptap-image-upload-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .tiptap-image-upload-preview-content {
      padding: 0.75rem;
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-node/image-upload-node/index.tsx">
export * from "./image-upload-node-extension"
</file>

<file path="frontend/src/components/tiptap-node/list-node/list-node.scss">
.tiptap.ProseMirror {
  --tt-checklist-bg-color: var(--tt-gray-light-a-100);
  --tt-checklist-bg-active-color: var(--tt-gray-light-a-900);
  --tt-checklist-border-color: var(--tt-gray-light-a-200);
  --tt-checklist-border-active-color: var(--tt-gray-light-a-900);
  --tt-checklist-check-icon-color: var(--white);
  --tt-checklist-text-active: var(--tt-gray-light-a-500);

  .dark & {
    --tt-checklist-bg-color: var(--tt-gray-dark-a-100);
    --tt-checklist-bg-active-color: var(--tt-gray-dark-a-900);
    --tt-checklist-border-color: var(--tt-gray-dark-a-200);
    --tt-checklist-border-active-color: var(--tt-gray-dark-a-900);
    --tt-checklist-check-icon-color: var(--black);
    --tt-checklist-text-active: var(--tt-gray-dark-a-500);
  }
}

/* =====================
     LISTS
     ===================== */
.tiptap.ProseMirror {
  // Common list styles
  ol,
  ul {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    padding-left: 1.5em;

    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }

    ol,
    ul {
      margin-top: 0;
      margin-bottom: 0;
    }
  }

  li {
    p {
      margin-top: 0;
      line-height: 1.6;
    }
  }

  // Ordered lists
  ol {
    list-style: decimal;

    ol {
      list-style: lower-alpha;

      ol {
        list-style: lower-roman;
      }
    }
  }

  // Unordered lists
  ul:not([data-type="taskList"]) {
    list-style: disc;

    ul {
      list-style: circle;

      ul {
        list-style: square;
      }
    }
  }

  // Task lists
  ul[data-type="taskList"] {
    padding-left: 0.25em;

    li {
      display: flex;
      flex-direction: row;
      align-items: flex-start;

      &:not(:has(> p:first-child)) {
        list-style-type: none;
      }

      &[data-checked="true"] {
        > div > p {
          opacity: 0.5;
          text-decoration: line-through;
        }

        > div > p span {
          text-decoration: line-through;
        }
      }

      label {
        position: relative;
        padding-top: 0.375rem;
        padding-right: 0.5rem;

        input[type="checkbox"] {
          position: absolute;
          opacity: 0;
          width: 0;
          height: 0;
        }

        span {
          display: block;
          width: 1em;
          height: 1em;
          border: 1px solid var(--tt-checklist-border-color);
          border-radius: var(--tt-radius-xs, 0.25rem);
          position: relative;
          cursor: pointer;
          background-color: var(--tt-checklist-bg-color);
          transition:
            background-color 80ms ease-out,
            border-color 80ms ease-out;

          &::before {
            content: "";
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 0.75em;
            height: 0.75em;
            background-color: var(--tt-checklist-check-icon-color);
            opacity: 0;
            -webkit-mask: url("data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22currentColor%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M21.4142%204.58579C22.1953%205.36683%2022.1953%206.63317%2021.4142%207.41421L10.4142%2018.4142C9.63317%2019.1953%208.36684%2019.1953%207.58579%2018.4142L2.58579%2013.4142C1.80474%2012.6332%201.80474%2011.3668%202.58579%2010.5858C3.36683%209.80474%204.63317%209.80474%205.41421%2010.5858L9%2014.1716L18.5858%204.58579C19.3668%203.80474%2020.6332%203.80474%2021.4142%204.58579Z%22%20fill%3D%22currentColor%22%2F%3E%3C%2Fsvg%3E")
              center/contain no-repeat;
            mask: url("data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22currentColor%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M21.4142%204.58579C22.1953%205.36683%2022.1953%206.63317%2021.4142%207.41421L10.4142%2018.4142C9.63317%2019.1953%208.36684%2019.1953%207.58579%2018.4142L2.58579%2013.4142C1.80474%2012.6332%201.80474%2011.3668%202.58579%2010.5858C3.36683%209.80474%204.63317%209.80474%205.41421%2010.5858L9%2014.1716L18.5858%204.58579C19.3668%203.80474%2020.6332%203.80474%2021.4142%204.58579Z%22%20fill%3D%22currentColor%22%2F%3E%3C%2Fsvg%3E")
              center/contain no-repeat;
          }
        }

        input[type="checkbox"]:checked + span {
          background: var(--tt-checklist-bg-active-color);
          border-color: var(--tt-checklist-border-active-color);

          &::before {
            opacity: 1;
          }
        }
      }

      div {
        flex: 1 1 0%;
        min-width: 0;
      }
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-node/mathematics-node/mathematics-node.scss">
.tiptap.ProseMirror {
  --tiptap-mathematics-bg-color: var(--tt-gray-light-a-200);
  --tiptap-mathematics-border-color: var(--tt-brand-color-500);

  .dark & {
    --tiptap-mathematics-bg-color: var(--tt-gray-dark-a-200);
    --tiptap-mathematics-border-color: var(--tt-brand-color-400);
  }
}

/* =====================
     Mathematics
     ===================== */
.tiptap.ProseMirror {
  .Tiptap-mathematics-editor {
    padding: 0 0.25rem;
    margin: 0 0.25rem;
    border: 1px solid var(--tiptap-mathematics-border-color);
    font-family: monospace;
    font-size: 0.875rem;
  }

  .Tiptap-mathematics-render {
    padding: 0 0.25rem;

    &--editable {
      cursor: pointer;
      transition: background 0.2s;

      &:hover {
        background: var(--tiptap-mathematics-bg-color);
      }
    }
  }

  .Tiptap-mathematics-editor,
  .Tiptap-mathematics-render {
    border-radius: var(--tt-radius-xs);
    display: inline-block;
  }
}
</file>

<file path="frontend/src/components/tiptap-node/paragraph-node/paragraph-node.scss">
.tiptap.ProseMirror {
  --tt-collaboration-carets-label: var(--tt-gray-light-900);
  --link-text-color: var(--tt-brand-color-500);
  --thread-text: var(--tt-gray-light-900);
  --placeholder-color: var(--tt-gray-light-a-400);
  --thread-bg-color: var(--tt-color-yellow-inc-2);

  // ai
  --tiptap-ai-insertion-color: var(--tt-brand-color-600);

  .dark & {
    --tt-collaboration-carets-label: var(--tt-gray-dark-100);
    --link-text-color: var(--tt-brand-color-400);
    --thread-text: var(--tt-gray-dark-900);
    --placeholder-color: var(--tt-gray-dark-a-400);
    --thread-bg-color: var(--tt-color-yellow-dec-2);

    --tiptap-ai-insertion-color: var(--tt-brand-color-400);
  }
}

/* Ensure each top-level node has relative positioning 
   so absolutely positioned placeholders work correctly */
.tiptap.ProseMirror > * {
  position: relative;
}

/* =====================
     CORE EDITOR STYLES
     ===================== */
.tiptap.ProseMirror {
  white-space: pre-wrap;
  outline: none;
  caret-color: var(--tt-cursor-color);

  // Paragraph spacing
  p:not(:first-child) {
    font-size: 1rem;
    line-height: 1.6;
    font-weight: normal;
    margin-top: 20px;
  }

  // Selection styles
  &:not(.readonly):not(.ProseMirror-hideselection) {
    ::selection {
      background-color: var(--tt-selection-color);
    }

    .selection::selection {
      background: transparent;
    }
  }

  .selection {
    display: inline;
    background-color: var(--tt-selection-color);
  }

  // Selected node styles
  .ProseMirror-selectednode:not(img):not(pre):not(.react-renderer) {
    border-radius: var(--tt-radius-md);
    background-color: var(--tt-selection-color);
  }

  .ProseMirror-hideselection {
    caret-color: transparent;
  }

  // Resize cursor
  &.resize-cursor {
    cursor: ew-resize;
    cursor: col-resize;
  }
}

/* =====================
     TEXT DECORATION
     ===================== */
.tiptap.ProseMirror {
  // Text decoration inheritance for spans
  a span {
    text-decoration: underline;
  }

  s span {
    text-decoration: line-through;
  }

  u span {
    text-decoration: underline;
  }

  .tiptap-ai-insertion {
    color: var(--tiptap-ai-insertion-color);
  }
}

/* =====================
     COLLABORATION
     ===================== */
.tiptap.ProseMirror {
  .collaboration-carets {
    &__caret {
      border-right: 1px solid transparent;
      border-left: 1px solid transparent;
      pointer-events: none;
      margin-left: -1px;
      margin-right: -1px;
      position: relative;
      word-break: normal;
    }

    &__label {
      color: var(--tt-collaboration-carets-label);
      border-radius: 0.25rem;
      border-bottom-left-radius: 0;
      font-size: 0.75rem;
      font-weight: 600;
      left: -1px;
      line-height: 1;
      padding: 0.125rem 0.375rem;
      position: absolute;
      top: -1.3em;
      user-select: none;
      white-space: nowrap;
    }
  }
}

/* =====================
     EMOJI
     ===================== */
.tiptap.ProseMirror [data-type="emoji"] img {
  display: inline-block;
  width: 1.25em;
  height: 1.25em;
  cursor: text;
}

/* =====================
     LINKS
     ===================== */
.tiptap.ProseMirror {
  a {
    color: var(--link-text-color);
    text-decoration: underline;
  }
}

/* =====================
     MENTION
     ===================== */
.tiptap.ProseMirror {
  [data-type="mention"] {
    display: inline-block;
    color: var(--tt-brand-color-500);
  }
}

/* =====================
     THREADS
     ===================== */
.tiptap.ProseMirror {
  // Base styles for inline threads
  .tiptap-thread.tiptap-thread--unresolved.tiptap-thread--inline {
    transition:
      color 0.2s ease-in-out,
      background-color 0.2s ease-in-out;
    color: var(--thread-text);
    border-bottom: 2px dashed var(--tt-color-yellow-base);
    font-weight: 600;

    &.tiptap-thread--selected,
    &.tiptap-thread--hovered {
      background-color: var(--thread-bg-color);
      border-bottom-color: transparent;
    }
  }

  // Block thread styles with images
  .tiptap-thread.tiptap-thread--unresolved.tiptap-thread--block {
    &:has(img) {
      outline: 0.125rem solid var(--tt-color-yellow-base);
      border-radius: var(--tt-radius-xs, 0.25rem);
      overflow: hidden;
      width: fit-content;

      &.tiptap-thread--selected {
        outline-width: 0.25rem;
        outline-color: var(--tt-color-yellow-base);
      }

      &.tiptap-thread--hovered {
        outline-width: 0.25rem;
      }
    }

    // Block thread styles without images
    &:not(:has(img)) {
      border-radius: 0.25rem;
      border-bottom: 0.125rem dashed var(--tt-color-yellow-base);
      padding-bottom: 0.5rem;
      outline: 0.25rem solid transparent;

      &.tiptap-thread--hovered,
      &.tiptap-thread--selected {
        background-color: var(--tt-color-yellow-base);
        outline-color: var(--tt-color-yellow-base);
      }
    }
  }

  // Resolved thread styles
  .tiptap-thread.tiptap-thread--resolved.tiptap-thread--inline.tiptap-thread--selected {
    background-color: var(--tt-color-yellow-base);
    border-color: transparent;
    opacity: 0.5;
  }

  // React renderer specific styles
  .tiptap-thread.tiptap-thread--block:has(.react-renderer) {
    margin-top: 3rem;
    margin-bottom: 3rem;
  }
}

/* =====================
     PLACEHOLDER
     ===================== */
.is-empty:not(.with-slash)[data-placeholder]:has(
    > .ProseMirror-trailingBreak:only-child
  )::before {
  content: attr(data-placeholder);
}

.is-empty.with-slash[data-placeholder]:has(
    > .ProseMirror-trailingBreak:only-child
  )::before {
  content: "Write, type '/' for commands…";
  font-style: italic;
}

.is-empty[data-placeholder]:has(
    > .ProseMirror-trailingBreak:only-child
  ):before {
  pointer-events: none;
  height: 0;
  position: absolute;
  width: 100%;
  text-align: inherit;
  left: 0;
  right: 0;
}

.is-empty[data-placeholder]:has(> .ProseMirror-trailingBreak):before {
  color: var(--placeholder-color);
}

/* =====================
     DROPCURSOR
     ===================== */
.prosemirror-dropcursor-block,
.prosemirror-dropcursor-inline {
  background: var(--tt-brand-color-400) !important;
  border-radius: 0.25rem;
  margin-left: -1px;
  margin-right: -1px;
  width: 100%;
  height: 0.188rem;
  cursor: grabbing;
}
</file>

<file path="frontend/src/components/tiptap-templates/simple/data/content.json">
{
  "type": "doc",
  "content": [
    {
      "type": "heading",
      "attrs": {
        "textAlign": null,
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "Getting started"
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": null
      },
      "content": [
        {
          "type": "text",
          "text": "Welcome to the "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "italic"
            },
            {
              "type": "highlight",
              "attrs": {
                "color": "var(--tt-color-highlight-yellow)"
              }
            }
          ],
          "text": "Simple Editor"
        },
        {
          "type": "text",
          "text": " template! This template integrates "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "bold"
            }
          ],
          "text": "open source"
        },
        {
          "type": "text",
          "text": " UI components and Tiptap extensions licensed under "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "bold"
            }
          ],
          "text": "MIT"
        },
        {
          "type": "text",
          "text": "."
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": null
      },
      "content": [
        {
          "type": "text",
          "text": "Integrate it by following the "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "link",
              "attrs": {
                "href": "https://tiptap.dev/docs/ui-components/templates/simple-editor",
                "target": "_blank",
                "rel": "noopener noreferrer nofollow",
                "class": null
              }
            }
          ],
          "text": "Tiptap UI Components docs"
        },
        {
          "type": "text",
          "text": " or using our CLI tool."
        }
      ]
    },
    {
      "type": "codeBlock",
      "attrs": {
        "language": null
      },
      "content": [
        {
          "type": "text",
          "text": "npx @tiptap/cli init"
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "textAlign": null,
        "level": 2
      },
      "content": [
        {
          "type": "text",
          "text": "Features"
        }
      ]
    },
    {
      "type": "blockquote",
      "content": [
        {
          "type": "paragraph",
          "attrs": {
            "textAlign": null
          },
          "content": [
            {
              "type": "text",
              "marks": [
                {
                  "type": "italic"
                }
              ],
              "text": "A fully responsive rich text editor with built-in support for common formatting and layout tools. Type markdown "
            },
            {
              "type": "text",
              "marks": [
                {
                  "type": "code"
                }
              ],
              "text": "**"
            },
            {
              "type": "text",
              "marks": [
                {
                  "type": "italic"
                }
              ],
              "text": " or use keyboard shortcuts "
            },
            {
              "type": "text",
              "marks": [
                {
                  "type": "code"
                }
              ],
              "text": "⌘+B"
            },
            {
              "type": "text",
              "text": " for "
            },
            {
              "type": "text",
              "marks": [
                {
                  "type": "strike"
                }
              ],
              "text": "most"
            },
            {
              "type": "text",
              "text": " all common markdown marks. 🪄"
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": "left"
      },
      "content": [
        {
          "type": "text",
          "text": "Add images, customize alignment, and apply "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "highlight",
              "attrs": {
                "color": "var(--tt-color-highlight-blue)"
              }
            }
          ],
          "text": "advanced formatting"
        },
        {
          "type": "text",
          "text": " to make your writing more engaging and professional."
        }
      ]
    },
    {
      "type": "image",
      "attrs": {
        "src": "/images/tiptap-ui-placeholder-image.jpg",
        "alt": "placeholder-image",
        "title": "placeholder-image"
      }
    },
    {
      "type": "bulletList",
      "content": [
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "attrs": {
                "textAlign": "left"
              },
              "content": [
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "bold"
                    }
                  ],
                  "text": "Superscript"
                },
                {
                  "type": "text",
                  "text": " (x"
                },
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "superscript"
                    }
                  ],
                  "text": "2"
                },
                {
                  "type": "text",
                  "text": ") and "
                },
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "bold"
                    }
                  ],
                  "text": "Subscript"
                },
                {
                  "type": "text",
                  "text": " (H"
                },
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "subscript"
                    }
                  ],
                  "text": "2"
                },
                {
                  "type": "text",
                  "text": "O) for precision."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "attrs": {
                "textAlign": "left"
              },
              "content": [
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "bold"
                    }
                  ],
                  "text": "Typographic conversion"
                },
                {
                  "type": "text",
                  "text": ": automatically convert to "
                },
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ],
                  "text": "->"
                },
                {
                  "type": "text",
                  "text": " an arrow "
                },
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "bold"
                    }
                  ],
                  "text": "→"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": "left"
      },
      "content": [
        {
          "type": "text",
          "marks": [
            {
              "type": "italic"
            }
          ],
          "text": "→ "
        },
        {
          "type": "text",
          "marks": [
            {
              "type": "link",
              "attrs": {
                "href": "https://tiptap.dev/docs/ui-components/templates/simple-editor#features",
                "target": "_blank",
                "rel": "noopener noreferrer nofollow",
                "class": null
              }
            }
          ],
          "text": "Learn more"
        }
      ]
    },
    {
      "type": "horizontalRule"
    },
    {
      "type": "heading",
      "attrs": {
        "textAlign": "left",
        "level": 2
      },
      "content": [
        {
          "type": "text",
          "text": "Make it your own"
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": "left"
      },
      "content": [
        {
          "type": "text",
          "text": "Switch between light and dark modes, and tailor the editor's appearance with customizable CSS to match your style."
        }
      ]
    },
    {
      "type": "taskList",
      "content": [
        {
          "type": "taskItem",
          "attrs": {
            "checked": true
          },
          "content": [
            {
              "type": "paragraph",
              "attrs": {
                "textAlign": "left"
              },
              "content": [
                {
                  "type": "text",
                  "text": "Test template"
                }
              ]
            }
          ]
        },
        {
          "type": "taskItem",
          "attrs": {
            "checked": false
          },
          "content": [
            {
              "type": "paragraph",
              "attrs": {
                "textAlign": "left"
              },
              "content": [
                {
                  "type": "text",
                  "marks": [
                    {
                      "type": "link",
                      "attrs": {
                        "href": "https://tiptap.dev/docs/ui-components/templates/simple-editor",
                        "target": "_blank",
                        "rel": "noopener noreferrer nofollow",
                        "class": null
                      }
                    }
                  ],
                  "text": "Integrate the free template"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "attrs": {
        "textAlign": "left"
      }
    }
  ]
}
</file>

<file path="frontend/src/components/tiptap-templates/simple/theme-toggle.tsx">
import * as React from "react"

// --- UI Primitives ---
import { Button } from "@/components/tiptap-ui-primitive/button"

// --- Icons ---
import { MoonStarIcon } from "@/components/tiptap-icons/moon-star-icon"
import { SunIcon } from "@/components/tiptap-icons/sun-icon"

export function ThemeToggle() {
  const [isDarkMode, setIsDarkMode] = React.useState<boolean>(false)

  React.useEffect(() => {
    const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)")
    const handleChange = () => setIsDarkMode(mediaQuery.matches)
    mediaQuery.addEventListener("change", handleChange)
    return () => mediaQuery.removeEventListener("change", handleChange)
  }, [])

  React.useEffect(() => {
    const initialDarkMode =
      !!document.querySelector('meta[name="color-scheme"][content="dark"]') ||
      window.matchMedia("(prefers-color-scheme: dark)").matches
    setIsDarkMode(initialDarkMode)
  }, [])

  React.useEffect(() => {
    document.documentElement.classList.toggle("dark", isDarkMode)
  }, [isDarkMode])

  const toggleDarkMode = () => setIsDarkMode((isDark) => !isDark)

  return (
    <Button
      onClick={toggleDarkMode}
      aria-label={`Switch to ${isDarkMode ? "light" : "dark"} mode`}
      data-style="ghost"
    >
      {isDarkMode ? (
        <MoonStarIcon className="tiptap-button-icon" />
      ) : (
        <SunIcon className="tiptap-button-icon" />
      )}
    </Button>
  )
}
</file>

<file path="frontend/src/components/tiptap-ui/blockquote-button/blockquote-button.tsx">
import * as React from "react"

// --- Tiptap UI ---
import type { UseBlockquoteConfig } from "@/components/tiptap-ui/blockquote-button"
import {
  BLOCKQUOTE_SHORTCUT_KEY,
  useBlockquote,
} from "@/components/tiptap-ui/blockquote-button"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

export interface BlockquoteButtonProps
  extends Omit<ButtonProps, "type">,
    UseBlockquoteConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function BlockquoteShortcutBadge({
  shortcutKeys = BLOCKQUOTE_SHORTCUT_KEY,
}: {
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for toggling blockquote in a Tiptap editor.
 *
 * For custom button implementations, use the `useBlockquote` hook instead.
 */
export const BlockquoteButton = React.forwardRef<
  HTMLButtonElement,
  BlockquoteButtonProps
>(
  (
    {
      editor: providedEditor,
      text,
      hideWhenUnavailable = false,
      onToggled,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canToggle,
      isActive,
      handleToggle,
      label,
      shortcutKeys,
      Icon,
    } = useBlockquote({
      editor,
      hideWhenUnavailable,
      onToggled,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleToggle()
      },
      [handleToggle, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        tabIndex={-1}
        disabled={!canToggle}
        data-disabled={!canToggle}
        aria-label={label}
        aria-pressed={isActive}
        tooltip="Blockquote"
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <BlockquoteShortcutBadge shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

BlockquoteButton.displayName = "BlockquoteButton"
</file>

<file path="frontend/src/components/tiptap-ui/blockquote-button/index.tsx">
export * from "./blockquote-button"
export * from "./use-blockquote"
</file>

<file path="frontend/src/components/tiptap-ui/code-block-button/code-block-button.tsx">
import * as React from "react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Tiptap UI ---
import type { UseCodeBlockConfig } from "@/components/tiptap-ui/code-block-button"
import {
  CODE_BLOCK_SHORTCUT_KEY,
  useCodeBlock,
} from "@/components/tiptap-ui/code-block-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

export interface CodeBlockButtonProps
  extends Omit<ButtonProps, "type">,
    UseCodeBlockConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function CodeBlockShortcutBadge({
  shortcutKeys = CODE_BLOCK_SHORTCUT_KEY,
}: {
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for toggling code block in a Tiptap editor.
 *
 * For custom button implementations, use the `useCodeBlock` hook instead.
 */
export const CodeBlockButton = React.forwardRef<
  HTMLButtonElement,
  CodeBlockButtonProps
>(
  (
    {
      editor: providedEditor,
      text,
      hideWhenUnavailable = false,
      onToggled,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canToggle,
      isActive,
      handleToggle,
      label,
      shortcutKeys,
      Icon,
    } = useCodeBlock({
      editor,
      hideWhenUnavailable,
      onToggled,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleToggle()
      },
      [handleToggle, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        disabled={!canToggle}
        data-disabled={!canToggle}
        tabIndex={-1}
        aria-label={label}
        aria-pressed={isActive}
        tooltip="Code Block"
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <CodeBlockShortcutBadge shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

CodeBlockButton.displayName = "CodeBlockButton"
</file>

<file path="frontend/src/components/tiptap-ui/code-block-button/index.tsx">
export * from "./code-block-button"
export * from "./use-code-block"
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-button/color-highlight-button.scss">
.tiptap-button-highlight {
  position: relative;
  width: 1.25rem;
  height: 1.25rem;
  margin: 0 -0.175rem;
  border-radius: var(--tt-radius-xl);
  background-color: var(--highlight-color);
  transition: transform 0.2s ease;

  &::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    border-radius: inherit;
    box-sizing: border-box;
    border: 1px solid var(--highlight-color);
    filter: brightness(95%);
    mix-blend-mode: multiply;

    .dark & {
      filter: brightness(140%);
      mix-blend-mode: lighten;
    }
  }
}

.tiptap-button {
  &[data-active-state="on"] {
    .tiptap-button-highlight {
      &::after {
        filter: brightness(80%);
      }
    }
  }

  .dark & {
    &[data-active-state="on"] {
      .tiptap-button-highlight {
        &::after {
          // Andere Eigenschaft für .dark Kontext
          filter: brightness(180%);
        }
      }
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-button/color-highlight-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import type { UseColorHighlightConfig } from "@/components/tiptap-ui/color-highlight-button"
import {
  COLOR_HIGHLIGHT_SHORTCUT_KEY,
  useColorHighlight,
} from "@/components/tiptap-ui/color-highlight-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

// --- Styles ---
import "@/components/tiptap-ui/color-highlight-button/color-highlight-button.scss"

export interface ColorHighlightButtonProps
  extends Omit<ButtonProps, "type">,
    UseColorHighlightConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function ColorHighlightShortcutBadge({
  shortcutKeys = COLOR_HIGHLIGHT_SHORTCUT_KEY,
}: {
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for applying color highlights in a Tiptap editor.
 *
 * For custom button implementations, use the `useColorHighlight` hook instead.
 */
export const ColorHighlightButton = React.forwardRef<
  HTMLButtonElement,
  ColorHighlightButtonProps
>(
  (
    {
      editor: providedEditor,
      highlightColor,
      text,
      hideWhenUnavailable = false,
      onApplied,
      showShortcut = false,
      onClick,
      children,
      style,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canColorHighlight,
      isActive,
      handleColorHighlight,
      label,
      shortcutKeys,
    } = useColorHighlight({
      editor,
      highlightColor,
      label: text || `Toggle highlight (${highlightColor})`,
      hideWhenUnavailable,
      onApplied,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleColorHighlight()
      },
      [handleColorHighlight, onClick]
    )

    const buttonStyle = React.useMemo(
      () =>
        ({
          ...style,
          "--highlight-color": highlightColor,
        }) as React.CSSProperties,
      [highlightColor, style]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        tabIndex={-1}
        disabled={!canColorHighlight}
        data-disabled={!canColorHighlight}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        style={buttonStyle}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <span
              className="tiptap-button-highlight"
              style={
                { "--highlight-color": highlightColor } as React.CSSProperties
              }
            />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <ColorHighlightShortcutBadge shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

ColorHighlightButton.displayName = "ColorHighlightButton"
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-button/index.tsx">
export * from "./color-highlight-button"
export * from "./use-color-highlight"
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-popover/color-highlight-popover.tsx">
import * as React from "react"
import { type Editor } from "@tiptap/react"

// --- Hooks ---
import { useMenuNavigation } from "@/hooks/use-menu-navigation"
import { useIsMobile } from "@/hooks/use-mobile"
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { BanIcon } from "@/components/tiptap-icons/ban-icon"
import { HighlighterIcon } from "@/components/tiptap-icons/highlighter-icon"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button, ButtonGroup } from "@/components/tiptap-ui-primitive/button"
import {
  Popover,
  PopoverTrigger,
  PopoverContent,
} from "@/components/tiptap-ui-primitive/popover"
import { Separator } from "@/components/tiptap-ui-primitive/separator"
import {
  Card,
  CardBody,
  CardItemGroup,
} from "@/components/tiptap-ui-primitive/card"

// --- Tiptap UI ---
import type {
  HighlightColor,
  UseColorHighlightConfig,
} from "@/components/tiptap-ui/color-highlight-button"
import {
  ColorHighlightButton,
  pickHighlightColorsByValue,
  useColorHighlight,
} from "@/components/tiptap-ui/color-highlight-button"

export interface ColorHighlightPopoverContentProps {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Optional colors to use in the highlight popover.
   * If not provided, defaults to a predefined set of colors.
   */
  colors?: HighlightColor[]
}

export interface ColorHighlightPopoverProps
  extends Omit<ButtonProps, "type">,
    Pick<
      UseColorHighlightConfig,
      "editor" | "hideWhenUnavailable" | "onApplied"
    > {
  /**
   * Optional colors to use in the highlight popover.
   * If not provided, defaults to a predefined set of colors.
   */
  colors?: HighlightColor[]
}

export const ColorHighlightPopoverButton = React.forwardRef<
  HTMLButtonElement,
  ButtonProps
>(({ className, children, ...props }, ref) => (
  <Button
    type="button"
    className={className}
    data-style="ghost"
    data-appearance="default"
    role="button"
    tabIndex={-1}
    aria-label="Highlight text"
    tooltip="Highlight"
    ref={ref}
    {...props}
  >
    {children ?? <HighlighterIcon className="tiptap-button-icon" />}
  </Button>
))

ColorHighlightPopoverButton.displayName = "ColorHighlightPopoverButton"

export function ColorHighlightPopoverContent({
  editor,
  colors = pickHighlightColorsByValue([
    "var(--tt-color-highlight-green)",
    "var(--tt-color-highlight-blue)",
    "var(--tt-color-highlight-red)",
    "var(--tt-color-highlight-purple)",
    "var(--tt-color-highlight-yellow)",
  ]),
}: ColorHighlightPopoverContentProps) {
  const { handleRemoveHighlight } = useColorHighlight({ editor })
  const isMobile = useIsMobile()
  const containerRef = React.useRef<HTMLDivElement>(null)

  const menuItems = React.useMemo(
    () => [...colors, { label: "Remove highlight", value: "none" }],
    [colors]
  )

  const { selectedIndex } = useMenuNavigation({
    containerRef,
    items: menuItems,
    orientation: "both",
    onSelect: (item) => {
      if (!containerRef.current) return false
      const highlightedElement = containerRef.current.querySelector(
        '[data-highlighted="true"]'
      ) as HTMLElement
      if (highlightedElement) highlightedElement.click()
      if (item.value === "none") handleRemoveHighlight()
    },
    autoSelectFirstItem: false,
  })

  return (
    <Card
      ref={containerRef}
      tabIndex={0}
      style={isMobile ? { boxShadow: "none", border: 0 } : {}}
    >
      <CardBody style={isMobile ? { padding: 0 } : {}}>
        <CardItemGroup orientation="horizontal">
          <ButtonGroup orientation="horizontal">
            {colors.map((color, index) => (
              <ColorHighlightButton
                key={color.value}
                editor={editor}
                highlightColor={color.value}
                tooltip={color.label}
                aria-label={`${color.label} highlight color`}
                tabIndex={index === selectedIndex ? 0 : -1}
                data-highlighted={selectedIndex === index}
              />
            ))}
          </ButtonGroup>
          <Separator />
          <ButtonGroup orientation="horizontal">
            <Button
              onClick={handleRemoveHighlight}
              aria-label="Remove highlight"
              tooltip="Remove highlight"
              tabIndex={selectedIndex === colors.length ? 0 : -1}
              type="button"
              role="menuitem"
              data-style="ghost"
              data-highlighted={selectedIndex === colors.length}
            >
              <BanIcon className="tiptap-button-icon" />
            </Button>
          </ButtonGroup>
        </CardItemGroup>
      </CardBody>
    </Card>
  )
}

export function ColorHighlightPopover({
  editor: providedEditor,
  colors = pickHighlightColorsByValue([
    "var(--tt-color-highlight-green)",
    "var(--tt-color-highlight-blue)",
    "var(--tt-color-highlight-red)",
    "var(--tt-color-highlight-purple)",
    "var(--tt-color-highlight-yellow)",
  ]),
  hideWhenUnavailable = false,
  onApplied,
  ...props
}: ColorHighlightPopoverProps) {
  const { editor } = useTiptapEditor(providedEditor)
  const [isOpen, setIsOpen] = React.useState(false)
  const { isVisible, canColorHighlight, isActive, label, Icon } =
    useColorHighlight({
      editor,
      hideWhenUnavailable,
      onApplied,
    })

  if (!isVisible) return null

  return (
    <Popover open={isOpen} onOpenChange={setIsOpen}>
      <PopoverTrigger asChild>
        <ColorHighlightPopoverButton
          disabled={!canColorHighlight}
          data-active-state={isActive ? "on" : "off"}
          data-disabled={!canColorHighlight}
          aria-pressed={isActive}
          aria-label={label}
          tooltip={label}
          {...props}
        >
          <Icon className="tiptap-button-icon" />
        </ColorHighlightPopoverButton>
      </PopoverTrigger>
      <PopoverContent aria-label="Highlight colors">
        <ColorHighlightPopoverContent editor={editor} colors={colors} />
      </PopoverContent>
    </Popover>
  )
}

export default ColorHighlightPopover
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-popover/index.tsx">
export * from "./color-highlight-popover"
</file>

<file path="frontend/src/components/tiptap-ui/heading-button/heading-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Tiptap UI ---
import type {
  Level,
  UseHeadingConfig,
} from "@/components/tiptap-ui/heading-button"
import {
  HEADING_SHORTCUT_KEYS,
  useHeading,
} from "@/components/tiptap-ui/heading-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

export interface HeadingButtonProps
  extends Omit<ButtonProps, "type">,
    UseHeadingConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function HeadingShortcutBadge({
  level,
  shortcutKeys = HEADING_SHORTCUT_KEYS[level],
}: {
  level: Level
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for toggling heading in a Tiptap editor.
 *
 * For custom button implementations, use the `useHeading` hook instead.
 */
export const HeadingButton = React.forwardRef<
  HTMLButtonElement,
  HeadingButtonProps
>(
  (
    {
      editor: providedEditor,
      level,
      text,
      hideWhenUnavailable = false,
      onToggled,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canToggle,
      isActive,
      handleToggle,
      label,
      Icon,
      shortcutKeys,
    } = useHeading({
      editor,
      level,
      hideWhenUnavailable,
      onToggled,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleToggle()
      },
      [handleToggle, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        tabIndex={-1}
        disabled={!canToggle}
        data-disabled={!canToggle}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <HeadingShortcutBadge level={level} shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

HeadingButton.displayName = "HeadingButton"
</file>

<file path="frontend/src/components/tiptap-ui/heading-button/index.tsx">
export * from "./heading-button"
export * from "./use-heading"
</file>

<file path="frontend/src/components/tiptap-ui/heading-dropdown-menu/heading-dropdown-menu.tsx">
import * as React from "react"

// --- Icons ---
import { ChevronDownIcon } from "@/components/tiptap-icons/chevron-down-icon"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import { HeadingButton } from "@/components/tiptap-ui/heading-button"
import type { UseHeadingDropdownMenuConfig } from "@/components/tiptap-ui/heading-dropdown-menu"
import { useHeadingDropdownMenu } from "@/components/tiptap-ui/heading-dropdown-menu"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button, ButtonGroup } from "@/components/tiptap-ui-primitive/button"
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
} from "@/components/tiptap-ui-primitive/dropdown-menu"
import { Card, CardBody } from "@/components/tiptap-ui-primitive/card"

export interface HeadingDropdownMenuProps
  extends Omit<ButtonProps, "type">,
    UseHeadingDropdownMenuConfig {
  /**
   * Whether to render the dropdown menu in a portal
   * @default false
   */
  portal?: boolean
  /**
   * Callback for when the dropdown opens or closes
   */
  onOpenChange?: (isOpen: boolean) => void
}

/**
 * Dropdown menu component for selecting heading levels in a Tiptap editor.
 *
 * For custom dropdown implementations, use the `useHeadingDropdownMenu` hook instead.
 */
export const HeadingDropdownMenu = React.forwardRef<
  HTMLButtonElement,
  HeadingDropdownMenuProps
>(
  (
    {
      editor: providedEditor,
      levels = [1, 2, 3, 4, 5, 6],
      hideWhenUnavailable = false,
      portal = false,
      onOpenChange,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const [isOpen, setIsOpen] = React.useState(false)
    const { isVisible, isActive, canToggle, Icon } = useHeadingDropdownMenu({
      editor,
      levels,
      hideWhenUnavailable,
    })

    const handleOpenChange = React.useCallback(
      (open: boolean) => {
        if (!editor || !canToggle) return
        setIsOpen(open)
        onOpenChange?.(open)
      },
      [canToggle, editor, onOpenChange]
    )

    if (!isVisible) {
      return null
    }

    return (
      <DropdownMenu modal open={isOpen} onOpenChange={handleOpenChange}>
        <DropdownMenuTrigger asChild>
          <Button
            type="button"
            data-style="ghost"
            data-active-state={isActive ? "on" : "off"}
            role="button"
            tabIndex={-1}
            disabled={!canToggle}
            data-disabled={!canToggle}
            aria-label="Format text as heading"
            aria-pressed={isActive}
            tooltip="Heading"
            {...buttonProps}
            ref={ref}
          >
            <Icon className="tiptap-button-icon" />
            <ChevronDownIcon className="tiptap-button-dropdown-small" />
          </Button>
        </DropdownMenuTrigger>

        <DropdownMenuContent align="start" portal={portal}>
          <Card>
            <CardBody>
              <ButtonGroup>
                {levels.map((level) => (
                  <DropdownMenuItem key={`heading-${level}`} asChild>
                    <HeadingButton
                      editor={editor}
                      level={level}
                      text={`Heading ${level}`}
                      showTooltip={false}
                    />
                  </DropdownMenuItem>
                ))}
              </ButtonGroup>
            </CardBody>
          </Card>
        </DropdownMenuContent>
      </DropdownMenu>
    )
  }
)

HeadingDropdownMenu.displayName = "HeadingDropdownMenu"

export default HeadingDropdownMenu
</file>

<file path="frontend/src/components/tiptap-ui/heading-dropdown-menu/index.tsx">
export * from "./heading-dropdown-menu"
export * from "./use-heading-dropdown-menu"
</file>

<file path="frontend/src/components/tiptap-ui/image-upload-button/image-upload-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import type { UseImageUploadConfig } from "@/components/tiptap-ui/image-upload-button"
import {
  IMAGE_UPLOAD_SHORTCUT_KEY,
  useImageUpload,
} from "@/components/tiptap-ui/image-upload-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

export interface ImageUploadButtonProps
  extends Omit<ButtonProps, "type">,
    UseImageUploadConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function ImageShortcutBadge({
  shortcutKeys = IMAGE_UPLOAD_SHORTCUT_KEY,
}: {
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for uploading/inserting images in a Tiptap editor.
 *
 * For custom button implementations, use the `useImage` hook instead.
 */
export const ImageUploadButton = React.forwardRef<
  HTMLButtonElement,
  ImageUploadButtonProps
>(
  (
    {
      editor: providedEditor,
      text,
      hideWhenUnavailable = false,
      onInserted,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canInsert,
      handleImage,
      label,
      isActive,
      shortcutKeys,
      Icon,
    } = useImageUpload({
      editor,
      hideWhenUnavailable,
      onInserted,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleImage()
      },
      [handleImage, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        tabIndex={-1}
        disabled={!canInsert}
        data-disabled={!canInsert}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && <ImageShortcutBadge shortcutKeys={shortcutKeys} />}
          </>
        )}
      </Button>
    )
  }
)

ImageUploadButton.displayName = "ImageUploadButton"
</file>

<file path="frontend/src/components/tiptap-ui/image-upload-button/index.tsx">
export * from "./image-upload-button"
export * from "./use-image-upload"
</file>

<file path="frontend/src/components/tiptap-ui/link-popover/index.tsx">
export * from "./link-popover"
export * from "./use-link-popover"
</file>

<file path="frontend/src/components/tiptap-ui/link-popover/use-link-popover.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { LinkIcon } from "@/components/tiptap-icons/link-icon"

// --- Lib ---
import { isMarkInSchema, sanitizeUrl } from "@/lib/tiptap-utils"

/**
 * Configuration for the link popover functionality
 */
export interface UseLinkPopoverConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Whether to hide the link popover when not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called when the link is set.
   */
  onSetLink?: () => void
}

/**
 * Configuration for the link handler functionality
 */
export interface LinkHandlerProps {
  /**
   * The Tiptap editor instance.
   */
  editor: Editor | null
  /**
   * Callback function called when the link is set.
   */
  onSetLink?: () => void
}

/**
 * Checks if a link can be set in the current editor state
 */
export function canSetLink(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  return editor.can().setMark("link")
}

/**
 * Checks if a link is currently active in the editor
 */
export function isLinkActive(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  return editor.isActive("link")
}

/**
 * Determines if the link button should be shown
 */
export function shouldShowLinkButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, hideWhenUnavailable } = props

  const linkInSchema = isMarkInSchema("link", editor)

  if (!linkInSchema || !editor) {
    return false
  }

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canSetLink(editor)
  }

  return true
}

/**
 * Custom hook for handling link operations in a Tiptap editor
 */
export function useLinkHandler(props: LinkHandlerProps) {
  const { editor, onSetLink } = props
  const [url, setUrl] = React.useState<string | null>(null)

  React.useEffect(() => {
    if (!editor) return

    // Get URL immediately on mount
    const { href } = editor.getAttributes("link")

    if (isLinkActive(editor) && url === null) {
      setUrl(href || "")
    }
  }, [editor, url])

  React.useEffect(() => {
    if (!editor) return

    const updateLinkState = () => {
      const { href } = editor.getAttributes("link")
      setUrl(href || "")
    }

    editor.on("selectionUpdate", updateLinkState)
    return () => {
      editor.off("selectionUpdate", updateLinkState)
    }
  }, [editor])

  const setLink = React.useCallback(() => {
    if (!url || !editor) return

    const { selection } = editor.state
    const isEmpty = selection.empty

    let chain = editor.chain().focus()

    chain = chain.extendMarkRange("link").setLink({ href: url })

    if (isEmpty) {
      chain = chain.insertContent({ type: "text", text: url })
    }

    chain.run()

    setUrl(null)

    onSetLink?.()
  }, [editor, onSetLink, url])

  const removeLink = React.useCallback(() => {
    if (!editor) return
    editor
      .chain()
      .focus()
      .extendMarkRange("link")
      .unsetLink()
      .setMeta("preventAutolink", true)
      .run()
    setUrl("")
  }, [editor])

  const openLink = React.useCallback(
    (target: string = "_blank", features: string = "noopener,noreferrer") => {
      if (!url) return

      const safeUrl = sanitizeUrl(url, window.location.href)
      if (safeUrl !== "#") {
        window.open(safeUrl, target, features)
      }
    },
    [url]
  )

  return {
    url: url || "",
    setUrl,
    setLink,
    removeLink,
    openLink,
  }
}

/**
 * Custom hook for link popover state management
 */
export function useLinkState(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}) {
  const { editor, hideWhenUnavailable = false } = props

  const canSet = canSetLink(editor)
  const isActive = isLinkActive(editor)

  const [isVisible, setIsVisible] = React.useState(false)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(
        shouldShowLinkButton({
          editor,
          hideWhenUnavailable,
        })
      )
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable])

  return {
    isVisible,
    canSet,
    isActive,
  }
}

/**
 * Main hook that provides link popover functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MyLinkButton() {
 *   const { isVisible, canSet, isActive, Icon, label } = useLinkPopover()
 *
 *   if (!isVisible) return null
 *
 *   return <button disabled={!canSet}>Link</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedLinkButton() {
 *   const { isVisible, canSet, isActive, Icon, label } = useLinkPopover({
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onSetLink: () => console.log('Link set!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       disabled={!canSet}
 *       aria-label={label}
 *       aria-pressed={isActive}
 *     >
 *       <Icon />
 *       {label}
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useLinkPopover(config?: UseLinkPopoverConfig) {
  const {
    editor: providedEditor,
    hideWhenUnavailable = false,
    onSetLink,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)

  const { isVisible, canSet, isActive } = useLinkState({
    editor,
    hideWhenUnavailable,
  })

  const linkHandler = useLinkHandler({
    editor,
    onSetLink,
  })

  return {
    isVisible,
    canSet,
    isActive,
    label: "Link",
    Icon: LinkIcon,
    ...linkHandler,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/list-button/index.tsx">
export * from "./list-button"
export * from "./use-list"
</file>

<file path="frontend/src/components/tiptap-ui/list-button/list-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

// --- Tiptap UI ---
import type { ListType, UseListConfig } from "@/components/tiptap-ui/list-button"
import { LIST_SHORTCUT_KEYS, useList } from "@/components/tiptap-ui/list-button"

export interface ListButtonProps
  extends Omit<ButtonProps, "type">,
    UseListConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function ListShortcutBadge({
  type,
  shortcutKeys = LIST_SHORTCUT_KEYS[type],
}: {
  type: ListType
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for toggling lists in a Tiptap editor.
 *
 * For custom button implementations, use the `useList` hook instead.
 */
export const ListButton = React.forwardRef<HTMLButtonElement, ListButtonProps>(
  (
    {
      editor: providedEditor,
      type,
      text,
      hideWhenUnavailable = false,
      onToggled,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      canToggle,
      isActive,
      handleToggle,
      label,
      shortcutKeys,
      Icon,
    } = useList({
      editor,
      type,
      hideWhenUnavailable,
      onToggled,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleToggle()
      },
      [handleToggle, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        role="button"
        tabIndex={-1}
        disabled={!canToggle}
        data-disabled={!canToggle}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <ListShortcutBadge type={type} shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

ListButton.displayName = "ListButton"
</file>

<file path="frontend/src/components/tiptap-ui/list-dropdown-menu/index.tsx">
export * from "./list-dropdown-menu"
</file>

<file path="frontend/src/components/tiptap-ui/list-dropdown-menu/list-dropdown-menu.tsx">
import * as React from "react"
import { type Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { ChevronDownIcon } from "@/components/tiptap-icons/chevron-down-icon"

// --- Tiptap UI ---
import { ListButton, type ListType } from "@/components/tiptap-ui/list-button"

import { useListDropdownMenu } from "./use-list-dropdown-menu"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button, ButtonGroup } from "@/components/tiptap-ui-primitive/button"
import {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
} from "@/components/tiptap-ui-primitive/dropdown-menu"
import { Card, CardBody } from "@/components/tiptap-ui-primitive/card"

export interface ListDropdownMenuProps extends Omit<ButtonProps, "type"> {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor
  /**
   * The list types to display in the dropdown.
   */
  types?: ListType[]
  /**
   * Whether the dropdown should be hidden when no list types are available
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback for when the dropdown opens or closes
   */
  onOpenChange?: (isOpen: boolean) => void
  /**
   * Whether to render the dropdown menu in a portal
   * @default false
   */
  portal?: boolean
}

export function ListDropdownMenu({
  editor: providedEditor,
  types = ["bulletList", "orderedList", "taskList"],
  hideWhenUnavailable = false,
  onOpenChange,
  portal = false,
  ...props
}: ListDropdownMenuProps) {
  const { editor } = useTiptapEditor(providedEditor)
  const [isOpen, setIsOpen] = React.useState(false)

  const { filteredLists, canToggle, isActive, isVisible, Icon } =
    useListDropdownMenu({
      editor,
      types,
      hideWhenUnavailable,
    })

  const handleOnOpenChange = React.useCallback(
    (open: boolean) => {
      setIsOpen(open)
      onOpenChange?.(open)
    },
    [onOpenChange]
  )

  if (!isVisible || !editor || !editor.isEditable) {
    return null
  }

  return (
    <DropdownMenu open={isOpen} onOpenChange={handleOnOpenChange}>
      <DropdownMenuTrigger asChild>
        <Button
          type="button"
          data-style="ghost"
          data-active-state={isActive ? "on" : "off"}
          role="button"
          tabIndex={-1}
          disabled={!canToggle}
          data-disabled={!canToggle}
          aria-label="List options"
          tooltip="List"
          {...props}
        >
          <Icon className="tiptap-button-icon" />
          <ChevronDownIcon className="tiptap-button-dropdown-small" />
        </Button>
      </DropdownMenuTrigger>

      <DropdownMenuContent align="start" portal={portal}>
        <Card>
          <CardBody>
            <ButtonGroup>
              {filteredLists.map((option) => (
                <DropdownMenuItem key={option.type} asChild>
                  <ListButton
                    editor={editor}
                    type={option.type}
                    text={option.label}
                    showTooltip={false}
                  />
                </DropdownMenuItem>
              ))}
            </ButtonGroup>
          </CardBody>
        </Card>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}

export default ListDropdownMenu
</file>

<file path="frontend/src/components/tiptap-ui/mark-button/index.tsx">
export * from "./mark-button"
export * from "./use-mark"
</file>

<file path="frontend/src/components/tiptap-ui/mark-button/use-mark.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import { isMarkInSchema, isNodeTypeSelected } from "@/lib/tiptap-utils"

// --- Icons ---
import { BoldIcon } from "@/components/tiptap-icons/bold-icon"
import { Code2Icon } from "@/components/tiptap-icons/code2-icon"
import { ItalicIcon } from "@/components/tiptap-icons/italic-icon"
import { StrikeIcon } from "@/components/tiptap-icons/strike-icon"
import { SubscriptIcon } from "@/components/tiptap-icons/subscript-icon"
import { SuperscriptIcon } from "@/components/tiptap-icons/superscript-icon"
import { UnderlineIcon } from "@/components/tiptap-icons/underline-icon"

export type Mark =
  | "bold"
  | "italic"
  | "strike"
  | "code"
  | "underline"
  | "superscript"
  | "subscript"

/**
 * Configuration for the mark functionality
 */
export interface UseMarkConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The type of mark to toggle
   */
  type: Mark
  /**
   * Whether the button should hide when mark is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful mark toggle.
   */
  onToggled?: () => void
}

export const markIcons = {
  bold: BoldIcon,
  italic: ItalicIcon,
  underline: UnderlineIcon,
  strike: StrikeIcon,
  code: Code2Icon,
  superscript: SuperscriptIcon,
  subscript: SubscriptIcon,
}

export const MARK_SHORTCUT_KEYS: Record<Mark, string> = {
  bold: "mod+b",
  italic: "mod+i",
  underline: "mod+u",
  strike: "mod+shift+s",
  code: "mod+e",
  superscript: "mod+.",
  subscript: "mod+,",
}

/**
 * Checks if a mark can be toggled in the current editor state
 */
export function canToggleMark(editor: Editor | null, type: Mark): boolean {
  if (!editor || !editor.isEditable) return false
  if (!isMarkInSchema(type, editor) || isNodeTypeSelected(editor, ["image"]))
    return false

  return editor.can().toggleMark(type)
}

/**
 * Checks if a mark is currently active
 */
export function isMarkActive(editor: Editor | null, type: Mark): boolean {
  if (!editor || !editor.isEditable) return false
  return editor.isActive(type)
}

/**
 * Toggles a mark in the editor
 */
export function toggleMark(editor: Editor | null, type: Mark): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canToggleMark(editor, type)) return false

  return editor.chain().focus().toggleMark(type).run()
}

/**
 * Determines if the mark button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  type: Mark
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, type, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isMarkInSchema(type, editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canToggleMark(editor, type)
  }

  return true
}

/**
 * Gets the formatted mark name
 */
export function getFormattedMarkName(type: Mark): string {
  return type.charAt(0).toUpperCase() + type.slice(1)
}

/**
 * Custom hook that provides mark functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MySimpleBoldButton() {
 *   const { isVisible, handleMark } = useMark({ type: "bold" })
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleMark}>Bold</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedItalicButton() {
 *   const { isVisible, handleMark, label, isActive } = useMark({
 *     editor: myEditor,
 *     type: "italic",
 *     hideWhenUnavailable: true,
 *     onToggled: () => console.log('Mark toggled!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleMark}
 *       aria-pressed={isActive}
 *       aria-label={label}
 *     >
 *       Italic
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useMark(config: UseMarkConfig) {
  const {
    editor: providedEditor,
    type,
    hideWhenUnavailable = false,
    onToggled,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canToggle = canToggleMark(editor, type)
  const isActive = isMarkActive(editor, type)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, type, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, type, hideWhenUnavailable])

  const handleMark = React.useCallback(() => {
    if (!editor) return false

    const success = toggleMark(editor, type)
    if (success) {
      onToggled?.()
    }
    return success
  }, [editor, type, onToggled])

  return {
    isVisible,
    isActive,
    handleMark,
    canToggle,
    label: getFormattedMarkName(type),
    shortcutKeys: MARK_SHORTCUT_KEYS[type],
    Icon: markIcons[type],
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/text-align-button/index.tsx">
export * from "./text-align-button"
export * from "./use-text-align"
</file>

<file path="frontend/src/components/tiptap-ui/text-align-button/use-text-align.ts">
import * as React from "react"
import type { ChainedCommands } from "@tiptap/react"
import { type Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import {
  isExtensionAvailable,
  isNodeTypeSelected,
} from "@/lib/tiptap-utils"

// --- Icons ---
import { AlignCenterIcon } from "@/components/tiptap-icons/align-center-icon"
import { AlignJustifyIcon } from "@/components/tiptap-icons/align-justify-icon"
import { AlignLeftIcon } from "@/components/tiptap-icons/align-left-icon"
import { AlignRightIcon } from "@/components/tiptap-icons/align-right-icon"

export type TextAlign = "left" | "center" | "right" | "justify"

/**
 * Configuration for the text align functionality
 */
export interface UseTextAlignConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The text alignment to apply.
   */
  align: TextAlign
  /**
   * Whether the button should hide when alignment is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful alignment change.
   */
  onAligned?: () => void
}

export const TEXT_ALIGN_SHORTCUT_KEYS: Record<TextAlign, string> = {
  left: "mod+shift+l",
  center: "mod+shift+e",
  right: "mod+shift+r",
  justify: "mod+shift+j",
}

export const textAlignIcons = {
  left: AlignLeftIcon,
  center: AlignCenterIcon,
  right: AlignRightIcon,
  justify: AlignJustifyIcon,
}

export const textAlignLabels: Record<TextAlign, string> = {
  left: "Align left",
  center: "Align center",
  right: "Align right",
  justify: "Align justify",
}

/**
 * Checks if text alignment can be performed in the current editor state
 */
export function canSetTextAlign(
  editor: Editor | null,
  align: TextAlign
): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isExtensionAvailable(editor, "textAlign") ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  return editor.can().setTextAlign(align)
}

export function hasSetTextAlign(
  commands: ChainedCommands
): commands is ChainedCommands & {
  setTextAlign: (align: TextAlign) => ChainedCommands
} {
  return "setTextAlign" in commands
}

/**
 * Checks if the text alignment is currently active
 */
export function isTextAlignActive(
  editor: Editor | null,
  align: TextAlign
): boolean {
  if (!editor || !editor.isEditable) return false
  return editor.isActive({ textAlign: align })
}

/**
 * Sets text alignment in the editor
 */
export function setTextAlign(editor: Editor | null, align: TextAlign): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canSetTextAlign(editor, align)) return false

  const chain = editor.chain().focus()
  if (hasSetTextAlign(chain)) {
    return chain.setTextAlign(align).run()
  }

  return false
}

/**
 * Determines if the text align button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
  align: TextAlign
}): boolean {
  const { editor, hideWhenUnavailable, align } = props

  if (!editor || !editor.isEditable) return false
  if (!isExtensionAvailable(editor, "textAlign")) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canSetTextAlign(editor, align)
  }

  return true
}

/**
 * Custom hook that provides text align functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MySimpleAlignButton() {
 *   const { isVisible, handleTextAlign } = useTextAlign({ align: "center" })
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleTextAlign}>Align Center</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedAlignButton() {
 *   const { isVisible, handleTextAlign, label, isActive } = useTextAlign({
 *     editor: myEditor,
 *     align: "right",
 *     hideWhenUnavailable: true,
 *     onAligned: () => console.log('Text aligned!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleTextAlign}
 *       aria-pressed={isActive}
 *       aria-label={label}
 *     >
 *       Align Right
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useTextAlign(config: UseTextAlignConfig) {
  const {
    editor: providedEditor,
    align,
    hideWhenUnavailable = false,
    onAligned,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canAlign = canSetTextAlign(editor, align)
  const isActive = isTextAlignActive(editor, align)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, align, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable, align])

  const handleTextAlign = React.useCallback(() => {
    if (!editor) return false

    const success = setTextAlign(editor, align)
    if (success) {
      onAligned?.()
    }
    return success
  }, [editor, align, onAligned])

  return {
    isVisible,
    isActive,
    handleTextAlign,
    canAlign,
    label: textAlignLabels[align],
    shortcutKeys: TEXT_ALIGN_SHORTCUT_KEYS[align],
    Icon: textAlignIcons[align],
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/undo-redo-button/index.tsx">
export * from "./undo-redo-button"
export * from "./use-undo-redo"
</file>

<file path="frontend/src/components/tiptap-ui/undo-redo-button/use-undo-redo.ts">
import * as React from "react"
import { type Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import { isNodeTypeSelected } from "@/lib/tiptap-utils"

// --- Icons ---
import { Redo2Icon } from "@/components/tiptap-icons/redo2-icon"
import { Undo2Icon } from "@/components/tiptap-icons/undo2-icon"

export type UndoRedoAction = "undo" | "redo"

/**
 * Configuration for the history functionality
 */
export interface UseUndoRedoConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The history action to perform (undo or redo).
   */
  action: UndoRedoAction
  /**
   * Whether the button should hide when action is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful action execution.
   */
  onExecuted?: () => void
}

export const UNDO_REDO_SHORTCUT_KEYS: Record<UndoRedoAction, string> = {
  undo: "mod+z",
  redo: "mod+shift+z",
}

export const historyActionLabels: Record<UndoRedoAction, string> = {
  undo: "Undo",
  redo: "Redo",
}

export const historyIcons = {
  undo: Undo2Icon,
  redo: Redo2Icon,
}

/**
 * Checks if a history action can be executed
 */
export function canExecuteUndoRedoAction(
  editor: Editor | null,
  action: UndoRedoAction
): boolean {
  if (!editor || !editor.isEditable) return false
  if (isNodeTypeSelected(editor, ["image"])) return false

  return action === "undo" ? editor.can().undo() : editor.can().redo()
}

/**
 * Executes a history action on the editor
 */
export function executeUndoRedoAction(
  editor: Editor | null,
  action: UndoRedoAction
): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canExecuteUndoRedoAction(editor, action)) return false

  const chain = editor.chain().focus()
  return action === "undo" ? chain.undo().run() : chain.redo().run()
}

/**
 * Determines if the history button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
  action: UndoRedoAction
}): boolean {
  const { editor, hideWhenUnavailable, action } = props

  if (!editor || !editor.isEditable) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canExecuteUndoRedoAction(editor, action)
  }

  return true
}

/**
 * Custom hook that provides history functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MySimpleUndoButton() {
 *   const { isVisible, handleAction } = useHistory({ action: "undo" })
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleAction}>Undo</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedRedoButton() {
 *   const { isVisible, handleAction, label } = useHistory({
 *     editor: myEditor,
 *     action: "redo",
 *     hideWhenUnavailable: true,
 *     onExecuted: () => console.log('Action executed!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleAction}
 *       aria-label={label}
 *     >
 *       Redo
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useUndoRedo(config: UseUndoRedoConfig) {
  const {
    editor: providedEditor,
    action,
    hideWhenUnavailable = false,
    onExecuted,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canExecute = canExecuteUndoRedoAction(editor, action)

  React.useEffect(() => {
    if (!editor) return

    const handleUpdate = () => {
      setIsVisible(shouldShowButton({ editor, hideWhenUnavailable, action }))
    }

    handleUpdate()

    editor.on("transaction", handleUpdate)

    return () => {
      editor.off("transaction", handleUpdate)
    }
  }, [editor, hideWhenUnavailable, action])

  const handleAction = React.useCallback(() => {
    if (!editor) return false

    const success = executeUndoRedoAction(editor, action)
    if (success) {
      onExecuted?.()
    }
    return success
  }, [editor, action, onExecuted])

  return {
    isVisible,
    handleAction,
    canExecute,
    label: historyActionLabels[action],
    shortcutKeys: UNDO_REDO_SHORTCUT_KEYS[action],
    Icon: historyIcons[action],
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/badge/badge-colors.scss">
.tiptap-badge {
  /************************************************** 
    Default 
  **************************************************/

  /* Light mode */
  --tt-badge-border-color: var(--tt-gray-light-a-200);
  --tt-badge-border-color-subdued: var(--tt-gray-light-a-200);
  --tt-badge-border-color-emphasized: var(--tt-gray-light-a-600);
  --tt-badge-text-color: var(--tt-gray-light-a-500);
  --tt-badge-text-color-subdued: var(
    --tt-gray-light-a-400
  ); //less important badge
  --tt-badge-text-color-emphasized: var(
    --tt-gray-light-a-600
  ); //more important badge
  --tt-badge-bg-color: var(--white);
  --tt-badge-bg-color-subdued: var(--white); //less important badge
  --tt-badge-bg-color-emphasized: var(--white); //more important badge
  --tt-badge-icon-color: var(--tt-gray-light-a-500);
  --tt-badge-icon-color-subdued: var(
    --tt-gray-light-a-400
  ); //less important badge
  --tt-badge-icon-color-emphasized: var(
    --tt-brand-color-600
  ); //more important badge

  /* Dark mode */
  .dark & {
    --tt-badge-border-color: var(--tt-gray-dark-a-200);
    --tt-badge-border-color-subdued: var(--tt-gray-dark-a-200);
    --tt-badge-border-color-emphasized: var(--tt-gray-dark-a-500);
    --tt-badge-text-color: var(--tt-gray-dark-a-500);
    --tt-badge-text-color-subdued: var(
      --tt-gray-dark-a-400
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-gray-dark-a-600
    ); //more important badge
    --tt-badge-bg-color: var(--black);
    --tt-badge-bg-color-subdued: var(--black); //less important badge
    --tt-badge-bg-color-emphasized: var(--black); //more important badge
    --tt-badge-icon-color: var(--tt-gray-dark-a-500);
    --tt-badge-icon-color-subdued: var(
      --tt-gray-dark-a-400
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-brand-color-400
    ); //more important badge
  }

  /************************************************** 
    Ghost 
  **************************************************/

  &[data-style="ghost"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-gray-light-a-200);
    --tt-badge-border-color-subdued: var(--tt-gray-light-a-200);
    --tt-badge-border-color-emphasized: var(--tt-gray-light-a-600);
    --tt-badge-text-color: var(--tt-gray-light-a-500);
    --tt-badge-text-color-subdued: var(
      --tt-gray-light-a-400
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-gray-light-a-600
    ); //more important badge
    --tt-badge-bg-color: var(--transparent);
    --tt-badge-bg-color-subdued: var(--transparent); //less important badge
    --tt-badge-bg-color-emphasized: var(--transparent); //more important badge
    --tt-badge-icon-color: var(--tt-gray-light-a-500);
    --tt-badge-icon-color-subdued: var(
      --tt-gray-light-a-400
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-brand-color-600
    ); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-gray-dark-a-200);
      --tt-badge-border-color-subdued: var(--tt-gray-dark-a-200);
      --tt-badge-border-color-emphasized: var(--tt-gray-dark-a-500);
      --tt-badge-text-color: var(--tt-gray-dark-a-500);
      --tt-badge-text-color-subdued: var(
        --tt-gray-dark-a-400
      ); //less important badge
      --tt-badge-text-color-emphasized: var(
        --tt-gray-dark-a-600
      ); //more important badge
      --tt-badge-bg-color: var(--transparent);
      --tt-badge-bg-color-subdued: var(--transparent); //less important badge
      --tt-badge-bg-color-emphasized: var(--transparent); //more important badge
      --tt-badge-icon-color: var(--tt-gray-dark-a-500);
      --tt-badge-icon-color-subdued: var(
        --tt-gray-dark-a-400
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(
        --tt-brand-color-400
      ); //more important badge
    }
  }

  /************************************************** 
    Gray 
  **************************************************/

  &[data-style="gray"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-gray-light-a-200);
    --tt-badge-border-color-subdued: var(--tt-gray-light-a-200);
    --tt-badge-border-color-emphasized: var(--tt-gray-light-a-500);
    --tt-badge-text-color: var(--tt-gray-light-a-500);
    --tt-badge-text-color-subdued: var(
      --tt-gray-light-a-400
    ); //less important badge
    --tt-badge-text-color-emphasized: var(--white); //more important badge
    --tt-badge-bg-color: var(--tt-gray-light-a-100);
    --tt-badge-bg-color-subdued: var(
      --tt-gray-light-a-50
    ); //less important badge
    --tt-badge-bg-color-emphasized: var(
      --tt-gray-light-a-700
    ); //more important badge
    --tt-badge-icon-color: var(--tt-gray-light-a-500);
    --tt-badge-icon-color-subdued: var(
      --tt-gray-light-a-400
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(--white); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-gray-dark-a-200);
      --tt-badge-border-color-subdued: var(--tt-gray-dark-a-200);
      --tt-badge-border-color-emphasized: var(--tt-gray-dark-a-500);
      --tt-badge-text-color: var(--tt-gray-dark-a-500);
      --tt-badge-text-color-subdued: var(
        --tt-gray-dark-a-400
      ); //less important badge
      --tt-badge-text-color-emphasized: var(--black); //more important badge
      --tt-badge-bg-color: var(--tt-gray-dark-a-100);
      --tt-badge-bg-color-subdued: var(
        --tt-gray-dark-a-50
      ); //less important badge
      --tt-badge-bg-color-emphasized: var(
        --tt-gray-dark-a-800
      ); //more important badge
      --tt-badge-icon-color: var(--tt-gray-dark-a-500);
      --tt-badge-icon-color-subdued: var(
        --tt-gray-dark-a-400
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(--black); //more important badge
    }
  }

  /************************************************** 
    Green 
  **************************************************/

  &[data-style="green"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-color-green-inc-2);
    --tt-badge-border-color-subdued: var(--tt-color-green-inc-3);
    --tt-badge-border-color-emphasized: var(--tt-color-green-dec-2);
    --tt-badge-text-color: var(--tt-color-green-dec-3);
    --tt-badge-text-color-subdued: var(
      --tt-color-green-dec-2
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-color-green-inc-5
    ); //more important badge
    --tt-badge-bg-color: var(--tt-color-green-inc-4);
    --tt-badge-bg-color-subdued: var(
      --tt-color-green-inc-5
    ); //less important badge
    --tt-badge-bg-color-emphasized: var(
      --tt-color-green-dec-1
    ); //more important badge
    --tt-badge-icon-color: var(--tt-color-green-dec-3);
    --tt-badge-icon-color-subdued: var(
      --tt-color-green-dec-2
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-color-green-inc-5
    ); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-color-green-dec-2);
      --tt-badge-border-color-subdued: var(--tt-color-green-dec-3);
      --tt-badge-border-color-emphasized: var(--tt-color-green-base);
      --tt-badge-text-color: var(--tt-color-green-inc-3);
      --tt-badge-text-color-subdued: var(
        --tt-color-green-inc-2
      ); //less important badge
      --tt-badge-text-color-emphasized: var(
        --tt-color-green-dec-5
      ); //more important badge
      --tt-badge-bg-color: var(--tt-color-green-dec-4);
      --tt-badge-bg-color-subdued: var(
        --tt-color-green-dec-5
      ); //less important badge
      --tt-badge-bg-color-emphasized: var(
        --tt-color-green-inc-1
      ); //more important badge
      --tt-badge-icon-color: var(--tt-color-green-inc-3);
      --tt-badge-icon-color-subdued: var(
        --tt-color-green-inc-2
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(
        --tt-color-green-dec-5
      ); //more important badge
    }
  }

  /************************************************** 
    Yellow 
  **************************************************/

  &[data-style="yellow"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-color-yellow-inc-2);
    --tt-badge-border-color-subdued: var(--tt-color-yellow-inc-3);
    --tt-badge-border-color-emphasized: var(--tt-color-yellow-dec-1);
    --tt-badge-text-color: var(--tt-color-yellow-dec-3);
    --tt-badge-text-color-subdued: var(
      --tt-color-yellow-dec-2
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-color-yellow-dec-3
    ); //more important badge
    --tt-badge-bg-color: var(--tt-color-yellow-inc-4);
    --tt-badge-bg-color-subdued: var(
      --tt-color-yellow-inc-5
    ); //less important badge
    --tt-badge-bg-color-emphasized: var(
      --tt-color-yellow-base
    ); //more important badge
    --tt-badge-icon-color: var(--tt-color-yellow-dec-3);
    --tt-badge-icon-color-subdued: var(
      --tt-color-yellow-dec-2
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-color-yellow-dec-3
    ); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-color-yellow-dec-2);
      --tt-badge-border-color-subdued: var(--tt-color-yellow-dec-3);
      --tt-badge-border-color-emphasized: var(--tt-color-yellow-inc-1);
      --tt-badge-text-color: var(--tt-color-yellow-inc-3);
      --tt-badge-text-color-subdued: var(
        --tt-color-yellow-inc-2
      ); //less important badge
      --tt-badge-text-color-emphasized: var(
        --tt-color-yellow-dec-3
      ); //more important badge
      --tt-badge-bg-color: var(--tt-color-yellow-dec-4);
      --tt-badge-bg-color-subdued: var(
        --tt-color-yellow-dec-5
      ); //less important badge
      --tt-badge-bg-color-emphasized: var(
        --tt-color-yellow-base
      ); //more important badge
      --tt-badge-icon-color: var(--tt-color-yellow-inc-3);
      --tt-badge-icon-color-subdued: var(
        --tt-color-yellow-inc-2
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(
        --tt-color-yellow-dec-3
      ); //more important badge
    }
  }

  /************************************************** 
    Red 
  **************************************************/

  &[data-style="red"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-color-red-inc-2);
    --tt-badge-border-color-subdued: var(--tt-color-red-inc-3);
    --tt-badge-border-color-emphasized: var(--tt-color-red-dec-2);
    --tt-badge-text-color: var(--tt-color-red-dec-3);
    --tt-badge-text-color-subdued: var(
      --tt-color-red-dec-2
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-color-red-inc-5
    ); //more important badge
    --tt-badge-bg-color: var(--tt-color-red-inc-4);
    --tt-badge-bg-color-subdued: var(
      --tt-color-red-inc-5
    ); //less important badge
    --tt-badge-bg-color-emphasized: var(
      --tt-color-red-dec-1
    ); //more important badge
    --tt-badge-icon-color: var(--tt-color-red-dec-3);
    --tt-badge-icon-color-subdued: var(
      --tt-color-red-dec-2
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-color-red-inc-5
    ); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-color-red-dec-2);
      --tt-badge-border-color-subdued: var(--tt-color-red-dec-3);
      --tt-badge-border-color-emphasized: var(--tt-color-red-base);
      --tt-badge-text-color: var(--tt-color-red-inc-3);
      --tt-badge-text-color-subdued: var(
        --tt-color-red-inc-2
      ); //less important badge
      --tt-badge-text-color-emphasized: var(
        --tt-color-red-dec-5
      ); //more important badge
      --tt-badge-bg-color: var(--tt-color-red-dec-4);
      --tt-badge-bg-color-subdued: var(
        --tt-color-red-dec-5
      ); //less important badge
      --tt-badge-bg-color-emphasized: var(
        --tt-color-red-inc-1
      ); //more important badge
      --tt-badge-icon-color: var(--tt-color-red-inc-3);
      --tt-badge-icon-color-subdued: var(
        --tt-color-red-inc-2
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(
        --tt-color-red-dec-5
      ); //more important badge
    }
  }

  /************************************************** 
    Brand 
  **************************************************/

  &[data-style="brand"] {
    /* Light mode */
    --tt-badge-border-color: var(--tt-brand-color-300);
    --tt-badge-border-color-subdued: var(--tt-brand-color-200);
    --tt-badge-border-color-emphasized: var(--tt-brand-color-600);
    --tt-badge-text-color: var(--tt-brand-color-800);
    --tt-badge-text-color-subdued: var(
      --tt-brand-color-700
    ); //less important badge
    --tt-badge-text-color-emphasized: var(
      --tt-brand-color-50
    ); //more important badge
    --tt-badge-bg-color: var(--tt-brand-color-100);
    --tt-badge-bg-color-subdued: var(
      --tt-brand-color-50
    ); //less important badge
    --tt-badge-bg-color-emphasized: var(
      --tt-brand-color-600
    ); //more important badge
    --tt-badge-icon-color: var(--tt-brand-color-800);
    --tt-badge-icon-color-subdued: var(
      --tt-brand-color-700
    ); //less important badge
    --tt-badge-icon-color-emphasized: var(
      --tt-brand-color-100
    ); //more important badge

    /* Dark mode */
    .dark & {
      --tt-badge-border-color: var(--tt-brand-color-700);
      --tt-badge-border-color-subdued: var(--tt-brand-color-800);
      --tt-badge-border-color-emphasized: var(--tt-brand-color-400);
      --tt-badge-text-color: var(--tt-brand-color-200);
      --tt-badge-text-color-subdued: var(
        --tt-brand-color-300
      ); //less important badge
      --tt-badge-text-color-emphasized: var(
        --tt-brand-color-950
      ); //more important badge
      --tt-badge-bg-color: var(--tt-brand-color-900);
      --tt-badge-bg-color-subdued: var(
        --tt-brand-color-950
      ); //less important badge
      --tt-badge-bg-color-emphasized: var(
        --tt-brand-color-400
      ); //more important badge
      --tt-badge-icon-color: var(--tt-brand-color-200);
      --tt-badge-icon-color-subdued: var(
        --tt-brand-color-300
      ); //less important badge
      --tt-badge-icon-color-emphasized: var(
        --tt-brand-color-900
      ); //more important badge
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/badge/badge-group.scss">
.tiptap-badge-group {
  align-items: center;
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
}

.tiptap-badge-group {
  [data-orientation="vertical"] {
    flex-direction: column;
  }

  [data-orientation="horizontal"] {
    flex-direction: row;
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/badge/badge.scss">
.tiptap-badge {
  font-size: 0.625rem;
  font-weight: 700;
  font-feature-settings:
    "salt" on,
    "cv01" on;
  line-height: 1.15;
  height: 1.25rem;
  min-width: 1.25rem;
  padding: 0.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border: solid 1px;
  border-radius: var(--tt-radius-sm, 0.375rem);
  transition-property: background, color, opacity;
  transition-duration: var(--tt-transition-duration-default);
  transition-timing-function: var(--tt-transition-easing-default);

  /* button size large */
  &[data-size="large"] {
    font-size: 0.75rem;
    height: 1.5rem;
    min-width: 1.5rem;
    padding: 0.375rem;
    border-radius: var(--tt-radius-md, 0.375rem);
  }

  /* button size small */
  &[data-size="small"] {
    height: 1rem;
    min-width: 1rem;
    padding: 0.125rem;
    border-radius: var(--tt-radius-xs, 0.25rem);
  }

  /* trim / expand text of the button */
  .tiptap-badge-text {
    padding: 0 0.125rem;
    flex-grow: 1;
    text-align: left;
  }

  &[data-text-trim="on"] {
    .tiptap-badge-text {
      text-overflow: ellipsis;
      overflow: hidden;
    }
  }

  /* standard icon, what is used */
  .tiptap-badge-icon {
    pointer-events: none;
    flex-shrink: 0;
    width: 0.625rem;
    height: 0.625rem;
  }

  &[data-size="large"] .tiptap-badge-icon {
    width: 0.75rem;
    height: 0.75rem;
  }
}

/* --------------------------------------------
----------- BADGE COLOR SETTINGS -------------
-------------------------------------------- */

.tiptap-badge {
  background-color: var(--tt-badge-bg-color);
  border-color: var(--tt-badge-border-color);
  color: var(--tt-badge-text-color);

  .tiptap-badge-icon {
    color: var(--tt-badge-icon-color);
  }

  /* Emphasized */
  &[data-appearance="emphasized"] {
    background-color: var(--tt-badge-bg-color-emphasized);
    border-color: var(--tt-badge-border-color-emphasized);
    color: var(--tt-badge-text-color-emphasized);

    .tiptap-badge-icon {
      color: var(--tt-badge-icon-color-emphasized);
    }
  }

  /* Subdued */
  &[data-appearance="subdued"] {
    background-color: var(--tt-badge-bg-color-subdued);
    border-color: var(--tt-badge-border-color-subdued);
    color: var(--tt-badge-text-color-subdued);

    .tiptap-badge-icon {
      color: var(--tt-badge-icon-color-subdued);
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/badge/badge.tsx">
import * as React from "react"
import "@/components/tiptap-ui-primitive/badge/badge-colors.scss"
import "@/components/tiptap-ui-primitive/badge/badge-group.scss"
import "@/components/tiptap-ui-primitive/badge/badge.scss"

export interface BadgeProps extends React.HTMLAttributes<HTMLDivElement> {
  variant?: "ghost" | "white" | "gray" | "green" | "default"
  size?: "default" | "small"
  appearance?: "default" | "subdued" | "emphasized"
  trimText?: boolean
}

export const Badge = React.forwardRef<HTMLDivElement, BadgeProps>(
  (
    {
      variant,
      size = "default",
      appearance = "default",
      trimText = false,
      className,
      children,
      ...props
    },
    ref
  ) => {
    return (
      <div
        ref={ref}
        className={`tiptap-badge ${className || ""}`}
        data-style={variant}
        data-size={size}
        data-appearance={appearance}
        data-text-trim={trimText ? "on" : "off"}
        {...props}
      >
        {children}
      </div>
    )
  }
)

Badge.displayName = "Badge"

export default Badge
</file>

<file path="frontend/src/components/tiptap-ui-primitive/badge/index.tsx">
export * from "./badge"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/button/button-colors.scss">
.tiptap-button {
  /************************************************** 
      Default button background color 
  **************************************************/

  /* Light mode */
  --tt-button-default-bg-color: var(--tt-gray-light-a-100);
  --tt-button-hover-bg-color: var(--tt-gray-light-200);
  --tt-button-active-bg-color: var(--tt-gray-light-a-200);
  --tt-button-active-bg-color-emphasized: var(
    --tt-brand-color-100
  ); //more important active state
  --tt-button-active-bg-color-subdued: var(
    --tt-gray-light-a-200
  ); //less important active state
  --tt-button-active-hover-bg-color: var(--tt-gray-light-300);
  --tt-button-active-hover-bg-color-emphasized: var(
    --tt-brand-color-200
  ); //more important active state hover
  --tt-button-active-hover-bg-color-subdued: var(
    --tt-gray-light-a-300
  ); //less important active state hover
  --tt-button-disabled-bg-color: var(--tt-gray-light-a-50);

  /* Dark mode */
  .dark & {
    --tt-button-default-bg-color: var(--tt-gray-dark-a-100);
    --tt-button-hover-bg-color: var(--tt-gray-dark-200);
    --tt-button-active-bg-color: var(--tt-gray-dark-a-200);
    --tt-button-active-bg-color-emphasized: var(
      --tt-brand-color-900
    ); //more important active state
    --tt-button-active-bg-color-subdued: var(
      --tt-gray-dark-a-200
    ); //less important active state
    --tt-button-active-hover-bg-color: var(--tt-gray-dark-300);
    --tt-button-active-hover-bg-color-emphasized: var(
      --tt-brand-color-800
    ); //more important active state hover
    --tt-button-active-hover-bg-color-subdued: var(
      --tt-gray-dark-a-300
    ); //less important active state hover
    --tt-button-disabled-bg-color: var(--tt-gray-dark-a-50);
  }

  /************************************************** 
      Default button text color 
  **************************************************/

  /* Light mode */
  --tt-button-default-text-color: var(--tt-gray-light-a-600);
  --tt-button-hover-text-color: var(--tt-gray-light-a-900);
  --tt-button-active-text-color: var(--tt-gray-light-a-900);
  --tt-button-active-text-color-emphasized: var(--tt-gray-light-a-900);
  --tt-button-active-text-color-subdued: var(--tt-gray-light-a-900);
  --tt-button-disabled-text-color: var(--tt-gray-light-a-400);

  /* Dark mode */
  .dark & {
    --tt-button-default-text-color: var(--tt-gray-dark-a-600);
    --tt-button-hover-text-color: var(--tt-gray-dark-a-900);
    --tt-button-active-text-color: var(--tt-gray-dark-a-900);
    --tt-button-active-text-color-emphasized: var(--tt-gray-dark-a-900);
    --tt-button-active-text-color-subdued: var(--tt-gray-dark-a-900);
    --tt-button-disabled-text-color: var(--tt-gray-dark-a-300);
  }

  /************************************************** 
      Default button icon color 
  **************************************************/

  /* Light mode */
  --tt-button-default-icon-color: var(--tt-gray-light-a-600);
  --tt-button-hover-icon-color: var(--tt-gray-light-a-900);
  --tt-button-active-icon-color: var(--tt-brand-color-500);
  --tt-button-active-icon-color-emphasized: var(--tt-brand-color-600);
  --tt-button-active-icon-color-subdued: var(--tt-gray-light-a-900);
  --tt-button-disabled-icon-color: var(--tt-gray-light-a-400);

  /* Dark mode */
  .dark & {
    --tt-button-default-icon-color: var(--tt-gray-dark-a-600);
    --tt-button-hover-icon-color: var(--tt-gray-dark-a-900);
    --tt-button-active-icon-color: var(--tt-brand-color-400);
    --tt-button-active-icon-color-emphasized: var(--tt-brand-color-400);
    --tt-button-active-icon-color-subdued: var(--tt-gray-dark-a-900);
    --tt-button-disabled-icon-color: var(--tt-gray-dark-a-400);
  }

  /************************************************** 
      Default button subicon color 
  **************************************************/

  /* Light mode */
  --tt-button-default-icon-sub-color: var(--tt-gray-light-a-400);
  --tt-button-hover-icon-sub-color: var(--tt-gray-light-a-500);
  --tt-button-active-icon-sub-color: var(--tt-gray-light-a-400);
  --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-light-a-500);
  --tt-button-active-icon-sub-color-subdued: var(--tt-gray-light-a-400);
  --tt-button-disabled-icon-sub-color: var(--tt-gray-light-a-100);

  /* Dark mode */
  .dark & {
    --tt-button-default-icon-sub-color: var(--tt-gray-dark-a-300);
    --tt-button-hover-icon-sub-color: var(--tt-gray-dark-a-400);
    --tt-button-active-icon-sub-color: var(--tt-gray-dark-a-300);
    --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-dark-a-400);
    --tt-button-active-icon-sub-color-subdued: var(--tt-gray-dark-a-300);
    --tt-button-disabled-icon-sub-color: var(--tt-gray-dark-a-100);
  }

  /************************************************** 
      Default button dropdown / arrows color 
  **************************************************/

  /* Light mode */
  --tt-button-default-dropdown-arrows-color: var(--tt-gray-light-a-600);
  --tt-button-hover-dropdown-arrows-color: var(--tt-gray-light-a-700);
  --tt-button-active-dropdown-arrows-color: var(--tt-gray-light-a-600);
  --tt-button-active-dropdown-arrows-color-emphasized: var(
    --tt-gray-light-a-700
  );
  --tt-button-active-dropdown-arrows-color-subdued: var(--tt-gray-light-a-600);
  --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-light-a-400);

  /* Dark mode */
  .dark & {
    --tt-button-default-dropdown-arrows-color: var(--tt-gray-dark-a-600);
    --tt-button-hover-dropdown-arrows-color: var(--tt-gray-dark-a-700);
    --tt-button-active-dropdown-arrows-color: var(--tt-gray-dark-a-600);
    --tt-button-active-dropdown-arrows-color-emphasized: var(
      --tt-gray-dark-a-700
    );
    --tt-button-active-dropdown-arrows-color-subdued: var(--tt-gray-dark-a-600);
    --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-dark-a-400);
  }

  /* ----------------------------------------------------------------
      --------------------------- GHOST BUTTON --------------------------
      ---------------------------------------------------------------- */

  &[data-style="ghost"] {
    /************************************************** 
        Ghost button background color 
    **************************************************/

    /* Light mode */
    --tt-button-default-bg-color: var(--transparent);
    --tt-button-hover-bg-color: var(--tt-gray-light-200);
    --tt-button-active-bg-color: var(--tt-gray-light-a-100);
    --tt-button-active-bg-color-emphasized: var(
      --tt-brand-color-100
    ); //more important active state
    --tt-button-active-bg-color-subdued: var(
      --tt-gray-light-a-100
    ); //less important active state
    --tt-button-active-hover-bg-color: var(--tt-gray-light-200);
    --tt-button-active-hover-bg-color-emphasized: var(
      --tt-brand-color-200
    ); //more important active state hover
    --tt-button-active-hover-bg-color-subdued: var(
      --tt-gray-light-a-200
    ); //less important active state hover
    --tt-button-disabled-bg-color: var(--transparent);

    /* Dark mode */
    .dark & {
      --tt-button-default-bg-color: var(--transparent);
      --tt-button-hover-bg-color: var(--tt-gray-dark-200);
      --tt-button-active-bg-color: var(--tt-gray-dark-a-100);
      --tt-button-active-bg-color-emphasized: var(
        --tt-brand-color-900
      ); //more important active state
      --tt-button-active-bg-color-subdued: var(
        --tt-gray-dark-a-100
      ); //less important active state
      --tt-button-active-hover-bg-color: var(--tt-gray-dark-200);
      --tt-button-active-hover-bg-color-emphasized: var(
        --tt-brand-color-800
      ); //more important active state hover
      --tt-button-active-hover-bg-color-subdued: var(
        --tt-gray-dark-a-200
      ); //less important active state hover
      --tt-button-disabled-bg-color: var(--transparent);
    }

    /************************************************** 
        Ghost button text color 
    **************************************************/

    /* Light mode */
    --tt-button-default-text-color: var(--tt-gray-light-a-600);
    --tt-button-hover-text-color: var(--tt-gray-light-a-900);
    --tt-button-active-text-color: var(--tt-gray-light-a-900);
    --tt-button-active-text-color-emphasized: var(--tt-gray-light-a-900);
    --tt-button-active-text-color-subdued: var(--tt-gray-light-a-900);
    --tt-button-disabled-text-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-text-color: var(--tt-gray-dark-a-600);
      --tt-button-hover-text-color: var(--tt-gray-dark-a-900);
      --tt-button-active-text-color: var(--tt-gray-dark-a-900);
      --tt-button-active-text-color-emphasized: var(--tt-gray-dark-a-900);
      --tt-button-active-text-color-subdued: var(--tt-gray-dark-a-900);
      --tt-button-disabled-text-color: var(--tt-gray-dark-a-300);
    }

    /************************************************** 
        Ghost button icon color 
    **************************************************/

    /* Light mode */
    --tt-button-default-icon-color: var(--tt-gray-light-a-600);
    --tt-button-hover-icon-color: var(--tt-gray-light-a-900);
    --tt-button-active-icon-color: var(--tt-brand-color-500);
    --tt-button-active-icon-color-emphasized: var(--tt-brand-color-600);
    --tt-button-active-icon-color-subdued: var(--tt-gray-light-a-900);
    --tt-button-disabled-icon-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-icon-color: var(--tt-gray-dark-a-600);
      --tt-button-hover-icon-color: var(--tt-gray-dark-a-900);
      --tt-button-active-icon-color: var(--tt-brand-color-400);
      --tt-button-active-icon-color-emphasized: var(--tt-brand-color-300);
      --tt-button-active-icon-color-subdued: var(--tt-gray-dark-a-900);
      --tt-button-disabled-icon-color: var(--tt-gray-dark-a-400);
    }

    /************************************************** 
        Ghost button subicon color 
    **************************************************/

    /* Light mode */
    --tt-button-default-icon-sub-color: var(--tt-gray-light-a-400);
    --tt-button-hover-icon-sub-color: var(--tt-gray-light-a-500);
    --tt-button-active-icon-sub-color: var(--tt-gray-light-a-400);
    --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-light-a-500);
    --tt-button-active-icon-sub-color-subdued: var(--tt-gray-light-a-400);
    --tt-button-disabled-icon-sub-color: var(--tt-gray-light-a-100);

    /* Dark mode */
    .dark & {
      --tt-button-default-icon-sub-color: var(--tt-gray-dark-a-300);
      --tt-button-hover-icon-sub-color: var(--tt-gray-dark-a-400);
      --tt-button-active-icon-sub-color: var(--tt-gray-dark-a-300);
      --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-dark-a-400);
      --tt-button-active-icon-sub-color-subdued: var(--tt-gray-dark-a-300);
      --tt-button-disabled-icon-sub-color: var(--tt-gray-dark-a-100);
    }

    /************************************************** 
        Ghost button dropdown / arrows color 
    **************************************************/

    /* Light mode */
    --tt-button-default-dropdown-arrows-color: var(--tt-gray-light-a-600);
    --tt-button-hover-dropdown-arrows-color: var(--tt-gray-light-a-700);
    --tt-button-active-dropdown-arrows-color: var(--tt-gray-light-a-600);
    --tt-button-active-dropdown-arrows-color-emphasized: var(
      --tt-gray-light-a-700
    );
    --tt-button-active-dropdown-arrows-color-subdued: var(
      --tt-gray-light-a-600
    );
    --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-dropdown-arrows-color: var(--tt-gray-dark-a-600);
      --tt-button-hover-dropdown-arrows-color: var(--tt-gray-dark-a-700);
      --tt-button-active-dropdown-arrows-color: var(--tt-gray-dark-a-600);
      --tt-button-active-dropdown-arrows-color-emphasized: var(
        --tt-gray-dark-a-700
      );
      --tt-button-active-dropdown-arrows-color-subdued: var(
        --tt-gray-dark-a-600
      );
      --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-dark-a-400);
    }
  }

  /* ----------------------------------------------------------------
      -------------------------- PRIMARY BUTTON -------------------------
      ---------------------------------------------------------------- */

  &[data-style="primary"] {
    /************************************************** 
        Primary button background color 
    **************************************************/

    /* Light mode */
    --tt-button-default-bg-color: var(--tt-brand-color-500);
    --tt-button-hover-bg-color: var(--tt-brand-color-600);
    --tt-button-active-bg-color: var(--tt-brand-color-100);
    --tt-button-active-bg-color-emphasized: var(
      --tt-brand-color-100
    ); //more important active state
    --tt-button-active-bg-color-subdued: var(
      --tt-brand-color-100
    ); //less important active state
    --tt-button-active-hover-bg-color: var(--tt-brand-color-200);
    --tt-button-active-hover-bg-color-emphasized: var(
      --tt-brand-color-200
    ); //more important active state hover
    --tt-button-active-hover-bg-color-subdued: var(
      --tt-brand-color-200
    ); //less important active state hover
    --tt-button-disabled-bg-color: var(--tt-gray-light-a-100);

    /* Dark mode */
    .dark & {
      --tt-button-default-bg-color: var(--tt-brand-color-500);
      --tt-button-hover-bg-color: var(--tt-brand-color-600);
      --tt-button-active-bg-color: var(--tt-brand-color-900);
      --tt-button-active-bg-color-emphasized: var(
        --tt-brand-color-900
      ); //more important active state
      --tt-button-active-bg-color-subdued: var(
        --tt-brand-color-900
      ); //less important active state
      --tt-button-active-hover-bg-color: var(--tt-brand-color-800);
      --tt-button-active-hover-bg-color-emphasized: var(
        --tt-brand-color-800
      ); //more important active state hover
      --tt-button-active-hover-bg-color-subdued: var(
        --tt-brand-color-800
      ); //less important active state hover
      --tt-button-disabled-bg-color: var(--tt-gray-dark-a-100);
    }

    /************************************************** 
        Primary button text color 
    **************************************************/

    /* Light mode */
    --tt-button-default-text-color: var(--white);
    --tt-button-hover-text-color: var(--white);
    --tt-button-active-text-color: var(--tt-gray-light-a-900);
    --tt-button-active-text-color-emphasized: var(--tt-gray-light-a-900);
    --tt-button-active-text-color-subdued: var(--tt-gray-light-a-900);
    --tt-button-disabled-text-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-text-color: var(--white);
      --tt-button-hover-text-color: var(--white);
      --tt-button-active-text-color: var(--tt-gray-dark-a-900);
      --tt-button-active-text-color-emphasized: var(--tt-gray-dark-a-900);
      --tt-button-active-text-color-subdued: var(--tt-gray-dark-a-900);
      --tt-button-disabled-text-color: var(--tt-gray-dark-a-300);
    }

    /************************************************** 
        Primary button icon color 
    **************************************************/

    /* Light mode */
    --tt-button-default-icon-color: var(--white);
    --tt-button-hover-icon-color: var(--white);
    --tt-button-active-icon-color: var(--tt-brand-color-600);
    --tt-button-active-icon-color-emphasized: var(--tt-brand-color-600);
    --tt-button-active-icon-color-subdued: var(--tt-brand-color-600);
    --tt-button-disabled-icon-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-icon-color: var(--white);
      --tt-button-hover-icon-color: var(--white);
      --tt-button-active-icon-color: var(--tt-brand-color-400);
      --tt-button-active-icon-color-emphasized: var(--tt-brand-color-400);
      --tt-button-active-icon-color-subdued: var(--tt-brand-color-400);
      --tt-button-disabled-icon-color: var(--tt-gray-dark-a-300);
    }

    /************************************************** 
        Primary button subicon color 
    **************************************************/

    /* Light mode */
    --tt-button-default-icon-sub-color: var(--tt-gray-dark-a-500);
    --tt-button-hover-icon-sub-color: var(--tt-gray-dark-a-500);
    --tt-button-active-icon-sub-color: var(--tt-gray-light-a-500);
    --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-light-a-500);
    --tt-button-active-icon-sub-color-subdued: var(--tt-gray-light-a-500);
    --tt-button-disabled-icon-sub-color: var(--tt-gray-light-a-100);

    /* Dark mode */
    .dark & {
      --tt-button-default-icon-sub-color: var(--tt-gray-dark-a-400);
      --tt-button-hover-icon-sub-color: var(--tt-gray-dark-a-500);
      --tt-button-active-icon-sub-color: var(--tt-gray-dark-a-300);
      --tt-button-active-icon-sub-color-emphasized: var(--tt-gray-dark-a-400);
      --tt-button-active-icon-sub-color-subdued: var(--tt-gray-dark-a-300);
      --tt-button-disabled-icon-sub-color: var(--tt-gray-dark-a-100);
    }

    /************************************************** 
        Primary button dropdown / arrows color 
    **************************************************/

    /* Light mode */
    --tt-button-default-dropdown-arrows-color: var(--white);
    --tt-button-hover-dropdown-arrows-color: var(--white);
    --tt-button-active-dropdown-arrows-color: var(--tt-gray-light-a-700);
    --tt-button-active-dropdown-arrows-color-emphasized: var(
      --tt-gray-light-a-700
    );
    --tt-button-active-dropdown-arrows-color-subdued: var(
      --tt-gray-light-a-700
    );
    --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-light-a-400);

    /* Dark mode */
    .dark & {
      --tt-button-default-dropdown-arrows-color: var(--white);
      --tt-button-hover-dropdown-arrows-color: var(--white);
      --tt-button-active-dropdown-arrows-color: var(--tt-gray-dark-a-600);
      --tt-button-active-dropdown-arrows-color-emphasized: var(
        --tt-gray-dark-a-600
      );
      --tt-button-active-dropdown-arrows-color-subdued: var(
        --tt-gray-dark-a-600
      );
      --tt-button-disabled-dropdown-arrows-color: var(--tt-gray-dark-a-400);
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/button/button-group.scss">
.tiptap-button-group {
  position: relative;
  display: flex;
  vertical-align: middle;

  &[data-orientation="vertical"] {
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    min-width: max-content;

    > .tiptap-button {
      width: 100%;
    }
  }

  &[data-orientation="horizontal"] {
    gap: 0.125rem;
    flex-direction: row;
    align-items: center;
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/button/button.scss">
.tiptap-button {
  font-size: 0.875rem;
  font-weight: 500;
  font-feature-settings:
    "salt" on,
    "cv01" on;
  line-height: 1.15;
  height: 2rem;
  min-width: 2rem;
  border: none;
  padding: 0.5rem;
  gap: 0.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--tt-radius-lg, 0.75rem);
  transition-property: background, color, opacity;
  transition-duration: var(--tt-transition-duration-default);
  transition-timing-function: var(--tt-transition-easing-default);

  // focus-visible
  &:focus-visible {
    outline: none;
  }

  &[data-highlighted="true"],
  &[data-focus-visible="true"] {
    background-color: var(--tt-button-hover-bg-color);
    color: var(--tt-button-hover-text-color);
    // outline: 2px solid var(--tt-button-active-icon-color);
  }

  &[data-weight="small"] {
    width: 1.5rem;
    min-width: 1.5rem;
    padding-right: 0;
    padding-left: 0;
  }

  /* button size large */
  &[data-size="large"] {
    font-size: 0.9375rem;
    height: 2.375rem;
    min-width: 2.375rem;
    padding: 0.625rem;
  }

  /* button size small */
  &[data-size="small"] {
    font-size: 0.75rem;
    line-height: 1.2;
    height: 1.5rem;
    min-width: 1.5rem;
    padding: 0.3125rem;
    border-radius: var(--tt-radius-md, 0.5rem);
  }

  /* trim / expand text of the button */
  .tiptap-button-text {
    padding: 0 0.125rem;
    flex-grow: 1;
    text-align: left;
    line-height: 1.5rem;
  }

  &[data-text-trim="on"] {
    .tiptap-button-text {
      text-overflow: ellipsis;
      overflow: hidden;
    }
  }

  /* global icon settings */
  .tiptap-button-icon,
  .tiptap-button-icon-sub,
  .tiptap-button-dropdown-arrows,
  .tiptap-button-dropdown-small {
    flex-shrink: 0;
  }

  /* standard icon, what is used */
  .tiptap-button-icon {
    width: 1rem;
    height: 1rem;
  }

  &[data-size="large"] .tiptap-button-icon {
    width: 1.125rem;
    height: 1.125rem;
  }

  &[data-size="small"] .tiptap-button-icon {
    width: 0.875rem;
    height: 0.875rem;
  }

  /* if 2 icons are used and this icon should be more subtle */
  .tiptap-button-icon-sub {
    width: 1rem;
    height: 1rem;
  }

  &[data-size="large"] .tiptap-button-icon-sub {
    width: 1.125rem;
    height: 1.125rem;
  }

  &[data-size="small"] .tiptap-button-icon-sub {
    width: 0.875rem;
    height: 0.875rem;
  }

  /* dropdown menus or arrows that are slightly smaller */
  .tiptap-button-dropdown-arrows {
    width: 0.75rem;
    height: 0.75rem;
  }

  &[data-size="large"] .tiptap-button-dropdown-arrows {
    width: 0.875rem;
    height: 0.875rem;
  }

  &[data-size="small"] .tiptap-button-dropdown-arrows {
    width: 0.625rem;
    height: 0.625rem;
  }

  /* dropdown menu for icon buttons only */
  .tiptap-button-dropdown-small {
    width: 0.625rem;
    height: 0.625rem;
  }

  &[data-size="large"] .tiptap-button-dropdown-small {
    width: 0.75rem;
    height: 0.75rem;
  }

  &[data-size="small"] .tiptap-button-dropdown-small {
    width: 0.5rem;
    height: 0.5rem;
  }

  /* button only has icons */
  &:has(> svg):not(:has(> :not(svg))) {
    gap: 0.125rem;

    &[data-size="large"],
    &[data-size="small"] {
      gap: 0.125rem;
    }
  }

  /* button only has 2 icons and one of them is dropdown small */
  &:has(> svg:nth-of-type(2)):has(> .tiptap-button-dropdown-small):not(
      :has(> svg:nth-of-type(3))
    ):not(:has(> .tiptap-button-text)) {
    gap: 0;
    padding-right: 0.25rem;

    &[data-size="large"] {
      padding-right: 0.375rem;
    }

    &[data-size="small"] {
      padding-right: 0.25rem;
    }
  }

  /* Emoji is used in a button */
  .tiptap-button-emoji {
    width: 1rem;
    display: flex;
    justify-content: center;
  }

  &[data-size="large"] .tiptap-button-emoji {
    width: 1.125rem;
  }

  &[data-size="small"] .tiptap-button-emoji {
    width: 0.875rem;
  }
}

/* --------------------------------------------
----------- BUTTON COLOR SETTINGS -------------
-------------------------------------------- */

.tiptap-button {
  background-color: var(--tt-button-default-bg-color);
  color: var(--tt-button-default-text-color);

  .tiptap-button-icon {
    color: var(--tt-button-default-icon-color);
  }

  .tiptap-button-icon-sub {
    color: var(--tt-button-default-icon-sub-color);
  }

  .tiptap-button-dropdown-arrows {
    color: var(--tt-button-default-dropdown-arrows-color);
  }

  .tiptap-button-dropdown-small {
    color: var(--tt-button-default-dropdown-arrows-color);
  }

  /* hover state of a button */
  &:hover:not([data-active-item="true"]):not([disabled]),
  &[data-active-item="true"]:not([disabled]),
  &[data-highlighted]:not([disabled]):not([data-highlighted="false"]) {
    background-color: var(--tt-button-hover-bg-color);
    color: var(--tt-button-hover-text-color);

    .tiptap-button-icon {
      color: var(--tt-button-hover-icon-color);
    }

    .tiptap-button-icon-sub {
      color: var(--tt-button-hover-icon-sub-color);
    }

    .tiptap-button-dropdown-arrows,
    .tiptap-button-dropdown-small {
      color: var(--tt-button-hover-dropdown-arrows-color);
    }
  }

  /* Active state of a button */
  &[data-active-state="on"]:not([disabled]),
  &[data-state="open"]:not([disabled]) {
    background-color: var(--tt-button-active-bg-color);
    color: var(--tt-button-active-text-color);

    .tiptap-button-icon {
      color: var(--tt-button-active-icon-color);
    }

    .tiptap-button-icon-sub {
      color: var(--tt-button-active-icon-sub-color);
    }

    .tiptap-button-dropdown-arrows,
    .tiptap-button-dropdown-small {
      color: var(--tt-button-active-dropdown-arrows-color);
    }

    &:hover {
      background-color: var(--tt-button-active-hover-bg-color);
    }

    /* Emphasized */
    &[data-appearance="emphasized"] {
      background-color: var(--tt-button-active-bg-color-emphasized);
      color: var(--tt-button-active-text-color-emphasized);

      .tiptap-button-icon {
        color: var(--tt-button-active-icon-color-emphasized);
      }

      .tiptap-button-icon-sub {
        color: var(--tt-button-active-icon-sub-color-emphasized);
      }

      .tiptap-button-dropdown-arrows,
      .tiptap-button-dropdown-small {
        color: var(--tt-button-active-dropdown-arrows-color-emphasized);
      }

      &:hover {
        background-color: var(--tt-button-active-hover-bg-color-emphasized);
      }
    }

    /* Subdued */
    &[data-appearance="subdued"] {
      background-color: var(--tt-button-active-bg-color-subdued);
      color: var(--tt-button-active-text-color-subdued);

      .tiptap-button-icon {
        color: var(--tt-button-active-icon-color-subdued);
      }

      .tiptap-button-icon-sub {
        color: var(--tt-button-active-icon-sub-color-subdued);
      }

      .tiptap-button-dropdown-arrows,
      .tiptap-button-dropdown-small {
        color: var(--tt-button-active-dropdown-arrows-color-subdued);
      }

      &:hover {
        background-color: var(--tt-button-active-hover-bg-color-subdued);

        .tiptap-button-icon {
          color: var(--tt-button-active-icon-color-subdued);
        }
      }
    }
  }

  &:disabled {
    background-color: var(--tt-button-disabled-bg-color);
    color: var(--tt-button-disabled-text-color);

    .tiptap-button-icon {
      color: var(--tt-button-disabled-icon-color);
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/button/button.tsx">
import * as React from "react"

// --- Tiptap UI Primitive ---
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/tiptap-ui-primitive/tooltip"

// --- Lib ---
import { cn, parseShortcutKeys } from "@/lib/tiptap-utils"

import "@/components/tiptap-ui-primitive/button/button-colors.scss"
import "@/components/tiptap-ui-primitive/button/button-group.scss"
import "@/components/tiptap-ui-primitive/button/button.scss"

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  className?: string
  showTooltip?: boolean
  tooltip?: React.ReactNode
  shortcutKeys?: string
}

export const ShortcutDisplay: React.FC<{ shortcuts: string[] }> = ({
  shortcuts,
}) => {
  if (shortcuts.length === 0) return null

  return (
    <div>
      {shortcuts.map((key, index) => (
        <React.Fragment key={index}>
          {index > 0 && <kbd>+</kbd>}
          <kbd>{key}</kbd>
        </React.Fragment>
      ))}
    </div>
  )
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      children,
      tooltip,
      showTooltip = true,
      shortcutKeys,
      "aria-label": ariaLabel,
      ...props
    },
    ref
  ) => {
    const shortcuts = React.useMemo(
      () => parseShortcutKeys({ shortcutKeys }),
      [shortcutKeys]
    )

    if (!tooltip || !showTooltip) {
      return (
        <button
          className={cn("tiptap-button", className)}
          ref={ref}
          aria-label={ariaLabel}
          {...props}
        >
          {children}
        </button>
      )
    }

    return (
      <Tooltip delay={200}>
        <TooltipTrigger
          className={cn("tiptap-button", className)}
          ref={ref}
          aria-label={ariaLabel}
          {...props}
        >
          {children}
        </TooltipTrigger>
        <TooltipContent>
          {tooltip}
          <ShortcutDisplay shortcuts={shortcuts} />
        </TooltipContent>
      </Tooltip>
    )
  }
)

Button.displayName = "Button"

export const ButtonGroup = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    orientation?: "horizontal" | "vertical"
  }
>(({ className, children, orientation = "vertical", ...props }, ref) => {
  return (
    <div
      ref={ref}
      className={cn("tiptap-button-group", className)}
      data-orientation={orientation}
      role="group"
      {...props}
    >
      {children}
    </div>
  )
})
ButtonGroup.displayName = "ButtonGroup"

export default Button
</file>

<file path="frontend/src/components/tiptap-ui-primitive/button/index.tsx">
export * from "./button"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/card/card.scss">
:root {
  --tiptap-card-bg-color: var(--white);
  --tiptap-card-border-color: var(--tt-gray-light-a-100);
  --tiptap-card-group-label-color: var(--tt-gray-light-a-800);
}

.dark {
  --tiptap-card-bg-color: var(--tt-gray-dark-50);
  --tiptap-card-border-color: var(--tt-gray-dark-a-100);
  --tiptap-card-group-label-color: var(--tt-gray-dark-a-800);
}

.tiptap-card {
  --padding: 0.375rem;
  --border-width: 1px;

  border-radius: calc(var(--padding) + var(--tt-radius-lg));
  box-shadow: var(--tt-shadow-elevated-md);
  background-color: var(--tiptap-card-bg-color);
  border: 1px solid var(--tiptap-card-border-color);
  display: flex;
  flex-direction: column;
  outline: none;
  align-items: center;

  position: relative;
  min-width: 0;
  word-wrap: break-word;
  background-clip: border-box;
}

.tiptap-card-header {
  padding: 0.375rem;
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  border-bottom: var(--border-width) solid var(--tiptap-card-border-color);
}

.tiptap-card-body {
  padding: 0.375rem;
  flex: 1 1 auto;
  overflow-y: auto;
}

.tiptap-card-item-group {
  position: relative;
  display: flex;
  vertical-align: middle;
  min-width: max-content;

  &[data-orientation="vertical"] {
    flex-direction: column;
    justify-content: center;
  }

  &[data-orientation="horizontal"] {
    gap: 0.25rem;
    flex-direction: row;
    align-items: center;
  }
}

.tiptap-card-group-label {
  padding-top: 0.75rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  padding-bottom: 0.25rem;
  line-height: normal;
  font-size: 0.75rem;
  font-weight: 600;
  line-height: normal;
  text-transform: capitalize;
  color: var(--tiptap-card-group-label-color);
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/card/index.tsx">
export * from "./card"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/dropdown-menu/dropdown-menu.scss">
.tiptap-dropdown-menu {
  --tt-dropdown-menu-bg-color: var(--white);
  --tt-dropdown-menu-border-color: var(--tt-gray-light-a-100);
  --tt-dropdown-menu-text-color: var(--tt-gray-light-a-600);

  .dark & {
    --tt-dropdown-menu-border-color: var(--tt-gray-dark-a-50);
    --tt-dropdown-menu-bg-color: var(--tt-gray-dark-50);
    --tt-dropdown-menu-text-color: var(--tt-gray-dark-a-600);
  }
}

/* --------------------------------------------
    --------- DROPDOWN MENU STYLING SETTINGS -----------
    -------------------------------------------- */
.tiptap-dropdown-menu {
  z-index: 50;
  outline: none;
  transform-origin: var(--radix-dropdown-menu-content-transform-origin);
  max-height: var(--radix-dropdown-menu-content-available-height);

  > * {
    max-height: var(--radix-dropdown-menu-content-available-height);
  }

  /* Animation states */
  &[data-state="open"] {
    animation:
      fadeIn 150ms cubic-bezier(0.16, 1, 0.3, 1),
      zoomIn 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-state="closed"] {
    animation:
      fadeOut 150ms cubic-bezier(0.16, 1, 0.3, 1),
      zoomOut 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Position-based animations */
  &[data-side="top"],
  &[data-side="top-start"],
  &[data-side="top-end"] {
    animation: slideFromBottom 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="right"],
  &[data-side="right-start"],
  &[data-side="right-end"] {
    animation: slideFromLeft 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="bottom"],
  &[data-side="bottom-start"],
  &[data-side="bottom-end"] {
    animation: slideFromTop 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="left"],
  &[data-side="left-start"],
  &[data-side="left-end"] {
    animation: slideFromRight 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/dropdown-menu/dropdown-menu.tsx">
import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { cn } from "@/lib/tiptap-utils"
import "@/components/tiptap-ui-primitive/dropdown-menu/dropdown-menu.scss"

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root modal={false} {...props} />
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return <DropdownMenuPrimitive.Portal {...props} />
}

const DropdownMenuTrigger = React.forwardRef<
  React.ComponentRef<typeof DropdownMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Trigger>
>(({ ...props }, ref) => <DropdownMenuPrimitive.Trigger ref={ref} {...props} />)
DropdownMenuTrigger.displayName = DropdownMenuPrimitive.Trigger.displayName

const DropdownMenuGroup = DropdownMenuPrimitive.Group

const DropdownMenuSub = DropdownMenuPrimitive.Sub

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup

const DropdownMenuItem = DropdownMenuPrimitive.Item

const DropdownMenuSubTrigger = DropdownMenuPrimitive.SubTrigger

const DropdownMenuSubContent = React.forwardRef<
  React.ComponentRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent> & {
    portal?: boolean | React.ComponentProps<typeof DropdownMenuPortal>
  }
>(({ className, portal = true, ...props }, ref) => {
  const content = (
    <DropdownMenuPrimitive.SubContent
      ref={ref}
      className={cn("tiptap-dropdown-menu", className)}
      {...props}
    />
  )

  return portal ? (
    <DropdownMenuPortal {...(typeof portal === "object" ? portal : {})}>
      {content}
    </DropdownMenuPortal>
  ) : (
    content
  )
})
DropdownMenuSubContent.displayName =
  DropdownMenuPrimitive.SubContent.displayName

const DropdownMenuContent = React.forwardRef<
  React.ComponentRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content> & {
    portal?: boolean
  }
>(({ className, sideOffset = 4, portal = false, ...props }, ref) => {
  const content = (
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      onCloseAutoFocus={(e) => e.preventDefault()}
      className={cn("tiptap-dropdown-menu", className)}
      {...props}
    />
  )

  return portal ? (
    <DropdownMenuPortal {...(typeof portal === "object" ? portal : {})}>
      {content}
    </DropdownMenuPortal>
  ) : (
    content
  )
})
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuGroup,
  DropdownMenuSub,
  DropdownMenuPortal,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/dropdown-menu/index.tsx">
export * from "./dropdown-menu"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/input/index.tsx">
export * from "./input"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/input/input.scss">
:root {
  --tiptap-input-placeholder: var(--tt-gray-light-a-400);
}

.dark {
  --tiptap-input-placeholder: var(--tt-gray-dark-a-400);
}

.tiptap-input {
  display: block;
  width: 100%;
  height: 2rem;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.5;
  padding: 0.375rem 0.5rem;
  border-radius: 0.375rem;
  background: none;
  appearance: none;
  outline: none;

  &::placeholder {
    color: var(--tiptap-input-placeholder);
  }
}

.tiptap-input-clamp {
  min-width: 12rem;
  padding-right: 0;

  text-overflow: ellipsis;
  white-space: nowrap;

  &:focus {
    text-overflow: clip;
    overflow: visible;
  }
}

.tiptap-input-group {
  position: relative;
  display: flex;
  flex-wrap: wrap;
  align-items: stretch;
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/input/input.tsx">
import * as React from "react"
import { cn } from "@/lib/tiptap-utils"
import "@/components/tiptap-ui-primitive/input/input.scss"

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input type={type} className={cn("tiptap-input", className)} {...props} />
  )
}

function InputGroup({
  className,
  children,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div className={cn("tiptap-input-group", className)} {...props}>
      {children}
    </div>
  )
}

export { Input, InputGroup }
</file>

<file path="frontend/src/components/tiptap-ui-primitive/label/index.tsx">
export * from "./label"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/label/label.scss">
.tiptap-label {
  --tt-label-color: var(--tt-gray-light-a-800);

  .dark & {
    --tt-label-color: var(--tt-gray-dark-a-800);
  }
}

.tiptap-label {
  margin-top: 0.75rem;
  margin-left: 0.5rem;
  margin-right: 0.5rem;
  margin-bottom: 0.25rem;
  font-size: 0.75rem;
  font-weight: 600;
  line-height: normal;
  text-transform: capitalize;
  color: var(--tt-label-color);
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/popover/index.tsx">
export * from "./popover"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/popover/popover.scss">
.tiptap-popover {
  --tt-popover-bg-color: var(--white);
  --tt-popover-border-color: var(--tt-gray-light-a-100);
  --tt-popover-text-color: var(--tt-gray-light-a-600);

  .dark & {
    --tt-popover-border-color: var(--tt-gray-dark-a-50);
    --tt-popover-bg-color: var(--tt-gray-dark-50);
    --tt-popover-text-color: var(--tt-gray-dark-a-600);
  }
}

/* --------------------------------------------
    --------- POPOVER STYLING SETTINGS -----------
    -------------------------------------------- */
.tiptap-popover {
  z-index: 50;
  outline: none;
  transform-origin: var(--radix-popover-content-transform-origin);
  max-height: var(--radix-popover-content-available-height);

  > * {
    max-height: var(--radix-popover-content-available-height);
  }

  /* Animation states */
  &[data-state="open"] {
    animation:
      fadeIn 150ms cubic-bezier(0.16, 1, 0.3, 1),
      zoomIn 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-state="closed"] {
    animation:
      fadeOut 150ms cubic-bezier(0.16, 1, 0.3, 1),
      zoomOut 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Position-based animations */
  &[data-side="top"],
  &[data-side="top-start"],
  &[data-side="top-end"] {
    animation: slideFromBottom 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="right"],
  &[data-side="right-start"],
  &[data-side="right-end"] {
    animation: slideFromLeft 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="bottom"],
  &[data-side="bottom-start"],
  &[data-side="bottom-end"] {
    animation: slideFromTop 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  &[data-side="left"],
  &[data-side="left-start"],
  &[data-side="left-end"] {
    animation: slideFromRight 150ms cubic-bezier(0.16, 1, 0.3, 1);
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/popover/popover.tsx">
import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"
import { cn } from "@/lib/tiptap-utils"
import "@/components/tiptap-ui-primitive/popover/popover.scss"

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root {...props} />
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger {...props} />
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        align={align}
        sideOffset={sideOffset}
        className={cn("tiptap-popover", className)}
        {...props}
      />
    </PopoverPrimitive.Portal>
  )
}

export { Popover, PopoverTrigger, PopoverContent }
</file>

<file path="frontend/src/components/tiptap-ui-primitive/separator/index.tsx">
export * from "./separator"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/separator/separator.scss">
.tiptap-separator {
  --tt-link-border-color: var(--tt-gray-light-a-200);

  .dark & {
    --tt-link-border-color: var(--tt-gray-dark-a-200);
  }
}

.tiptap-separator {
  flex-shrink: 0;
  background-color: var(--tt-link-border-color);

  &[data-orientation="horizontal"] {
    height: 1px;
    width: 100%;
    margin: 0.5rem 0;
  }

  &[data-orientation="vertical"] {
    height: 1.5rem;
    width: 1px;
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/separator/separator.tsx">
import * as React from "react"
import "@/components/tiptap-ui-primitive/separator/separator.scss"
import { cn } from "@/lib/tiptap-utils"

export type Orientation = "horizontal" | "vertical"

export interface SeparatorProps extends React.HTMLAttributes<HTMLDivElement> {
  orientation?: Orientation
  decorative?: boolean
}

export const Separator = React.forwardRef<HTMLDivElement, SeparatorProps>(
  ({ decorative, orientation = "vertical", className, ...divProps }, ref) => {
    const ariaOrientation = orientation === "vertical" ? orientation : undefined
    const semanticProps = decorative
      ? { role: "none" }
      : { "aria-orientation": ariaOrientation, role: "separator" }

    return (
      <div
        className={cn("tiptap-separator", className)}
        data-orientation={orientation}
        {...semanticProps}
        {...divProps}
        ref={ref}
      />
    )
  }
)

Separator.displayName = "Separator"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/spacer/index.tsx">
export * from "./spacer"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/textarea-autosize/index.tsx">
export * from "./textarea-autosize"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/textarea-autosize/textarea-autosize.tsx">
import * as React from "react"

import type { TextareaAutosizeProps } from "react-textarea-autosize"
import ReactTextareaAutosize from "react-textarea-autosize"

// -- Hooks --
import { useIsomorphicLayoutEffect } from "@/hooks/use-isomorphic-layout-effect"

export function TextareaAutosize({ ...props }: TextareaAutosizeProps) {
  const [isRerendered, setIsRerendered] = React.useState(false)

  useIsomorphicLayoutEffect(() => setIsRerendered(true), [])

  return isRerendered ? <ReactTextareaAutosize {...props} /> : null
}

TextareaAutosize.displayName = "TextareaAutosize"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/toolbar/index.tsx">
export * from "./toolbar"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/toolbar/toolbar.scss">
:root {
  --tt-toolbar-height: 2.75rem;
  --tt-safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --tt-toolbar-bg-color: var(--white);
  --tt-toolbar-border-color: var(--tt-gray-light-a-100);
}

.dark {
  --tt-toolbar-bg-color: var(--black);
  --tt-toolbar-border-color: var(--tt-gray-dark-a-50);
}

.tiptap-toolbar {
  display: flex;
  align-items: center;
  gap: 0.25rem;

  &-group {
    display: flex;
    align-items: center;
    gap: 0.125rem;

    &:empty {
      display: none;
    }

    &:empty + .tiptap-separator,
    .tiptap-separator + &:empty {
      display: none;
    }
  }

  &[data-variant="fixed"] {
    position: sticky;
    top: 0;
    z-index: 10;
    width: 100%;
    min-height: var(--tt-toolbar-height);
    background: var(--tt-toolbar-bg-color);
    border-bottom: 1px solid var(--tt-toolbar-border-color);
    padding: 0 0.5rem;
    overflow-x: auto;
    overscroll-behavior-x: contain;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;

    &::-webkit-scrollbar {
      display: none;
    }

    @media (max-width: 480px) {
      position: absolute;
      top: auto;
      height: calc(var(--tt-toolbar-height) + var(--tt-safe-area-bottom));
      border-top: 1px solid var(--tt-toolbar-border-color);
      border-bottom: none;
      padding: 0 0.5rem var(--tt-safe-area-bottom);
      flex-wrap: nowrap;
      justify-content: flex-start;

      .tiptap-toolbar-group {
        flex: 0 0 auto;
      }
    }
  }

  &[data-variant="floating"] {
    --tt-toolbar-padding: 0.125rem;
    --tt-toolbar-border-width: 1px;

    padding: 0.188rem;
    border-radius: calc(
      var(--tt-toolbar-padding) + var(--tt-radius-lg) +
        var(--tt-toolbar-border-width)
    );
    border: var(--tt-toolbar-border-width) solid var(--tt-toolbar-border-color);
    background-color: var(--tt-toolbar-bg-color);
    box-shadow: var(--tt-shadow-elevated-md);
    outline: none;
    overflow: hidden;

    &[data-plain="true"] {
      padding: 0;
      border-radius: 0;
      border: none;
      box-shadow: none;
      background-color: transparent;
    }

    @media screen and (max-width: 480px) {
      width: 100%;
      border-radius: 0;
      border: none;
      box-shadow: none;
    }
  }
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/toolbar/toolbar.tsx">
import * as React from "react"
import { Separator } from "@/components/tiptap-ui-primitive/separator"
import "@/components/tiptap-ui-primitive/toolbar/toolbar.scss"
import { cn } from "@/lib/tiptap-utils"
import { useMenuNavigation } from "@/hooks/use-menu-navigation"
import { useComposedRef } from "@/hooks/use-composed-ref"

type BaseProps = React.HTMLAttributes<HTMLDivElement>

interface ToolbarProps extends BaseProps {
  variant?: "floating" | "fixed"
}

const useToolbarNavigation = (
  toolbarRef: React.RefObject<HTMLDivElement | null>
) => {
  const [items, setItems] = React.useState<HTMLElement[]>([])

  const collectItems = React.useCallback(() => {
    if (!toolbarRef.current) return []
    return Array.from(
      toolbarRef.current.querySelectorAll<HTMLElement>(
        'button:not([disabled]), [role="button"]:not([disabled]), [tabindex="0"]:not([disabled])'
      )
    )
  }, [toolbarRef])

  React.useEffect(() => {
    const toolbar = toolbarRef.current
    if (!toolbar) return

    const updateItems = () => setItems(collectItems())

    updateItems()
    const observer = new MutationObserver(updateItems)
    observer.observe(toolbar, { childList: true, subtree: true })

    return () => observer.disconnect()
  }, [collectItems, toolbarRef])

  const { selectedIndex } = useMenuNavigation<HTMLElement>({
    containerRef: toolbarRef,
    items,
    orientation: "horizontal",
    onSelect: (el) => el.click(),
    autoSelectFirstItem: false,
  })

  React.useEffect(() => {
    const toolbar = toolbarRef.current
    if (!toolbar) return

    const handleFocus = (e: FocusEvent) => {
      const target = e.target as HTMLElement
      if (toolbar.contains(target))
        target.setAttribute("data-focus-visible", "true")
    }

    const handleBlur = (e: FocusEvent) => {
      const target = e.target as HTMLElement
      if (toolbar.contains(target)) target.removeAttribute("data-focus-visible")
    }

    toolbar.addEventListener("focus", handleFocus, true)
    toolbar.addEventListener("blur", handleBlur, true)

    return () => {
      toolbar.removeEventListener("focus", handleFocus, true)
      toolbar.removeEventListener("blur", handleBlur, true)
    }
  }, [toolbarRef])

  React.useEffect(() => {
    if (selectedIndex !== undefined && items[selectedIndex]) {
      items[selectedIndex].focus()
    }
  }, [selectedIndex, items])
}

export const Toolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(
  ({ children, className, variant = "fixed", ...props }, ref) => {
    const toolbarRef = React.useRef<HTMLDivElement>(null)
    const composedRef = useComposedRef(toolbarRef, ref)
    useToolbarNavigation(toolbarRef)

    return (
      <div
        ref={composedRef}
        role="toolbar"
        aria-label="toolbar"
        data-variant={variant}
        className={cn("tiptap-toolbar", className)}
        {...props}
      >
        {children}
      </div>
    )
  }
)
Toolbar.displayName = "Toolbar"

export const ToolbarGroup = React.forwardRef<HTMLDivElement, BaseProps>(
  ({ children, className, ...props }, ref) => (
    <div
      ref={ref}
      role="group"
      className={cn("tiptap-toolbar-group", className)}
      {...props}
    >
      {children}
    </div>
  )
)
ToolbarGroup.displayName = "ToolbarGroup"

export const ToolbarSeparator = React.forwardRef<HTMLDivElement, BaseProps>(
  ({ ...props }, ref) => (
    <Separator ref={ref} orientation="vertical" decorative {...props} />
  )
)
ToolbarSeparator.displayName = "ToolbarSeparator"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/tooltip/index.tsx">
export * from "./tooltip"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/tooltip/tooltip.scss">
.tiptap-tooltip {
  --tt-tooltip-bg: var(--tt-gray-light-900);
  --tt-tooltip-text: var(--white);
  --tt-kbd: var(--tt-gray-dark-a-400);

  .dark & {
    --tt-tooltip-bg: var(--white);
    --tt-tooltip-text: var(--tt-gray-light-600);
    --tt-kbd: var(--tt-gray-light-a-400);
  }
}

.tiptap-tooltip {
  z-index: 200;
  overflow: hidden;
  border-radius: var(--tt-radius-md, 0.375rem);
  background-color: var(--tt-tooltip-bg);
  padding: 0.375rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--tt-tooltip-text);
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  text-align: center;

  kbd {
    display: inline-block;
    text-align: center;
    vertical-align: baseline;
    font-family:
      ui-sans-serif,
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      "Helvetica Neue",
      Arial,
      "Noto Sans",
      sans-serif;
    text-transform: capitalize;
    color: var(--tt-kbd);
  }
}
</file>

<file path="frontend/src/components/ui/alert-dialog.tsx">
import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  )
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  )
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}
      />
    </AlertDialogPortal>
  )
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  )
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className
      )}
      {...props}
    />
  )
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props}
    />
  )
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  )
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props}
    />
  )
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}
</file>

<file path="frontend/src/components/ui/background-gradient.tsx">
import { cn } from "@/lib/utils";
import React from "react";
import { motion } from "motion/react";

export const BackgroundGradient = ({
  children,
  className,
  containerClassName,
  animate = true,
}: {
  children?: React.ReactNode;
  className?: string;
  containerClassName?: string;
  animate?: boolean;
}) => {
  const variants = {
    initial: {
      backgroundPosition: "0 50%",
    },
    animate: {
      backgroundPosition: ["0, 50%", "100% 50%", "0 50%"],
    },
  };
  return (
    <div className={cn("relative p-[4px] group", containerClassName)}>
      <motion.div
        variants={animate ? variants : undefined}
        initial={animate ? "initial" : undefined}
        animate={animate ? "animate" : undefined}
        transition={
          animate
            ? {
                duration: 5,
                repeat: Infinity,
                repeatType: "reverse",
              }
            : undefined
        }
        style={{
          backgroundSize: animate ? "400% 400%" : undefined,
        }}
        className={cn(
          "absolute inset-0 rounded-3xl z-[1] opacity-60 group-hover:opacity-100 blur-xl  transition duration-500 will-change-transform",
          " bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]"
        )}
      />
      <motion.div
        variants={animate ? variants : undefined}
        initial={animate ? "initial" : undefined}
        animate={animate ? "animate" : undefined}
        transition={
          animate
            ? {
                duration: 5,
                repeat: Infinity,
                repeatType: "reverse",
              }
            : undefined
        }
        style={{
          backgroundSize: animate ? "400% 400%" : undefined,
        }}
        className={cn(
          "absolute inset-0 rounded-3xl z-[1] will-change-transform",
          "bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]"
        )}
      />

      <div className={cn("relative z-10", className)}>{children}</div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/bento-grid.tsx">
import { cn } from "@/lib/utils";

export const BentoGrid = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  return (
    <div
      className={cn(
        "mx-auto grid max-w-7xl grid-cols-1 gap-4 md:auto-rows-[18rem] md:grid-cols-3",
        className,
      )}
    >
      {children}
    </div>
  );
};

export const BentoGridItem = ({
  className,
  title,
  description,
  header,
  icon,
}: {
  className?: string;
  title?: string | React.ReactNode;
  description?: string | React.ReactNode;
  header?: React.ReactNode;
  icon?: React.ReactNode;
}) => {
  return (
    <div
      className={cn(
        "group/bento shadow-input row-span-1 flex flex-col justify-between space-y-4 rounded-xl border border-neutral-200 bg-white p-4 transition duration-200 hover:shadow-xl dark:border-white/[0.2] dark:bg-black dark:shadow-none",
        className,
      )}
    >
      {header}
      <div className="transition duration-200 group-hover/bento:translate-x-2">
        {icon}
        <div className="mt-2 mb-2 font-sans font-bold text-neutral-600 dark:text-neutral-200">
          {title}
        </div>
        <div className="font-sans text-xs font-normal text-neutral-600 dark:text-neutral-300">
          {description}
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/button.tsx">
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
        destructive:
          "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }
</file>

<file path="frontend/src/components/ui/card-hover-effect.tsx">
import { cn } from "@/lib/utils";
import { AnimatePresence, motion } from "motion/react";

import { useState } from "react";

export const HoverEffect = ({
  items,
  className,
}: {
  items: {
    title: string;
    description: string;
    link: string;
  }[];
  className?: string;
}) => {
  let [hoveredIndex, setHoveredIndex] = useState<number | null>(null);

  return (
    <div
      className={cn(
        "grid grid-cols-1 md:grid-cols-2  lg:grid-cols-3  py-10",
        className
      )}
    >
      {items.map((item, idx) => (
        <a
          href={item?.link}
          key={item?.link}
          className="relative group  block p-2 h-full w-full"
          onMouseEnter={() => setHoveredIndex(idx)}
          onMouseLeave={() => setHoveredIndex(null)}
        >
          <AnimatePresence>
            {hoveredIndex === idx && (
              <motion.span
                className="absolute inset-0 h-full w-full bg-neutral-200 dark:bg-slate-800/[0.8] block  rounded-3xl"
                layoutId="hoverBackground"
                initial={{ opacity: 0 }}
                animate={{
                  opacity: 1,
                  transition: { duration: 0.15 },
                }}
                exit={{
                  opacity: 0,
                  transition: { duration: 0.15, delay: 0.2 },
                }}
              />
            )}
          </AnimatePresence>
          <Card>
            <CardTitle>{item.title}</CardTitle>
            <CardDescription>{item.description}</CardDescription>
          </Card>
        </a>
      ))}
    </div>
  );
};

export const Card = ({
  className,
  children,
}: {
  className?: string;
  children: React.ReactNode;
}) => {
  return (
    <div
      className={cn(
        "rounded-2xl h-full w-full p-4 overflow-hidden bg-black border border-transparent dark:border-white/[0.2] group-hover:border-slate-700 relative z-20",
        className
      )}
    >
      <div className="relative z-50">
        <div className="p-4">{children}</div>
      </div>
    </div>
  );
};
export const CardTitle = ({
  className,
  children,
}: {
  className?: string;
  children: React.ReactNode;
}) => {
  return (
    <h4 className={cn("text-zinc-100 font-bold tracking-wide mt-4", className)}>
      {children}
    </h4>
  );
};
export const CardDescription = ({
  className,
  children,
}: {
  className?: string;
  children: React.ReactNode;
}) => {
  return (
    <p
      className={cn(
        "mt-8 text-zinc-400 tracking-wide leading-relaxed text-sm",
        className
      )}
    >
      {children}
    </p>
  );
};
</file>

<file path="frontend/src/components/ui/file-upload.tsx">
import { cn } from "@/lib/utils";
import React, { useRef, useState } from "react";
import { motion } from "motion/react";
import { IconUpload } from "@tabler/icons-react";
import { useDropzone } from "react-dropzone";

const mainVariant = {
  initial: {
    x: 0,
    y: 0,
  },
  animate: {
    x: 20,
    y: -20,
    opacity: 0.9,
  },
};

const secondaryVariant = {
  initial: {
    opacity: 0,
  },
  animate: {
    opacity: 1,
  },
};

export const FileUpload = ({
  onChange,
}: {
  onChange?: (files: File[]) => void;
}) => {
  const [files, setFiles] = useState<File[]>([]);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleFileChange = (newFiles: File[]) => {
    setFiles((prevFiles) => [...prevFiles, ...newFiles]);
    onChange && onChange(newFiles);
  };

  const handleClick = () => {
    fileInputRef.current?.click();
  };

  const { getRootProps, isDragActive } = useDropzone({
    multiple: false,
    noClick: true,
    onDrop: handleFileChange,
    onDropRejected: (error) => {
      console.log(error);
    },
  });

  return (
    <div className="w-full" {...getRootProps()}>
      <motion.div
        onClick={handleClick}
        whileHover="animate"
        className="p-10 group/file block rounded-lg cursor-pointer w-full relative overflow-hidden"
      >
        <input
          ref={fileInputRef}
          id="file-upload-handle"
          type="file"
          onChange={(e) => handleFileChange(Array.from(e.target.files || []))}
          className="hidden"
        />
        <div className="absolute inset-0 [mask-image:radial-gradient(ellipse_at_center,white,transparent)]">
          <GridPattern />
        </div>
        <div className="flex flex-col items-center justify-center">
          <p className="relative z-20 font-sans font-bold text-neutral-700 dark:text-neutral-300 text-base">
            Upload file
          </p>
          <p className="relative z-20 font-sans font-normal text-neutral-400 dark:text-neutral-400 text-base mt-2">
            Drag or drop your files here or click to upload
          </p>
          <div className="relative w-full mt-10 max-w-xl mx-auto">
            {files.length > 0 &&
              files.map((file, idx) => (
                <motion.div
                  key={"file" + idx}
                  layoutId={idx === 0 ? "file-upload" : "file-upload-" + idx}
                  className={cn(
                    "relative overflow-hidden z-40 bg-white dark:bg-neutral-900 flex flex-col items-start justify-start md:h-24 p-4 mt-4 w-full mx-auto rounded-md",
                    "shadow-sm"
                  )}
                >
                  <div className="flex justify-between w-full items-center gap-4">
                    <motion.p
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      layout
                      className="text-base text-neutral-700 dark:text-neutral-300 truncate max-w-xs"
                    >
                      {file.name}
                    </motion.p>
                    <motion.p
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      layout
                      className="rounded-lg px-2 py-1 w-fit shrink-0 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-white shadow-input"
                    >
                      {(file.size / (1024 * 1024)).toFixed(2)} MB
                    </motion.p>
                  </div>

                  <div className="flex text-sm md:flex-row flex-col items-start md:items-center w-full mt-2 justify-between text-neutral-600 dark:text-neutral-400">
                    <motion.p
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      layout
                      className="px-1 py-0.5 rounded-md bg-gray-100 dark:bg-neutral-800 "
                    >
                      {file.type}
                    </motion.p>

                    <motion.p
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      layout
                    >
                      modified{" "}
                      {new Date(file.lastModified).toLocaleDateString()}
                    </motion.p>
                  </div>
                </motion.div>
              ))}
            {!files.length && (
              <motion.div
                layoutId="file-upload"
                variants={mainVariant}
                transition={{
                  type: "spring",
                  stiffness: 300,
                  damping: 20,
                }}
                className={cn(
                  "relative group-hover/file:shadow-2xl z-40 bg-white dark:bg-neutral-900 flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md",
                  "shadow-[0px_10px_50px_rgba(0,0,0,0.1)]"
                )}
              >
                {isDragActive ? (
                  <motion.p
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    className="text-neutral-600 flex flex-col items-center"
                  >
                    Drop it
                    <IconUpload className="h-4 w-4 text-neutral-600 dark:text-neutral-400" />
                  </motion.p>
                ) : (
                  <IconUpload className="h-4 w-4 text-neutral-600 dark:text-neutral-300" />
                )}
              </motion.div>
            )}

            {!files.length && (
              <motion.div
                variants={secondaryVariant}
                className="absolute opacity-0 border border-dashed border-sky-400 inset-0 z-30 bg-transparent flex items-center justify-center h-32 mt-4 w-full max-w-[8rem] mx-auto rounded-md"
              ></motion.div>
            )}
          </div>
        </div>
      </motion.div>
    </div>
  );
};

export function GridPattern() {
  const columns = 41;
  const rows = 11;
  return (
    <div className="flex bg-gray-100 dark:bg-neutral-900 shrink-0 flex-wrap justify-center items-center gap-x-px gap-y-px  scale-105">
      {Array.from({ length: rows }).map((_, row) =>
        Array.from({ length: columns }).map((_, col) => {
          const index = row * columns + col;
          return (
            <div
              key={`${col}-${row}`}
              className={`w-10 h-10 flex shrink-0 rounded-[2px] ${
                index % 2 === 0
                  ? "bg-gray-50 dark:bg-neutral-950"
                  : "bg-gray-50 dark:bg-neutral-950 shadow-[0px_0px_1px_3px_rgba(255,255,255,1)_inset] dark:shadow-[0px_0px_1px_3px_rgba(0,0,0,1)_inset]"
              }`}
            />
          );
        })
      )}
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/floating-dock.tsx">
import { cn } from "@/lib/utils";
import { IconLayoutNavbarCollapse } from "@tabler/icons-react";
import {
  AnimatePresence,
  MotionValue,
  motion,
  useMotionValue,
  useSpring,
  useTransform,
} from "motion/react";

import { useRef, useState } from "react";

export const FloatingDock = ({
  items,
  desktopClassName,
  mobileClassName,
}: {
  items: { title: string; icon: React.ReactNode; href: string }[];
  desktopClassName?: string;
  mobileClassName?: string;
}) => {
  return (
    <>
      <FloatingDockDesktop items={items} className={desktopClassName} />
      <FloatingDockMobile items={items} className={mobileClassName} />
    </>
  );
};

const FloatingDockMobile = ({
  items,
  className,
}: {
  items: { title: string; icon: React.ReactNode; href: string }[];
  className?: string;
}) => {
  const [open, setOpen] = useState(false);
  return (
    <div className={cn("relative block md:hidden", className)}>
      <AnimatePresence>
        {open && (
          <motion.div
            layoutId="nav"
            className="absolute inset-x-0 bottom-full mb-2 flex flex-col gap-2"
          >
            {items.map((item, idx) => (
              <motion.div
                key={item.title}
                initial={{ opacity: 0, y: 10 }}
                animate={{
                  opacity: 1,
                  y: 0,
                }}
                exit={{
                  opacity: 0,
                  y: 10,
                  transition: {
                    delay: idx * 0.05,
                  },
                }}
                transition={{ delay: (items.length - 1 - idx) * 0.05 }}
              >
                <a
                  href={item.href}
                  key={item.title}
                  className="flex h-10 w-10 items-center justify-center rounded-full bg-gray-50 dark:bg-neutral-900"
                >
                  <div className="h-4 w-4">{item.icon}</div>
                </a>
              </motion.div>
            ))}
          </motion.div>
        )}
      </AnimatePresence>
      <button
        onClick={() => setOpen(!open)}
        className="flex h-10 w-10 items-center justify-center rounded-full bg-gray-50 dark:bg-neutral-800"
      >
        <IconLayoutNavbarCollapse className="h-5 w-5 text-neutral-500 dark:text-neutral-400" />
      </button>
    </div>
  );
};

const FloatingDockDesktop = ({
  items,
  className,
}: {
  items: { title: string; icon: React.ReactNode; href: string }[];
  className?: string;
}) => {
  let mouseX = useMotionValue(Infinity);
  return (
    <motion.div
      onMouseMove={(e) => mouseX.set(e.pageX)}
      onMouseLeave={() => mouseX.set(Infinity)}
      className={cn(
        "mx-auto hidden h-16 items-end gap-4 rounded-2xl bg-gray-50 px-4 pb-3 md:flex dark:bg-neutral-900",
        className,
      )}
    >
      {items.map((item) => (
        <IconContainer mouseX={mouseX} key={item.title} {...item} />
      ))}
    </motion.div>
  );
};

function IconContainer({
  mouseX,
  title,
  icon,
  href,
}: {
  mouseX: MotionValue;
  title: string;
  icon: React.ReactNode;
  href: string;
}) {
  let ref = useRef<HTMLDivElement>(null);

  let distance = useTransform(mouseX, (val) => {
    let bounds = ref.current?.getBoundingClientRect() ?? { x: 0, width: 0 };

    return val - bounds.x - bounds.width / 2;
  });

  let widthTransform = useTransform(distance, [-150, 0, 150], [40, 80, 40]);
  let heightTransform = useTransform(distance, [-150, 0, 150], [40, 80, 40]);

  let widthTransformIcon = useTransform(distance, [-150, 0, 150], [20, 40, 20]);
  let heightTransformIcon = useTransform(
    distance,
    [-150, 0, 150],
    [20, 40, 20],
  );

  let width = useSpring(widthTransform, {
    mass: 0.1,
    stiffness: 150,
    damping: 12,
  });
  let height = useSpring(heightTransform, {
    mass: 0.1,
    stiffness: 150,
    damping: 12,
  });

  let widthIcon = useSpring(widthTransformIcon, {
    mass: 0.1,
    stiffness: 150,
    damping: 12,
  });
  let heightIcon = useSpring(heightTransformIcon, {
    mass: 0.1,
    stiffness: 150,
    damping: 12,
  });

  const [hovered, setHovered] = useState(false);

  return (
    <a href={href}>
      <motion.div
        ref={ref}
        style={{ width, height }}
        onMouseEnter={() => setHovered(true)}
        onMouseLeave={() => setHovered(false)}
        className="relative flex aspect-square items-center justify-center rounded-full bg-gray-200 dark:bg-neutral-800"
      >
        <AnimatePresence>
          {hovered && (
            <motion.div
              initial={{ opacity: 0, y: 10, x: "-50%" }}
              animate={{ opacity: 1, y: 0, x: "-50%" }}
              exit={{ opacity: 0, y: 2, x: "-50%" }}
              className="absolute -top-8 left-1/2 w-fit rounded-md border border-gray-200 bg-gray-100 px-2 py-0.5 text-xs whitespace-pre text-neutral-700 dark:border-neutral-900 dark:bg-neutral-800 dark:text-white"
            >
              {title}
            </motion.div>
          )}
        </AnimatePresence>
        <motion.div
          style={{ width: widthIcon, height: heightIcon }}
          className="flex items-center justify-center"
        >
          {icon}
        </motion.div>
      </motion.div>
    </a>
  );
}
</file>

<file path="frontend/src/components/ui/following-pointer.tsx">
import React, { useEffect, useState } from "react";

import { motion, AnimatePresence, useMotionValue } from "motion/react";
import { cn } from "@/lib/utils";

export const FollowerPointerCard = ({
  children,
  className,
  title,
}: {
  children: React.ReactNode;
  className?: string;
  title?: string | React.ReactNode;
}) => {
  const x = useMotionValue(0);
  const y = useMotionValue(0);
  const ref = React.useRef<HTMLDivElement>(null);
  const [rect, setRect] = useState<DOMRect | null>(null);
  const [isInside, setIsInside] = useState<boolean>(false); // Add this line

  useEffect(() => {
    if (ref.current) {
      setRect(ref.current.getBoundingClientRect());
    }
  }, []);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (rect) {
      const scrollX = window.scrollX;
      const scrollY = window.scrollY;
      x.set(e.clientX - rect.left + scrollX);
      y.set(e.clientY - rect.top + scrollY);
    }
  };
  const handleMouseLeave = () => {
    setIsInside(false);
  };

  const handleMouseEnter = () => {
    setIsInside(true);
  };
  return (
    <div
      onMouseLeave={handleMouseLeave}
      onMouseEnter={handleMouseEnter}
      onMouseMove={handleMouseMove}
      style={{
        cursor: "none",
      }}
      ref={ref}
      className={cn("relative", className)}
    >
      <AnimatePresence>
        {isInside && <FollowPointer x={x} y={y} title={title} />}
      </AnimatePresence>
      {children}
    </div>
  );
};

export const FollowPointer = ({
  x,
  y,
  title,
}: {
  x: any;
  y: any;
  title?: string | React.ReactNode;
}) => {
  const colors = [
    "#0ea5e9",
    "#737373",
    "#14b8a6",
    "#22c55e",
    "#3b82f6",
    "#ef4444",
    "#eab308",
  ];
  return (
    <motion.div
      className="absolute z-50 h-4 w-4 rounded-full"
      style={{
        top: y,
        left: x,
        pointerEvents: "none",
      }}
      initial={{
        scale: 1,
        opacity: 1,
      }}
      animate={{
        scale: 1,
        opacity: 1,
      }}
      exit={{
        scale: 0,
        opacity: 0,
      }}
    >
      <svg
        stroke="currentColor"
        fill="currentColor"
        strokeWidth="1"
        viewBox="0 0 16 16"
        className="h-6 w-6 -translate-x-[12px] -translate-y-[10px] -rotate-[70deg] transform stroke-sky-600 text-sky-500"
        height="1em"
        width="1em"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"></path>
      </svg>
      <motion.div
        style={{
          backgroundColor: colors[Math.floor(Math.random() * colors.length)],
        }}
        initial={{
          scale: 0.5,
          opacity: 0,
        }}
        animate={{
          scale: 1,
          opacity: 1,
        }}
        exit={{
          scale: 0.5,
          opacity: 0,
        }}
        className={
          "min-w-max rounded-full bg-neutral-200 px-2 py-2 text-xs whitespace-nowrap text-white"
        }
      >
        {title || `William Shakespeare`}
      </motion.div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/glare-card.tsx">
import { cn } from "@/lib/utils";
import { useRef } from "react";

export const GlareCard = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  const isPointerInside = useRef(false);
  const refElement = useRef<HTMLDivElement>(null);
  const state = useRef({
    glare: {
      x: 50,
      y: 50,
    },
    background: {
      x: 50,
      y: 50,
    },
    rotate: {
      x: 0,
      y: 0,
    },
  });
  const containerStyle = {
    "--m-x": "50%",
    "--m-y": "50%",
    "--r-x": "0deg",
    "--r-y": "0deg",
    "--bg-x": "50%",
    "--bg-y": "50%",
    "--duration": "300ms",
    "--foil-size": "100%",
    "--opacity": "0",
    "--radius": "48px",
    "--easing": "ease",
    "--transition": "var(--duration) var(--easing)",
  } as any;

  const backgroundStyle = {
    "--step": "5%",
    "--foil-svg": `url("data:image/svg+xml,%3Csvg width='26' height='26' viewBox='0 0 26 26' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2.99994 3.419C2.99994 3.419 21.6142 7.43646 22.7921 12.153C23.97 16.8695 3.41838 23.0306 3.41838 23.0306' stroke='white' stroke-width='5' stroke-miterlimit='3.86874' stroke-linecap='round' style='mix-blend-mode:darken'/%3E%3C/svg%3E")`,
    "--pattern": "var(--foil-svg) center/100% no-repeat",
    "--rainbow":
      "repeating-linear-gradient( 0deg,rgb(255,119,115) calc(var(--step) * 1),rgba(255,237,95,1) calc(var(--step) * 2),rgba(168,255,95,1) calc(var(--step) * 3),rgba(131,255,247,1) calc(var(--step) * 4),rgba(120,148,255,1) calc(var(--step) * 5),rgb(216,117,255) calc(var(--step) * 6),rgb(255,119,115) calc(var(--step) * 7) ) 0% var(--bg-y)/200% 700% no-repeat",
    "--diagonal":
      "repeating-linear-gradient( 128deg,#0e152e 0%,hsl(180,10%,60%) 3.8%,hsl(180,10%,60%) 4.5%,hsl(180,10%,60%) 5.2%,#0e152e 10%,#0e152e 12% ) var(--bg-x) var(--bg-y)/300% no-repeat",
    "--shade":
      "radial-gradient( farthest-corner circle at var(--m-x) var(--m-y),rgba(255,255,255,0.1) 12%,rgba(255,255,255,0.15) 20%,rgba(255,255,255,0.25) 120% ) var(--bg-x) var(--bg-y)/300% no-repeat",
    backgroundBlendMode: "hue, hue, hue, overlay",
  };

  const updateStyles = () => {
    if (refElement.current) {
      console.log(state.current);
      const { background, rotate, glare } = state.current;
      refElement.current?.style.setProperty("--m-x", `${glare.x}%`);
      refElement.current?.style.setProperty("--m-y", `${glare.y}%`);
      refElement.current?.style.setProperty("--r-x", `${rotate.x}deg`);
      refElement.current?.style.setProperty("--r-y", `${rotate.y}deg`);
      refElement.current?.style.setProperty("--bg-x", `${background.x}%`);
      refElement.current?.style.setProperty("--bg-y", `${background.y}%`);
    }
  };
  return (
    <div
      style={containerStyle}
      className="relative isolate [contain:layout_style] [perspective:600px] transition-transform duration-[var(--duration)] ease-[var(--easing)] delay-[var(--delay)] will-change-transform w-[320px] [aspect-ratio:17/21]"
      ref={refElement}
      onPointerMove={(event) => {
        const rotateFactor = 0.4;
        const rect = event.currentTarget.getBoundingClientRect();
        const position = {
          x: event.clientX - rect.left,
          y: event.clientY - rect.top,
        };
        const percentage = {
          x: (100 / rect.width) * position.x,
          y: (100 / rect.height) * position.y,
        };
        const delta = {
          x: percentage.x - 50,
          y: percentage.y - 50,
        };

        const { background, rotate, glare } = state.current;
        background.x = 50 + percentage.x / 4 - 12.5;
        background.y = 50 + percentage.y / 3 - 16.67;
        rotate.x = -(delta.x / 3.5);
        rotate.y = delta.y / 2;
        rotate.x *= rotateFactor;
        rotate.y *= rotateFactor;
        glare.x = percentage.x;
        glare.y = percentage.y;

        updateStyles();
      }}
      onPointerEnter={() => {
        isPointerInside.current = true;
        if (refElement.current) {
          setTimeout(() => {
            if (isPointerInside.current) {
              refElement.current?.style.setProperty("--duration", "0s");
            }
          }, 300);
        }
      }}
      onPointerLeave={() => {
        isPointerInside.current = false;
        if (refElement.current) {
          refElement.current.style.removeProperty("--duration");
          refElement.current?.style.setProperty("--r-x", `0deg`);
          refElement.current?.style.setProperty("--r-y", `0deg`);
        }
      }}
    >
      <div className="h-full grid will-change-transform origin-center transition-transform duration-[var(--duration)] ease-[var(--easing)] delay-[var(--delay)] [transform:rotateY(var(--r-x))_rotateX(var(--r-y))] rounded-[var(--radius)] border border-slate-800 hover:[--opacity:0.6] hover:[--duration:200ms] hover:[--easing:linear] hover:filter-none overflow-hidden">
        <div className="w-full h-full grid [grid-area:1/1] mix-blend-soft-light [clip-path:inset(0_0_0_0_round_var(--radius))]">
          <div className={cn("h-full w-full bg-slate-950", className)}>
            {children}
          </div>
        </div>
        <div className="w-full h-full grid [grid-area:1/1] mix-blend-soft-light [clip-path:inset(0_0_1px_0_round_var(--radius))] opacity-[var(--opacity)] transition-opacity transition-background duration-[var(--duration)] ease-[var(--easing)] delay-[var(--delay)] will-change-background [background:radial-gradient(farthest-corner_circle_at_var(--m-x)_var(--m-y),_rgba(255,255,255,0.8)_10%,_rgba(255,255,255,0.65)_20%,_rgba(255,255,255,0)_90%)]" />
        <div
          className="w-full h-full grid [grid-area:1/1] mix-blend-color-dodge opacity-[var(--opacity)] will-change-background transition-opacity [clip-path:inset(0_0_1px_0_round_var(--radius))] [background-blend-mode:hue_hue_hue_overlay] [background:var(--pattern),_var(--rainbow),_var(--diagonal),_var(--shade)] relative after:content-[''] after:grid-area-[inherit] after:bg-repeat-[inherit] after:bg-attachment-[inherit] after:bg-origin-[inherit] after:bg-clip-[inherit] after:bg-[inherit] after:mix-blend-exclusion after:[background-size:var(--foil-size),_200%_400%,_800%,_200%] after:[background-position:center,_0%_var(--bg-y),_calc(var(--bg-x)*_-1)_calc(var(--bg-y)*_-1),_var(--bg-x)_var(--bg-y)] after:[background-blend-mode:soft-light,_hue,_hard-light]"
          style={{ ...backgroundStyle }}
        />
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/grid.tsx">
import React from "react";

const GridBackgroundPreview = () => {
  return (
    <div className="h-[50rem] w-full bg-black bg-grid-white/[0.1] relative flex items-center justify-center">
      {/* Radial gradient for the container to give a faded look */}
      <div className="absolute pointer-events-none inset-0 flex items-center justify-center bg-black [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"></div>
      <p className="text-4xl sm:text-7xl font-bold relative z-20 bg-clip-text text-transparent bg-gradient-to-b from-neutral-200 to-neutral-500 py-8">
        Backgrounds
      </p>
    </div>
  );
};

export default GridBackgroundPreview;
</file>

<file path="frontend/src/components/ui/moving-line.tsx">
import React, { useRef } from "react";
import {
  motion,
  useMotionValueEvent,
  useScroll,
  useSpring,
  useTransform,
} from "motion/react";

const MovingLine = () => {
  const transition = {
    duration: 14,
    ease: "easeInOut",
  };

  const ref = useRef<any>(null);

  // Track scroll progress, lies between 0 and 1.
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["end end", "start start"],
  });

  // when scroll progress reached 1, path length becomes 0.
  const pathLengthValue = useTransform(scrollYProgress, [0, 1], [1, 0]);

  const PATH = "M0.5 0.980671L0.5 1566.02";
  return (
    <div
      className="max-w-4xl mx-auto flex flex-row space-x-10 items-start w-full "
      ref={ref}
    >
      <svg
        width="1"
        height="1567"
        viewBox="0 0 1 1567"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="shrink-0"
      >
        <path d={PATH} stroke="url(#paint0_linear_207_38)" />
        <defs>
          <linearGradient
            id="paint0_linear_207_38"
            x1="1"
            y1="-102.823"
            x2="1"
            y2="1566.02"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#3879E7" stop-opacity="0" />
            <stop offset="1" stop-color="#3879E7" />
          </linearGradient>
        </defs>
        <motion.path
          // animatng pathLength value, goes from 1 to 0
          style={{
            pathLength: useSpring(pathLengthValue, {
              stiffness: 500,
              damping: 100,
            }),
          }}
          transition={transition}
          d={PATH}
          stroke="var(--blue-500)"
          strokeOpacity="1"
          strokeLinecap={"round"}
          strokeWidth="3"
        />
      </svg>
      <div className="flex flex-col w-full">
        <Content />
        <Content />
        <Content />
      </div>
    </div>
  );
};

{
  /* dummy content to fill up the screen */
}

export const Content = () => {
  return (
    <div className="content w-full mb-10 ">
      <p className="text-2xl font-bold text-white  ">
        The path follows the scroll
      </p>
      <p className="text-base font-normal text-neutral-300  ">
        If you look closely, you can see the path is being animated.
      </p>
      <div className="flex space-x-4 w-full ">
        <div className="w-full h-40 md:h-96 rounded-md bg-gradient-to-tr from-slate-800 to-slate-700 mt-4" />
        <div className="w-full h-40 md:h-96 rounded-md bg-gradient-to-tr from-slate-800 to-slate-700 mt-4" />
      </div>
    </div>
  );
};

export default MovingLine;
</file>

<file path="frontend/src/components/ui/spotlight.tsx">
import React from "react";
import { cn } from "@/lib/utils";

type SpotlightProps = {
  className?: string;
  fill?: string;
};

export const Spotlight = ({ className, fill }: SpotlightProps) => {
  return (
    <svg
      className={cn(
        "animate-spotlight pointer-events-none absolute z-[1]  h-[169%] w-[138%] lg:w-[84%] opacity-0",
        className
      )}
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 3787 2842"
      fill="none"
    >
      <g filter="url(#filter)">
        <ellipse
          cx="1924.71"
          cy="273.501"
          rx="1924.71"
          ry="273.501"
          transform="matrix(-0.822377 -0.568943 -0.568943 0.822377 3631.88 2291.09)"
          fill={fill || "white"}
          fillOpacity="0.21"
        ></ellipse>
      </g>
      <defs>
        <filter
          id="filter"
          x="0.860352"
          y="0.838989"
          width="3785.16"
          height="2840.26"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix"></feFlood>
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="BackgroundImageFix"
            result="shape"
          ></feBlend>
          <feGaussianBlur
            stdDeviation="151"
            result="effect1_foregroundBlur_1065_8"
          ></feGaussianBlur>
        </filter>
      </defs>
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/vortex.tsx">
import { cn } from "@/lib/utils";
import React, { useEffect, useRef } from "react";
import { createNoise3D } from "simplex-noise";
import { motion } from "motion/react";

interface VortexProps {
  children?: any;
  className?: string;
  containerClassName?: string;
  particleCount?: number;
  rangeY?: number;
  baseHue?: number;
  baseSpeed?: number;
  rangeSpeed?: number;
  baseRadius?: number;
  rangeRadius?: number;
  backgroundColor?: string;
}

export const Vortex = (props: VortexProps) => {
  const canvasRef = useRef<HTMLCanvasElement>(null);
  const containerRef = useRef(null);
  const animationFrameId = useRef<number>();
  const particleCount = props.particleCount || 700;
  const particlePropCount = 9;
  const particlePropsLength = particleCount * particlePropCount;
  const rangeY = props.rangeY || 100;
  const baseTTL = 50;
  const rangeTTL = 150;
  const baseSpeed = props.baseSpeed || 0.0;
  const rangeSpeed = props.rangeSpeed || 1.5;
  const baseRadius = props.baseRadius || 1;
  const rangeRadius = props.rangeRadius || 2;
  const baseHue = props.baseHue || 220;
  const rangeHue = 100;
  const noiseSteps = 3;
  const xOff = 0.00125;
  const yOff = 0.00125;
  const zOff = 0.0005;
  const backgroundColor = props.backgroundColor || "#000000";
  let tick = 0;
  const noise3D = createNoise3D();
  let particleProps = new Float32Array(particlePropsLength);
  let center: [number, number] = [0, 0];

  const HALF_PI: number = 0.5 * Math.PI;
  const TAU: number = 2 * Math.PI;
  const TO_RAD: number = Math.PI / 180;
  const rand = (n: number): number => n * Math.random();
  const randRange = (n: number): number => n - rand(2 * n);
  const fadeInOut = (t: number, m: number): number => {
    let hm = 0.5 * m;
    return Math.abs(((t + hm) % m) - hm) / hm;
  };
  const lerp = (n1: number, n2: number, speed: number): number =>
    (1 - speed) * n1 + speed * n2;

  const setup = () => {
    const canvas = canvasRef.current;
    const container = containerRef.current;
    if (canvas && container) {
      const ctx = canvas.getContext("2d");

      if (ctx) {
        resize(canvas, ctx);
        initParticles();
        draw(canvas, ctx);
      }
    }
  };

  const initParticles = () => {
    tick = 0;
    // simplex = new SimplexNoise();
    particleProps = new Float32Array(particlePropsLength);

    for (let i = 0; i < particlePropsLength; i += particlePropCount) {
      initParticle(i);
    }
  };

  const initParticle = (i: number) => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    let x, y, vx, vy, life, ttl, speed, radius, hue;

    x = rand(canvas.width);
    y = center[1] + randRange(rangeY);
    vx = 0;
    vy = 0;
    life = 0;
    ttl = baseTTL + rand(rangeTTL);
    speed = baseSpeed + rand(rangeSpeed);
    radius = baseRadius + rand(rangeRadius);
    hue = baseHue + rand(rangeHue);

    particleProps.set([x, y, vx, vy, life, ttl, speed, radius, hue], i);
  };

  const draw = (canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) => {
    tick++;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = backgroundColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    drawParticles(ctx);
    renderGlow(canvas, ctx);
    renderToScreen(canvas, ctx);

    animationFrameId.current = window.requestAnimationFrame(() =>
      draw(canvas, ctx),
    );
  };

  const drawParticles = (ctx: CanvasRenderingContext2D) => {
    for (let i = 0; i < particlePropsLength; i += particlePropCount) {
      updateParticle(i, ctx);
    }
  };

  const updateParticle = (i: number, ctx: CanvasRenderingContext2D) => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    let i2 = 1 + i,
      i3 = 2 + i,
      i4 = 3 + i,
      i5 = 4 + i,
      i6 = 5 + i,
      i7 = 6 + i,
      i8 = 7 + i,
      i9 = 8 + i;
    let n, x, y, vx, vy, life, ttl, speed, x2, y2, radius, hue;

    x = particleProps[i];
    y = particleProps[i2];
    n = noise3D(x * xOff, y * yOff, tick * zOff) * noiseSteps * TAU;
    vx = lerp(particleProps[i3], Math.cos(n), 0.5);
    vy = lerp(particleProps[i4], Math.sin(n), 0.5);
    life = particleProps[i5];
    ttl = particleProps[i6];
    speed = particleProps[i7];
    x2 = x + vx * speed;
    y2 = y + vy * speed;
    radius = particleProps[i8];
    hue = particleProps[i9];

    drawParticle(x, y, x2, y2, life, ttl, radius, hue, ctx);

    life++;

    particleProps[i] = x2;
    particleProps[i2] = y2;
    particleProps[i3] = vx;
    particleProps[i4] = vy;
    particleProps[i5] = life;

    (checkBounds(x, y, canvas) || life > ttl) && initParticle(i);
  };

  const drawParticle = (
    x: number,
    y: number,
    x2: number,
    y2: number,
    life: number,
    ttl: number,
    radius: number,
    hue: number,
    ctx: CanvasRenderingContext2D,
  ) => {
    ctx.save();
    ctx.lineCap = "round";
    ctx.lineWidth = radius;
    ctx.strokeStyle = `hsla(${hue},100%,60%,${fadeInOut(life, ttl)})`;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.closePath();
    ctx.restore();
  };

  const checkBounds = (x: number, y: number, canvas: HTMLCanvasElement) => {
    return x > canvas.width || x < 0 || y > canvas.height || y < 0;
  };

  const resize = (
    canvas: HTMLCanvasElement,
    ctx?: CanvasRenderingContext2D,
  ) => {
    const { innerWidth, innerHeight } = window;

    canvas.width = innerWidth;
    canvas.height = innerHeight;

    center[0] = 0.5 * canvas.width;
    center[1] = 0.5 * canvas.height;
  };

  const renderGlow = (
    canvas: HTMLCanvasElement,
    ctx: CanvasRenderingContext2D,
  ) => {
    ctx.save();
    ctx.filter = "blur(8px) brightness(200%)";
    ctx.globalCompositeOperation = "lighter";
    ctx.drawImage(canvas, 0, 0);
    ctx.restore();

    ctx.save();
    ctx.filter = "blur(4px) brightness(200%)";
    ctx.globalCompositeOperation = "lighter";
    ctx.drawImage(canvas, 0, 0);
    ctx.restore();
  };

  const renderToScreen = (
    canvas: HTMLCanvasElement,
    ctx: CanvasRenderingContext2D,
  ) => {
    ctx.save();
    ctx.globalCompositeOperation = "lighter";
    ctx.drawImage(canvas, 0, 0);
    ctx.restore();
  };

  const handleResize = () => {
    const canvas = canvasRef.current;
    const ctx = canvas?.getContext("2d");
    if (canvas && ctx) {
      resize(canvas, ctx);
    }
  };

  useEffect(() => {
    setup();
    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
      if (animationFrameId.current) {
        cancelAnimationFrame(animationFrameId.current);
      }
    };
  }, []);

  return (
    <div className={cn("relative h-full w-full", props.containerClassName)}>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        ref={containerRef}
        className="absolute inset-0 z-0 flex h-full w-full items-center justify-center bg-transparent"
      >
        <canvas ref={canvasRef}></canvas>
      </motion.div>

      <div className={cn("relative z-10", props.className)}>
        {props.children}
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ReviewEditor.test.tsx">
import { test, expect, describe } from "bun:test";

// Mock component logic for testing without React DOM rendering
const createMockReviewEditor = (onChange?: (content: string) => void) => {
  return {
    type: 'ReviewEditor',
    props: {
      onChange,
      children: [
        {
          type: 'textarea',
          props: {
            'data-testid': 'editor-textarea',
            placeholder: 'Enter review content...',
            onChange: (e: { target: { value: string } }) => onChange?.(e.target.value)
          }
        },
        {
          type: 'button',
          props: {
            'data-testid': 'save-button',
            children: 'Save Review'
          }
        }
      ]
    }
  };
};

describe("ReviewEditor Component Logic", () => {
  test("creates editor with correct structure", () => {
    const editor = createMockReviewEditor();
    
    expect(editor.type).toBe('ReviewEditor');
    expect(editor.props.children).toHaveLength(2);
    expect(editor.props.children?.[0]?.props?.['data-testid']).toBe('editor-textarea');
    expect(editor.props.children?.[1]?.props?.['data-testid']).toBe('save-button');
  });

  test("handles content changes via callback", () => {
    let capturedContent = "";
    const handleChange = (content: string) => {
      capturedContent = content;
    };

    const editor = createMockReviewEditor(handleChange);
    const textarea = editor.props.children[0];
    
    // Simulate change event
    textarea?.props?.onChange?.({ target: { value: "Test review content" } });
    
    expect(capturedContent).toBe("Test review content");
  });

  test("has accessible textarea configuration", () => {
    const editor = createMockReviewEditor();
    const textarea = editor.props.children?.[0];
    
    expect(textarea?.props?.placeholder).toBe("Enter review content...");
    expect(textarea?.props?.['data-testid']).toBe('editor-textarea');
  });
});
</file>

<file path="frontend/src/components/TipTapEditor.tsx">
import React from 'react';
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import Placeholder from '@tiptap/extension-placeholder';

const TipTapEditor: React.FC = () => {
  const editor = useEditor({
    extensions: [
      StarterKit,
      Placeholder.configure({
        placeholder: 'Start editing your clinical review...',
      }),
    ],
    content: `
      <h2>Clinical Review Template</h2>
      <p>Use this editor to review and edit LLM-generated clinical summaries.</p>
      <p>Key features:</p>
      <ul>
        <li>Rich text editing with formatting</li>
        <li>Real-time diff computation</li>
        <li>Label classification system</li>
        <li>Export functionality</li>
      </ul>
    `,
    editorProps: {
      attributes: {
        class: 'prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4 border border-gray-300 rounded-lg',
      },
    },
  });

  return (
    <div className="tiptap-editor">
      <div className="editor-toolbar">
        <button
          onClick={() => editor?.chain().focus().toggleBold().run()}
          className={editor?.isActive('bold') ? 'is-active' : ''}
          disabled={!editor?.can().chain().focus().toggleBold().run()}
        >
          Bold
        </button>
        <button
          onClick={() => editor?.chain().focus().toggleItalic().run()}
          className={editor?.isActive('italic') ? 'is-active' : ''}
          disabled={!editor?.can().chain().focus().toggleItalic().run()}
        >
          Italic
        </button>
        <button
          onClick={() => editor?.chain().focus().toggleStrike().run()}
          className={editor?.isActive('strike') ? 'is-active' : ''}
          disabled={!editor?.can().chain().focus().toggleStrike().run()}
        >
          Strike
        </button>
        <button
          onClick={() => editor?.chain().focus().toggleHeading({ level: 2 }).run()}
          className={editor?.isActive('heading', { level: 2 }) ? 'is-active' : ''}
        >
          H2
        </button>
        <button
          onClick={() => editor?.chain().focus().toggleBulletList().run()}
          className={editor?.isActive('bulletList') ? 'is-active' : ''}
        >
          Bullet List
        </button>
      </div>
      <EditorContent editor={editor} />
    </div>
  );
};

export default TipTapEditor;
</file>

<file path="frontend/src/config/auth.ts">
export interface AuthConfig {
  authUrl: string;
  returnTo: string;
  cookieDomain: string;
}

export function getAuthConfig(): AuthConfig {
  const isDev = process.env.NODE_ENV === 'development' || window.location.hostname === 'localhost';
  
  if (isDev) {
    return {
      authUrl: 'http://passport.lvh.me:3001/auth',
      returnTo: `http://${window.location.host}/app`,
      cookieDomain: '.lvh.me'
    };
  }
  
  return {
    authUrl: 'https://passport.oceanheart.ai/auth',
    returnTo: 'https://watson.oceanheart.ai/app',
    cookieDomain: '.oceanheart.ai'
  };
}

export function getCookie(name: string): string | null {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) {
    const cookieValue = parts.pop()?.split(';').shift();
    return cookieValue || null;
  }
  return null;
}

export function deleteCookie(name: string, domain?: string): void {
  const domains = domain ? [domain] : ['.oceanheart.ai', '.lvh.me', window.location.hostname];
  
  domains.forEach(d => {
    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${d}`;
    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;
  });
}

export function isAuthenticated(): boolean {
  // Temporary localStorage flag for testing
  return localStorage.getItem('isAuthenticated') === 'true';
}
</file>

<file path="frontend/src/config/theme.ts">
// Watson Brand Color Palette
export const watsonTheme = {
  // Primary Watson Blue shades
  primary: {
    50: '#e6f3ff',
    100: '#cce7ff',
    200: '#99cfff',
    300: '#66b7ff',
    400: '#339fff',
    500: '#0087ff', // Main Watson Blue
    600: '#006fcc',
    700: '#005799',
    800: '#003f66',
    900: '#002733',
  },
  
  // Secondary Teal/Cyan for accents
  secondary: {
    50: '#e6fffe',
    100: '#ccfffd',
    200: '#99fffb',
    300: '#66fff9',
    400: '#33f7f0',
    500: '#00e5d9', // Secondary Teal
    600: '#00b8ae',
    700: '#008a82',
    800: '#005c57',
    900: '#002e2b',
  },
  
  // Success Green
  success: {
    400: '#4ade80',
    500: '#22c55e',
    600: '#16a34a',
    700: '#15803d',
  },
  
  // Warning Amber
  warning: {
    400: '#fbbf24',
    500: '#f59e0b',
    600: '#d97706',
    700: '#b45309',
  },
  
  // Error Red
  error: {
    400: '#f87171',
    500: '#ef4444',
    600: '#dc2626',
    700: '#b91c1c',
  },
  
  // Neutral grays
  neutral: {
    50: '#fafafa',
    100: '#f5f5f5',
    200: '#e5e5e5',
    300: '#d4d4d4',
    400: '#a3a3a3',
    500: '#737373',
    600: '#525252',
    700: '#404040',
    800: '#262626',
    900: '#171717',
    950: '#0a0a0a',
  },
  
  // Gradient combinations
  gradients: {
    // Primary gradients
    primaryToSecondary: 'from-blue-500 to-cyan-500',
    primaryDark: 'from-blue-600 to-blue-800',
    primaryLight: 'from-blue-400 to-blue-600',
    
    // Card backgrounds
    cardPrimary: 'from-blue-900/20 to-blue-800/20',
    cardSecondary: 'from-cyan-900/20 to-cyan-800/20',
    cardNeutral: 'from-neutral-900/50 to-neutral-800/50',
    
    // Text gradients
    textPrimary: 'from-blue-400 to-cyan-400',
    textHeading: 'from-white to-blue-100',
  },
  
  // Border colors
  borders: {
    primary: 'border-blue-500/20',
    secondary: 'border-cyan-500/20',
    neutral: 'border-neutral-700/50',
    hover: 'border-blue-400/40',
  }
};

// Component-specific color classes
export const componentTheme = {
  // Headers
  header: {
    gradient: 'bg-gradient-to-r from-blue-400 to-cyan-400',
    text: 'bg-clip-text text-transparent',
  },
  
  // Buttons
  button: {
    primary: 'bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800',
    secondary: 'bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800',
    danger: 'bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800',
    success: 'bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800',
  },
  
  // Cards
  card: {
    primary: 'bg-gradient-to-br from-blue-900/20 to-blue-800/20 border border-blue-500/20',
    secondary: 'bg-gradient-to-br from-cyan-900/20 to-cyan-800/20 border border-cyan-500/20',
    neutral: 'bg-gradient-to-br from-neutral-900/50 to-neutral-800/50 border border-neutral-700/50',
  },
  
  // Toggle switches
  toggle: {
    active: 'bg-gradient-to-r from-blue-600 to-cyan-600',
    inactive: 'bg-neutral-600',
  },
  
  // Icons
  icon: {
    primary: 'text-blue-400',
    secondary: 'text-cyan-400',
    success: 'text-green-400',
    warning: 'text-amber-400',
    error: 'text-red-400',
  }
};
</file>

<file path="frontend/src/contexts/AuthContext.tsx">
/**
 * Authentication Context for Watson application
 * Provides authentication state management across the application
 */

import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';
import { AuthState, AuthContextType, User } from '../types/auth';
import {
  getStoredToken,
  storeToken,
  removeToken,
  isValidToken,
  getUserFromToken,
  clearAuthData,
} from '../utils/auth';

// Initial authentication state
const initialAuthState: AuthState = {
  isAuthenticated: false,
  user: null,
  token: null,
  loading: true,
};

// Authentication action types
type AuthAction =
  | { type: 'AUTH_INIT'; payload: { user: User | null; token: string | null } }
  | { type: 'LOGIN'; payload: { user: User; token: string } }
  | { type: 'LOGOUT' }
  | { type: 'UPDATE_USER'; payload: Partial<User> }
  | { type: 'SET_LOADING'; payload: boolean };

// Authentication reducer
function authReducer(state: AuthState, action: AuthAction): AuthState {
  switch (action.type) {
    case 'AUTH_INIT':
      return {
        ...state,
        isAuthenticated: !!action.payload.token && !!action.payload.user,
        user: action.payload.user,
        token: action.payload.token,
        loading: false,
      };
    
    case 'LOGIN':
      return {
        ...state,
        isAuthenticated: true,
        user: action.payload.user,
        token: action.payload.token,
        loading: false,
      };
    
    case 'LOGOUT':
      return {
        ...state,
        isAuthenticated: false,
        user: null,
        token: null,
        loading: false,
      };
    
    case 'UPDATE_USER':
      return {
        ...state,
        user: state.user ? { ...state.user, ...action.payload } : null,
      };
    
    case 'SET_LOADING':
      return {
        ...state,
        loading: action.payload,
      };
    
    default:
      return state;
  }
}

// Create the context
const AuthContext = createContext<AuthContextType | undefined>(undefined);

// Context provider props
interface AuthProviderProps {
  children: ReactNode;
}

/**
 * AuthProvider component that wraps the application
 * Provides authentication state and methods to child components
 */
export function AuthProvider({ children }: AuthProviderProps) {
  const [authState, dispatch] = useReducer(authReducer, initialAuthState);

  // Initialize authentication state on mount
  useEffect(() => {
    const initializeAuth = () => {
      const token = getStoredToken();
      
      if (token && isValidToken(token)) {
        const user = getUserFromToken(token);
        if (user) {
          dispatch({ type: 'AUTH_INIT', payload: { user, token } });
          return;
        }
      }
      
      // Clear invalid tokens
      if (token) {
        removeToken();
      }
      
      dispatch({ type: 'AUTH_INIT', payload: { user: null, token: null } });
    };

    initializeAuth();
  }, []);

  // Login function
  const login = (token: string) => {
    if (!isValidToken(token)) {
      console.error('Invalid token provided to login');
      return;
    }

    const user = getUserFromToken(token);
    if (!user) {
      console.error('Could not extract user from token');
      return;
    }

    storeToken(token);
    dispatch({ type: 'LOGIN', payload: { user, token } });
  };

  // Logout function
  const logout = () => {
    clearAuthData();
    dispatch({ type: 'LOGOUT' });
  };

  // Update user function
  const updateUser = (userUpdate: Partial<User>) => {
    dispatch({ type: 'UPDATE_USER', payload: userUpdate });
  };

  const contextValue: AuthContextType = {
    authState,
    login,
    logout,
    updateUser,
  };

  return (
    <AuthContext.Provider value={contextValue}>
      {children}
    </AuthContext.Provider>
  );
}

/**
 * Hook to use authentication context
 * Must be used within AuthProvider
 */
export function useAuthContext(): AuthContextType {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuthContext must be used within an AuthProvider');
  }
  return context;
}

export default AuthContext;
</file>

<file path="frontend/src/hooks/use-cursor-visibility.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"
import { useWindowSize } from "@/hooks/use-window-size"
import { useBodyRect } from "./use-element-rect"

export interface CursorVisibilityOptions {
  /**
   * The Tiptap editor instance
   */
  editor?: Editor | null
  /**
   * Reference to the toolbar element that may obscure the cursor
   */
  overlayHeight?: number
}

/**
 * Custom hook that ensures the cursor remains visible when typing in a Tiptap editor.
 * Automatically scrolls the window when the cursor would be hidden by the toolbar.
 *
 * @param options.editor The Tiptap editor instance
 * @param options.overlayHeight Toolbar height to account for
 * @returns The bounding rect of the body
 */
export function useCursorVisibility({
  editor,
  overlayHeight = 0,
}: CursorVisibilityOptions) {
  const { height: windowHeight } = useWindowSize()
  const rect = useBodyRect({
    enabled: true,
    throttleMs: 100,
    useResizeObserver: true,
  })

  React.useEffect(() => {
    const ensureCursorVisibility = () => {
      if (!editor) return

      const { state, view } = editor
      if (!view.hasFocus()) return

      // Get current cursor position coordinates
      const { from } = state.selection
      const cursorCoords = view.coordsAtPos(from)

      if (windowHeight < rect.height && cursorCoords) {
        const availableSpace = windowHeight - cursorCoords.top

        // If the cursor is hidden behind the overlay or offscreen, scroll it into view
        if (availableSpace < overlayHeight) {
          const targetCursorY = Math.max(windowHeight / 2, overlayHeight)
          const currentScrollY = window.scrollY
          const cursorAbsoluteY = cursorCoords.top + currentScrollY
          const newScrollY = cursorAbsoluteY - targetCursorY

          window.scrollTo({
            top: Math.max(0, newScrollY),
            behavior: "smooth",
          })
        }
      }
    }

    ensureCursorVisibility()
  }, [editor, overlayHeight, windowHeight, rect.height])

  return rect
}
</file>

<file path="frontend/src/hooks/use-menu-navigation.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"

type Orientation = "horizontal" | "vertical" | "both"

interface MenuNavigationOptions<T> {
  /**
   * The Tiptap editor instance, if using with a Tiptap editor.
   */
  editor?: Editor | null
  /**
   * Reference to the container element for handling keyboard events.
   */
  containerRef?: React.RefObject<HTMLElement | null>
  /**
   * Search query that affects the selected item.
   */
  query?: string
  /**
   * Array of items to navigate through.
   */
  items: T[]
  /**
   * Callback fired when an item is selected.
   */
  onSelect?: (item: T) => void
  /**
   * Callback fired when the menu should close.
   */
  onClose?: () => void
  /**
   * The navigation orientation of the menu.
   * @default "vertical"
   */
  orientation?: Orientation
  /**
   * Whether to automatically select the first item when the menu opens.
   * @default true
   */
  autoSelectFirstItem?: boolean
}

/**
 * Hook that implements keyboard navigation for dropdown menus and command palettes.
 *
 * Handles arrow keys, tab, home/end, enter for selection, and escape to close.
 * Works with both Tiptap editors and regular DOM elements.
 *
 * @param options - Configuration options for the menu navigation
 * @returns Object containing the selected index and a setter function
 */
export function useMenuNavigation<T>({
  editor,
  containerRef,
  query,
  items,
  onSelect,
  onClose,
  orientation = "vertical",
  autoSelectFirstItem = true,
}: MenuNavigationOptions<T>) {
  const [selectedIndex, setSelectedIndex] = React.useState<number>(
    autoSelectFirstItem ? 0 : -1
  )

  React.useEffect(() => {
    const handleKeyboardNavigation = (event: KeyboardEvent) => {
      if (!items.length) return false

      const moveNext = () =>
        setSelectedIndex((currentIndex) => {
          if (currentIndex === -1) return 0
          return (currentIndex + 1) % items.length
        })

      const movePrev = () =>
        setSelectedIndex((currentIndex) => {
          if (currentIndex === -1) return items.length - 1
          return (currentIndex - 1 + items.length) % items.length
        })

      switch (event.key) {
        case "ArrowUp": {
          if (orientation === "horizontal") return false
          event.preventDefault()
          movePrev()
          return true
        }

        case "ArrowDown": {
          if (orientation === "horizontal") return false
          event.preventDefault()
          moveNext()
          return true
        }

        case "ArrowLeft": {
          if (orientation === "vertical") return false
          event.preventDefault()
          movePrev()
          return true
        }

        case "ArrowRight": {
          if (orientation === "vertical") return false
          event.preventDefault()
          moveNext()
          return true
        }

        case "Tab": {
          event.preventDefault()
          if (event.shiftKey) {
            movePrev()
          } else {
            moveNext()
          }
          return true
        }

        case "Home": {
          event.preventDefault()
          setSelectedIndex(0)
          return true
        }

        case "End": {
          event.preventDefault()
          setSelectedIndex(items.length - 1)
          return true
        }

        case "Enter": {
          if (event.isComposing) return false
          event.preventDefault()
          if (selectedIndex !== -1 && items[selectedIndex]) {
            onSelect?.(items[selectedIndex])
          }
          return true
        }

        case "Escape": {
          event.preventDefault()
          onClose?.()
          return true
        }

        default:
          return false
      }
    }

    let targetElement: HTMLElement | null = null

    if (editor) {
      targetElement = editor.view.dom
    } else if (containerRef?.current) {
      targetElement = containerRef.current
    }

    if (targetElement) {
      targetElement.addEventListener("keydown", handleKeyboardNavigation, true)

      return () => {
        targetElement?.removeEventListener(
          "keydown",
          handleKeyboardNavigation,
          true
        )
      }
    }

    return undefined
  }, [
    editor,
    containerRef,
    items,
    selectedIndex,
    onSelect,
    onClose,
    orientation,
  ])

  React.useEffect(() => {
    if (query) {
      setSelectedIndex(autoSelectFirstItem ? 0 : -1)
    }
  }, [query, autoSelectFirstItem])

  return {
    selectedIndex: items.length ? selectedIndex : undefined,
    setSelectedIndex,
  }
}
</file>

<file path="frontend/src/hooks/use-mobile.ts">
import * as React from "react"

export function useIsMobile(breakpoint = 768) {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${breakpoint - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < breakpoint)
    }
    mql.addEventListener("change", onChange)
    setIsMobile(window.innerWidth < breakpoint)
    return () => mql.removeEventListener("change", onChange)
  }, [breakpoint])

  return !!isMobile
}
</file>

<file path="frontend/src/hooks/use-scrolling.ts">
import type { RefObject } from "react"
import { useEffect, useState } from "react"

type ScrollTarget = RefObject<HTMLElement> | Window | null | undefined
type EventTargetWithScroll = Window | HTMLElement | Document

interface UseScrollingOptions {
  debounce?: number
  fallbackToDocument?: boolean
}

export function useScrolling(
  target?: ScrollTarget,
  options: UseScrollingOptions = {}
): boolean {
  const { debounce = 150, fallbackToDocument = true } = options
  const [isScrolling, setIsScrolling] = useState(false)

  useEffect(() => {
    // Resolve element or window
    const element: EventTargetWithScroll =
      target && typeof Window !== "undefined" && target instanceof Window
        ? target
        : ((target as RefObject<HTMLElement>)?.current ?? window)

    // Mobile: fallback to document when using window
    const eventTarget: EventTargetWithScroll =
      fallbackToDocument &&
      element === window &&
      typeof document !== "undefined"
        ? document
        : element

    const on = (
      el: EventTargetWithScroll,
      event: string,
      handler: EventListener
    ) => el.addEventListener(event, handler, { passive: true })

    const off = (
      el: EventTargetWithScroll,
      event: string,
      handler: EventListener
    ) => el.removeEventListener(event, handler)

    let timeout: ReturnType<typeof setTimeout>
    const supportsScrollEnd = element === window && "onscrollend" in window

    const handleScroll: EventListener = () => {
      if (!isScrolling) setIsScrolling(true)

      if (!supportsScrollEnd) {
        clearTimeout(timeout)
        timeout = setTimeout(() => setIsScrolling(false), debounce)
      }
    }

    const handleScrollEnd: EventListener = () => setIsScrolling(false)

    on(eventTarget, "scroll", handleScroll)
    if (supportsScrollEnd) {
      on(eventTarget, "scrollend", handleScrollEnd)
    }

    return () => {
      off(eventTarget, "scroll", handleScroll)
      if (supportsScrollEnd) {
        off(eventTarget, "scrollend", handleScrollEnd)
      }
      clearTimeout(timeout)
    }
  }, [target, debounce, fallbackToDocument, isScrolling])

  return isScrolling
}
</file>

<file path="frontend/src/hooks/use-throttled-callback.ts">
import throttle from "lodash.throttle"
import * as React from "react"
import { useUnmount } from "./use-unmount"

interface ThrottleSettings {
  leading?: boolean | undefined
  trailing?: boolean | undefined
}

const defaultOptions: ThrottleSettings = {
  leading: false,
  trailing: true,
}

/**
 * A hook that returns a throttled callback function.
 *
 * @param fn The function to throttle
 * @param wait The time in ms to wait before calling the function
 * @param dependencies The dependencies to watch for changes
 * @param options The throttle options
 */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
export function useThrottledCallback<T extends (...args: any[]) => any>(
  fn: T,
  wait = 250,
  dependencies: React.DependencyList = [],
  options: ThrottleSettings = defaultOptions
): {
  (this: ThisParameterType<T>, ...args: Parameters<T>): ReturnType<T>
  cancel: () => void
  flush: () => void
} {
  const handler = React.useMemo(
    () => throttle<T>(fn, wait, options),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    dependencies
  )

  useUnmount(() => {
    handler.cancel()
  })

  return handler
}

export default useThrottledCallback
</file>

<file path="frontend/src/hooks/use-tiptap-editor.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"
import { useCurrentEditor, useEditorState } from "@tiptap/react"

/**
 * Hook that provides access to a Tiptap editor instance.
 *
 * Accepts an optional editor instance directly, or falls back to retrieving
 * the editor from the Tiptap context if available. This allows components
 * to work both when given an editor directly and when used within a Tiptap
 * editor context.
 *
 * @param providedEditor - Optional editor instance to use instead of the context editor
 * @returns The provided editor or the editor from context, whichever is available
 */
export function useTiptapEditor(providedEditor?: Editor | null): {
  editor: Editor | null
  editorState?: Editor["state"]
  canCommand?: Editor["can"]
} {
  const { editor: coreEditor } = useCurrentEditor()
  const mainEditor = React.useMemo(
    () => providedEditor || coreEditor,
    [providedEditor, coreEditor]
  )

  const editorState = useEditorState({
    editor: mainEditor,
    selector(context) {
      if (!context.editor) {
        return {
          editor: null,
          editorState: undefined,
          canCommand: undefined,
        }
      }

      return {
        editor: context.editor,
        editorState: context.editor.state,
        canCommand: context.editor.can,
      }
    },
  })

  return editorState || { editor: null }
}
</file>

<file path="frontend/src/hooks/use-unmount.ts">
import { useRef, useEffect } from "react"

/**
 * Hook that executes a callback when the component unmounts.
 *
 * @param callback Function to be called on component unmount
 */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
export const useUnmount = (callback: (...args: Array<any>) => any) => {
  const ref = useRef(callback)
  ref.current = callback

  useEffect(
    () => () => {
      ref.current()
    },
    []
  )
}

export default useUnmount
</file>

<file path="frontend/src/hooks/useAuth.ts">
/**
 * Authentication hook for Watson application
 * Provides a simplified interface for components to interact with authentication
 */

import { useAuthContext } from '../contexts/AuthContext';
import { User, AuthState } from '../types/auth';

/**
 * Custom hook to access authentication state and methods
 * Provides a clean interface for components to use authentication
 */
export function useAuth() {
  const { authState, login, logout, updateUser } = useAuthContext();

  // Derived state for easier access
  const isAuthenticated = authState.isAuthenticated;
  const user = authState.user;
  const token = authState.token;
  const isLoading = authState.loading;

  // User role helpers
  const isAdmin = user?.role === 'admin';
  const isClinician = user?.role === 'clinician';
  const isViewer = user?.role === 'viewer';

  // Authentication status helpers
  const hasValidSession = isAuthenticated && !!user && !!token;
  const isInitializing = isLoading;

  return {
    // Auth state
    authState,
    isAuthenticated,
    user,
    token,
    isLoading,
    
    // Derived state
    hasValidSession,
    isInitializing,
    
    // Role helpers
    isAdmin,
    isClinician,
    isViewer,
    
    // Auth actions
    login,
    logout,
    updateUser,
    
    // User info helpers
    getUserEmail: () => user?.email || null,
    getUserName: () => user?.name || user?.email || null,
    getUserRole: () => user?.role || null,
    getUserId: () => user?.id || null,
  };
}

/**
 * Hook to require authentication - throws error if not authenticated
 * Use this in components that should only be accessible to authenticated users
 */
export function useRequireAuth() {
  const auth = useAuth();
  
  if (!auth.isAuthenticated && !auth.isLoading) {
    throw new Error('Authentication required');
  }
  
  return auth;
}

/**
 * Hook for role-based access control
 * Returns boolean indicating if user has required role
 */
export function useHasRole(requiredRole: string | string[]) {
  const { user } = useAuth();
  
  if (!user) return false;
  
  if (Array.isArray(requiredRole)) {
    return requiredRole.includes(user.role);
  }
  
  return user.role === requiredRole;
}

/**
 * Hook to check if user has admin privileges
 */
export function useIsAdmin() {
  return useHasRole('admin');
}

/**
 * Hook to check if user is a clinician
 */
export function useIsClinician() {
  return useHasRole(['admin', 'clinician']);
}

export default useAuth;
</file>

<file path="frontend/src/pages/AppLayout.tsx">
import React, { useState } from 'react';
import { AppHeader } from '@/components/layout/AppHeader';
import { AppFooter } from '@/components/layout/AppFooter';
import { MainPanel } from '@/components/layout/MainPanel';
import { BackgroundBeams } from '@/components/ui/background-beams';

export function AppLayout() {
  const [activeView, setActiveView] = useState<'dashboard' | 'profile' | 'settings'>('dashboard');
  
  return (
    <div className="min-h-screen bg-black/[0.96] flex flex-col relative">
      <BackgroundBeams />
      <div className="relative z-10 flex flex-col min-h-screen">
        <AppHeader onNavigate={setActiveView} activeView={activeView} />
        <MainPanel activeView={activeView} />
        <AppFooter />
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/pages/LandingPage.tsx">
import React from 'react';
import { BackgroundBeams } from '@/components/ui/background-beams';
import { Spotlight } from '@/components/ui/spotlight';
import { SparklesCore } from '@/components/ui/sparkles';
import { InfiniteMovingCards } from '@/components/ui/infinite-moving-cards';
import { Button } from '@/components/ui/moving-border';
import { LogIn } from 'lucide-react';
import { componentTheme } from '@/config/theme';

const testimonials = [
  {
    quote:
      "This platform has completely transformed how we approach product development. The tools are intuitive and powerful.",
    name: "Sarah Chen",
    title: "CTO at TechStart",
  },
  {
    quote:
      "I've never seen such a perfect blend of functionality and aesthetics. It's a game-changer for our team.",
    name: "Michael Rodriguez",
    title: "Product Manager at InnovateCo",
  },
  {
    quote:
      "The attention to detail and the quality of the components is outstanding. Highly recommend!",
    name: "Emily Watson",
    title: "Lead Designer at CreativeHub",
  },
  {
    quote:
      "From concept to deployment, everything just works seamlessly. This is the future of web development.",
    name: "David Kim",
    title: "Founder of NextGen Solutions",
  },
  {
    quote:
      "The performance improvements we've seen are incredible. Our users love the new experience.",
    name: "Lisa Thompson",
    title: "Engineering Director at ScaleUp",
  },
];

export function LandingPage() {
  return (
    <div className="min-h-screen bg-black/[0.96] antialiased bg-grid-white/[0.02] relative overflow-hidden">
      <Spotlight
        className="-top-40 left-0 md:left-60 md:-top-20"
        fill="white"
      />
      <BackgroundBeams />

      <div className="relative z-10">
        {/* Hero Section */}
        <div className="h-[40rem] w-full bg-black flex flex-col items-center justify-center overflow-hidden rounded-md">
          <h1 className="md:text-7xl text-5xl lg:text-9xl font-bold text-center text-white relative z-20">
            Watson <span className="bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">AI</span>{" "}
            <span className="text-cyan-400 font-normal text-4xl">v1.0</span>
          </h1>
          <div className="w-[40rem] h-40 relative">
            {/* Gradients */}
            <div className="absolute inset-x-20 top-0 bg-gradient-to-r from-transparent via-blue-500 to-transparent h-[2px] w-3/4 blur-sm" />
            <div className="absolute inset-x-20 top-0 bg-gradient-to-r from-transparent via-blue-500 to-transparent h-px w-3/4" />
            <div className="absolute inset-x-60 top-0 bg-gradient-to-r from-transparent via-cyan-500 to-transparent h-[5px] w-1/4 blur-sm" />
            <div className="absolute inset-x-60 top-0 bg-gradient-to-r from-transparent via-cyan-500 to-transparent h-px w-1/4" />

            {/* Core component */}
            <SparklesCore
              background="transparent"
              minSize={0.4}
              maxSize={1}
              particleDensity={1200}
              className="w-full h-full"
              particleColor="#FFFFFF"
            />

            {/* Radial Gradient to prevent sharp edges */}
            <div className="absolute inset-0 w-full h-full bg-black [mask-image:radial-gradient(350px_200px_at_top,transparent_20%,white)]">

            </div>
          </div>
        </div>



        {/* Testimonials Section */}
        <div className="py-20 relative bg-black">
          <div className="absolute inset-0 bg-grid-white/[0.02]" />
          <div className="relative z-10">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <h2 className="text-3xl md:text-5xl font-bold text-center bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-4">
                What Our Users Say
              </h2>
              <p className="text-neutral-400 text-center max-w-2xl mx-auto mb-16">
                Join hundreds of clinicians who have transformed their documentation workflow
              </p>
            </div>

            <div className="rounded-md flex flex-col antialiased bg-black items-center justify-center relative overflow-hidden">
              <InfiniteMovingCards
                items={testimonials}
                direction="right"
                speed="slow"
              />
            </div>
          </div>
        </div>

        {/* CTA Section */}
        <div className="py-20 relative">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 className="text-3xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-8">
              Ready to Get Started?
            </h2>
            <p className="text-neutral-400 text-lg mb-12">
              Experience the power of AI-assisted clinical documentation
            </p>
            <Button
              borderRadius="1.75rem"
              className="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white border-none px-12 py-4 text-lg transition-all"
              onClick={() => {
                // Set localStorage flag and redirect to app
                localStorage.setItem('isAuthenticated', 'true');
                window.location.href = '/app';
              }}
            >
              <LogIn className="w-5 h-5 mr-2" />
              Sign In to Watson
            </Button>
          </div>
        </div>

        {/* Footer */}
        <footer className="border-t border-neutral-800 py-12">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="flex flex-col md:flex-row justify-between items-center">
              <div className="mb-4 md:mb-0">
                <p className="text-neutral-400">
                  © 2024 Watson AI. All rights reserved.
                </p>
              </div>
              <div className="flex space-x-6">
                <a href="#" className="text-neutral-400 hover:text-white transition">
                  Privacy
                </a>
                <a href="#" className="text-neutral-400 hover:text-white transition">
                  Terms
                </a>
                <a href="#" className="text-neutral-400 hover:text-white transition">
                  Contact
                </a>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/styles/_keyframe-animations.scss">
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes zoomIn {
  from {
    transform: scale(0.95);
  }
  to {
    transform: scale(1);
  }
}

@keyframes zoomOut {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(0.95);
  }
}

@keyframes zoom {
  0% {
    opacity: 0;
    transform: scale(0.95);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slideFromTop {
  from {
    transform: translateY(-0.5rem);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes slideFromRight {
  from {
    transform: translateX(0.5rem);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideFromLeft {
  from {
    transform: translateX(-0.5rem);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideFromBottom {
  from {
    transform: translateY(0.5rem);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
</file>

<file path="frontend/src/styles/_variables.scss">
:root {
  /****************** 
  Basics
  ******************/

  overflow-wrap: break-word;
  text-size-adjust: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /****************** 
  Colors variables
  ******************/

  /* Gray alpha (light mode) */
  --tt-gray-light-a-50: rgba(56, 56, 56, 0.04);
  --tt-gray-light-a-100: rgba(15, 22, 36, 0.05);
  --tt-gray-light-a-200: rgba(37, 39, 45, 0.1);
  --tt-gray-light-a-300: rgba(47, 50, 55, 0.2);
  --tt-gray-light-a-400: rgba(40, 44, 51, 0.42);
  --tt-gray-light-a-500: rgba(52, 55, 60, 0.64);
  --tt-gray-light-a-600: rgba(36, 39, 46, 0.78);
  --tt-gray-light-a-700: rgba(35, 37, 42, 0.87);
  --tt-gray-light-a-800: rgba(30, 32, 36, 0.95);
  --tt-gray-light-a-900: rgba(29, 30, 32, 0.98);

  /* Gray (light mode) */
  --tt-gray-light-50: rgba(250, 250, 250, 1);
  --tt-gray-light-100: rgba(244, 244, 245, 1);
  --tt-gray-light-200: rgba(234, 234, 235, 1);
  --tt-gray-light-300: rgba(213, 214, 215, 1);
  --tt-gray-light-400: rgba(166, 167, 171, 1);
  --tt-gray-light-500: rgba(125, 127, 130, 1);
  --tt-gray-light-600: rgba(83, 86, 90, 1);
  --tt-gray-light-700: rgba(64, 65, 69, 1);
  --tt-gray-light-800: rgba(44, 45, 48, 1);
  --tt-gray-light-900: rgba(34, 35, 37, 1);

  /* Gray alpha (dark mode) */
  --tt-gray-dark-a-50: rgba(232, 232, 253, 0.05);
  --tt-gray-dark-a-100: rgba(231, 231, 243, 0.07);
  --tt-gray-dark-a-200: rgba(238, 238, 246, 0.11);
  --tt-gray-dark-a-300: rgba(239, 239, 245, 0.22);
  --tt-gray-dark-a-400: rgba(244, 244, 255, 0.37);
  --tt-gray-dark-a-500: rgba(236, 238, 253, 0.5);
  --tt-gray-dark-a-600: rgba(247, 247, 253, 0.64);
  --tt-gray-dark-a-700: rgba(251, 251, 254, 0.75);
  --tt-gray-dark-a-800: rgba(253, 253, 253, 0.88);
  --tt-gray-dark-a-900: rgba(255, 255, 255, 0.96);

  /* Gray (dark mode) */
  --tt-gray-dark-50: rgba(25, 25, 26, 1);
  --tt-gray-dark-100: rgba(32, 32, 34, 1);
  --tt-gray-dark-200: rgba(45, 45, 47, 1);
  --tt-gray-dark-300: rgba(70, 70, 73, 1);
  --tt-gray-dark-400: rgba(99, 99, 105, 1);
  --tt-gray-dark-500: rgba(124, 124, 131, 1);
  --tt-gray-dark-600: rgba(163, 163, 168, 1);
  --tt-gray-dark-700: rgba(192, 192, 195, 1);
  --tt-gray-dark-800: rgba(224, 224, 225, 1);
  --tt-gray-dark-900: rgba(245, 245, 245, 1);

  /* Brand colors */
  --tt-brand-color-50: rgba(239, 238, 255, 1);
  --tt-brand-color-100: rgba(222, 219, 255, 1);
  --tt-brand-color-200: rgba(195, 189, 255, 1);
  --tt-brand-color-300: rgba(157, 138, 255, 1);
  --tt-brand-color-400: rgba(122, 82, 255, 1);
  --tt-brand-color-500: rgba(98, 41, 255, 1);
  --tt-brand-color-600: rgba(84, 0, 229, 1);
  --tt-brand-color-700: rgba(75, 0, 204, 1);
  --tt-brand-color-800: rgba(56, 0, 153, 1);
  --tt-brand-color-900: rgba(43, 25, 102, 1);
  --tt-brand-color-950: hsla(257, 100%, 9%, 1);

  /* Green */
  --tt-color-green-inc-5: hsla(129, 100%, 97%, 1);
  --tt-color-green-inc-4: hsla(129, 100%, 92%, 1);
  --tt-color-green-inc-3: hsla(131, 100%, 86%, 1);
  --tt-color-green-inc-2: hsla(133, 98%, 78%, 1);
  --tt-color-green-inc-1: hsla(137, 99%, 70%, 1);
  --tt-color-green-base: hsla(147, 99%, 50%, 1);
  --tt-color-green-dec-1: hsla(147, 97%, 41%, 1);
  --tt-color-green-dec-2: hsla(146, 98%, 32%, 1);
  --tt-color-green-dec-3: hsla(146, 100%, 24%, 1);
  --tt-color-green-dec-4: hsla(144, 100%, 16%, 1);
  --tt-color-green-dec-5: hsla(140, 100%, 9%, 1);

  /* Yellow */
  --tt-color-yellow-inc-5: hsla(50, 100%, 97%, 1);
  --tt-color-yellow-inc-4: hsla(50, 100%, 91%, 1);
  --tt-color-yellow-inc-3: hsla(50, 100%, 84%, 1);
  --tt-color-yellow-inc-2: hsla(50, 100%, 77%, 1);
  --tt-color-yellow-inc-1: hsla(50, 100%, 68%, 1);
  --tt-color-yellow-base: hsla(52, 100%, 50%, 1);
  --tt-color-yellow-dec-1: hsla(52, 100%, 41%, 1);
  --tt-color-yellow-dec-2: hsla(52, 100%, 32%, 1);
  --tt-color-yellow-dec-3: hsla(52, 100%, 24%, 1);
  --tt-color-yellow-dec-4: hsla(51, 100%, 16%, 1);
  --tt-color-yellow-dec-5: hsla(50, 100%, 9%, 1);

  /* Red */
  --tt-color-red-inc-5: hsla(11, 100%, 96%, 1);
  --tt-color-red-inc-4: hsla(11, 100%, 88%, 1);
  --tt-color-red-inc-3: hsla(10, 100%, 80%, 1);
  --tt-color-red-inc-2: hsla(9, 100%, 73%, 1);
  --tt-color-red-inc-1: hsla(7, 100%, 64%, 1);
  --tt-color-red-base: hsla(7, 100%, 54%, 1);
  --tt-color-red-dec-1: hsla(7, 100%, 41%, 1);
  --tt-color-red-dec-2: hsla(5, 100%, 32%, 1);
  --tt-color-red-dec-3: hsla(4, 100%, 24%, 1);
  --tt-color-red-dec-4: hsla(3, 100%, 16%, 1);
  --tt-color-red-dec-5: hsla(1, 100%, 9%, 1);

  /* Basic colors */
  --white: rgba(255, 255, 255, 1);
  --black: rgba(14, 14, 17, 1);
  --transparent: rgba(255, 255, 255, 0);

  /****************** 
  Shadow variables
  ******************/

  /* Shadows Light */
  --tt-shadow-elevated-md:
    0px 16px 48px 0px rgba(17, 24, 39, 0.04),
    0px 12px 24px 0px rgba(17, 24, 39, 0.04),
    0px 6px 8px 0px rgba(17, 24, 39, 0.02),
    0px 2px 3px 0px rgba(17, 24, 39, 0.02);

  /************************************************** 
       Radius variables 
    **************************************************/

  --tt-radius-xxs: 0.125rem; /* 2px */
  --tt-radius-xs: 0.25rem; /* 4px */
  --tt-radius-sm: 0.375rem; /* 6px */
  --tt-radius-md: 0.5rem; /* 8px */
  --tt-radius-lg: 0.75rem; /* 12px */
  --tt-radius-xl: 1rem; /* 16px */

  /************************************************** 
       Transition variables 
    **************************************************/

  --tt-transition-duration-short: 0.1s;
  --tt-transition-duration-default: 0.2s;
  --tt-transition-duration-long: 0.64s;
  --tt-transition-easing-default: cubic-bezier(0.46, 0.03, 0.52, 0.96);
  --tt-transition-easing-cubic: cubic-bezier(0.65, 0.05, 0.36, 1);
  --tt-transition-easing-quart: cubic-bezier(0.77, 0, 0.18, 1);
  --tt-transition-easing-circ: cubic-bezier(0.79, 0.14, 0.15, 0.86);
  --tt-transition-easing-back: cubic-bezier(0.68, -0.55, 0.27, 1.55);

  /****************** 
  Contrast variables
  ******************/

  --tt-accent-contrast: 8%;
  --tt-destructive-contrast: 8%;
  --tt-foreground-contrast: 8%;

  &,
  *,
  ::before,
  ::after {
    box-sizing: border-box;
    transition: none var(--tt-transition-duration-default)
      var(--tt-transition-easing-default);
  }
}

:root {
  /************************************************** 
      Global colors 
  **************************************************/

  /* Global colors - Light mode */
  --tt-bg-color: var(--white);
  --tt-border-color: var(--tt-gray-light-a-200);
  --tt-border-color-tint: var(--tt-gray-light-a-100);
  --tt-sidebar-bg-color: var(--tt-gray-light-100);
  --tt-scrollbar-color: var(--tt-gray-light-a-200);
  --tt-cursor-color: var(--tt-brand-color-500);
  --tt-selection-color: rgba(157, 138, 255, 0.2);
  --tt-card-bg-color: var(--white);
  --tt-card-border-color: var(--tt-gray-light-a-100);
}

/* Global colors - Dark mode */
.dark {
  --tt-bg-color: var(--black);
  --tt-border-color: var(--tt-gray-dark-a-200);
  --tt-border-color-tint: var(--tt-gray-dark-a-100);
  --tt-sidebar-bg-color: var(--tt-gray-dark-100);
  --tt-scrollbar-color: var(--tt-gray-dark-a-200);
  --tt-cursor-color: var(--tt-brand-color-400);
  --tt-selection-color: rgba(122, 82, 255, 0.2);
  --tt-card-bg-color: var(--tt-gray-dark-50);
  --tt-card-border-color: var(--tt-gray-dark-a-50);

  --tt-shadow-elevated-md:
    0px 16px 48px 0px rgba(0, 0, 0, 0.5), 0px 12px 24px 0px rgba(0, 0, 0, 0.24),
    0px 6px 8px 0px rgba(0, 0, 0, 0.22), 0px 2px 3px 0px rgba(0, 0, 0, 0.12);
}

/* Text colors */
:root {
  --tt-color-text-gray: hsl(45, 2%, 46%);
  --tt-color-text-brown: hsl(19, 31%, 47%);
  --tt-color-text-orange: hsl(30, 89%, 45%);
  --tt-color-text-yellow: hsl(38, 62%, 49%);
  --tt-color-text-green: hsl(148, 32%, 39%);
  --tt-color-text-blue: hsl(202, 54%, 43%);
  --tt-color-text-purple: hsl(274, 32%, 54%);
  --tt-color-text-pink: hsl(328, 49%, 53%);
  --tt-color-text-red: hsl(2, 62%, 55%);

  --tt-color-text-gray-contrast: hsla(39, 26%, 26%, 0.15);
  --tt-color-text-brown-contrast: hsla(18, 43%, 69%, 0.35);
  --tt-color-text-orange-contrast: hsla(24, 73%, 55%, 0.27);
  --tt-color-text-yellow-contrast: hsla(44, 82%, 59%, 0.39);
  --tt-color-text-green-contrast: hsla(126, 29%, 60%, 0.27);
  --tt-color-text-blue-contrast: hsla(202, 54%, 59%, 0.27);
  --tt-color-text-purple-contrast: hsla(274, 37%, 64%, 0.27);
  --tt-color-text-pink-contrast: hsla(331, 60%, 71%, 0.27);
  --tt-color-text-red-contrast: hsla(8, 79%, 79%, 0.4);
}

.dark {
  --tt-color-text-gray: hsl(0, 0%, 61%);
  --tt-color-text-brown: hsl(18, 35%, 58%);
  --tt-color-text-orange: hsl(25, 53%, 53%);
  --tt-color-text-yellow: hsl(36, 54%, 55%);
  --tt-color-text-green: hsl(145, 32%, 47%);
  --tt-color-text-blue: hsl(202, 64%, 52%);
  --tt-color-text-purple: hsl(270, 55%, 62%);
  --tt-color-text-pink: hsl(329, 57%, 58%);
  --tt-color-text-red: hsl(1, 69%, 60%);

  --tt-color-text-gray-contrast: hsla(0, 0%, 100%, 0.09);
  --tt-color-text-brown-contrast: hsla(17, 45%, 50%, 0.25);
  --tt-color-text-orange-contrast: hsla(27, 82%, 53%, 0.2);
  --tt-color-text-yellow-contrast: hsla(35, 49%, 47%, 0.2);
  --tt-color-text-green-contrast: hsla(151, 55%, 39%, 0.2);
  --tt-color-text-blue-contrast: hsla(202, 54%, 43%, 0.2);
  --tt-color-text-purple-contrast: hsla(271, 56%, 60%, 0.18);
  --tt-color-text-pink-contrast: hsla(331, 67%, 58%, 0.22);
  --tt-color-text-red-contrast: hsla(0, 67%, 60%, 0.25);
}

/* Highlight colors */
:root {
  --tt-color-highlight-yellow: #fef9c3;
  --tt-color-highlight-green: #dcfce7;
  --tt-color-highlight-blue: #e0f2fe;
  --tt-color-highlight-purple: #f3e8ff;
  --tt-color-highlight-red: #ffe4e6;
  --tt-color-highlight-gray: rgb(248, 248, 247);
  --tt-color-highlight-brown: rgb(244, 238, 238);
  --tt-color-highlight-orange: rgb(251, 236, 221);
  --tt-color-highlight-pink: rgb(252, 241, 246);

  --tt-color-highlight-yellow-contrast: #fbe604;
  --tt-color-highlight-green-contrast: #c7fad8;
  --tt-color-highlight-blue-contrast: #ceeafd;
  --tt-color-highlight-purple-contrast: #e4ccff;
  --tt-color-highlight-red-contrast: #ffccd0;
  --tt-color-highlight-gray-contrast: rgba(84, 72, 49, 0.15);
  --tt-color-highlight-brown-contrast: rgba(210, 162, 141, 0.35);
  --tt-color-highlight-orange-contrast: rgba(224, 124, 57, 0.27);
  --tt-color-highlight-pink-contrast: rgba(225, 136, 179, 0.27);
}

.dark {
  --tt-color-highlight-yellow: #6b6524;
  --tt-color-highlight-green: #509568;
  --tt-color-highlight-blue: #6e92aa;
  --tt-color-highlight-purple: #583e74;
  --tt-color-highlight-red: #743e42;
  --tt-color-highlight-gray: rgb(47, 47, 47);
  --tt-color-highlight-brown: rgb(74, 50, 40);
  --tt-color-highlight-orange: rgb(92, 59, 35);
  --tt-color-highlight-pink: rgb(78, 44, 60);

  --tt-color-highlight-yellow-contrast: #58531e;
  --tt-color-highlight-green-contrast: #47855d;
  --tt-color-highlight-blue-contrast: #5e86a1;
  --tt-color-highlight-purple-contrast: #4c3564;
  --tt-color-highlight-red-contrast: #643539;
  --tt-color-highlight-gray-contrast: rgba(255, 255, 255, 0.094);
  --tt-color-highlight-brown-contrast: rgba(184, 101, 69, 0.25);
  --tt-color-highlight-orange-contrast: rgba(233, 126, 37, 0.2);
  --tt-color-highlight-pink-contrast: rgba(220, 76, 145, 0.22);
}
</file>

<file path="frontend/src/types/auth.ts">
/**
 * Authentication types for Watson application
 * Defines interfaces for JWT tokens, user data, and authentication state
 */

export interface JWTPayload {
  sub: string;
  email: string;
  role: string;
  exp: number;
  iat: number;
}

export interface AuthState {
  isAuthenticated: boolean;
  user: User | null;
  token: string | null;
  loading: boolean;
}

export interface User {
  id: string;
  email: string;
  role: string;
  name?: string;
}

export interface AuthContextType {
  authState: AuthState;
  login: (token: string) => void;
  logout: () => void;
  updateUser: (user: Partial<User>) => void;
}

export type UserRole = 'admin' | 'clinician' | 'viewer';

export interface LoginCredentials {
  email: string;
  password: string;
}

export interface AuthError {
  message: string;
  code: string;
}
</file>

<file path="frontend/src/utils/auth.ts">
/**
 * Authentication utilities for Watson application
 * Handles JWT token validation, parsing, and localStorage management
 */

import { JWTPayload, User, AuthError } from '../types/auth';

/**
 * Parse JWT token payload (basic implementation)
 * Note: In production, use proper JWT library with signature verification
 */
export function parseJWT(token: string): JWTPayload | null {
  try {
    // Basic JWT parsing (payload is base64-encoded second part)
    const base64Url = token.split('.')[1];
    if (!base64Url) return null;
    
    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    const jsonPayload = decodeURIComponent(
      atob(base64)
        .split('')
        .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
        .join('')
    );
    
    return JSON.parse(jsonPayload) as JWTPayload;
  } catch (error) {
    console.error('Failed to parse JWT:', error);
    return null;
  }
}

/**
 * Validate JWT token expiration
 */
export function isTokenExpired(token: string): boolean {
  const payload = parseJWT(token);
  if (!payload) return true;
  
  const currentTime = Math.floor(Date.now() / 1000);
  return payload.exp < currentTime;
}

/**
 * Validate JWT token format and expiration
 */
export function isValidToken(token: string): boolean {
  if (!token || typeof token !== 'string') return false;
  
  const parts = token.split('.');
  if (parts.length !== 3) return false;
  
  return !isTokenExpired(token);
}

/**
 * Extract user information from JWT token
 */
export function getUserFromToken(token: string): User | null {
  const payload = parseJWT(token);
  if (!payload) return null;
  
  return {
    id: payload.sub,
    email: payload.email,
    role: payload.role,
  };
}

/**
 * Get stored authentication token from localStorage
 */
export function getStoredToken(): string | null {
  try {
    return localStorage.getItem('watson-auth-token');
  } catch (error) {
    console.error('Failed to get stored token:', error);
    return null;
  }
}

/**
 * Store authentication token in localStorage
 */
export function storeToken(token: string): void {
  try {
    localStorage.setItem('watson-auth-token', token);
  } catch (error) {
    console.error('Failed to store token:', error);
  }
}

/**
 * Remove authentication token from localStorage
 */
export function removeToken(): void {
  try {
    localStorage.removeItem('watson-auth-token');
  } catch (error) {
    console.error('Failed to remove token:', error);
  }
}

/**
 * Check if user has been checked in within last 7 days
 */
export function shouldShowLanding(): boolean {
  try {
    const lastCheckIn = localStorage.getItem('watson-last-check-in');
    
    if (!lastCheckIn) return true;
    
    const lastDate = new Date(lastCheckIn);
    const now = new Date();
    const daysDiff = Math.floor((now.getTime() - lastDate.getTime()) / (1000 * 60 * 60 * 24));
    
    return daysDiff > 7;
  } catch (error) {
    console.error('Failed to check landing page requirement:', error);
    return true; // Show landing page on error for safety
  }
}

/**
 * Update last check-in date to current timestamp
 */
export function updateCheckIn(): void {
  try {
    localStorage.setItem('watson-last-check-in', new Date().toISOString());
  } catch (error) {
    console.error('Failed to update check-in:', error);
  }
}

/**
 * Get last check-in date
 */
export function getLastCheckIn(): Date | null {
  try {
    const lastCheckIn = localStorage.getItem('watson-last-check-in');
    return lastCheckIn ? new Date(lastCheckIn) : null;
  } catch (error) {
    console.error('Failed to get last check-in:', error);
    return null;
  }
}

/**
 * Clear all authentication-related localStorage data
 */
export function clearAuthData(): void {
  try {
    localStorage.removeItem('watson-auth-token');
    localStorage.removeItem('watson-last-check-in');
  } catch (error) {
    console.error('Failed to clear auth data:', error);
  }
}

/**
 * Create authentication error
 */
export function createAuthError(message: string, code: string): AuthError {
  return {
    message,
    code,
  };
}
</file>

<file path="frontend/src/utils/cn.ts">
/**
 * Class name utility for Watson application
 * Combines clsx and tailwind-merge for optimal Tailwind CSS class handling
 * Used extensively in Aceternity UI components
 */

import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

/**
 * Combines class names with proper Tailwind CSS merging
 * Handles conditional classes and merges conflicting Tailwind classes
 * 
 * @param inputs - Class values to combine
 * @returns Merged and optimized class string
 * 
 * @example
 * cn('px-4 py-2', 'bg-blue-500', { 'text-white': isActive })
 * cn('p-4', 'px-6') // Results in 'py-4 px-6' (px-4 is overridden)
 */
export function cn(...inputs: ClassValue[]): string {
  return twMerge(clsx(inputs));
}

export default cn;
</file>

<file path="frontend/src/utils/mockAuth.ts">
/**
 * Mock authentication interface for Watson application
 * Provides stubbed authentication functionality for development and testing
 */

import { User, LoginCredentials, AuthError } from '../types/auth';

// Mock users for development
const MOCK_USERS: User[] = [
  {
    id: 'user-1',
    email: 'admin@watson.local',
    role: 'admin',
    name: 'Dr. Admin User',
  },
  {
    id: 'user-2', 
    email: 'clinician@watson.local',
    role: 'clinician',
    name: 'Dr. Jane Clinician',
  },
  {
    id: 'user-3',
    email: 'viewer@watson.local', 
    role: 'viewer',
    name: 'John Viewer',
  },
];

// Mock JWT tokens for development (not real JWT - just base64 encoded JSON)
function createMockToken(user: User): string {
  const header = {
    alg: 'HS256',
    typ: 'JWT'
  };
  
  const payload = {
    sub: user.id,
    email: user.email,
    role: user.role,
    name: user.name,
    iat: Math.floor(Date.now() / 1000),
    exp: Math.floor(Date.now() / 1000) + (24 * 60 * 60), // 24 hours
  };
  
  const signature = 'mock_signature';
  
  // Base64 encode each part (mock JWT structure)
  const encodedHeader = btoa(JSON.stringify(header));
  const encodedPayload = btoa(JSON.stringify(payload));
  const encodedSignature = btoa(signature);
  
  return `${encodedHeader}.${encodedPayload}.${encodedSignature}`;
}

/**
 * Mock login function for development
 * Simulates authentication API call with artificial delay
 */
export async function mockLogin(credentials: LoginCredentials): Promise<string> {
  // Simulate API delay
  await new Promise(resolve => setTimeout(resolve, 1000));
  
  // Find user by email
  const user = MOCK_USERS.find(u => u.email === credentials.email);
  
  if (!user) {
    throw new Error('Invalid credentials: User not found');
  }
  
  // Simple password check (in development, accept any password)
  if (credentials.password.length < 4) {
    throw new Error('Invalid credentials: Password too short');
  }
  
  // Return mock JWT token
  return createMockToken(user);
}

/**
 * Mock logout function for development
 */
export async function mockLogout(): Promise<void> {
  // Simulate API delay
  await new Promise(resolve => setTimeout(resolve, 500));
  
  // In real implementation, this might invalidate the token server-side
  console.log('Mock logout completed');
}

/**
 * Get mock user by email for development
 */
export function getMockUser(email: string): User | null {
  return MOCK_USERS.find(u => u.email === email) || null;
}

/**
 * Get all mock users (for development UI)
 */
export function getAllMockUsers(): User[] {
  return [...MOCK_USERS];
}

/**
 * Mock authentication error for testing error states
 */
export function createMockAuthError(message: string): AuthError {
  return {
    message,
    code: 'MOCK_AUTH_ERROR',
  };
}

/**
 * Check if we're in development mode
 */
export function isDevelopmentMode(): boolean {
  return process.env.NODE_ENV === 'development' || 
         process.env.NODE_ENV === 'test' ||
         !process.env.NODE_ENV;
}

/**
 * Mock quick login for development - creates token for given role
 */
export function mockQuickLogin(role: 'admin' | 'clinician' | 'viewer'): string {
  const user = MOCK_USERS.find(u => u.role === role);
  if (!user) {
    throw new Error(`No mock user found for role: ${role}`);
  }
  
  return createMockToken(user);
}

/**
 * Development helper to log current mock auth state
 */
export function logMockAuthState(): void {
  if (isDevelopmentMode()) {
    console.log('🔒 Mock Authentication State:', {
      availableUsers: MOCK_USERS.map(u => ({
        email: u.email,
        role: u.role,
        name: u.name,
      })),
      quickLoginCommands: {
        admin: "mockQuickLogin('admin')",
        clinician: "mockQuickLogin('clinician')",
        viewer: "mockQuickLogin('viewer')",
      },
    });
  }
}
</file>

<file path="frontend/src/utils/validation.test.ts">
import { test, expect, describe } from "bun:test";

// Mock utility functions for testing
const validateReviewData = (data: { title: string; content: string }) => {
  const errors: string[] = [];
  
  if (!data.title || data.title.trim().length === 0) {
    errors.push("Title is required");
  }
  
  if (!data.content || data.content.trim().length === 0) {
    errors.push("Content is required");
  }
  
  if (data.title && data.title.length > 200) {
    errors.push("Title must be under 200 characters");
  }
  
  return {
    isValid: errors.length === 0,
    errors
  };
};

const sanitizeHtml = (html: string): string => {
  // Basic HTML sanitization mock
  return html
    .replace(/<script[^>]*>.*?<\/script>/gi, '')
    .replace(/<iframe[^>]*>.*?<\/iframe>/gi, '')
    .replace(/javascript:/gi, '');
};

describe("Review Validation Utils", () => {
  test("validates complete review data", () => {
    const validData = {
      title: "Medical Review #001",
      content: "Patient shows good progress with current treatment plan."
    };
    
    const result = validateReviewData(validData);
    
    expect(result.isValid).toBe(true);
    expect(result.errors).toHaveLength(0);
  });

  test("rejects empty title", () => {
    const invalidData = {
      title: "",
      content: "Some content here"
    };
    
    const result = validateReviewData(invalidData);
    
    expect(result.isValid).toBe(false);
    expect(result.errors).toContain("Title is required");
  });

  test("rejects empty content", () => {
    const invalidData = {
      title: "Valid Title",
      content: ""
    };
    
    const result = validateReviewData(invalidData);
    
    expect(result.isValid).toBe(false);
    expect(result.errors).toContain("Content is required");
  });

  test("rejects overly long titles", () => {
    const longTitle = "A".repeat(201);
    const invalidData = {
      title: longTitle,
      content: "Valid content"
    };
    
    const result = validateReviewData(invalidData);
    
    expect(result.isValid).toBe(false);
    expect(result.errors).toContain("Title must be under 200 characters");
  });
});

describe("HTML Sanitization Utils", () => {
  test("removes script tags", () => {
    const dirtyHtml = '<p>Safe content</p><script>alert("xss")</script>';
    const cleanHtml = sanitizeHtml(dirtyHtml);
    
    expect(cleanHtml).toBe('<p>Safe content</p>');
    expect(cleanHtml).not.toContain('<script>');
  });

  test("removes iframe tags", () => {
    const dirtyHtml = '<p>Content</p><iframe src="evil.com"></iframe>';
    const cleanHtml = sanitizeHtml(dirtyHtml);
    
    expect(cleanHtml).toBe('<p>Content</p>');
    expect(cleanHtml).not.toContain('<iframe>');
  });

  test("removes javascript: URLs", () => {
    const dirtyHtml = '<a href="javascript:alert(1)">Link</a>';
    const cleanHtml = sanitizeHtml(dirtyHtml);
    
    expect(cleanHtml).toBe('<a href="alert(1)">Link</a>');
    expect(cleanHtml).not.toContain('javascript:');
  });
});
</file>

<file path="frontend/index.html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watson - Clinical LLM Review Tool</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <div id="root"></div>
    <script type="module" src="./src/main.tsx"></script>
</body>
</html>
</file>

<file path="frontend/types.d.ts">
// Type definitions for Watson frontend

declare module "*.html" {
  const content: string;
  export default content;
}

declare module "*.css" {
  const content: string;
  export default content;
}

declare module "*.svg" {
  const content: string;
  export default content;
}

declare module "*.png" {
  const content: string;
  export default content;
}

declare module "*.jpg" {
  const content: string;
  export default content;
}
</file>

<file path="scripts/build-env.sh">
#!/bin/bash

# Watson Environment-Specific Build Script
# Builds for different deployment environments

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Default to staging if no environment specified
ENVIRONMENT=${1:-staging}

echo "🏗️  Watson Environment Build: $ENVIRONMENT"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# Validate environment
case $ENVIRONMENT in
  development|dev)
    ENV_FILE=".env.dev"
    OPTIMIZE_LEVEL="basic"
    INCLUDE_SOURCEMAPS=true
    ;;
  staging|stage)
    ENV_FILE=".env.staging"
    OPTIMIZE_LEVEL="full"
    INCLUDE_SOURCEMAPS=true
    ;;
  production|prod)
    ENV_FILE=".env.production"
    OPTIMIZE_LEVEL="aggressive"
    INCLUDE_SOURCEMAPS=false
    ;;
  *)
    echo -e "${RED}❌ Invalid environment: $ENVIRONMENT${NC}"
    echo "Usage: $0 [development|staging|production]"
    exit 1
    ;;
esac

echo -e "${BLUE}📋 Build Configuration:${NC}"
echo "  • Environment: $ENVIRONMENT"
echo "  • Config file: $ENV_FILE"
echo "  • Optimization: $OPTIMIZE_LEVEL"
echo "  • Source maps: $INCLUDE_SOURCEMAPS"
echo ""

# Check if environment file exists
if [ ! -f "$ENV_FILE" ]; then
    echo -e "${RED}❌ Environment file $ENV_FILE not found${NC}"
    exit 1
fi

# Load environment variables
echo -e "${BLUE}📥 Loading environment configuration...${NC}"
export $(cat $ENV_FILE | grep -v '^#' | xargs)
export NODE_ENV=$ENVIRONMENT

# Set build-specific variables
export OPTIMIZE_LEVEL
export INCLUDE_SOURCEMAPS

# Clean previous builds
echo -e "${BLUE}🧹 Cleaning previous build artifacts...${NC}"
rm -rf dist build backend/staticfiles

# Create build directories
mkdir -p dist/static dist/assets backend/static/dist

# Build frontend with environment-specific optimizations
echo -e "${BLUE}⚡ Building frontend for $ENVIRONMENT...${NC}"

BUN_BUILD_CMD="bun build ./frontend/src/main.tsx --outdir ./dist/static --minify --splitting --format esm --target browser --public-path /static/"

# Add source maps conditionally
if [ "$INCLUDE_SOURCEMAPS" = true ]; then
    BUN_BUILD_CMD="$BUN_BUILD_CMD --sourcemap=linked"
    echo -e "${YELLOW}  📍 Including source maps${NC}"
else
    echo -e "${GREEN}  🔒 Source maps excluded for security${NC}"
fi

# Environment-specific optimizations
case $OPTIMIZE_LEVEL in
  aggressive)
    BUN_BUILD_CMD="$BUN_BUILD_CMD --define process.env.NODE_ENV='\"production\"' --define process.env.DEBUG='\"false\"'"
    echo -e "${GREEN}  🚀 Aggressive optimization enabled${NC}"
    ;;
  full)
    BUN_BUILD_CMD="$BUN_BUILD_CMD --define process.env.NODE_ENV='\"staging\"'"
    echo -e "${BLUE}  ⚡ Full optimization enabled${NC}"
    ;;
  basic)
    echo -e "${YELLOW}  ⚙️  Basic optimization${NC}"
    ;;
esac

# Execute build
eval $BUN_BUILD_CMD

if [ $? -eq 0 ]; then
    echo -e "${GREEN}✅ Frontend build completed${NC}"
else
    echo -e "${RED}❌ Frontend build failed${NC}"
    exit 1
fi

# Copy HTML template
echo -e "${BLUE}📄 Processing HTML template...${NC}"
cp frontend/index.html dist/
echo -e "${GREEN}✅ HTML template copied${NC}"

# Django static collection
echo -e "${BLUE}🐍 Collecting Django static files...${NC}"
cd backend
source ../.venv/bin/activate

# Use environment-specific Django settings
export DJANGO_SETTINGS_MODULE=watson.settings
../.venv/bin/python manage.py collectstatic --noinput --clear

if [ $? -eq 0 ]; then
    echo -e "${GREEN}✅ Django static collection completed${NC}"
else
    echo -e "${RED}❌ Django static collection failed${NC}"
    exit 1
fi

# Copy frontend assets to Django
cp -r ../dist/static/* staticfiles/
cd ..

# Generate environment-specific build manifest
echo -e "${BLUE}📄 Generating build manifest...${NC}"
cat > dist/build-manifest.json << EOF
{
  "buildTime": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")",
  "version": "$(git rev-parse HEAD 2>/dev/null || echo 'development')",
  "environment": "$ENVIRONMENT",
  "optimizationLevel": "$OPTIMIZE_LEVEL",
  "sourceMaps": $INCLUDE_SOURCEMAPS,
  "assets": {
    "frontend": "$(find dist/static -name "*.js" | head -1 | xargs basename 2>/dev/null || echo 'main.js')",
    "css": "$(find dist/static -name "*.css" | head -1 | xargs basename 2>/dev/null || echo 'main.css')"
  },
  "buildConfig": {
    "nodeEnv": "$NODE_ENV",
    "minified": true,
    "codeSplitting": true,
    "envFile": "$ENV_FILE"
  }
}
EOF

# Run build validation
echo -e "${BLUE}🔍 Validating build artifacts...${NC}"
node scripts/validate-build.js

VALIDATION_RESULT=$?

# Final summary
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

if [ $VALIDATION_RESULT -eq 0 ]; then
    echo -e "${GREEN}🎉 Build completed successfully for $ENVIRONMENT!${NC}"
    echo ""
    echo -e "${BLUE}📊 Build Summary:${NC}"
    echo "  • Environment: $ENVIRONMENT"
    echo "  • Frontend bundle: $(find dist/static -name "*.js" -exec du -h {} \; | cut -f1)"
    echo "  • CSS bundle: $(find dist/static -name "*.css" -exec du -h {} \; | cut -f1)"
    echo "  • Total static files: $(find backend/staticfiles -type f | wc -l)"
    echo ""
    echo -e "${GREEN}🚀 Ready for deployment to $ENVIRONMENT!${NC}"
    exit 0
else
    echo -e "${RED}❌ Build validation failed for $ENVIRONMENT${NC}"
    echo "Please review validation warnings before deployment."
    exit 1
fi
</file>

<file path="scripts/build-production.sh">
#!/bin/bash

# Watson Production Build Script
# Creates optimized build artifacts for deployment

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "🏗️  Watson Production Build"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# Set production environment
export NODE_ENV=production

# Function to check command success
check_success() {
    if [ $? -eq 0 ]; then
        echo -e "${GREEN}✅ $1${NC}"
    else
        echo -e "${RED}❌ $1 failed${NC}"
        exit 1
    fi
}

# Clean previous builds
echo -e "${BLUE}🧹 Cleaning previous build artifacts...${NC}"
rm -rf dist build backend/static/dist backend/staticfiles
check_success "Clean completed"

# Create output directories
echo -e "${BLUE}📁 Creating build directories...${NC}"
mkdir -p dist/static dist/assets backend/static/dist
check_success "Directories created"

# TypeScript type checking (frontend only)
echo -e "${BLUE}🔍 Running TypeScript type checking...${NC}"
cd frontend && bun tsc --noEmit src/**/*.tsx src/**/*.ts || echo -e "${YELLOW}⚠️  TypeScript warnings (non-blocking)${NC}"
cd ..

# Build frontend with Bun
echo -e "${BLUE}⚡ Building frontend with Bun optimization...${NC}"
bun build ./frontend/src/main.tsx \
    --outdir ./dist/static \
    --minify \
    --splitting \
    --format esm \
    --target browser \
    --public-path /static/ \
    --sourcemap=linked \
    --define process.env.NODE_ENV='"production"'
check_success "Frontend build"

# Build additional assets
echo -e "${BLUE}🖼️  Processing static assets...${NC}"
# Copy HTML template with hashed asset names
cp frontend/index.html dist/
# Copy any additional static assets
if [ -d "frontend/public" ]; then
    cp -r frontend/public/* dist/static/ 2>/dev/null || true
fi
check_success "Static assets processed"

# Django static file collection
echo -e "${BLUE}🐍 Collecting Django static files...${NC}"
cd backend
source ../.venv/bin/activate

# Ensure Django can find static files
export DJANGO_SETTINGS_MODULE=watson.settings
../.venv/bin/python manage.py collectstatic --noinput --clear
check_success "Django static collection"

# Copy built frontend assets to Django static
echo -e "${BLUE}🔄 Copying frontend assets to Django static...${NC}"
cp -r ../dist/static/* staticfiles/
check_success "Asset copying"

cd ..

# Generate build manifest
echo -e "${BLUE}📄 Generating build manifest...${NC}"
cat > dist/build-manifest.json << EOF
{
  "buildTime": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")",
  "version": "$(git rev-parse HEAD 2>/dev/null || echo 'development')",
  "environment": "production",
  "assets": {
    "frontend": "$(find dist/static -name "*.js" | head -1 | xargs basename 2>/dev/null || echo 'main.js')",
    "css": "$(find dist/static -name "*.css" | head -1 | xargs basename 2>/dev/null || echo 'none')"
  },
  "buildConfig": {
    "nodeEnv": "$NODE_ENV",
    "minified": true,
    "sourceMaps": true,
    "codeSplitting": true
  }
}
EOF
check_success "Build manifest generated"

# Validate build artifacts
echo -e "${BLUE}🔎 Validating build artifacts...${NC}"

# Check if main files exist
if [ ! -f "dist/index.html" ]; then
    echo -e "${RED}❌ Missing index.html${NC}"
    exit 1
fi

JS_FILES=$(find dist/static -name "*.js" | wc -l)
if [ "$JS_FILES" -eq 0 ]; then
    echo -e "${RED}❌ No JavaScript files generated${NC}"
    exit 1
fi

DJANGO_STATIC=$(find backend/staticfiles -type f | wc -l)
if [ "$DJANGO_STATIC" -eq 0 ]; then
    echo -e "${RED}❌ Django static files not collected${NC}"
    exit 1
fi

check_success "Build validation"

# Generate build summary
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo -e "${GREEN}🎉 Production Build Complete!${NC}"
echo ""
echo -e "${BLUE}📊 Build Summary:${NC}"
echo "  • Frontend JS files: $JS_FILES"
echo "  • Django static files: $DJANGO_STATIC"
echo "  • Build artifacts: dist/"
echo "  • Django static: backend/staticfiles/"
echo ""
echo -e "${BLUE}🚀 Ready for deployment!${NC}"
echo "  • Frontend assets: dist/static/"
echo "  • Backend static: backend/staticfiles/"
echo "  • Build manifest: dist/build-manifest.json"
echo ""
</file>

<file path="scripts/ci-local.sh">
#!/bin/bash

# Watson Testing Infrastructure - Local CI Simulation
# Simulates GitHub Actions workflow locally for development

set -e

echo "🚀 Watson Local CI Pipeline Simulation"
echo "======================================"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Function to print status
print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}⚠️  $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

# Change to project root
cd "$(dirname "$0")/.."

echo ""
echo "🔍 Step 1: Environment Check"
echo "----------------------------"

# Check required tools
if command -v bun &> /dev/null; then
    print_status "Bun is available"
else
    print_error "Bun is not installed"
    exit 1
fi

if command -v python &> /dev/null; then
    print_status "Python is available"
else
    print_error "Python is not installed"
    exit 1
fi

if command -v ruby &> /dev/null; then
    print_status "Ruby is available"
else
    print_error "Ruby is not installed"
    exit 1
fi

if command -v bundle &> /dev/null; then
    print_status "Bundler is available"
else
    print_error "Bundler is not installed"
    exit 1
fi

echo ""
echo "🧪 Step 2: Type Checking"
echo "------------------------"
if bun run typecheck; then
    print_status "TypeScript compilation successful"
else
    print_error "TypeScript compilation failed"
    exit 1
fi

echo ""
echo "🧪 Step 3: Running Test Suites"
echo "------------------------------"

# Frontend tests
echo "Frontend Tests (Bun):"
if bun test frontend/ --preload ./bun.test.config.ts; then
    print_status "Frontend tests passed"
else
    print_error "Frontend tests failed"
    exit 1
fi

echo ""
echo "Backend Tests (Django):"
if (cd backend && DJANGO_ENVIRONMENT=test ../.venv/bin/python manage.py test --verbosity=2); then
    print_status "Backend tests passed"
else
    print_error "Backend tests failed"
    exit 1
fi

echo ""
echo "Ruby Tests (RSpec):"
if bundle exec rspec --format progress; then
    print_status "Ruby tests passed"
else
    print_error "Ruby tests failed"
    exit 1
fi

echo ""
echo "📊 Step 4: Coverage Analysis"
echo "----------------------------"
if npm run coverage > /dev/null 2>&1; then
    print_status "Coverage reports generated"
else
    print_warning "Coverage generation had issues (non-fatal)"
fi

echo ""
echo "🔨 Step 5: Build Verification"
echo "-----------------------------"
if NODE_ENV=production npm run build; then
    print_status "Production build successful"
else
    print_error "Production build failed"
    exit 1
fi

if npm run validate:build; then
    print_status "Build validation passed"
else
    print_error "Build validation failed"
    exit 1
fi

echo ""
echo "🎉 Local CI Pipeline Completed Successfully!"
echo "==========================================="
print_status "All checks passed ✅"
echo ""
echo "📈 Summary:"
echo "  • Type checking: ✅"
echo "  • Frontend tests: ✅"
echo "  • Backend tests: ✅"
echo "  • Ruby tests: ✅"
echo "  • Coverage reports: ✅"
echo "  • Production build: ✅"
echo "  • Build validation: ✅"
echo ""
echo "🚀 Ready for deployment!"
</file>

<file path="scripts/coverage-report.sh">
#!/bin/bash

# Watson Testing Infrastructure - Coverage Report
# Generates comprehensive coverage reports for all components

set -e

echo "🔍 Generating Coverage Reports for Watson Testing Infrastructure"
echo "=================================================================="

# Frontend Coverage (TypeScript/JavaScript)
echo ""
echo "📊 Frontend Coverage (Bun):"
echo "----------------------------"
cd "$(dirname "$0")/.."
if bun test frontend/ --coverage 2>/dev/null; then
  echo "✅ Frontend coverage generated"
else
  echo "⚠️  Frontend coverage not available with current Bun version"
fi

# Backend Coverage (Django/Python)
echo ""
echo "📊 Backend Coverage (Django):"
echo "------------------------------"
cd backend
DJANGO_ENVIRONMENT=test ../.venv/bin/python -m coverage run --source='.' manage.py test --verbosity=1
../.venv/bin/python -m coverage report
../.venv/bin/python -m coverage html
echo "✅ Backend HTML coverage report: backend/htmlcov/index.html"
cd ..

# Ruby Coverage (RSpec/SimpleCov)
echo ""
echo "📊 Ruby Coverage (RSpec):"
echo "--------------------------"
if bundle exec rspec --format progress; then
  echo "✅ Ruby HTML coverage report: coverage/index.html"
else
  echo "❌ Ruby coverage failed"
  exit 1
fi

echo ""
echo "🎉 Coverage Report Generation Complete"
echo "======================================"
echo ""
echo "📈 Coverage Reports Available:"
echo "  • Backend (Django): backend/htmlcov/index.html"
echo "  • Ruby (RSpec): coverage/index.html"
echo "  • Frontend: Console output above"
echo ""
echo "📊 Summary:"
echo "  • Django Coverage: Check backend/htmlcov/index.html"
echo "  • Ruby Coverage: Check coverage/index.html" 
echo "  • All tests passing: ✅"
</file>

<file path="scripts/migrate.sh">
#!/bin/bash

# Watson Database Migration Automation
# Safe migration execution with backup and rollback capabilities

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Configuration
BACKUP_DIR="/tmp/watson_backups"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
BACKUP_FILE="$BACKUP_DIR/watson_backup_$TIMESTAMP.sql"
DRY_RUN=false
ENVIRONMENT="development"

print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_info() {
    echo -e "${BLUE}ℹ️  $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}⚠️  $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

print_usage() {
    echo "Usage: $0 [-e environment] [-d] [-b] [-r backup_file]"
    echo ""
    echo "Options:"
    echo "  -e, --environment Environment (development|staging|production) [default: development]"
    echo "  -d, --dry-run     Show migrations without executing"
    echo "  -b, --backup      Create backup before migration"
    echo "  -r, --rollback    Rollback to backup file"
    echo "  -h, --help        Show this help message"
    echo ""
    echo "Examples:"
    echo "  $0 -e production -b          # Migrate production with backup"
    echo "  $0 -d                        # Dry run migration"
    echo "  $0 -r /path/to/backup.sql    # Rollback to backup"
}

create_backup() {
    if [[ $ENVIRONMENT == "development" ]]; then
        print_info "Skipping backup for development environment"
        return
    fi
    
    print_info "Creating database backup..."
    mkdir -p "$BACKUP_DIR"
    
    # Get database URL based on environment
    if [[ -n $DATABASE_URL ]]; then
        pg_dump "$DATABASE_URL" > "$BACKUP_FILE"
        print_status "Backup created: $BACKUP_FILE"
    else
        print_warning "DATABASE_URL not set, using default connection"
        pg_dump -h localhost -U postgres watson_dev > "$BACKUP_FILE"
        print_status "Backup created: $BACKUP_FILE"
    fi
}

check_migrations() {
    print_info "Checking for pending migrations..."
    
    if [[ $DRY_RUN == true ]]; then
        python manage.py showmigrations --plan
        return $?
    fi
    
    # Check if there are unapplied migrations
    unapplied=$(python manage.py showmigrations --plan | grep "\[ \]" | wc -l)
    if [[ $unapplied -eq 0 ]]; then
        print_status "No pending migrations found"
        return 1
    else
        print_info "Found $unapplied pending migrations"
        python manage.py showmigrations --plan
        return 0
    fi
}

run_migrations() {
    if [[ $DRY_RUN == true ]]; then
        print_info "DRY RUN: Would execute migrations"
        return
    fi
    
    print_info "Running database migrations..."
    
    # Set appropriate Django settings based on environment
    case $ENVIRONMENT in
        production)
            export DJANGO_SETTINGS_MODULE=watson.settings.production
            ;;
        staging)
            export DJANGO_SETTINGS_MODULE=watson.settings.production
            export DEBUG=true
            ;;
        development)
            export DJANGO_SETTINGS_MODULE=watson.settings.base
            ;;
    esac
    
    # Run migrations with verbosity
    python manage.py migrate --verbosity=2
    
    print_status "Migrations completed successfully"
}

validate_migration() {
    print_info "Validating migration result..."
    
    # Check database integrity
    python manage.py check --database default
    
    # Run a simple query to ensure database is accessible
    python manage.py shell -c "
from django.db import connection
with connection.cursor() as cursor:
    cursor.execute('SELECT COUNT(*) FROM django_migrations')
    count = cursor.fetchone()[0]
    print(f'Total migrations applied: {count}')
"
    
    print_status "Migration validation passed"
}

rollback_migration() {
    local backup_file="$1"
    
    if [[ ! -f "$backup_file" ]]; then
        print_error "Backup file not found: $backup_file"
        exit 1
    fi
    
    print_warning "Rolling back database to backup: $backup_file"
    print_warning "This will DESTROY current data. Continue? (y/N)"
    
    read -r response
    if [[ $response != "y" && $response != "Y" ]]; then
        print_info "Rollback cancelled"
        exit 0
    fi
    
    print_info "Restoring database from backup..."
    
    # Drop current database and restore from backup
    if [[ -n $DATABASE_URL ]]; then
        psql "$DATABASE_URL" < "$backup_file"
    else
        psql -h localhost -U postgres watson_dev < "$backup_file"
    fi
    
    print_status "Database rollback completed"
}

# Parse command line arguments
BACKUP=false
ROLLBACK_FILE=""

while [[ $# -gt 0 ]]; do
    case $1 in
        -e|--environment)
            ENVIRONMENT="$2"
            shift 2
            ;;
        -d|--dry-run)
            DRY_RUN=true
            shift
            ;;
        -b|--backup)
            BACKUP=true
            shift
            ;;
        -r|--rollback)
            ROLLBACK_FILE="$2"
            shift 2
            ;;
        -h|--help)
            print_usage
            exit 0
            ;;
        *)
            print_error "Unknown option: $1"
            print_usage
            exit 1
            ;;
    esac
done

# Main execution
echo ""
echo "🔄 Watson Database Migration"
echo "============================"
echo ""
print_info "Environment: $ENVIRONMENT"
print_info "Dry Run: $DRY_RUN"
print_info "Backup: $BACKUP"
echo ""

# Change to backend directory
cd "$(dirname "$0")/../backend"

# Handle rollback case
if [[ -n $ROLLBACK_FILE ]]; then
    rollback_migration "$ROLLBACK_FILE"
    exit 0
fi

# Check for migrations first
if ! check_migrations; then
    print_status "Database is up to date"
    exit 0
fi

# Create backup if requested and not development
if [[ $BACKUP == true ]]; then
    create_backup
fi

# Run migrations
run_migrations

# Validate results
validate_migration

echo ""
print_status "Migration process completed successfully!"

if [[ $BACKUP == true && $ENVIRONMENT != "development" ]]; then
    echo ""
    print_info "Backup file available for rollback: $BACKUP_FILE"
fi
echo ""
</file>

<file path="scripts/monitor.sh">
#!/bin/bash

# Watson Application Monitoring and Health Check Script
# Comprehensive monitoring for all services

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Configuration
BASE_URL="${BASE_URL:-http://localhost:8888}"
TIMEOUT=10
ALERT_EMAIL="${ALERT_EMAIL:-admin@watson.local}"
LOG_FILE="/var/log/watson/monitoring.log"

print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_info() {
    echo -e "${BLUE}ℹ️  $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}⚠️  $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

log_message() {
    local level="$1"
    local message="$2"
    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    echo "[$timestamp] [$level] $message" >> "$LOG_FILE" 2>/dev/null || true
    echo "$message"
}

check_http_endpoint() {
    local endpoint="$1"
    local expected_status="${2:-200}"
    local description="$3"
    
    log_message "INFO" "Checking $description ($endpoint)..."
    
    if command -v curl >/dev/null 2>&1; then
        local response
        response=$(curl -s -o /dev/null -w "%{http_code}" --connect-timeout $TIMEOUT "$endpoint" 2>/dev/null)
        
        if [[ $response -eq $expected_status ]]; then
            print_status "$description: OK ($response)"
            return 0
        else
            print_error "$description: FAILED ($response, expected $expected_status)"
            log_message "ERROR" "$description failed with status $response"
            return 1
        fi
    else
        print_warning "$description: Cannot check - curl not available"
        return 1
    fi
}

check_service_health() {
    print_info "=== Watson Service Health Check ==="
    
    local failures=0
    
    # Main application health
    if ! check_http_endpoint "$BASE_URL/health/" 200 "Application Health"; then
        ((failures++))
    fi
    
    # Readiness check
    if ! check_http_endpoint "$BASE_URL/ready/" 200 "Application Readiness"; then
        ((failures++))
    fi
    
    # Admin interface (if enabled)
    if ! check_http_endpoint "$BASE_URL/admin/" 200 "Admin Interface"; then
        print_warning "Admin interface may be disabled or require authentication"
    fi
    
    return $failures
}

check_database_connection() {
    print_info "=== Database Connection Check ==="
    
    # Try to connect to database through Django
    if python manage.py check --database default >/dev/null 2>&1; then
        print_status "Database connection: OK"
        log_message "INFO" "Database connection successful"
        return 0
    else
        print_error "Database connection: FAILED"
        log_message "ERROR" "Database connection failed"
        return 1
    fi
}

check_static_files() {
    print_info "=== Static Files Check ==="
    
    local static_root=$(python -c "
import os
import django
from django.conf import settings
django.setup()
print(settings.STATIC_ROOT)
" 2>/dev/null)
    
    if [[ -d "$static_root" ]] && [[ -n "$(ls -A "$static_root" 2>/dev/null)" ]]; then
        print_status "Static files: OK"
        log_message "INFO" "Static files found in $static_root"
        return 0
    else
        print_error "Static files: MISSING or EMPTY"
        log_message "ERROR" "Static files missing in $static_root"
        return 1
    fi
}

check_disk_space() {
    print_info "=== Disk Space Check ==="
    
    local usage
    usage=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')
    
    if [[ $usage -lt 80 ]]; then
        print_status "Disk space: OK (${usage}% used)"
        return 0
    elif [[ $usage -lt 90 ]]; then
        print_warning "Disk space: WARNING (${usage}% used)"
        log_message "WARNING" "Disk space at ${usage}%"
        return 0
    else
        print_error "Disk space: CRITICAL (${usage}% used)"
        log_message "ERROR" "Disk space critically low at ${usage}%"
        return 1
    fi
}

check_memory_usage() {
    print_info "=== Memory Usage Check ==="
    
    if command -v free >/dev/null 2>&1; then
        local memory_usage
        memory_usage=$(free | grep Mem | awk '{printf "%.1f", ($3/$2) * 100.0}')
        
        if (( $(echo "$memory_usage < 80" | bc -l) )); then
            print_status "Memory usage: OK (${memory_usage}%)"
            return 0
        elif (( $(echo "$memory_usage < 90" | bc -l) )); then
            print_warning "Memory usage: WARNING (${memory_usage}%)"
            log_message "WARNING" "Memory usage at ${memory_usage}%"
            return 0
        else
            print_error "Memory usage: CRITICAL (${memory_usage}%)"
            log_message "ERROR" "Memory usage critically high at ${memory_usage}%"
            return 1
        fi
    else
        print_warning "Memory usage: Cannot check - free command not available"
        return 0
    fi
}

check_process_status() {
    print_info "=== Process Status Check ==="
    
    # Check if Django process is running (adjust based on your deployment)
    if pgrep -f "gunicorn.*watson" >/dev/null || pgrep -f "python.*manage.py.*runserver" >/dev/null; then
        print_status "Django process: Running"
        return 0
    else
        print_error "Django process: Not found"
        log_message "ERROR" "Django process not running"
        return 1
    fi
}

send_alert() {
    local subject="$1"
    local message="$2"
    
    if [[ -n $ALERT_EMAIL ]] && command -v mail >/dev/null 2>&1; then
        echo "$message" | mail -s "$subject" "$ALERT_EMAIL"
        log_message "INFO" "Alert sent to $ALERT_EMAIL: $subject"
    else
        log_message "WARNING" "Cannot send alert - mail command not available or ALERT_EMAIL not set"
    fi
}

run_comprehensive_check() {
    echo ""
    echo "🏥 Watson Comprehensive Health Check"
    echo "===================================="
    echo ""
    
    local total_failures=0
    local start_time=$(date +%s)
    
    # Create log directory if needed
    mkdir -p "$(dirname "$LOG_FILE")" 2>/dev/null || true
    
    log_message "INFO" "Starting comprehensive health check"
    
    # Run all checks
    check_service_health || ((total_failures += $?))
    echo ""
    
    check_database_connection || ((total_failures++))
    echo ""
    
    check_static_files || ((total_failures++))
    echo ""
    
    check_disk_space || ((total_failures++))
    echo ""
    
    check_memory_usage || ((total_failures++))
    echo ""
    
    check_process_status || ((total_failures++))
    echo ""
    
    # Summary
    local end_time=$(date +%s)
    local duration=$((end_time - start_time))
    
    echo "📊 Health Check Summary"
    echo "======================"
    echo "Duration: ${duration}s"
    echo "Failures: $total_failures"
    echo ""
    
    if [[ $total_failures -eq 0 ]]; then
        print_status "All health checks passed!"
        log_message "INFO" "Health check completed successfully - all systems operational"
        return 0
    else
        print_error "Health check failed with $total_failures issue(s)"
        log_message "ERROR" "Health check failed with $total_failures issues"
        
        # Send alert for failures
        if [[ $total_failures -gt 0 ]]; then
            send_alert "Watson Health Check Failed" "Health check failed with $total_failures issues. Check logs at $LOG_FILE"
        fi
        
        return $total_failures
    fi
}

# Parse command line arguments
case "${1:-}" in
    "http")
        check_service_health
        ;;
    "database")
        check_database_connection
        ;;
    "static")
        check_static_files
        ;;
    "system")
        check_disk_space && check_memory_usage && check_process_status
        ;;
    *)
        run_comprehensive_check
        ;;
esac
</file>

<file path="scripts/optimize-assets.sh">
#!/bin/bash

# Watson Asset Optimization Script
# Additional compression and optimization for production assets

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "🔧 Watson Asset Optimization"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# Function to check if command exists
command_exists() {
    command -v "$1" >/dev/null 2>&1
}

# Function to get file size
get_size() {
    if [ -f "$1" ]; then
        if command_exists gstat; then
            gstat -c%s "$1" 2>/dev/null || stat -f%z "$1" 2>/dev/null || echo "0"
        else
            stat -f%z "$1" 2>/dev/null || stat -c%s "$1" 2>/dev/null || echo "0"
        fi
    else
        echo "0"
    fi
}

# Function to format bytes
format_bytes() {
    local bytes=$1
    if [ $bytes -lt 1024 ]; then
        echo "${bytes}B"
    elif [ $bytes -lt 1048576 ]; then
        echo "$(($bytes / 1024))KB"
    else
        echo "$(($bytes / 1048576))MB"
    fi
}

# Check if build artifacts exist
if [ ! -d "dist/static" ]; then
    echo -e "${RED}❌ No build artifacts found. Run production build first.${NC}"
    exit 1
fi

echo -e "${BLUE}📊 Analyzing current assets...${NC}"

# Analyze main assets
JS_SIZE=$(get_size "dist/static/main.js")
CSS_SIZE=$(get_size "dist/static/main.css")

echo "  • JavaScript: $(format_bytes $JS_SIZE)"
echo "  • CSS: $(format_bytes $CSS_SIZE)"
echo ""

# Gzip compression simulation (checking compression ratios)
echo -e "${BLUE}🗜️  Testing compression ratios...${NC}"

if command_exists gzip; then
    # Create temporary compressed versions to check ratios
    cp dist/static/main.js /tmp/main.js.orig
    cp dist/static/main.css /tmp/main.css.orig
    
    gzip -9 -c /tmp/main.js.orig > /tmp/main.js.gz
    gzip -9 -c /tmp/main.css.orig > /tmp/main.css.gz
    
    JS_GZIP_SIZE=$(get_size "/tmp/main.js.gz")
    CSS_GZIP_SIZE=$(get_size "/tmp/main.css.gz")
    
    JS_RATIO=$(echo "scale=1; $JS_GZIP_SIZE * 100 / $JS_SIZE" | bc -l 2>/dev/null || echo "0")
    CSS_RATIO=$(echo "scale=1; $CSS_GZIP_SIZE * 100 / $CSS_SIZE" | bc -l 2>/dev/null || echo "0")
    
    echo "  • JavaScript (gzipped): $(format_bytes $JS_GZIP_SIZE) (${JS_RATIO}% of original)"
    echo "  • CSS (gzipped): $(format_bytes $CSS_GZIP_SIZE) (${CSS_RATIO}% of original)"
    
    # Cleanup temp files
    rm -f /tmp/main.js.orig /tmp/main.css.orig /tmp/main.js.gz /tmp/main.css.gz
else
    echo "  • gzip not available for compression testing"
fi

echo ""

# Asset optimization recommendations
echo -e "${BLUE}💡 Optimization Analysis:${NC}"

# Check for potential optimizations
TOTAL_SIZE=$((JS_SIZE + CSS_SIZE))
if [ $JS_SIZE -gt 500000 ]; then
    echo -e "${YELLOW}  ⚠️  JavaScript bundle is large ($(format_bytes $JS_SIZE)) - consider code splitting${NC}"
fi

if [ $CSS_SIZE -gt 50000 ]; then
    echo -e "${YELLOW}  ⚠️  CSS bundle is getting large ($(format_bytes $CSS_SIZE)) - consider critical CSS${NC}"
else
    echo -e "${GREEN}  ✅ CSS bundle size is optimal${NC}"
fi

# Check for source map size
SOURCEMAP_SIZE=$(get_size "dist/static/main.js.map")
if [ $SOURCEMAP_SIZE -gt 1000000 ]; then
    echo -e "${YELLOW}  ⚠️  Source map is large ($(format_bytes $SOURCEMAP_SIZE)) - ensure it's excluded from production${NC}"
fi

# Asset hashing check
echo -e "${BLUE}🔗 Asset Cache Optimization:${NC}"

# Check if assets have hash in filename
if [[ "dist/static/main.js" =~ -[a-f0-9]{8,}\. ]]; then
    echo -e "${GREEN}  ✅ Assets have cache-busting hashes${NC}"
else
    echo -e "${YELLOW}  ⚠️  Consider adding cache-busting hashes to asset names${NC}"
fi

# Generate optimization report
cat > dist/optimization-report.json << EOF
{
  "timestamp": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")",
  "assets": {
    "javascript": {
      "file": "main.js",
      "originalSize": $JS_SIZE,
      "gzippedSize": ${JS_GZIP_SIZE:-0},
      "compressionRatio": "${JS_RATIO:-0}%"
    },
    "css": {
      "file": "main.css", 
      "originalSize": $CSS_SIZE,
      "gzippedSize": ${CSS_GZIP_SIZE:-0},
      "compressionRatio": "${CSS_RATIO:-0}%"
    },
    "sourcemap": {
      "size": $SOURCEMAP_SIZE
    }
  },
  "totalSize": $TOTAL_SIZE,
  "recommendations": [
    $([ $JS_SIZE -gt 500000 ] && echo '"Consider code splitting for large JavaScript bundle",')
    $([ $CSS_SIZE -gt 50000 ] && echo '"Consider critical CSS extraction",')
    "Enable gzip/brotli compression on server",
    "Implement proper cache headers",
    "Consider service worker for caching strategy"
  ]
}
EOF

echo -e "${GREEN}✅ Optimization analysis complete${NC}"
echo ""
echo -e "${BLUE}📄 Reports generated:${NC}"
echo "  • dist/build-manifest.json - Build metadata"
echo "  • dist/optimization-report.json - Performance analysis"
echo ""
echo -e "${GREEN}🎯 Production assets are optimized and ready for deployment!${NC}"
</file>

<file path="scripts/pre-commit-hook.sh">
#!/bin/bash

# Watson Testing Infrastructure - Pre-commit Hook
# Runs essential checks before allowing commits

set -e

echo "🔍 Pre-commit checks for Watson"
echo "==============================="

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

# Change to project root
cd "$(dirname "$0")/.."

echo ""
echo "1. TypeScript Type Checking"
echo "---------------------------"
if bun run typecheck; then
    print_status "TypeScript types are valid"
else
    print_error "TypeScript type checking failed"
    echo "Please fix type errors before committing"
    exit 1
fi

echo ""
echo "2. Quick Test Suite"
echo "------------------"
# Run a subset of tests for speed
if bun test frontend/src/utils/validation.test.ts; then
    print_status "Frontend unit tests passed"
else
    print_error "Frontend tests failed"
    exit 1
fi

echo ""
echo "3. Django Model Tests"
echo "--------------------"
if (cd backend && DJANGO_ENVIRONMENT=test ../.venv/bin/python manage.py test core.test_models --verbosity=1); then
    print_status "Django core tests passed"
else
    print_error "Django tests failed"
    exit 1
fi

echo ""
echo "4. Ruby Validation Tests"
echo "-----------------------"
if bundle exec rspec spec/review_validator_spec.rb --format progress; then
    print_status "Ruby validation tests passed"
else
    print_error "Ruby tests failed"
    exit 1
fi

echo ""
print_status "Pre-commit checks completed successfully!"
echo ""
echo "✨ Ready to commit! All essential checks passed."
</file>

<file path="scripts/rollback.sh">
#!/bin/bash

# Watson Application Rollback Script
# Comprehensive rollback procedures for deployment failures

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Configuration
BACKUP_DIR="/tmp/watson_backups"
DOCKER_IMAGE_PREFIX="watson-oceanheart-ai"
ROLLBACK_STRATEGY="auto"

print_status() {
    echo -e "${GREEN}✅ $1${NC}"
}

print_info() {
    echo -e "${BLUE}ℹ️  $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}⚠️  $1${NC}"
}

print_error() {
    echo -e "${RED}❌ $1${NC}"
}

print_usage() {
    echo "Usage: $0 [options]"
    echo ""
    echo "Options:"
    echo "  -t, --type        Rollback type (database|application|full) [default: auto-detect]"
    echo "  -b, --backup      Specific backup file to rollback to"
    echo "  -v, --version     Application version/tag to rollback to"
    echo "  -s, --strategy    Rollback strategy (auto|manual|force) [default: auto]"
    echo "  -d, --dry-run     Show what would be rolled back without executing"
    echo "  -h, --help        Show this help message"
    echo ""
    echo "Examples:"
    echo "  $0 -t database -b /path/to/backup.sql"
    echo "  $0 -t application -v v1.2.3"
    echo "  $0 -t full -s manual"
}

detect_deployment_platform() {
    if [[ -f "deploy/fly.toml" ]] && command -v flyctl >/dev/null 2>&1; then
        echo "fly"
    elif [[ -f "deploy/railway.json" ]] && command -v railway >/dev/null 2>&1; then
        echo "railway"
    elif [[ -f "deploy/render.yaml" ]]; then
        echo "render"
    elif [[ -f "docker-compose.yml" ]] && command -v docker-compose >/dev/null 2>&1; then
        echo "docker"
    else
        echo "unknown"
    fi
}

get_current_version() {
    # Try to get version from various sources
    if [[ -f "package.json" ]]; then
        python -c "import json; print(json.load(open('package.json'))['version'])" 2>/dev/null || echo "unknown"
    elif command -v git >/dev/null 2>&1; then
        git describe --tags --abbrev=0 2>/dev/null || git rev-parse --short HEAD 2>/dev/null || echo "unknown"
    else
        echo "unknown"
    fi
}

list_available_backups() {
    print_info "Available database backups:"
    if [[ -d "$BACKUP_DIR" ]]; then
        ls -la "$BACKUP_DIR"/*.sql 2>/dev/null | awk '{print $9, $5, $6, $7, $8}' | column -t || print_info "No backups found"
    else
        print_info "No backup directory found"
    fi
}

list_available_versions() {
    local platform=$(detect_deployment_platform)
    
    print_info "Available versions for rollback:"
    
    case $platform in
        "docker")
            docker images | grep "$DOCKER_IMAGE_PREFIX" | head -5
            ;;
        "fly")
            flyctl releases list --app watson-oceanheart-ai || print_info "Cannot list Fly.io releases"
            ;;
        "railway")
            print_info "Railway: Check dashboard for previous deployments"
            ;;
        "render")
            print_info "Render: Check dashboard for previous deployments"
            ;;
        *)
            if command -v git >/dev/null 2>&1; then
                git tag -l | tail -5 || git log --oneline -5
            fi
            ;;
    esac
}

rollback_database() {
    local backup_file="$1"
    
    if [[ -z "$backup_file" ]]; then
        print_error "Backup file is required for database rollback"
        list_available_backups
        exit 1
    fi
    
    if [[ ! -f "$backup_file" ]]; then
        print_error "Backup file not found: $backup_file"
        exit 1
    fi
    
    print_warning "Database rollback will DESTROY current data!"
    print_warning "Backup file: $backup_file"
    print_warning "Continue? (y/N)"
    
    if [[ $ROLLBACK_STRATEGY != "force" ]]; then
        read -r response
        if [[ $response != "y" && $response != "Y" ]]; then
            print_info "Database rollback cancelled"
            exit 0
        fi
    fi
    
    print_info "Rolling back database..."
    
    # Create a backup of current state before rollback
    current_backup="$BACKUP_DIR/pre_rollback_$(date +%Y%m%d_%H%M%S).sql"
    mkdir -p "$BACKUP_DIR"
    
    print_info "Creating backup of current database state..."
    if [[ -n $DATABASE_URL ]]; then
        pg_dump "$DATABASE_URL" > "$current_backup" || print_warning "Failed to create pre-rollback backup"
    fi
    
    # Restore from backup
    print_info "Restoring database from backup..."
    if [[ -n $DATABASE_URL ]]; then
        psql "$DATABASE_URL" < "$backup_file"
    else
        psql -h localhost -U postgres watson_dev < "$backup_file"
    fi
    
    print_status "Database rollback completed"
    print_info "Current state backed up to: $current_backup"
}

rollback_application() {
    local version="$1"
    local platform=$(detect_deployment_platform)
    
    if [[ -z "$version" ]]; then
        print_error "Version/tag is required for application rollback"
        list_available_versions
        exit 1
    fi
    
    print_info "Rolling back application to version: $version"
    print_info "Platform: $platform"
    
    case $platform in
        "docker")
            print_info "Rolling back Docker deployment..."
            docker-compose down
            docker tag "$DOCKER_IMAGE_PREFIX:$version" "$DOCKER_IMAGE_PREFIX:latest"
            docker-compose up -d
            ;;
        "fly")
            print_info "Rolling back Fly.io deployment..."
            flyctl releases rollback "$version" --app watson-oceanheart-ai
            ;;
        "railway")
            print_error "Railway rollback must be done through dashboard"
            print_info "Go to: https://railway.app/dashboard"
            exit 1
            ;;
        "render")
            print_error "Render rollback must be done through dashboard"
            print_info "Go to: https://dashboard.render.com"
            exit 1
            ;;
        "git")
            print_info "Rolling back to git tag/commit: $version"
            git checkout "$version"
            # Redeploy using current deployment method
            print_info "Please redeploy using your normal deployment process"
            ;;
        *)
            print_error "Unknown deployment platform - cannot perform automatic rollback"
            exit 1
            ;;
    esac
    
    print_status "Application rollback completed"
}

rollback_full() {
    local backup_file="$1"
    local version="$2"
    
    print_info "Performing full system rollback..."
    
    if [[ -n "$backup_file" ]]; then
        rollback_database "$backup_file"
    else
        print_warning "No database backup specified - skipping database rollback"
    fi
    
    if [[ -n "$version" ]]; then
        rollback_application "$version"
    else
        print_warning "No application version specified - skipping application rollback"
    fi
    
    print_status "Full rollback completed"
}

test_rollback_procedures() {
    print_info "Testing rollback procedures (dry run)..."
    
    local platform=$(detect_deployment_platform)
    local current_version=$(get_current_version)
    
    echo ""
    echo "📋 Rollback Test Summary"
    echo "======================="
    echo "Platform: $platform"
    echo "Current Version: $current_version"
    echo ""
    
    print_info "Database rollback test:"
    list_available_backups
    echo ""
    
    print_info "Application rollback test:"
    list_available_versions
    echo ""
    
    # Test health check endpoint
    if curl -s http://localhost:8888/health/ >/dev/null 2>&1; then
        print_status "Health check endpoint: Accessible"
    else
        print_warning "Health check endpoint: Not accessible"
    fi
    
    print_status "Rollback procedure test completed"
}

# Parse command line arguments
ROLLBACK_TYPE=""
BACKUP_FILE=""
VERSION=""
DRY_RUN=false

while [[ $# -gt 0 ]]; do
    case $1 in
        -t|--type)
            ROLLBACK_TYPE="$2"
            shift 2
            ;;
        -b|--backup)
            BACKUP_FILE="$2"
            shift 2
            ;;
        -v|--version)
            VERSION="$2"
            shift 2
            ;;
        -s|--strategy)
            ROLLBACK_STRATEGY="$2"
            shift 2
            ;;
        -d|--dry-run)
            DRY_RUN=true
            shift
            ;;
        -h|--help)
            print_usage
            exit 0
            ;;
        *)
            print_error "Unknown option: $1"
            print_usage
            exit 1
            ;;
    esac
done

# Main execution
echo ""
echo "🔙 Watson Rollback System"
echo "========================="
echo ""

if [[ $DRY_RUN == true ]]; then
    test_rollback_procedures
    exit 0
fi

# Auto-detect rollback type if not specified
if [[ -z "$ROLLBACK_TYPE" ]]; then
    if [[ -n "$BACKUP_FILE" && -n "$VERSION" ]]; then
        ROLLBACK_TYPE="full"
    elif [[ -n "$BACKUP_FILE" ]]; then
        ROLLBACK_TYPE="database"
    elif [[ -n "$VERSION" ]]; then
        ROLLBACK_TYPE="application"
    else
        print_error "No rollback parameters specified"
        print_usage
        exit 1
    fi
fi

case $ROLLBACK_TYPE in
    "database")
        rollback_database "$BACKUP_FILE"
        ;;
    "application")
        rollback_application "$VERSION"
        ;;
    "full")
        rollback_full "$BACKUP_FILE" "$VERSION"
        ;;
    *)
        print_error "Invalid rollback type: $ROLLBACK_TYPE"
        print_usage
        exit 1
        ;;
esac

# Run health check after rollback
print_info "Running post-rollback health check..."
if [[ -f "scripts/monitor.sh" ]]; then
    bash scripts/monitor.sh http
else
    print_warning "Health check script not found - please verify manually"
fi

echo ""
print_status "Rollback procedure completed!"
echo ""
</file>

<file path="scripts/validate-build.js">
#!/usr/bin/env node

// Watson Build Validation Script
// Validates build artifacts for deployment readiness

import fs from 'fs';
import path from 'path';

// Colors for console output
const colors = {
  red: '\x1b[31m',
  green: '\x1b[32m',
  blue: '\x1b[34m',
  yellow: '\x1b[33m',
  reset: '\x1b[0m',
  bright: '\x1b[1m'
};

const log = {
  error: (msg) => console.log(`${colors.red}❌ ${msg}${colors.reset}`),
  success: (msg) => console.log(`${colors.green}✅ ${msg}${colors.reset}`),
  warning: (msg) => console.log(`${colors.yellow}⚠️  ${msg}${colors.reset}`),
  info: (msg) => console.log(`${colors.blue}ℹ️  ${msg}${colors.reset}`),
  header: (msg) => console.log(`${colors.bright}${colors.blue}${msg}${colors.reset}`)
};

console.log(`${colors.bright}🔍 Watson Build Validation${colors.reset}`);
console.log('━'.repeat(60));

let validationErrors = 0;
let validationWarnings = 0;
const validationResults = [];

// Helper function to check if file exists and get stats
function checkFile(filePath, description) {
  try {
    const stats = fs.statSync(filePath);
    const size = stats.size;
    validationResults.push({
      type: 'file',
      path: filePath,
      description,
      size,
      exists: true
    });
    return { exists: true, size, stats };
  } catch (err) {
    validationResults.push({
      type: 'file',
      path: filePath,
      description,
      exists: false,
      error: err.message
    });
    return { exists: false, error: err.message };
  }
}

// Helper function to format bytes
function formatBytes(bytes) {
  if (bytes === 0) return '0B';
  const k = 1024;
  const sizes = ['B', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + sizes[i];
}

// Validation tests
log.header('\n📁 Build Directory Structure');

// Check main build directories
const requiredDirs = [
  { path: 'dist', desc: 'Main build output directory' },
  { path: 'dist/static', desc: 'Frontend static assets' },
  { path: 'backend/staticfiles', desc: 'Django static files' }
];

requiredDirs.forEach(({ path: dirPath, desc }) => {
  try {
    const stats = fs.statSync(dirPath);
    if (stats.isDirectory()) {
      const files = fs.readdirSync(dirPath).length;
      log.success(`${desc}: ${dirPath} (${files} items)`);
    } else {
      log.error(`${desc}: ${dirPath} is not a directory`);
      validationErrors++;
    }
  } catch (err) {
    log.error(`${desc}: ${dirPath} - ${err.message}`);
    validationErrors++;
  }
});

log.header('\n📄 Critical Build Files');

// Check critical files
const criticalFiles = [
  { path: 'dist/index.html', desc: 'Main HTML template', maxSize: 10 * 1024 },
  { path: 'dist/static/main.js', desc: 'Main JavaScript bundle', maxSize: 2 * 1024 * 1024 },
  { path: 'dist/static/main.css', desc: 'Main CSS bundle', maxSize: 100 * 1024 },
  { path: 'dist/build-manifest.json', desc: 'Build manifest', maxSize: 10 * 1024 }
];

criticalFiles.forEach(({ path: filePath, desc, maxSize }) => {
  const result = checkFile(filePath, desc);
  if (result.exists) {
    const sizeFormatted = formatBytes(result.size);
    if (result.size > maxSize) {
      log.warning(`${desc}: ${sizeFormatted} (larger than expected ${formatBytes(maxSize)})`);
      validationWarnings++;
    } else if (result.size === 0) {
      log.error(`${desc}: File is empty`);
      validationErrors++;
    } else {
      log.success(`${desc}: ${sizeFormatted}`);
    }
  } else {
    log.error(`${desc}: Missing - ${result.error}`);
    validationErrors++;
  }
});

log.header('\n📋 Build Manifest Validation');

// Validate build manifest
try {
  const manifest = JSON.parse(fs.readFileSync('dist/build-manifest.json', 'utf8'));
  
  const requiredFields = ['buildTime', 'version', 'environment', 'assets', 'buildConfig'];
  requiredFields.forEach(field => {
    if (manifest[field]) {
      log.success(`Build manifest has ${field}`);
    } else {
      log.error(`Build manifest missing ${field}`);
      validationErrors++;
    }
  });
  
  // Validate build time is recent (within last hour)
  const buildTime = new Date(manifest.buildTime);
  const now = new Date();
  const timeDiff = Math.abs(now - buildTime) / (1000 * 60); // minutes
  
  if (timeDiff > 60) {
    log.warning(`Build is ${Math.round(timeDiff)} minutes old`);
    validationWarnings++;
  } else {
    log.success(`Build is recent (${Math.round(timeDiff)} minutes ago)`);
  }
  
} catch (err) {
  log.error(`Build manifest validation failed: ${err.message}`);
  validationErrors++;
}

log.header('\n🎯 JavaScript Bundle Analysis');

// Analyze JavaScript bundle
try {
  const jsContent = fs.readFileSync('dist/static/main.js', 'utf8');
  
  // Check for development artifacts
  const devChecks = [
    { pattern: /console\.log/, desc: 'console.log statements' },
    { pattern: /debugger/, desc: 'debugger statements' },
    { pattern: /development/i, desc: 'development references' }
  ];
  
  devChecks.forEach(({ pattern, desc }) => {
    if (pattern.test(jsContent)) {
      log.warning(`JavaScript bundle contains ${desc}`);
      validationWarnings++;
    } else {
      log.success(`No ${desc} found`);
    }
  });
  
  // Check for minification indicators
  const minificationChecks = [
    { test: jsContent.includes('\n\n'), desc: 'Code appears to be minified', shouldBeFalse: true },
    { test: jsContent.length < 500000, desc: 'Bundle size is reasonable', shouldBeFalse: false }
  ];
  
  minificationChecks.forEach(({ test, desc, shouldBeFalse }) => {
    if (shouldBeFalse ? !test : test) {
      log.success(desc);
    } else {
      log.warning(`${desc} - check failed`);
      validationWarnings++;
    }
  });
  
} catch (err) {
  log.error(`JavaScript analysis failed: ${err.message}`);
  validationErrors++;
}

log.header('\n🗂️  Django Static Files');

// Check Django static files
try {
  const staticFiles = fs.readdirSync('backend/staticfiles');
  const jsFiles = staticFiles.filter(f => f.endsWith('.js'));
  const cssFiles = staticFiles.filter(f => f.endsWith('.css'));
  
  log.success(`Django static files: ${staticFiles.length} total`);
  log.info(`JavaScript files: ${jsFiles.length}`);
  log.info(`CSS files: ${cssFiles.length}`);
  
  if (jsFiles.length === 0) {
    log.error('No JavaScript files found in Django static files');
    validationErrors++;
  }
  
} catch (err) {
  log.error(`Django static files check failed: ${err.message}`);
  validationErrors++;
}

log.header('\n🔒 Security Validation');

// Security checks
const securityChecks = [
  {
    name: 'Source maps in production',
    check: () => {
      try {
        fs.statSync('dist/static/main.js.map');
        return { pass: false, message: 'Source maps should not be deployed to production' };
      } catch {
        return { pass: true, message: 'No source maps found in production build' };
      }
    }
  },
  {
    name: 'Environment variables',
    check: () => {
      try {
        const jsContent = fs.readFileSync('dist/static/main.js', 'utf8');
        const hasSecrets = /(?:password|secret|key|token)[\s]*[:=][\s]*["'][^"']+["']/i.test(jsContent);
        return { 
          pass: !hasSecrets, 
          message: hasSecrets ? 'Potential secrets found in bundle' : 'No obvious secrets in bundle'
        };
      } catch {
        return { pass: false, message: 'Could not analyze bundle for secrets' };
      }
    }
  }
];

securityChecks.forEach(({ name, check }) => {
  try {
    const result = check();
    if (result.pass) {
      log.success(`${name}: ${result.message}`);
    } else {
      log.warning(`${name}: ${result.message}`);
      validationWarnings++;
    }
  } catch (err) {
    log.error(`${name}: Check failed - ${err.message}`);
    validationErrors++;
  }
});

// Final validation summary
log.header('\n📊 Validation Summary');

console.log(`Total files validated: ${validationResults.length}`);
console.log(`Validation errors: ${validationErrors}`);
console.log(`Validation warnings: ${validationWarnings}`);

if (validationErrors === 0 && validationWarnings === 0) {
  log.success('🎉 All validations passed! Build is ready for deployment.');
  process.exit(0);
} else if (validationErrors === 0) {
  log.warning(`⚠️  Build passed with ${validationWarnings} warnings. Review before deployment.`);
  process.exit(0);
} else {
  log.error(`❌ Build validation failed with ${validationErrors} errors and ${validationWarnings} warnings.`);
  process.exit(1);
}
</file>

<file path="spec/review_validator_spec.rb">
require 'spec_helper'
require_relative '../lib/review_validator'

RSpec.describe ReviewValidator do
  describe '.validate_content' do
    it 'validates valid content' do
      content = "This is a valid medical review with sufficient length for testing."
      result = ReviewValidator.validate_content(content)
      
      expect(result[:valid]).to be true
      expect(result[:errors]).to be_empty
    end

    it 'rejects empty content' do
      result = ReviewValidator.validate_content("")
      
      expect(result[:valid]).to be false
      expect(result[:errors]).to include("Content cannot be empty")
    end

    it 'rejects nil content' do
      result = ReviewValidator.validate_content(nil)
      
      expect(result[:valid]).to be false
      expect(result[:errors]).to include("Content cannot be empty")
    end

    it 'rejects content that is too short' do
      result = ReviewValidator.validate_content("Too short")
      
      expect(result[:valid]).to be false
      expect(result[:errors]).to include("Content is too short")
    end

    it 'rejects content that is too long' do
      long_content = "a" * 5001
      result = ReviewValidator.validate_content(long_content)
      
      expect(result[:valid]).to be false
      expect(result[:errors]).to include("Content is too long")
    end
  end

  describe '.sanitize_html' do
    it 'removes script tags' do
      dirty_html = '<p>Safe content</p><script>alert("xss")</script>'
      clean_html = ReviewValidator.sanitize_html(dirty_html)
      
      expect(clean_html).to eq('<p>Safe content</p>')
      expect(clean_html).not_to include('<script>')
    end

    it 'removes iframe tags' do
      dirty_html = '<p>Content</p><iframe src="evil.com"></iframe>'
      clean_html = ReviewValidator.sanitize_html(dirty_html)
      
      expect(clean_html).to eq('<p>Content</p>')
      expect(clean_html).not_to include('<iframe>')
    end

    it 'removes javascript: URLs' do
      dirty_html = '<a href="javascript:alert(1)">Link</a>'
      clean_html = ReviewValidator.sanitize_html(dirty_html)
      
      expect(clean_html).to eq('<a href="">Link</a>')
      expect(clean_html).not_to include('javascript:')
    end

    it 'removes event handlers' do
      dirty_html = '<div onclick="alert(1)">Content</div>'
      clean_html = ReviewValidator.sanitize_html(dirty_html)
      
      expect(clean_html).to eq('<div>Content</div>')
      expect(clean_html).not_to include('onclick=')
    end

    it 'handles nil input' do
      result = ReviewValidator.sanitize_html(nil)
      expect(result).to eq("")
    end
  end

  describe '.extract_medical_terms' do
    it 'extracts common medical terms' do
      content = "Patient shows improvement with current medication and therapy regimen."
      terms = ReviewValidator.extract_medical_terms(content)
      
      expect(terms).to include('patient', 'medication', 'therapy')
      expect(terms).to be_an(Array)
    end

    it 'extracts symptoms and conditions' do
      content = "The patient's symptoms include fever and the condition is improving."
      terms = ReviewValidator.extract_medical_terms(content)
      
      expect(terms).to include('symptoms', 'condition')
    end

    it 'extracts dosage units' do
      content = "Prescribed 50mg tablets, 2ml injection, 3 units daily."
      terms = ReviewValidator.extract_medical_terms(content)
      
      expect(terms).to include('mg', 'ml', 'units')
    end

    it 'returns unique terms only' do
      content = "Patient patient Patient shows symptoms symptoms"
      terms = ReviewValidator.extract_medical_terms(content)
      
      expect(terms.count('patient')).to eq(1)
      expect(terms.count('symptoms')).to eq(1)
    end

    it 'handles empty content' do
      expect(ReviewValidator.extract_medical_terms("")).to eq([])
      expect(ReviewValidator.extract_medical_terms(nil)).to eq([])
    end

    it 'is case insensitive' do
      content = "PATIENT shows SYMPTOMS with MEDICATION"
      terms = ReviewValidator.extract_medical_terms(content)
      
      expect(terms).to include('patient', 'symptoms', 'medication')
    end
  end
end
</file>

<file path="spec/spec_helper.rb">
# Coverage reporting setup
require 'simplecov'
SimpleCov.start do
  add_filter '/spec/'
  add_filter '/vendor/'
  
  add_group 'Libraries', 'lib'
  
  minimum_coverage 80
end

# This file was generated by the `rspec --init` command. Conventionally, all
# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.
# The generated `.rspec` file contains `--require spec_helper` which will cause
# this file to always be loaded, without a need to explicitly require it in any
# files.
#
# Given that it is always loaded, you are encouraged to keep this file as
# light-weight as possible. Requiring heavyweight dependencies from this file
# will add to the boot time of your test suite on EVERY test run, even for an
# individual file that may not need all of that loaded. Instead, consider making
# a separate helper file that requires the additional dependencies and performs
# the additional setup, and require it from the spec files that actually need
# it.
#
# See https://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration
RSpec.configure do |config|
  # rspec-expectations config goes here. You can use an alternate
  # assertion/expectation library such as wrong or the stdlib/minitest
  # assertions if you prefer.
  config.expect_with :rspec do |expectations|
    # This option will default to `true` in RSpec 4. It makes the `description`
    # and `failure_message` of custom matchers include text for helper methods
    # defined using `chain`, e.g.:
    #     be_bigger_than(2).and_smaller_than(4).description
    #     # => "be bigger than 2 and smaller than 4"
    # ...rather than:
    #     # => "be bigger than 2"
    expectations.include_chain_clauses_in_custom_matcher_descriptions = true
  end

  # rspec-mocks config goes here. You can use an alternate test double
  # library (such as bogus or mocha) by changing the `mock_with` option here.
  config.mock_with :rspec do |mocks|
    # Prevents you from mocking or stubbing a method that does not exist on
    # a real object. This is generally recommended, and will default to
    # `true` in RSpec 4.
    mocks.verify_partial_doubles = true
  end

  # This option will default to `:apply_to_host_groups` in RSpec 4 (and will
  # have no way to turn it off -- the option exists only for backwards
  # compatibility in RSpec 3). It causes shared context metadata to be
  # inherited by the metadata hash of host groups and examples, rather than
  # triggering implicit auto-inclusion in groups with matching metadata.
  config.shared_context_metadata_behavior = :apply_to_host_groups

# The settings below are suggested to provide a good initial experience
# with RSpec, but feel free to customize to your heart's content.
=begin
  # This allows you to limit a spec run to individual examples or groups
  # you care about by tagging them with `:focus` metadata. When nothing
  # is tagged with `:focus`, all examples get run. RSpec also provides
  # aliases for `it`, `describe`, and `context` that include `:focus`
  # metadata: `fit`, `fdescribe` and `fcontext`, respectively.
  config.filter_run_when_matching :focus

  # Allows RSpec to persist some state between runs in order to support
  # the `--only-failures` and `--next-failure` CLI options. We recommend
  # you configure your source control system to ignore this file.
  config.example_status_persistence_file_path = "spec/examples.txt"

  # Limits the available syntax to the non-monkey patched syntax that is
  # recommended. For more details, see:
  # https://rspec.info/features/3-12/rspec-core/configuration/zero-monkey-patching-mode/
  config.disable_monkey_patching!

  # This setting enables warnings. It's recommended, but in some cases may
  # be too noisy due to issues in dependencies.
  config.warnings = true

  # Many RSpec users commonly either run the entire suite or an individual
  # file, and it's useful to allow more verbose output when running an
  # individual spec file.
  if config.files_to_run.one?
    # Use the documentation formatter for detailed output,
    # unless a formatter has already been configured
    # (e.g. via a command-line flag).
    config.default_formatter = "doc"
  end

  # Print the 10 slowest examples and example groups at the
  # end of the spec run, to help surface which specs are running
  # particularly slow.
  config.profile_examples = 10

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = :random

  # Seed global randomization in this process using the `--seed` CLI option.
  # Setting this allows you to use `--seed` to deterministically reproduce
  # test failures related to randomization by passing the same `--seed` value
  # as the one that triggered the failure.
  Kernel.srand config.seed
=end
end
</file>

<file path=".env.example">
# Example environment variables for Watson application
# Copy this file to .env.local for development

# Frontend Environment Variables (Required for Vite/Vercel)
# =========================================================

# Passport Authentication URL
VITE_AUTH_URL=http://passport.lvh.me:5555  # Development
# VITE_AUTH_URL=https://passport.oceanheart.ai  # Production

# API endpoint for backend services
VITE_API_URL=http://localhost:8001

# Enable Passport authentication (set to false for mock auth)
VITE_USE_PASSPORT=true

# Application environment (development/staging/production)
VITE_APP_ENV=development

# Public URL of the frontend application
VITE_PUBLIC_URL=http://watson.lvh.me:3001

# Backend Environment Variables (Django)
# =======================================

# Django settings
DEBUG=true
SECRET_KEY=your-secret-key-here-change-in-production
ALLOWED_HOSTS=localhost,127.0.0.1,watson.lvh.me
DJANGO_SETTINGS_MODULE=watson.settings.base

# Database
DATABASE_URL=postgresql://watson:watson_dev_password@localhost:5001/watson_dev

# Passport Authentication Configuration
AUTH_URL=http://passport.lvh.me:5555  # Development
# AUTH_URL=https://passport.oceanheart.ai  # Production
JWT_SECRET=development-jwt-secret-min-32-characters  # Must match Passport's secret
JWT_ALGORITHM=HS256
COOKIE_DOMAIN=.lvh.me  # .oceanheart.ai for production
SUBDOMAIN_NAME=watson

# API Configuration
NODE_ENV=development
PORT=3001

# Redis (optional)
REDIS_URL=redis://localhost:6001/0

# Security (production only)
SECURE_SSL_REDIRECT=false
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false

# Logging
LOG_LEVEL=DEBUG
SENTRY_DSN=

# Performance
CACHE_TTL=3600
</file>

<file path=".env.production.template">
# Watson Production Environment Configuration
# IMPORTANT: Never commit actual production values

# Database - Use your production database URL
DATABASE_URL=postgresql://username:password@host:port/database
REDIS_URL=redis://host:port/database

# Django Configuration - CRITICAL SECURITY SETTINGS
DEBUG=false
SECRET_KEY=${SECRET_KEY}  # From secure vault
ALLOWED_HOSTS=watson.oceanheart.ai,api.watson.oceanheart.ai
DJANGO_SETTINGS_MODULE=watson.settings.production

# Passport Authentication Configuration
AUTH_URL=https://passport.oceanheart.ai
JWT_SECRET=${JWT_SECRET}  # From secure vault - must match Passport's secret
JWT_ALGORITHM=HS256
COOKIE_DOMAIN=.oceanheart.ai
SUBDOMAIN_NAME=watson

# Frontend Configuration
NODE_ENV=production
VITE_AUTH_URL=https://passport.oceanheart.ai
VITE_API_URL=https://api.watson.oceanheart.ai
VITE_USE_PASSPORT=true
VITE_PUBLIC_URL=https://watson.oceanheart.ai

# Logging
LOG_LEVEL=WARNING

# Feature Flags - Disable debug features in production
ENABLE_DEBUG_TOOLBAR=false
ENABLE_ADMIN_INTERFACE=false

# External Services
SENTRY_DSN=your-production-sentry-dsn
ANALYTICS_TRACKING_ID=your-production-analytics-id

# Storage - Production asset storage
AWS_ACCESS_KEY_ID=your-production-aws-key
AWS_SECRET_ACCESS_KEY=your-production-aws-secret
AWS_STORAGE_BUCKET_NAME=watson-production-assets
AWS_S3_REGION_NAME=us-west-2
AWS_DEFAULT_ACL=public-read

# Email Configuration
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.yourdomain.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=noreply@yourdomain.com
EMAIL_HOST_PASSWORD=your-email-password

# Security Headers
SECURE_SSL_REDIRECT=true
SESSION_COOKIE_SECURE=true
CSRF_COOKIE_SECURE=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_CONTENT_TYPE_NOSNIFF=true

# Performance
GUNICORN_WORKERS=3
GUNICORN_WORKER_CONNECTIONS=1000

# Monitoring
HEALTH_CHECK_ACCESS_TOKEN=your-monitoring-token
</file>

<file path=".env.staging">
# Watson Staging Environment Variables

# Django settings
DEBUG=false
SECRET_KEY=${STAGING_SECRET_KEY}
ALLOWED_HOSTS=${STAGING_ALLOWED_HOSTS}

# Database
DATABASE_URL=${STAGING_DATABASE_URL}

# Authentication
PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json
JWT_ALGORITHM=RS256

# Frontend/API
NODE_ENV=staging
API_URL=${STAGING_API_URL}

# Static files
STATIC_URL=/static/
MEDIA_URL=/media/

# Security settings (less restrictive than production)
SECURE_SSL_REDIRECT=false
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false
SECURE_BROWSER_XSS_FILTER=true
SECURE_CONTENT_TYPE_NOSNIFF=true

# Logging
LOG_LEVEL=DEBUG
SENTRY_DSN=${STAGING_SENTRY_DSN}

# Performance
CACHE_TTL=300
</file>

<file path=".env.staging.template">
# Watson Staging Environment Configuration
# Copy to .env for staging environment

# Database
DATABASE_URL=postgresql://watson:staging_password@staging-db:5432/watson_staging
REDIS_URL=redis://staging-redis:6379/0

# Django Configuration
DEBUG=true
SECRET_KEY=staging-secret-key-change-this
ALLOWED_HOSTS=watson-staging.oceanheart.ai,localhost,127.0.0.1
DJANGO_SETTINGS_MODULE=watson.settings.production

# Passport Authentication Configuration
AUTH_URL=https://passport-staging.oceanheart.ai  # Or production if no staging passport
JWT_SECRET=staging-jwt-secret-min-32-characters  # Must match Passport's staging secret
JWT_ALGORITHM=HS256
COOKIE_DOMAIN=.oceanheart.ai
SUBDOMAIN_NAME=watson-staging

# Frontend Configuration
NODE_ENV=staging
VITE_AUTH_URL=https://passport-staging.oceanheart.ai
VITE_API_URL=https://watson-staging.oceanheart.ai
VITE_USE_PASSPORT=true
VITE_PUBLIC_URL=https://watson-staging.oceanheart.ai

# Logging
LOG_LEVEL=INFO

# Feature Flags
ENABLE_DEBUG_TOOLBAR=true
ENABLE_ADMIN_INTERFACE=true

# External Services
SENTRY_DSN=your-sentry-dsn-here
ANALYTICS_TRACKING_ID=your-analytics-id-here

# Storage (if using cloud storage)
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_STORAGE_BUCKET_NAME=watson-staging-assets

# Email Configuration (if needed)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=true
# EMAIL_HOST_USER=your-email
# EMAIL_HOST_PASSWORD=your-password
</file>

<file path=".rspec">
--require spec_helper
</file>

<file path="AGENTS.md">
# Repository Guidelines

## Project Structure & Modules
- `frontend/` — React + TypeScript app built with Bun. Entry: `src/main.tsx`; tests: `*.test.ts[x]`.
- `backend/` — Django API (`watson/`, `reviews/`, `core/`). Uses `manage.py`; static assets in `static/` and `staticfiles/`.
- `spec/` — Ruby/RSpec unit tests for shared validators/utilities.
- `scripts/` — Dev/CI helpers (`dev.sh`, `ci-local.sh`, `pre-commit-hook.sh`, `migrate.sh`).
- `deploy/` — Release scripts. `docker/`, `Dockerfile`, `docker-compose.yml` for container workflows.
- Build output goes to `dist/` and coverage to `coverage/`, `backend/htmlcov/`.

## Build, Test, and Dev Commands
- Local dev (full): `npm run dev` (hot-serve via Bun).
- Build (prod): `npm run build` or `npm run build:prod`.
- Frontend tests: `npm test` or `bun test frontend/ --preload ./bun.test.config.ts`.
- Backend tests: `npm run test:backend` (Django).
- Ruby tests: `npm run test:ruby` (RSpec).
- All tests + coverage: `npm run test:all` and `npm run test:coverage`.
- Docker: `npm run docker:build`, `npm run docker:up`, `npm run docker:down`.
- Local CI simulation: `npm run ci:local`. Pre-commit checks: `npm run pre-commit`.

## Coding Style & Naming
- TypeScript/React: strict types; run `npm run typecheck`. Components `PascalCase.tsx`, utilities `camelCase.ts`.
- Python/Django: follow Django app structure; module names `snake_case.py`; settings under `backend/watson/settings/`.
- Ruby: follow RuboCop defaults; specs under `spec/*_spec.rb`.
- Keep files small and cohesive; prefer pure functions and typed interfaces at boundaries.

## Testing Guidelines
- Frontend: Testing Library + Happy DOM. Name tests `*.test.ts[x]` adjacent to source.
- Backend: Django `TestCase` in app `tests.py` modules. Run with `DJANGO_ENVIRONMENT=test` when needed.
- Ruby: RSpec with SimpleCov; unit specs in `spec/` mirroring library names.
- Coverage reports: `npm run coverage` (HTML at `backend/htmlcov/index.html`, `coverage/index.html`).

## Commits & Pull Requests
- Commits: short imperative subject (<= 72 chars), scoped paths (e.g., `frontend: …`, `backend: …`). Group related changes.
- PRs: include purpose, screenshots for UI, reproduction/verification steps, and linked issues. Ensure `ci-local.sh` passes and production build validates (`npm run validate:build`).

## Security & Configuration
- Never commit secrets. Use `.env.*` files; copy from `*.template` and load per environment. Validate via `scripts/health-check.sh`.
</file>

<file path="components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "frontend/src/styles/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {
    "@aceternity": "https://ui.aceternity.com/registry/{name}.json"
  }
}
</file>

<file path="docker-instructions.md">
# Docker Development Environment Instructions

## Quick Start

```bash
# Start all services
docker-compose up -d

# Start with development profile (includes frontend-dev and Caddy)
docker-compose --profile dev up -d

# View logs
docker-compose logs -f

# Stop all services
docker-compose down
```

## Available URLs and Ports

### Primary Access Points

| Service | URL | Description |
|---------|-----|-------------|
| **Unified Proxy (Caddy)** | http://localhost:3321 | Main development URL with unified frontend/backend |
| **Django Backend (Direct)** | http://localhost:8888 | Direct Django API access |
| **Vite Frontend (Direct)** | http://localhost:8881 | Direct Vite dev server access |
| **PostgreSQL Database** | localhost:5432 | Database connection |
| **Redis** | localhost:6379 | Cache/queue service |

### Proxy Configuration

The Caddy proxy (port 3321) routes requests as follows:
- `/api/*` → Django backend (watson:8000)
- `/admin/*` → Django admin (watson:8000)
- `/*` → Vite frontend (frontend-dev:3000)

### Internal Docker Network

Services communicate internally using these hostnames:
- `watson` - Django backend (port 8000 internally)
- `frontend-dev` - Vite dev server (port 3000 internally)
- `database` - PostgreSQL (port 5432)
- `redis` - Redis (port 6379)
- `caddy` - Reverse proxy (port 3321)

## Environment Variables

### Django Backend (`watson` service)
- `DATABASE_URL`: postgresql://watson:watson_dev_password@database:5432/watson_dev
- `REDIS_URL`: redis://redis:6379/0
- `DEBUG`: true
- `ALLOWED_HOSTS`: localhost,127.0.0.1,watson
- `DJANGO_SETTINGS_MODULE`: watson.settings.base

### Frontend Development (`frontend-dev` service)
- `VITE_API_URL`: http://watson:8000

### Vite Proxy Configuration
The Vite dev server (vite.config.ts) proxies:
- `/api` → `VITE_API_URL` or http://localhost:8888
- `/admin` → `VITE_API_URL` or http://localhost:8888

## Development Workflows

### Full Stack Development (Recommended)
```bash
# Use the unified proxy with hot-reload for both frontend and backend
docker-compose --profile dev up -d

# Access the application at:
# http://localhost:3321
```

### Backend-Only Development
```bash
# Start only backend services
docker-compose up -d watson database redis

# Access Django at:
# http://localhost:8888/admin
# http://localhost:8888/api
```

### Frontend-Only Development (Local)
```bash
# Start backend services
docker-compose up -d watson database redis

# Run frontend locally
bun run dev

# Frontend will proxy API calls to http://localhost:8888
```

## Database Access

### PostgreSQL Connection
```
Host: localhost
Port: 5432
Database: watson_dev
Username: watson
Password: watson_dev_password
```

### Django Admin
```
URL: http://localhost:8888/admin (direct)
     http://localhost:3321/admin (via proxy)
Username: admin
Password: admin123
```

## Volume Mounts

### Backend (`watson` service)
- `./backend:/app/backend` - Live code reload
- `venv_volume:/app/backend/.venv` - Preserved Python environment

### Frontend (`frontend-dev` service)
- `./frontend:/app/frontend` - Live code reload
- `./package.json:/app/package.json` - Package manifest
- `./bun.lock:/app/bun.lock` - Lock file
- `./tsconfig.json:/app/tsconfig.json` - TypeScript config
- `./vite.config.ts:/app/vite.config.ts` - Vite config
- `./components.json:/app/components.json` - Component config
- `node_modules:/app/node_modules` - Preserved dependencies

## Troubleshooting

### Port Conflicts
If ports are already in use:
```bash
# Check what's using a port
lsof -i :3321  # or 8888, 8881, 5432, 6379

# Stop conflicting service or change ports in docker-compose.yml
```

### Database Issues
```bash
# Reset database
docker-compose down -v
docker-compose up -d

# Run migrations manually
docker-compose exec watson python manage.py migrate
```

### Frontend Build Issues
```bash
# Rebuild frontend container
docker-compose build frontend-dev

# Clear node_modules volume
docker-compose down
docker volume rm watson_node_modules
docker-compose --profile dev up -d
```

### View Container Logs
```bash
# All services
docker-compose logs -f

# Specific service
docker-compose logs -f watson
docker-compose logs -f frontend-dev
```

## Service Dependencies

```
caddy (3321)
├── frontend-dev (3000 internal)
└── watson (8000 internal)
    ├── database (5432)
    └── redis (6379)
```

## Health Checks

All services include health checks:
- **watson**: `/healthcheck.sh` every 30s
- **database**: `pg_isready` every 5s
- **redis**: `redis-cli ping` every 10s

Services won't start until their dependencies are healthy.
</file>

<file path="GEMINI.md">
# Watson.Oceanheart.ai

## Project Overview

**Watson** is a prototype application for clinicians to review and refine LLM outputs in psychotherapy. It allows for editing, classifying issues, submitting reviews, and viewing basic analytics. The goal is to evaluate the process of clinical review of LLM-generated content, not for direct clinical deployment.

The tech stack includes:

*   **Backend:** Django 5 with Django Rest Framework and HTMX.
*   **Frontend:** React with TipTap for rich text editing.
*   **Database:** Postgres (Neon)
*   **Authentication:** JWT from `passport.oceanheart.ai`
*   **Deployment:** Render / Railway / Fly

## Building and Running

### Prerequisites

*   Python 3.11+ (with `uv`)
*   Node.js (with `bun`)
*   Ruby (with `bundle`)
*   Postgres DB
*   Redis (optional)

### Setup

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/oceanheart-ai/watson
    cd watson
    ```

2.  **Install Python dependencies:**
    ```bash
    uv venv
    source .venv/bin/activate
    uv pip install -r requirements.txt
    ```

3.  **Install frontend dependencies:**
    ```bash
    bun install
    ```

4.  **Install Ruby dependencies:**
    ```bash
    bundle install
    ```

5.  **Set up environment variables:**
    Create a `.env` file and add the following:
    ```
    DATABASE_URL=postgresql://user:pass@host/db
    PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json
    ```

### Running the application

*   **Run the backend:**
    ```bash
    python backend/manage.py migrate
    python backend/manage.py runserver
    ```

*   **Run the frontend (in a separate terminal):**
    ```bash
    bun run dev
    ```

## Development Conventions

### Testing

*   **Run all tests:**
    ```bash
    npm run test:all
    ```
*   **Run frontend tests:**
    ```bash
    npm run test
    ```
*   **Run backend tests:**
    ```bash
    npm run test:backend
    ```
*   **Run Ruby tests:**
    ```bash
    npm run test:ruby
    ```

### Code Style

*   **Type checking:**
    ```bash
    npm run typecheck
    ```
*   **Pre-commit hooks:**
    The project uses a pre-commit hook to run checks before committing. See `./scripts/pre-commit-hook.sh`.

### Deployment

*   The project can be deployed using Docker or to services like Render, Railway, or Fly.
*   Deployment scripts are available in the `deploy/` directory.
*   Use `npm run docker:build` and `npm run docker:up` to run with Docker.
</file>

<file path="main.py">
def main():
    print("Hello from watson-oceanheart-ai!")


if __name__ == "__main__":
    main()
</file>

<file path="vercel.json">
{
  "buildCommand": "bun install && bun run build:frontend",
  "outputDirectory": "dist/static",
  "framework": "vite",
  "installCommand": "curl -fsSL https://bun.sh/install | bash && bun install",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
</file>

<file path="backend/core/views.py">
from django.shortcuts import render
from django.http import JsonResponse
from django.db import connection
from django.conf import settings
import time


def health_check(request):
    """Health check endpoint for monitoring and load balancers"""
    
    health_data = {
        "status": "healthy",
        "timestamp": int(time.time()),
        "service": "watson-api",
        "version": "1.0.0"
    }
    
    try:
        # Check database connection
        with connection.cursor() as cursor:
            cursor.execute("SELECT 1")
            health_data["database"] = "connected"
    except Exception as e:
        health_data["status"] = "unhealthy"
        health_data["database"] = f"error: {str(e)}"
        return JsonResponse(health_data, status=503)
    
    # Check if in debug mode (should be False in production)
    health_data["debug_mode"] = settings.DEBUG
    
    # Add any additional health checks here
    return JsonResponse(health_data)


def readiness_check(request):
    """Readiness check for Kubernetes/container orchestration"""
    
    readiness_data = {
        "ready": True,
        "timestamp": int(time.time()),
        "checks": {}
    }
    
    try:
        # Database readiness
        with connection.cursor() as cursor:
            cursor.execute("SELECT COUNT(*) FROM django_migrations")
            migration_count = cursor.fetchone()[0]
            readiness_data["checks"]["migrations"] = f"{migration_count} applied"
            
        # Check if static files are collected
        import os
        static_root = getattr(settings, 'STATIC_ROOT', None)
        if static_root and os.path.exists(static_root):
            readiness_data["checks"]["static_files"] = "available"
        else:
            readiness_data["checks"]["static_files"] = "missing"
            readiness_data["ready"] = False
            
    except Exception as e:
        readiness_data["ready"] = False
        readiness_data["error"] = str(e)
        return JsonResponse(readiness_data, status=503)
    
    status_code = 200 if readiness_data["ready"] else 503
    return JsonResponse(readiness_data, status=status_code)


# Create your views here.
</file>

<file path="backend/watson/settings/production.py">
# Django Production Settings for Watson
# Security-focused settings for production deployment

from .base import *
import os

# Production must have these environment variables
DEBUG = False
SECRET_KEY = os.environ.get('SECRET_KEY')
if not SECRET_KEY:
    raise ValueError("SECRET_KEY environment variable is required in production")

ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', '').split(',')

# Database - must use PostgreSQL in production
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': os.environ.get('DB_NAME'),
        'USER': os.environ.get('DB_USER'),
        'PASSWORD': os.environ.get('DB_PASSWORD'),
        'HOST': os.environ.get('DB_HOST'),
        'PORT': os.environ.get('DB_PORT', '5432'),
        'CONN_MAX_AGE': 60,
    }
} if os.environ.get('DATABASE_URL') else DATABASES

# Security settings for production
SECURE_SSL_REDIRECT = os.environ.get('SECURE_SSL_REDIRECT', 'true').lower() == 'true'
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
SECURE_HSTS_SECONDS = 31536000  # 1 year
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
USE_X_FORWARDED_HOST = True

# Static files optimization
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'

# Logging configuration for production
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': '/var/log/watson/django.log',
            'formatter': 'verbose',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}
</file>

<file path="backend/watson/urls.py">
"""
URL configuration for watson project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/5.2/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path
from core.views import health_check, readiness_check

urlpatterns = [
    path('admin/', admin.site.urls),
    path('health/', health_check, name='health_check'),
    path('ready/', readiness_check, name='readiness_check'),
]
</file>

<file path="docker/caddy/Caddyfile.local">
# Local reverse proxy for developer workflow
# Domain: http://watson.lvh.me:3321 (HTTP only; no TLS for local)
# Routes:
#   - /            -> Bun dev server (frontend) on :8881
#   - /api/*       -> Django API on :8888
#   - /admin/*     -> Django admin on :8888

{
  auto_https off
}

http://watson.lvh.me:3321 {
  encode gzip

  # API/Admin to Django
  handle_path /api/* {
    reverse_proxy localhost:8888
  }
  handle_path /admin/* {
    reverse_proxy localhost:8888
  }

  # Everything else to the frontend dev server
  handle {
    reverse_proxy localhost:8881
  }
}
</file>

<file path="docker/caddy/Caddyfile.prod">
# Production reverse proxy for watson.oceanheart.ai
#
# Assumptions:
# - Frontend static files are deployed to /srv/www/dist/static
# - Django app is reachable at host "django" on port 8000 (e.g., via Docker network)
# - Optional: Django staticfiles mounted at /srv/backend/staticfiles
#
# Notes:
# - Caddy will manage TLS via Let's Encrypt automatically for the domain.
# - Adjust origins and paths as needed for your deployment layout.

watson.oceanheart.ai {
  encode gzip zstd

  # Security headers (adjust CSP as your frontend requires)
  header {
    X-Content-Type-Options "nosniff"
    X-Frame-Options "DENY"
    Referrer-Policy "strict-origin-when-cross-origin"
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
  }

  # API and Admin routed to Django
  @api path /api/*
  handle @api {
    reverse_proxy django:8000
  }
  @admin path /admin/*
  handle @admin {
    reverse_proxy django:8000
  }

  # Optional: serve Django static files directly if mounted
  handle_path /static/* {
    root * /srv/backend/staticfiles
    file_server
  }

  # Frontend SPA static files
  root * /srv/www/dist/static
  try_files {path} /index.html
  file_server
}
</file>

<file path="docker/caddy/README.md">
# Caddy Reverse Proxy

This folder contains ready‑to‑use Caddyfiles for local development and production.

## Local
- File: `docker/caddy/Caddyfile.local`
- Domain: `http://watson.lvh.me:3321`
- Routes:
  - `/api/*`, `/admin/*` → `localhost:8888` (Django)
  - everything else → `localhost:8881` (Bun dev server)

Run locally (assuming Caddy is installed):

```
caddy run --config docker/caddy/Caddyfile.local --adapter caddyfile

Notes:
- The local Caddyfile disables automatic HTTPS and binds to HTTP on port 3321 to avoid ACME lookups.
- Proxies frontend to :8881 and API to :8888.
- Visit: http://watson.lvh.me:3321
```

## Production
- File: `docker/caddy/Caddyfile.prod`
- Domain: `https://watson.oceanheart.ai` (TLS via Let’s Encrypt)
- Expects:
  - Frontend static at `/srv/www/dist/static`
- Django reachable as host `django:8000` (e.g., Docker network)
  - Optional Django static at `/srv/backend/staticfiles`

Example Docker Compose service:

```yaml
services:
  caddy:
    image: caddy:2
    ports: ["80:80", "443:443"]
    volumes:
      - ./docker/caddy/Caddyfile.prod:/etc/caddy/Caddyfile:ro
      - ./dist/static:/srv/www/dist/static:ro
      - ./backend/staticfiles:/srv/backend/staticfiles:ro
      - caddy_data:/data
      - caddy_config:/config
    depends_on:
      - watson
volumes:
  caddy_data:
  caddy_config:
```

Adjust paths and service names to match your environment.
</file>

<file path="docker/init-db.sql">
-- Watson Database Initialization
-- This script runs once when the database container is first created.

-- Create the main development database
-- This is necessary because the POSTGRES_DB env var creates the DB *after* this script runs.
CREATE DATABASE watson_dev;
GRANT ALL PRIVILEGES ON DATABASE watson_dev TO watson;

-- Create the test database
CREATE DATABASE watson_test;
GRANT ALL PRIVILEGES ON DATABASE watson_test TO watson;

-- Create the staging database (if needed)
CREATE DATABASE watson_staging;
GRANT ALL PRIVILEGES ON DATABASE watson_staging TO watson;

-- Now that the databases are created, connect to each one to add extensions.
-- The \gexec command executes the preceding query and uses its output as the input for the next command.
-- This is a robust way to iterate over databases in psql.
\c watson_dev;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";

\c watson_test;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";

\c watson_staging;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";
</file>

<file path="docs/specs/001-build.prd.spec">
# Watson Build System - Product Requirements Document

**Version**: 1.0  
**Date**: 2025-09-12  
**Author**: Senior Product Development Architect  
**Status**: Draft  

---

## 1. Executive Summary

Watson is a clinical LLM output review and curation tool requiring a sophisticated multi-language build system to support Python (UV), TypeScript/JavaScript (Bun), and Ruby environments. The build system must enable efficient development workflows, reliable testing, and seamless deployment across multiple environments while maintaining strict isolation between language ecosystems.

This PRD defines the requirements for a comprehensive build system that balances developer experience, deployment reliability, and operational simplicity for the Watson clinical review platform.

---

## 2. Project Context

### 2.1 Architecture Overview
- **Backend**: Django 5 + Django REST Framework + HTMX
- **Frontend**: TypeScript/React with TipTap rich text editor
- **Database**: PostgreSQL with JSONB support (Neon hosted)
- **Authentication**: JWT from passport.oceanheart.ai (RS256)
- **Deployment**: Cloud platforms (Render/Railway/Fly)

### 2.2 Multi-Language Requirements
- **Python**: UV package manager for Django backend and data processing
- **TypeScript/JavaScript**: Bun runtime for frontend and build tooling  
- **Ruby**: Bundle for auxiliary tooling and scripts

### 2.3 Core Workflow Dependencies
The build system must support the complete Watson workflow:
1. Document ingestion and LLM output generation
2. Rich text editing with TipTap/ProseMirror
3. Real-time diff computation (token + structural JSON)
4. Analytics dashboard with data visualization
5. Export generation (JSONL/CSV bundles)

---

## 3. Requirements Analysis

### 3.1 Functional Requirements

#### 3.1.1 Development Environment Setup
- **DEV-001**: Automated environment initialization for all three language stacks
- **DEV-002**: Dependency management isolation between Python, TypeScript, and Ruby
- **DEV-003**: Hot reloading support for both backend (Django) and frontend (React/TipTap)
- **DEV-004**: Environment variable management across all stacks
- **DEV-005**: Database migration and seed data management

#### 3.1.2 Build Pipeline
- **BUILD-001**: TypeScript transpilation and bundling using Bun
- **BUILD-002**: Python package building and dependency resolution via UV
- **BUILD-003**: Ruby gem management and script execution
- **BUILD-004**: Static asset processing (CSS, images, fonts)
- **BUILD-005**: Production-optimized builds with minification and tree-shaking

#### 3.1.3 Testing Infrastructure
- **TEST-001**: Python test execution using Django's test framework
- **TEST-002**: TypeScript/JavaScript testing with Bun's built-in test runner
- **TEST-003**: Ruby test execution with standard test frameworks
- **TEST-004**: Integration testing across language boundaries
- **TEST-005**: Database testing with isolated test environments

#### 3.1.4 Deployment Automation
- **DEPLOY-001**: Container image building for cloud deployment
- **DEPLOY-002**: Environment-specific configuration management
- **DEPLOY-003**: Database migration execution in deployment pipeline
- **DEPLOY-004**: Static asset deployment to CDN/storage
- **DEPLOY-005**: Health checks and rollback mechanisms

### 3.2 Non-Functional Requirements

#### 3.2.1 Performance
- **PERF-001**: Build times under 2 minutes for development builds
- **PERF-002**: Hot reload response times under 500ms
- **PERF-003**: Production build optimization for minimal bundle sizes
- **PERF-004**: Parallel execution of independent build tasks

#### 3.2.2 Reliability
- **REL-001**: Build process must be deterministic and reproducible
- **REL-002**: Dependency lock files for all package managers (UV, Bun, Bundle)
- **REL-003**: Build failure detection and clear error reporting
- **REL-004**: Rollback capability for failed deployments

#### 3.2.3 Developer Experience
- **DX-001**: Single command setup for new developers
- **DX-002**: Clear documentation for common build tasks
- **DX-003**: IDE integration with TypeScript, Python, and Ruby tooling
- **DX-004**: Consistent command interface across all languages

### 3.3 Technical Constraints

#### 3.3.1 Language Version Requirements
- **Python**: 3.11+ (for Django 5 compatibility)
- **Node.js**: Bun runtime (no Node.js dependency)
- **Ruby**: 3.0.0+ (current Gemfile specification)
- **TypeScript**: 5.0+ (peer dependency requirement)

#### 3.3.2 Package Manager Constraints
- **Python**: Must use UV (no pip, pipenv, or poetry)
- **JavaScript**: Must use Bun (no npm, yarn, or pnpm)
- **Ruby**: Must use Bundle (standard Ruby package manager)

#### 3.3.3 Platform Compatibility
- **Primary**: macOS (Darwin) development environment
- **Secondary**: Linux deployment environments
- **Tertiary**: Windows development environment (WSL)

---

## 4. Implementation Phases

### Phase 0: Foundation Setup (001-build-00.prd.spec)
**Scope**: Basic multi-language environment initialization and dependency management

**Key Features**:
- UV environment setup with Python 3.11+
- Bun installation and TypeScript configuration
- Ruby Bundle configuration
- Basic project structure validation
- Environment variable template creation

**Success Criteria**:
- All three language environments can be initialized from scratch
- Dependencies install without conflicts
- Basic "hello world" execution in each language
- Clear setup documentation

**Dependencies**: None
**Estimated Effort**: 1-2 days

### Phase 1: Development Workflow (001-build-01.prd.spec)
**Scope**: Hot reloading, development servers, and local testing infrastructure

**Key Features**:
- Django development server with hot reload
- Bun-based frontend development with HMR
- File watching for automatic rebuilds
- Local database setup and migrations
- Development environment health checks

**Success Criteria**:
- Changes to Python code trigger Django reload
- Frontend changes reflect immediately in browser
- Database migrations run automatically
- All services can start with single command

**Dependencies**: Phase 0 completion
**Estimated Effort**: 2-3 days

### Phase 2: Build Pipeline (001-build-02.prd.spec)
**Scope**: Production-ready build processes and asset optimization

**Key Features**:
- TypeScript transpilation and bundling with Bun
- Python package building and optimization
- Static asset processing and optimization
- Build artifact validation
- Environment-specific configuration

**Success Criteria**:
- Production builds complete without errors
- Static assets are properly optimized
- Build artifacts are deployment-ready
- Build process is deterministic

**Dependencies**: Phase 1 completion
**Estimated Effort**: 2-3 days

### Phase 3: Testing Infrastructure (001-build-03.prd.spec)
**Scope**: Comprehensive testing setup across all language stacks

**Key Features**:
- Django test suite execution
- Bun test runner for TypeScript/JavaScript
- Ruby test framework integration
- Test database isolation
- Coverage reporting

**Success Criteria**:
- All test suites run independently
- Test databases are properly isolated
- Coverage reports generated
- CI/CD integration ready

**Dependencies**: Phase 2 completion
**Estimated Effort**: 2-3 days

### Phase 4: Deployment Automation (001-build-04.prd.spec)
**Scope**: Production deployment pipeline and infrastructure

**Key Features**:
- Docker containerization
- Cloud platform deployment scripts
- Database migration automation
- Environment configuration management
- Health checks and monitoring

**Success Criteria**:
- Automated deployment to staging/production
- Database migrations execute safely
- Health checks validate deployment
- Rollback procedures tested

**Dependencies**: Phase 3 completion
**Estimated Effort**: 3-4 days

---

## 5. Technical Implementation Details

### 5.1 Build Tool Requirements

#### 5.1.1 Bun Configuration
```json
{
  "scripts": {
    "dev": "bun --hot ./src/index.ts",
    "build": "bun build ./src/index.ts --outdir ./dist --minify",
    "test": "bun test",
    "typecheck": "tsc --noEmit"
  },
  "build": {
    "target": "browser",
    "outdir": "./dist",
    "entryPoints": ["./src/index.ts"],
    "splitting": true,
    "format": "esm"
  }
}
```

#### 5.1.2 UV Configuration
```toml
[project]
name = "watson-oceanheart-ai"
version = "0.1.0"
requires-python = ">=3.11"
dependencies = [
    "django>=5.0",
    "djangorestframework",
    "django-cors-headers",
    "psycopg2-binary",
    "python-jose[cryptography]",
    "requests"
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"
```

#### 5.1.3 Bundle Configuration
```ruby
source 'https://rubygems.org'
ruby '3.0.0'

gem 'rake'
gem 'minitest'
gem 'rubocop'
```

### 5.2 File Structure Organization
```
watson.oceanheart.ai/
├── backend/                 # Django application
│   ├── watson/             # Main Django project
│   ├── apps/               # Django apps
│   ├── static/             # Static assets
│   └── requirements/       # Environment-specific deps
├── frontend/               # TypeScript/React frontend
│   ├── src/                # Source code
│   ├── public/             # Public assets
│   └── dist/               # Build output
├── scripts/                # Ruby and other scripts
├── docs/                   # Documentation
├── tests/                  # Cross-language tests
├── docker/                 # Container configurations
└── deploy/                 # Deployment scripts
```

### 5.3 Environment Management

#### 5.3.1 Development Environment Variables
```bash
# Database
DATABASE_URL=postgresql://localhost:5432/watson_dev
REDIS_URL=redis://localhost:6379/0

# Authentication
PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json
JWT_ALGORITHM=RS256

# Django
DEBUG=true
SECRET_KEY=dev-secret-key
ALLOWED_HOSTS=localhost,127.0.0.1

# Bun/Frontend
NODE_ENV=development
VITE_API_URL=http://localhost:8888
```

#### 5.3.2 Production Environment Variables
```bash
# Database
DATABASE_URL=${DATABASE_URL}
REDIS_URL=${REDIS_URL}

# Authentication
PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json
JWT_ALGORITHM=RS256

# Django
DEBUG=false
SECRET_KEY=${SECRET_KEY}
ALLOWED_HOSTS=${ALLOWED_HOSTS}

# Frontend
NODE_ENV=production
VITE_API_URL=${API_URL}
```

---

## 6. Integration Points

### 6.1 Frontend-Backend Integration
- **API Endpoints**: RESTful API with Django REST Framework
- **Authentication**: JWT validation middleware
- **Static Assets**: Django serves development assets, CDN in production
- **WebSocket**: HTMX for real-time interactions

### 6.2 Database Integration
- **Migrations**: Django migration system
- **Seed Data**: Management commands for test data
- **Backup/Restore**: Automated database backup procedures

### 6.3 External Service Integration
- **Passport Authentication**: JWT token validation
- **Database Hosting**: Neon PostgreSQL integration
- **File Storage**: Static asset storage (local/S3/CDN)

---

## 7. Quality Assurance

### 7.1 Code Quality Standards
- **Python**: Black formatting, isort imports, flake8 linting
- **TypeScript**: ESLint with TypeScript rules, Prettier formatting
- **Ruby**: RuboCop linting and formatting

### 7.2 Testing Strategy
- **Unit Tests**: Each language stack has comprehensive unit tests
- **Integration Tests**: Cross-language integration validation
- **End-to-End Tests**: Full workflow testing with real database
- **Performance Tests**: Build time and runtime performance validation

### 7.3 Security Requirements
- **Dependency Scanning**: Automated vulnerability scanning
- **Secret Management**: No hardcoded secrets in code
- **Container Security**: Minimal attack surface in containers

---

## 8. Monitoring and Observability

### 8.1 Build Monitoring
- **Build Success Rates**: Track successful vs failed builds
- **Build Performance**: Monitor build times and resource usage
- **Dependency Health**: Track outdated and vulnerable dependencies

### 8.2 Deployment Monitoring
- **Deployment Success**: Track successful deployments
- **Rollback Events**: Monitor and alert on rollbacks
- **Health Check Status**: Continuous application health monitoring

---

## 9. Documentation Requirements

### 9.1 Developer Documentation
- **Setup Guide**: Comprehensive environment setup instructions
- **Build Commands**: Reference for all build system commands
- **Troubleshooting**: Common issues and solutions
- **Architecture Guide**: Build system architecture overview

### 9.2 Operations Documentation
- **Deployment Guide**: Production deployment procedures
- **Monitoring Guide**: Monitoring and alerting setup
- **Incident Response**: Build and deployment incident procedures

---

## 10. Success Metrics

### 10.1 Developer Experience Metrics
- **Setup Time**: New developer can start contributing in <30 minutes
- **Build Time**: Development builds complete in <2 minutes
- **Hot Reload Time**: Changes reflect in <500ms
- **Test Execution Time**: Full test suite completes in <5 minutes

### 10.2 Reliability Metrics
- **Build Success Rate**: >95% successful builds
- **Deployment Success Rate**: >98% successful deployments
- **Mean Time to Recovery**: <15 minutes for build/deployment issues
- **Zero Downtime Deployments**: 100% of deployments are zero-downtime

### 10.3 Maintenance Metrics
- **Dependency Freshness**: <30 days average age for non-major updates
- **Security Vulnerability Resolution**: <24 hours for critical vulnerabilities
- **Build System Updates**: Minimal disruption to developer workflow

---

## 11. Risk Assessment

### 11.1 Technical Risks
- **Multi-Language Complexity**: Managing three different language ecosystems
- **Build Tool Maturity**: Bun is relatively new compared to established tools
- **Dependency Conflicts**: Potential conflicts between language-specific dependencies

### 11.2 Mitigation Strategies
- **Containerization**: Use containers to isolate language environments
- **Fallback Plans**: Alternative build tools ready if Bun issues arise
- **Comprehensive Testing**: Extensive testing to catch dependency conflicts early

---

## 12. Conclusion

This PRD establishes the foundation for a robust, multi-language build system supporting Watson's clinical LLM review platform. The phased approach ensures systematic implementation while maintaining focus on developer experience and deployment reliability.

The build system must balance the complexity of supporting Python (UV), TypeScript (Bun), and Ruby environments while providing a unified, simple interface for developers and operations teams.

Success depends on careful attention to integration points, comprehensive testing, and maintaining flexibility for the evolving needs of the Watson platform.
</file>

<file path="docs/specs/deployment.prd.md">
# Watson Deployment Strategy PRD

Date: 2025-09-12

## Executive Summary
Define a pragmatic deployment for watson.oceanheart.ai with clean separation of dev/prod databases, simple reverse proxying, and smooth local development at watson.lvh.me:3321. Prefer managed Postgres and a developer‑friendly proxy (Caddy) for TLS and routing.

## Problem Statement
We need a cohesive, low‑friction path from local dev to production: consistent URLs, secure env config, separate DBs, and repeatable deployment using existing scripts (deploy/, docker/).

## Requirements
### User requirements
- Access production at https://watson.oceanheart.ai with HTTPS.
- Local dev at http://watson.lvh.me:3321 with frontend hot‑reload and API routing.

### Technical requirements
- Separate Postgres instances for dev and prod; migrations tracked and automated.
- Reverse proxy terminates TLS, serves static assets, and routes /api to Django.
- CI gates deploys with tests (use `npm run test:all`) and build validation.
- Single command deploy via `deploy/deploy.sh` (Render/Fly) or Docker on a VM.

### Design requirements
- Use `.env.*` files from provided templates; never commit secrets.
- Health checks in place and a rollback path.

## Implementation Phases
### Phase 1: Local development
- Run DB/Redis/Django via `docker-compose up -d` (ports 5432, 6379, 8888).
- Start frontend: `npm run dev` (bun dev). Use Caddy to expose http://watson.lvh.me:3321 and route:
  - `/` → `localhost:8881` (Bun dev server)
  - `/api/*` → `localhost:8888` (Django)

Example Caddyfile (local):
```
watson.lvh.me:3321 {
  reverse_proxy /api/* localhost:8888
  reverse_proxy localhost:8881
}
```

### Phase 2: Production (managed platform)
- Preferred: Render or Fly.io using `deploy/deploy.sh -p render` or `-p fly`.
- DNS: `A/AAAA` for `watson.oceanheart.ai` per platform instructions.
- Configure env from `.env.production` (use `.env.production.template`).
- DB: Managed Postgres (two databases: `watson_prod`, `watson_staging`), expose `DATABASE_URL` only.
- Static assets: build with `npm run build:prod`; platform serves static or proxy to Django `collectstatic` output.

### Phase 3: Production (self‑hosted VM, optional)
- Services with Docker Compose (reuse `docker-compose.yml` pattern): Caddy (TLS via Let’s Encrypt), Django (gunicorn), Redis, Postgres (or managed).
- Example Caddyfile (prod):
```
watson.oceanheart.ai {
  encode gzip
  handle_path /api/* {
    reverse_proxy django:8000
  }
  root * /srv/www/dist/static
  file_server
}
```
- Publish built frontend to `/srv/www/dist/static` during deploy.

## Implementation Notes
- Migrations: `npm run migrate` or `./scripts/migrate.sh` post‑deploy.
- CI: `npm run ci:local` locally; platform CI must run `npm run test:all` and `npm run validate:build`.
- Env: derive from `.env.staging.template` and `.env.production.template`. Ensure `ALLOWED_HOSTS` includes target domains.

## Security Considerations
- Enforce HTTPS in production; HSTS via Caddy/Nginx.
- Strong `SECRET_KEY`, secure `DATABASE_URL`; rotate credentials.
- Limit admin access; configure CORS narrowly.

## Success Metrics
- Green CI before deploy; < 5 min zero‑downtime rollout; health check returns 200; error rates stable; page load and API latency within baseline.

## Future Enhancements
- Blue/green deploys with traffic switching.
- Automated DB backups and PITR; read replicas for analytics.
- Observability: logs, metrics, tracing (e.g., OpenTelemetry) with alerts.
</file>

<file path="docs/specs/vercel-frontend-deployment-change-log.md">
# Change Log: Vercel Frontend Deployment
## Date: September 14, 2025

## Phase 1: Core Deployment Configuration

### Files Modified

### vercel.json (new)
- **Change**: Create Vercel deployment configuration
- **Rationale**: Define build process and routing for Vercel platform
- **Impact**: Enables frontend deployment on Vercel
- **Commit**: 3195747

### package.json
- **Change**: Add Vercel-specific build scripts (build:vercel, preview:vercel)
- **Rationale**: Provide dedicated scripts for Vercel builds
- **Impact**: Simplifies deployment process
- **Commit**: 3195747

### .env.production (modified)
- **Change**: Add Vercel frontend environment variables
- **Rationale**: Configure API endpoints for production frontend
- **Impact**: Enables frontend-backend communication
- **Commit**: 3195747

### .env.example (new)
- **Change**: Create example environment file
- **Rationale**: Document required environment variables
- **Impact**: Improves developer onboarding
- **Commit**: 3195747

## Dependencies Added/Removed
- None in Phase 1

## Breaking Changes
- None in Phase 1
</file>

<file path="docs/specs/vercel-frontend-deployment-implementation-report.md">
# Implementation Report: Vercel Frontend Deployment
## Date: September 14, 2025
## PRD: vercel-frontend-deployment.prd.md

## Phases Completed
- [x] Phase 1: Core Deployment Configuration
  - Tasks: vercel.json creation, package.json scripts, environment setup
  - Commits: 3195747
- [ ] Phase 2: API Integration & CORS
  - Tasks: Not started
  - Commits: N/A
- [ ] Phase 3: Build Optimization
  - Tasks: Not started
  - Commits: N/A
- [ ] Phase 4: CI/CD Pipeline
  - Tasks: Not started
  - Commits: N/A

## Current Phase: Phase 1 - Complete

### Tasks Completed
1. ✅ Created vercel.json configuration file with Bun support
2. ✅ Updated package.json with Vercel-specific scripts (build:vercel, preview:vercel)
3. ✅ Set up environment configuration (.env.production, .env.example)

## Testing Summary
- Tests written: 0 (configuration phase - no tests required)
- Tests passing: N/A
- Manual verification: Ready for Vercel CLI testing

## Challenges & Solutions
- Challenge: Existing .env.production file had Django configuration
  - Solution: Extended the file with Vercel-specific variables using defaults

## Critical Security Notes
- Authentication/Authorization changes: None
- Data validation changes: None
- Input sanitization: None

## Next Steps
- Complete Phase 1 implementation
- Test local build with Vercel CLI
- Move to Phase 2: API Integration & CORS
</file>

<file path="frontend/src/components/tiptap-node/image-upload-node/image-upload-node.tsx">
import * as React from "react"
import type { NodeViewProps } from "@tiptap/react"
import { NodeViewWrapper } from "@tiptap/react"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { CloseIcon } from "@/components/tiptap-icons/close-icon"
import "@/components/tiptap-node/image-upload-node/image-upload-node.scss"
import { focusNextNode, isValidPosition } from "@/lib/tiptap-utils"

export interface FileItem {
  /**
   * Unique identifier for the file item
   */
  id: string
  /**
   * The actual File object being uploaded
   */
  file: File
  /**
   * Current upload progress as a percentage (0-100)
   */
  progress: number
  /**
   * Current status of the file upload process
   * @default "uploading"
   */
  status: "uploading" | "success" | "error"

  /**
   * URL to the uploaded file, available after successful upload
   * @optional
   */
  url?: string
  /**
   * Controller that can be used to abort the upload process
   * @optional
   */
  abortController?: AbortController
}

export interface UploadOptions {
  /**
   * Maximum allowed file size in bytes
   */
  maxSize: number
  /**
   * Maximum number of files that can be uploaded
   */
  limit: number
  /**
   * String specifying acceptable file types (MIME types or extensions)
   * @example ".jpg,.png,image/jpeg" or "image/*"
   */
  accept: string
  /**
   * Function that handles the actual file upload process
   * @param {File} file - The file to be uploaded
   * @param {Function} onProgress - Callback function to report upload progress
   * @param {AbortSignal} signal - Signal that can be used to abort the upload
   * @returns {Promise<string>} Promise resolving to the URL of the uploaded file
   */
  upload: (
    file: File,
    onProgress: (event: { progress: number }) => void,
    signal: AbortSignal
  ) => Promise<string>
  /**
   * Callback triggered when a file is uploaded successfully
   * @param {string} url - URL of the successfully uploaded file
   * @optional
   */
  onSuccess?: (url: string) => void
  /**
   * Callback triggered when an error occurs during upload
   * @param {Error} error - The error that occurred
   * @optional
   */
  onError?: (error: Error) => void
}

/**
 * Custom hook for managing multiple file uploads with progress tracking and cancellation
 */
function useFileUpload(options: UploadOptions) {
  const [fileItems, setFileItems] = React.useState<FileItem[]>([])

  const uploadFile = async (file: File): Promise<string | null> => {
    if (file.size > options.maxSize) {
      const error = new Error(
        `File size exceeds maximum allowed (${options.maxSize / 1024 / 1024}MB)`
      )
      options.onError?.(error)
      return null
    }

    const abortController = new AbortController()
    const fileId = crypto.randomUUID()

    const newFileItem: FileItem = {
      id: fileId,
      file,
      progress: 0,
      status: "uploading",
      abortController,
    }

    setFileItems((prev) => [...prev, newFileItem])

    try {
      if (!options.upload) {
        throw new Error("Upload function is not defined")
      }

      const url = await options.upload(
        file,
        (event: { progress: number }) => {
          setFileItems((prev) =>
            prev.map((item) =>
              item.id === fileId ? { ...item, progress: event.progress } : item
            )
          )
        },
        abortController.signal
      )

      if (!url) throw new Error("Upload failed: No URL returned")

      if (!abortController.signal.aborted) {
        setFileItems((prev) =>
          prev.map((item) =>
            item.id === fileId
              ? { ...item, status: "success", url, progress: 100 }
              : item
          )
        )
        options.onSuccess?.(url)
        return url
      }

      return null
    } catch (error) {
      if (!abortController.signal.aborted) {
        setFileItems((prev) =>
          prev.map((item) =>
            item.id === fileId
              ? { ...item, status: "error", progress: 0 }
              : item
          )
        )
        options.onError?.(
          error instanceof Error ? error : new Error("Upload failed")
        )
      }
      return null
    }
  }

  const uploadFiles = async (files: File[]): Promise<string[]> => {
    if (!files || files.length === 0) {
      options.onError?.(new Error("No files to upload"))
      return []
    }

    if (options.limit && files.length > options.limit) {
      options.onError?.(
        new Error(
          `Maximum ${options.limit} file${options.limit === 1 ? "" : "s"} allowed`
        )
      )
      return []
    }

    // Upload all files concurrently
    const uploadPromises = files.map((file) => uploadFile(file))
    const results = await Promise.all(uploadPromises)

    // Filter out null results (failed uploads)
    return results.filter((url): url is string => url !== null)
  }

  const removeFileItem = (fileId: string) => {
    setFileItems((prev) => {
      const fileToRemove = prev.find((item) => item.id === fileId)
      if (fileToRemove?.abortController) {
        fileToRemove.abortController.abort()
      }
      if (fileToRemove?.url) {
        URL.revokeObjectURL(fileToRemove.url)
      }
      return prev.filter((item) => item.id !== fileId)
    })
  }

  const clearAllFiles = () => {
    fileItems.forEach((item) => {
      if (item.abortController) {
        item.abortController.abort()
      }
      if (item.url) {
        URL.revokeObjectURL(item.url)
      }
    })
    setFileItems([])
  }

  return {
    fileItems,
    uploadFiles,
    removeFileItem,
    clearAllFiles,
  }
}

const CloudUploadIcon: React.FC = () => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    className="tiptap-image-upload-icon"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M11.1953 4.41771C10.3478 4.08499 9.43578 3.94949 8.5282 4.02147C7.62062 4.09345 6.74133 4.37102 5.95691 4.83316C5.1725 5.2953 4.50354 5.92989 4.00071 6.68886C3.49788 7.44783 3.17436 8.31128 3.05465 9.2138C2.93495 10.1163 3.0222 11.0343 3.3098 11.8981C3.5974 12.7619 4.07781 13.5489 4.71463 14.1995C5.10094 14.5942 5.09414 15.2274 4.69945 15.6137C4.30476 16 3.67163 15.9932 3.28532 15.5985C2.43622 14.731 1.79568 13.6816 1.41221 12.5299C1.02875 11.3781 0.91241 10.1542 1.07201 8.95084C1.23162 7.74748 1.66298 6.59621 2.33343 5.58425C3.00387 4.57229 3.89581 3.72617 4.9417 3.10998C5.98758 2.4938 7.15998 2.1237 8.37008 2.02773C9.58018 1.93176 10.7963 2.11243 11.9262 2.55605C13.0561 2.99968 14.0703 3.69462 14.8919 4.58825C15.5423 5.29573 16.0585 6.11304 16.4177 7.00002H17.4999C18.6799 6.99991 19.8288 7.37933 20.7766 8.08222C21.7245 8.78515 22.4212 9.7743 22.7637 10.9036C23.1062 12.0328 23.0765 13.2423 22.6788 14.3534C22.2812 15.4644 21.5367 16.4181 20.5554 17.0736C20.0962 17.3803 19.4752 17.2567 19.1684 16.7975C18.8617 16.3382 18.9853 15.7172 19.4445 15.4105C20.069 14.9934 20.5427 14.3865 20.7958 13.6794C21.0488 12.9724 21.0678 12.2027 20.8498 11.4841C20.6318 10.7655 20.1885 10.136 19.5853 9.6887C18.9821 9.24138 18.251 8.99993 17.5001 9.00002H15.71C15.2679 9.00002 14.8783 8.70973 14.7518 8.28611C14.4913 7.41374 14.0357 6.61208 13.4195 5.94186C12.8034 5.27164 12.0427 4.75043 11.1953 4.41771Z"
      fill="currentColor"
    />
    <path
      d="M11 14.4142V21C11 21.5523 11.4477 22 12 22C12.5523 22 13 21.5523 13 21V14.4142L15.2929 16.7071C15.6834 17.0976 16.3166 17.0976 16.7071 16.7071C17.0976 16.3166 17.0976 15.6834 16.7071 15.2929L12.7078 11.2936C12.7054 11.2912 12.703 11.2888 12.7005 11.2864C12.5208 11.1099 12.2746 11.0008 12.003 11L12 11L11.997 11C11.8625 11.0004 11.7343 11.0273 11.6172 11.0759C11.502 11.1236 11.3938 11.1937 11.2995 11.2864C11.297 11.2888 11.2946 11.2912 11.2922 11.2936L7.29289 15.2929C6.90237 15.6834 6.90237 16.3166 7.29289 16.7071C7.68342 17.0976 8.31658 17.0976 8.70711 16.7071L11 14.4142Z"
      fill="currentColor"
    />
  </svg>
)

const FileIcon: React.FC = () => (
  <svg
    width="43"
    height="57"
    viewBox="0 0 43 57"
    fill="currentColor"
    className="tiptap-image-upload-dropzone-rect-primary"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0.75 10.75C0.75 5.64137 4.89137 1.5 10 1.5H32.3431C33.2051 1.5 34.0317 1.84241 34.6412 2.4519L40.2981 8.10876C40.9076 8.71825 41.25 9.5449 41.25 10.4069V46.75C41.25 51.8586 37.1086 56 32 56H10C4.89137 56 0.75 51.8586 0.75 46.75V10.75Z"
      fill="currentColor"
      fillOpacity="0.11"
      stroke="currentColor"
      strokeWidth="1.5"
    />
  </svg>
)

const FileCornerIcon: React.FC = () => (
  <svg
    width="10"
    height="10"
    className="tiptap-image-upload-dropzone-rect-secondary"
    viewBox="0 0 10 10"
    fill="currentColor"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0 0.75H0.343146C1.40401 0.75 2.42143 1.17143 3.17157 1.92157L8.82843 7.57843C9.57857 8.32857 10 9.34599 10 10.4069V10.75H4C1.79086 10.75 0 8.95914 0 6.75V0.75Z"
      fill="currentColor"
    />
  </svg>
)

interface ImageUploadDragAreaProps {
  /**
   * Callback function triggered when files are dropped or selected
   * @param {File[]} files - Array of File objects that were dropped or selected
   */
  onFile: (files: File[]) => void
  /**
   * Optional child elements to render inside the drag area
   * @optional
   * @default undefined
   */
  children?: React.ReactNode
}

/**
 * A component that creates a drag-and-drop area for image uploads
 */
const ImageUploadDragArea: React.FC<ImageUploadDragAreaProps> = ({
  onFile,
  children,
}) => {
  const [isDragOver, setIsDragOver] = React.useState(false)
  const [isDragActive, setIsDragActive] = React.useState(false)

  const handleDragEnter = (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setIsDragActive(true)
  }

  const handleDragLeave = (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    if (!e.currentTarget.contains(e.relatedTarget as Node)) {
      setIsDragActive(false)
      setIsDragOver(false)
    }
  }

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setIsDragOver(true)
  }

  const handleDrop = (e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    setIsDragActive(false)
    setIsDragOver(false)

    const files = Array.from(e.dataTransfer.files)
    if (files.length > 0) {
      onFile(files)
    }
  }

  return (
    <div
      className={`tiptap-image-upload-drag-area ${isDragActive ? "drag-active" : ""} ${isDragOver ? "drag-over" : ""}`}
      onDragEnter={handleDragEnter}
      onDragLeave={handleDragLeave}
      onDragOver={handleDragOver}
      onDrop={handleDrop}
    >
      {children}
    </div>
  )
}

interface ImageUploadPreviewProps {
  /**
   * The file item to preview
   */
  fileItem: FileItem
  /**
   * Callback to remove this file from upload queue
   */
  onRemove: () => void
}

/**
 * Component that displays a preview of an uploading file with progress
 */
const ImageUploadPreview: React.FC<ImageUploadPreviewProps> = ({
  fileItem,
  onRemove,
}) => {
  const formatFileSize = (bytes: number) => {
    if (bytes === 0) return "0 Bytes"
    const k = 1024
    const sizes = ["Bytes", "KB", "MB", "GB"]
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`
  }

  return (
    <div className="tiptap-image-upload-preview">
      {fileItem.status === "uploading" && (
        <div
          className="tiptap-image-upload-progress"
          style={{ width: `${fileItem.progress}%` }}
        />
      )}

      <div className="tiptap-image-upload-preview-content">
        <div className="tiptap-image-upload-file-info">
          <div className="tiptap-image-upload-file-icon">
            <CloudUploadIcon />
          </div>
          <div className="tiptap-image-upload-details">
            <span className="tiptap-image-upload-text">
              {fileItem.file.name}
            </span>
            <span className="tiptap-image-upload-subtext">
              {formatFileSize(fileItem.file.size)}
            </span>
          </div>
        </div>
        <div className="tiptap-image-upload-actions">
          {fileItem.status === "uploading" && (
            <span className="tiptap-image-upload-progress-text">
              {fileItem.progress}%
            </span>
          )}
          <Button
            type="button"
            data-style="ghost"
            onClick={(e) => {
              e.stopPropagation()
              onRemove()
            }}
          >
            <CloseIcon className="tiptap-button-icon" />
          </Button>
        </div>
      </div>
    </div>
  )
}

const DropZoneContent: React.FC<{ maxSize: number; limit: number }> = ({
  maxSize,
  limit,
}) => (
  <>
    <div className="tiptap-image-upload-dropzone">
      <FileIcon />
      <FileCornerIcon />
      <div className="tiptap-image-upload-icon-container">
        <CloudUploadIcon />
      </div>
    </div>

    <div className="tiptap-image-upload-content">
      <span className="tiptap-image-upload-text">
        <em>Click to upload</em> or drag and drop
      </span>
      <span className="tiptap-image-upload-subtext">
        Maximum {limit} file{limit === 1 ? "" : "s"}, {maxSize / 1024 / 1024}MB
        each.
      </span>
    </div>
  </>
)

export const ImageUploadNode: React.FC<NodeViewProps> = (props) => {
  const { accept, limit, maxSize } = props.node.attrs
  const inputRef = React.useRef<HTMLInputElement>(null)
  const extension = props.extension

  const uploadOptions: UploadOptions = {
    maxSize,
    limit,
    accept,
    upload: extension.options.upload,
    onSuccess: extension.options.onSuccess,
    onError: extension.options.onError,
  }

  const { fileItems, uploadFiles, removeFileItem, clearAllFiles } =
    useFileUpload(uploadOptions)

  const handleUpload = async (files: File[]) => {
    const urls = await uploadFiles(files)

    if (urls.length > 0) {
      const pos = props.getPos()

      if (isValidPosition(pos)) {
        const imageNodes = urls.map((url, index) => {
          const filename =
            files[index]?.name.replace(/\.[^/.]+$/, "") || "unknown"
          return {
            type: extension.options.type,
            attrs: {
              ...extension.options,
              src: url,
              alt: filename,
              title: filename,
            },
          }
        })

        props.editor
          .chain()
          .focus()
          .deleteRange({ from: pos, to: pos + props.node.nodeSize })
          .insertContentAt(pos, imageNodes)
          .run()

        focusNextNode(props.editor)
      }
    }
  }

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = e.target.files
    if (!files || files.length === 0) {
      extension.options.onError?.(new Error("No file selected"))
      return
    }
    handleUpload(Array.from(files))
  }

  const handleClick = () => {
    if (inputRef.current && fileItems.length === 0) {
      inputRef.current.value = ""
      inputRef.current.click()
    }
  }

  const hasFiles = fileItems.length > 0

  return (
    <NodeViewWrapper
      className="tiptap-image-upload"
      tabIndex={0}
      onClick={handleClick}
    >
      {!hasFiles && (
        <ImageUploadDragArea onFile={handleUpload}>
          <DropZoneContent maxSize={maxSize} limit={limit} />
        </ImageUploadDragArea>
      )}

      {hasFiles && (
        <div className="tiptap-image-upload-previews">
          {fileItems.length > 1 && (
            <div className="tiptap-image-upload-header">
              <span>Uploading {fileItems.length} files</span>
              <Button
                type="button"
                data-style="ghost"
                onClick={(e) => {
                  e.stopPropagation()
                  clearAllFiles()
                }}
              >
                Clear All
              </Button>
            </div>
          )}
          {fileItems.map((fileItem) => (
            <ImageUploadPreview
              key={fileItem.id}
              fileItem={fileItem}
              onRemove={() => removeFileItem(fileItem.id)}
            />
          ))}
        </div>
      )}

      <input
        ref={inputRef}
        name="file"
        accept={accept}
        type="file"
        multiple={limit > 1}
        onChange={handleChange}
        onClick={(e: React.MouseEvent<HTMLInputElement>) => e.stopPropagation()}
      />
    </NodeViewWrapper>
  )
}
</file>

<file path="frontend/src/components/tiptap-templates/simple/simple-editor.scss">
@import url("https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");

body {
  --tt-toolbar-height: 44px;
  --tt-theme-text: var(--tt-gray-light-900);

  .dark & {
    --tt-theme-text: var(--tt-gray-dark-900);
  }
}

body {
  font-family: "Inter", sans-serif;
  color: var(--tt-theme-text);
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;
  padding: 0;
  overscroll-behavior-y: none;
}

html,
body {
  overscroll-behavior-x: none;
}

html,
body,
#root,
#app {
  height: 100%;
  background-color: var(--tt-bg-color);
}

::-webkit-scrollbar {
  width: 0.25rem;
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--tt-scrollbar-color) transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--tt-scrollbar-color);
  border-radius: 9999px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

.tiptap.ProseMirror {
  font-family: "DM Sans", sans-serif;
}

.simple-editor-wrapper {
  height: 100vh;
  overflow: auto;
}

.simple-editor-content {
  max-width: 648px;
  width: 100%;
  margin: 0 auto;
  height: 100%;
  display: flex;
  flex-direction: column;
  flex: 1;
}

.simple-editor-content .tiptap.ProseMirror.simple-editor {
  flex: 1;
  padding: 3rem 3rem 30vh;
}

@media screen and (max-width: 480px) {
  .simple-editor-content .tiptap.ProseMirror.simple-editor {
    padding: 1rem 1.5rem 30vh;
  }
}
</file>

<file path="frontend/src/components/tiptap-templates/simple/simple-editor.tsx">
import * as React from "react"
import { EditorContent, EditorContext, useEditor } from "@tiptap/react"

// --- Tiptap Core Extensions ---
import { StarterKit } from "@tiptap/starter-kit"
import { Image } from "@tiptap/extension-image"
import { TaskItem, TaskList } from "@tiptap/extension-list"
import { TextAlign } from "@tiptap/extension-text-align"
import { Typography } from "@tiptap/extension-typography"
import { Highlight } from "@tiptap/extension-highlight"
import { Subscript } from "@tiptap/extension-subscript"
import { Superscript } from "@tiptap/extension-superscript"
import { Selection } from "@tiptap/extensions"

// --- UI Primitives ---
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Spacer } from "@/components/tiptap-ui-primitive/spacer"
import {
  Toolbar,
  ToolbarGroup,
  ToolbarSeparator,
} from "@/components/tiptap-ui-primitive/toolbar"

// --- Tiptap Node ---
import { ImageUploadNode } from "@/components/tiptap-node/image-upload-node/image-upload-node-extension"
import { HorizontalRule } from "@/components/tiptap-node/horizontal-rule-node/horizontal-rule-node-extension"
import "@/components/tiptap-node/blockquote-node/blockquote-node.scss"
import "@/components/tiptap-node/code-block-node/code-block-node.scss"
import "@/components/tiptap-node/horizontal-rule-node/horizontal-rule-node.scss"
import "@/components/tiptap-node/list-node/list-node.scss"
import "@/components/tiptap-node/image-node/image-node.scss"
import "@/components/tiptap-node/heading-node/heading-node.scss"
import "@/components/tiptap-node/paragraph-node/paragraph-node.scss"

// --- Tiptap UI ---
import { HeadingDropdownMenu } from "@/components/tiptap-ui/heading-dropdown-menu"
import { ImageUploadButton } from "@/components/tiptap-ui/image-upload-button"
import { ListDropdownMenu } from "@/components/tiptap-ui/list-dropdown-menu"
import { BlockquoteButton } from "@/components/tiptap-ui/blockquote-button"
import { CodeBlockButton } from "@/components/tiptap-ui/code-block-button"
import {
  ColorHighlightPopover,
  ColorHighlightPopoverContent,
  ColorHighlightPopoverButton,
} from "@/components/tiptap-ui/color-highlight-popover"
import {
  LinkPopover,
  LinkContent,
  LinkButton,
} from "@/components/tiptap-ui/link-popover"
import { MarkButton } from "@/components/tiptap-ui/mark-button"
import { TextAlignButton } from "@/components/tiptap-ui/text-align-button"
import { UndoRedoButton } from "@/components/tiptap-ui/undo-redo-button"

// --- Icons ---
import { ArrowLeftIcon } from "@/components/tiptap-icons/arrow-left-icon"
import { HighlighterIcon } from "@/components/tiptap-icons/highlighter-icon"
import { LinkIcon } from "@/components/tiptap-icons/link-icon"

// --- Hooks ---
import { useIsMobile } from "@/hooks/use-mobile"
import { useWindowSize } from "@/hooks/use-window-size"
import { useCursorVisibility } from "@/hooks/use-cursor-visibility"

// --- Components ---
import { ThemeToggle } from "@/components/tiptap-templates/simple/theme-toggle"

// --- Lib ---
import { handleImageUpload, MAX_FILE_SIZE } from "@/lib/tiptap-utils"

// --- Styles ---
import "@/components/tiptap-templates/simple/simple-editor.scss"

import content from "@/components/tiptap-templates/simple/data/content.json"

const MainToolbarContent = ({
  onHighlighterClick,
  onLinkClick,
  isMobile,
}: {
  onHighlighterClick: () => void
  onLinkClick: () => void
  isMobile: boolean
}) => {
  return (
    <>
      <Spacer />

      <ToolbarGroup>
        <UndoRedoButton action="undo" />
        <UndoRedoButton action="redo" />
      </ToolbarGroup>

      <ToolbarSeparator />

      <ToolbarGroup>
        <HeadingDropdownMenu levels={[1, 2, 3, 4]} portal={isMobile} />
        <ListDropdownMenu
          types={["bulletList", "orderedList", "taskList"]}
          portal={isMobile}
        />
        <BlockquoteButton />
        <CodeBlockButton />
      </ToolbarGroup>

      <ToolbarSeparator />

      <ToolbarGroup>
        <MarkButton type="bold" />
        <MarkButton type="italic" />
        <MarkButton type="strike" />
        <MarkButton type="code" />
        <MarkButton type="underline" />
        {!isMobile ? (
          <ColorHighlightPopover />
        ) : (
          <ColorHighlightPopoverButton onClick={onHighlighterClick} />
        )}
        {!isMobile ? <LinkPopover /> : <LinkButton onClick={onLinkClick} />}
      </ToolbarGroup>

      <ToolbarSeparator />

      <ToolbarGroup>
        <MarkButton type="superscript" />
        <MarkButton type="subscript" />
      </ToolbarGroup>

      <ToolbarSeparator />

      <ToolbarGroup>
        <TextAlignButton align="left" />
        <TextAlignButton align="center" />
        <TextAlignButton align="right" />
        <TextAlignButton align="justify" />
      </ToolbarGroup>

      <ToolbarSeparator />

      <ToolbarGroup>
        <ImageUploadButton text="Add" />
      </ToolbarGroup>

      <Spacer />

      {isMobile && <ToolbarSeparator />}

      <ToolbarGroup>
        <ThemeToggle />
      </ToolbarGroup>
    </>
  )
}

const MobileToolbarContent = ({
  type,
  onBack,
}: {
  type: "highlighter" | "link"
  onBack: () => void
}) => (
  <>
    <ToolbarGroup>
      <Button data-style="ghost" onClick={onBack}>
        <ArrowLeftIcon className="tiptap-button-icon" />
        {type === "highlighter" ? (
          <HighlighterIcon className="tiptap-button-icon" />
        ) : (
          <LinkIcon className="tiptap-button-icon" />
        )}
      </Button>
    </ToolbarGroup>

    <ToolbarSeparator />

    {type === "highlighter" ? (
      <ColorHighlightPopoverContent />
    ) : (
      <LinkContent />
    )}
  </>
)

export function SimpleEditor() {
  const isMobile = useIsMobile()
  const { height } = useWindowSize()
  const [mobileView, setMobileView] = React.useState<
    "main" | "highlighter" | "link"
  >("main")
  const toolbarRef = React.useRef<HTMLDivElement>(null)

  const editor = useEditor({
    immediatelyRender: false,
    shouldRerenderOnTransaction: false,
    editorProps: {
      attributes: {
        autocomplete: "off",
        autocorrect: "off",
        autocapitalize: "off",
        "aria-label": "Main content area, start typing to enter text.",
        class: "simple-editor",
      },
    },
    extensions: [
      StarterKit.configure({
        horizontalRule: false,
        link: {
          openOnClick: false,
          enableClickSelection: true,
        },
      }),
      HorizontalRule,
      TextAlign.configure({ types: ["heading", "paragraph"] }),
      TaskList,
      TaskItem.configure({ nested: true }),
      Highlight.configure({ multicolor: true }),
      Image,
      Typography,
      Superscript,
      Subscript,
      Selection,
      ImageUploadNode.configure({
        accept: "image/*",
        maxSize: MAX_FILE_SIZE,
        limit: 3,
        upload: handleImageUpload,
        onError: (error) => console.error("Upload failed:", error),
      }),
    ],
    content,
  })

  const rect = useCursorVisibility({
    editor,
    overlayHeight: toolbarRef.current?.getBoundingClientRect().height ?? 0,
  })

  React.useEffect(() => {
    if (!isMobile && mobileView !== "main") {
      setMobileView("main")
    }
  }, [isMobile, mobileView])

  return (
    <div className="simple-editor-wrapper">
      <EditorContext.Provider value={{ editor }}>
        <Toolbar
          ref={toolbarRef}
          style={{
            ...(isMobile
              ? {
                bottom: `calc(100% - ${height - rect.y}px)`,
              }
              : {}),
          }}
        >
          {mobileView === "main" ? (
            <MainToolbarContent
              onHighlighterClick={() => setMobileView("highlighter")}
              onLinkClick={() => setMobileView("link")}
              isMobile={isMobile}
            />
          ) : (
            <MobileToolbarContent
              type={mobileView === "highlighter" ? "highlighter" : "link"}
              onBack={() => setMobileView("main")}
            />
          )}
        </Toolbar>

        <EditorContent
          editor={editor}
          role="presentation"
          className="simple-editor-content"
        />
      </EditorContext.Provider>
    </div>
  )
}
</file>

<file path="frontend/src/components/tiptap-ui/blockquote-button/use-blockquote.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"
import { NodeSelection, TextSelection } from "@tiptap/pm/state"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { BlockquoteIcon } from "@/components/tiptap-icons/blockquote-icon"

// --- UI Utils ---
import {
  findNodePosition,
  isNodeInSchema,
  isNodeTypeSelected,
  isValidPosition,
} from "@/lib/tiptap-utils"

export const BLOCKQUOTE_SHORTCUT_KEY = "mod+shift+b"

/**
 * Configuration for the blockquote functionality
 */
export interface UseBlockquoteConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Whether the button should hide when blockquote is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful toggle.
   */
  onToggled?: () => void
}

/**
 * Checks if blockquote can be toggled in the current editor state
 */
export function canToggleBlockquote(
  editor: Editor | null,
  turnInto: boolean = true
): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isNodeInSchema("blockquote", editor) ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  if (!turnInto) {
    return editor.can().toggleWrap("blockquote")
  }

  try {
    const view = editor.view
    const state = view.state
    const selection = state.selection

    if (selection.empty || selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false
    }

    return true
  } catch {
    return false
  }
}

/**
 * Toggles blockquote formatting for a specific node or the current selection
 */
export function toggleBlockquote(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canToggleBlockquote(editor)) return false

  try {
    const view = editor.view
    let state = view.state
    let tr = state.tr

    // No selection, find the the cursor position
    if (state.selection.empty || state.selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false

      tr = tr.setSelection(NodeSelection.create(state.doc, pos))
      view.dispatch(tr)
      state = view.state
    }

    const selection = state.selection

    let chain = editor.chain().focus()

    // Handle NodeSelection
    if (selection instanceof NodeSelection) {
      const firstChild = selection.node.firstChild?.firstChild
      const lastChild = selection.node.lastChild?.lastChild

      const from = firstChild
        ? selection.from + firstChild.nodeSize
        : selection.from + 1

      const to = lastChild
        ? selection.to - lastChild.nodeSize
        : selection.to - 1

      chain = chain.setTextSelection({ from, to }).clearNodes()
    }

    const toggle = editor.isActive("blockquote")
      ? chain.lift("blockquote")
      : chain.wrapIn("blockquote")

    toggle.run()

    editor.chain().focus().selectTextblockEnd().run()

    return true
  } catch {
    return false
  }
}

/**
 * Determines if the blockquote button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isNodeInSchema("blockquote", editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canToggleBlockquote(editor)
  }

  return true
}

/**
 * Custom hook that provides blockquote functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage - no params needed
 * function MySimpleBlockquoteButton() {
 *   const { isVisible, handleToggle, isActive } = useBlockquote()
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleToggle}>Blockquote</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedBlockquoteButton() {
 *   const { isVisible, handleToggle, label, isActive } = useBlockquote({
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onToggled: () => console.log('Blockquote toggled!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleToggle}
 *       aria-label={label}
 *       aria-pressed={isActive}
 *     >
 *       Toggle Blockquote
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useBlockquote(config?: UseBlockquoteConfig) {
  const {
    editor: providedEditor,
    hideWhenUnavailable = false,
    onToggled,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canToggle = canToggleBlockquote(editor)
  const isActive = editor?.isActive("blockquote") || false

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable])

  const handleToggle = React.useCallback(() => {
    if (!editor) return false

    const success = toggleBlockquote(editor)
    if (success) {
      onToggled?.()
    }
    return success
  }, [editor, onToggled])

  return {
    isVisible,
    isActive,
    handleToggle,
    canToggle,
    label: "Blockquote",
    shortcutKeys: BLOCKQUOTE_SHORTCUT_KEY,
    Icon: BlockquoteIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/code-block-button/use-code-block.ts">
import * as React from "react"
import { type Editor } from "@tiptap/react"
import { NodeSelection, TextSelection } from "@tiptap/pm/state"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import {
  findNodePosition,
  isNodeInSchema,
  isNodeTypeSelected,
  isValidPosition,
} from "@/lib/tiptap-utils"

// --- Icons ---
import { CodeBlockIcon } from "@/components/tiptap-icons/code-block-icon"

export const CODE_BLOCK_SHORTCUT_KEY = "mod+alt+c"

/**
 * Configuration for the code block functionality
 */
export interface UseCodeBlockConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Whether the button should hide when code block is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful code block toggle.
   */
  onToggled?: () => void
}

/**
 * Checks if code block can be toggled in the current editor state
 */
export function canToggle(
  editor: Editor | null,
  turnInto: boolean = true
): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isNodeInSchema("codeBlock", editor) ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  if (!turnInto) {
    return editor.can().toggleNode("codeBlock", "paragraph")
  }

  try {
    const view = editor.view
    const state = view.state
    const selection = state.selection

    if (selection.empty || selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false
    }

    return true
  } catch {
    return false
  }
}

/**
 * Toggles code block in the editor
 */
export function toggleCodeBlock(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canToggle(editor)) return false

  try {
    const view = editor.view
    let state = view.state
    let tr = state.tr

    // No selection, find the the cursor position
    if (state.selection.empty || state.selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false

      tr = tr.setSelection(NodeSelection.create(state.doc, pos))
      view.dispatch(tr)
      state = view.state
    }

    const selection = state.selection

    let chain = editor.chain().focus()

    // Handle NodeSelection
    if (selection instanceof NodeSelection) {
      const firstChild = selection.node.firstChild?.firstChild
      const lastChild = selection.node.lastChild?.lastChild

      const from = firstChild
        ? selection.from + firstChild.nodeSize
        : selection.from + 1

      const to = lastChild
        ? selection.to - lastChild.nodeSize
        : selection.to - 1

      chain = chain.setTextSelection({ from, to }).clearNodes()
    }

    const toggle = editor.isActive("codeBlock")
      ? chain.setNode("paragraph")
      : chain.toggleNode("codeBlock", "paragraph")

    toggle.run()

    editor.chain().focus().selectTextblockEnd().run()

    return true
  } catch {
    return false
  }
}

/**
 * Determines if the code block button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isNodeInSchema("codeBlock", editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canToggle(editor)
  }

  return true
}

/**
 * Custom hook that provides code block functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage - no params needed
 * function MySimpleCodeBlockButton() {
 *   const { isVisible, isActive, handleToggle } = useCodeBlock()
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <button
 *       onClick={handleToggle}
 *       aria-pressed={isActive}
 *     >
 *       Code Block
 *     </button>
 *   )
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedCodeBlockButton() {
 *   const { isVisible, isActive, handleToggle, label } = useCodeBlock({
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onToggled: (isActive) => console.log('Code block toggled:', isActive)
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleToggle}
 *       aria-label={label}
 *       aria-pressed={isActive}
 *     >
 *       Toggle Code Block
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useCodeBlock(config?: UseCodeBlockConfig) {
  const {
    editor: providedEditor,
    hideWhenUnavailable = false,
    onToggled,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canToggleState = canToggle(editor)
  const isActive = editor?.isActive("codeBlock") || false

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable])

  const handleToggle = React.useCallback(() => {
    if (!editor) return false

    const success = toggleCodeBlock(editor)
    if (success) {
      onToggled?.()
    }
    return success
  }, [editor, onToggled])

  return {
    isVisible,
    isActive,
    handleToggle,
    canToggle: canToggleState,
    label: "Code Block",
    shortcutKeys: CODE_BLOCK_SHORTCUT_KEY,
    Icon: CodeBlockIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/color-highlight-button/use-color-highlight.ts">
import * as React from "react"
import { type Editor } from "@tiptap/react"
import { useHotkeys } from "react-hotkeys-hook"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"
import { useIsMobile } from "@/hooks/use-mobile"

// --- Lib ---
import { isMarkInSchema, isNodeTypeSelected } from "@/lib/tiptap-utils"

// --- Icons ---
import { HighlighterIcon } from "@/components/tiptap-icons/highlighter-icon"

export const COLOR_HIGHLIGHT_SHORTCUT_KEY = "mod+shift+h"
export const HIGHLIGHT_COLORS = [
  {
    label: "Default background",
    value: "var(--tt-bg-color)",
    border: "var(--tt-bg-color-contrast)",
  },
  {
    label: "Gray background",
    value: "var(--tt-color-highlight-gray)",
    border: "var(--tt-color-highlight-gray-contrast)",
  },
  {
    label: "Brown background",
    value: "var(--tt-color-highlight-brown)",
    border: "var(--tt-color-highlight-brown-contrast)",
  },
  {
    label: "Orange background",
    value: "var(--tt-color-highlight-orange)",
    border: "var(--tt-color-highlight-orange-contrast)",
  },
  {
    label: "Yellow background",
    value: "var(--tt-color-highlight-yellow)",
    border: "var(--tt-color-highlight-yellow-contrast)",
  },
  {
    label: "Green background",
    value: "var(--tt-color-highlight-green)",
    border: "var(--tt-color-highlight-green-contrast)",
  },
  {
    label: "Blue background",
    value: "var(--tt-color-highlight-blue)",
    border: "var(--tt-color-highlight-blue-contrast)",
  },
  {
    label: "Purple background",
    value: "var(--tt-color-highlight-purple)",
    border: "var(--tt-color-highlight-purple-contrast)",
  },
  {
    label: "Pink background",
    value: "var(--tt-color-highlight-pink)",
    border: "var(--tt-color-highlight-pink-contrast)",
  },
  {
    label: "Red background",
    value: "var(--tt-color-highlight-red)",
    border: "var(--tt-color-highlight-red-contrast)",
  },
]
export type HighlightColor = (typeof HIGHLIGHT_COLORS)[number]

/**
 * Configuration for the color highlight functionality
 */
export interface UseColorHighlightConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The color to apply when toggling the highlight.
   */
  highlightColor?: string
  /**
   * Optional label to display alongside the icon.
   */
  label?: string
  /**
   * Whether the button should hide when the mark is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Called when the highlight is applied.
   */
  onApplied?: ({ color, label }: { color: string; label: string }) => void
}

export function pickHighlightColorsByValue(values: string[]) {
  const colorMap = new Map(
    HIGHLIGHT_COLORS.map((color) => [color.value, color])
  )
  return values
    .map((value) => colorMap.get(value))
    .filter((color): color is (typeof HIGHLIGHT_COLORS)[number] => !!color)
}

export function canColorHighlight(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isMarkInSchema("highlight", editor) ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  return editor.can().setMark("highlight")
}

export function isColorHighlightActive(
  editor: Editor | null,
  highlightColor?: string
): boolean {
  if (!editor || !editor.isEditable) return false
  return highlightColor
    ? editor.isActive("highlight", { color: highlightColor })
    : editor.isActive("highlight")
}

export function removeHighlight(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canColorHighlight(editor)) return false

  return editor.chain().focus().unsetMark("highlight").run()
}

export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isMarkInSchema("highlight", editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canColorHighlight(editor)
  }

  return true
}

export function useColorHighlight(config: UseColorHighlightConfig) {
  const {
    editor: providedEditor,
    label,
    highlightColor,
    hideWhenUnavailable = false,
    onApplied,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const isMobile = useIsMobile()
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canColorHighlightState = canColorHighlight(editor)
  const isActive = isColorHighlightActive(editor, highlightColor)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable])

  const handleColorHighlight = React.useCallback(() => {
    if (!editor || !canColorHighlightState || !highlightColor || !label)
      return false

    if (editor.state.storedMarks) {
      const highlightMarkType = editor.schema.marks.highlight
      if (highlightMarkType) {
        editor.view.dispatch(
          editor.state.tr.removeStoredMark(highlightMarkType)
        )
      }
    }

    setTimeout(() => {
      const success = editor
        .chain()
        .focus()
        .toggleMark("highlight", { color: highlightColor })
        .run()
      if (success) {
        onApplied?.({ color: highlightColor, label })
      }
      return success
    }, 0)
  }, [canColorHighlightState, highlightColor, editor, label, onApplied])

  const handleRemoveHighlight = React.useCallback(() => {
    const success = removeHighlight(editor)
    if (success) {
      onApplied?.({ color: "", label: "Remove highlight" })
    }
    return success
  }, [editor, onApplied])

  useHotkeys(
    COLOR_HIGHLIGHT_SHORTCUT_KEY,
    (event) => {
      event.preventDefault()
      handleColorHighlight()
    },
    {
      enabled: isVisible && canColorHighlightState,
      enableOnContentEditable: !isMobile,
      enableOnFormTags: true,
    }
  )

  return {
    isVisible,
    isActive,
    handleColorHighlight,
    handleRemoveHighlight,
    canColorHighlight: canColorHighlightState,
    label: label || `Highlight`,
    shortcutKeys: COLOR_HIGHLIGHT_SHORTCUT_KEY,
    Icon: HighlighterIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/heading-button/use-heading.ts">
import * as React from "react"
import { type Editor } from "@tiptap/react"
import { NodeSelection, TextSelection } from "@tiptap/pm/state"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Lib ---
import {
  findNodePosition,
  isNodeInSchema,
  isNodeTypeSelected,
  isValidPosition,
} from "@/lib/tiptap-utils"

// --- Icons ---
import { HeadingOneIcon } from "@/components/tiptap-icons/heading-one-icon"
import { HeadingTwoIcon } from "@/components/tiptap-icons/heading-two-icon"
import { HeadingThreeIcon } from "@/components/tiptap-icons/heading-three-icon"
import { HeadingFourIcon } from "@/components/tiptap-icons/heading-four-icon"
import { HeadingFiveIcon } from "@/components/tiptap-icons/heading-five-icon"
import { HeadingSixIcon } from "@/components/tiptap-icons/heading-six-icon"

export type Level = 1 | 2 | 3 | 4 | 5 | 6

/**
 * Configuration for the heading functionality
 */
export interface UseHeadingConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The heading level.
   */
  level: Level
  /**
   * Whether the button should hide when heading is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful heading toggle.
   */
  onToggled?: () => void
}

export const headingIcons = {
  1: HeadingOneIcon,
  2: HeadingTwoIcon,
  3: HeadingThreeIcon,
  4: HeadingFourIcon,
  5: HeadingFiveIcon,
  6: HeadingSixIcon,
}

export const HEADING_SHORTCUT_KEYS: Record<Level, string> = {
  1: "ctrl+alt+1",
  2: "ctrl+alt+2",
  3: "ctrl+alt+3",
  4: "ctrl+alt+4",
  5: "ctrl+alt+5",
  6: "ctrl+alt+6",
}

/**
 * Checks if heading can be toggled in the current editor state
 */
export function canToggle(
  editor: Editor | null,
  level?: Level,
  turnInto: boolean = true
): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isNodeInSchema("heading", editor) ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  if (!turnInto) {
    return level
      ? editor.can().setNode("heading", { level })
      : editor.can().setNode("heading")
  }

  try {
    const view = editor.view
    const state = view.state
    const selection = state.selection

    if (selection.empty || selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false
    }

    return true
  } catch {
    return false
  }
}

/**
 * Checks if heading is currently active
 */
export function isHeadingActive(
  editor: Editor | null,
  level?: Level | Level[]
): boolean {
  if (!editor || !editor.isEditable) return false

  if (Array.isArray(level)) {
    return level.some((l) => editor.isActive("heading", { level: l }))
  }

  return level
    ? editor.isActive("heading", { level })
    : editor.isActive("heading")
}

/**
 * Toggles heading in the editor
 */
export function toggleHeading(
  editor: Editor | null,
  level: Level | Level[]
): boolean {
  if (!editor || !editor.isEditable) return false

  const levels = Array.isArray(level) ? level : [level]
  const toggleLevel = levels.find((l) => canToggle(editor, l))

  if (!toggleLevel) return false

  try {
    const view = editor.view
    let state = view.state
    let tr = state.tr

    // No selection, find the cursor position
    if (state.selection.empty || state.selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false

      tr = tr.setSelection(NodeSelection.create(state.doc, pos))
      view.dispatch(tr)
      state = view.state
    }

    const selection = state.selection
    let chain = editor.chain().focus()

    // Handle NodeSelection
    if (selection instanceof NodeSelection) {
      const firstChild = selection.node.firstChild?.firstChild
      const lastChild = selection.node.lastChild?.lastChild

      const from = firstChild
        ? selection.from + firstChild.nodeSize
        : selection.from + 1

      const to = lastChild
        ? selection.to - lastChild.nodeSize
        : selection.to - 1

      chain = chain.setTextSelection({ from, to }).clearNodes()
    }

    const isActive = levels.some((l) =>
      editor.isActive("heading", { level: l })
    )

    const toggle = isActive
      ? chain.setNode("paragraph")
      : chain.setNode("heading", { level: toggleLevel })

    toggle.run()

    editor.chain().focus().selectTextblockEnd().run()

    return true
  } catch {
    return false
  }
}

/**
 * Determines if the heading button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  level?: Level | Level[]
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, level, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isNodeInSchema("heading", editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    if (Array.isArray(level)) {
      return level.some((l) => canToggle(editor, l))
    }
    return canToggle(editor, level)
  }

  return true
}

/**
 * Custom hook that provides heading functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MySimpleHeadingButton() {
 *   const { isVisible, isActive, handleToggle, Icon } = useHeading({ level: 1 })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <button
 *       onClick={handleToggle}
 *       aria-pressed={isActive}
 *     >
 *       <Icon />
 *       Heading 1
 *     </button>
 *   )
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedHeadingButton() {
 *   const { isVisible, isActive, handleToggle, label, Icon } = useHeading({
 *     level: 2,
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onToggled: (isActive) => console.log('Heading toggled:', isActive)
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleToggle}
 *       aria-label={label}
 *       aria-pressed={isActive}
 *     >
 *       <Icon />
 *       Toggle Heading 2
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useHeading(config: UseHeadingConfig) {
  const {
    editor: providedEditor,
    level,
    hideWhenUnavailable = false,
    onToggled,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canToggleState = canToggle(editor, level)
  const isActive = isHeadingActive(editor, level)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, level, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, level, hideWhenUnavailable])

  const handleToggle = React.useCallback(() => {
    if (!editor) return false

    const success = toggleHeading(editor, level)
    if (success) {
      onToggled?.()
    }
    return success
  }, [editor, level, onToggled])

  return {
    isVisible,
    isActive,
    handleToggle,
    canToggle: canToggleState,
    label: `Heading ${level}`,
    shortcutKeys: HEADING_SHORTCUT_KEYS[level],
    Icon: headingIcons[level],
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/heading-dropdown-menu/use-heading-dropdown-menu.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { HeadingIcon } from "@/components/tiptap-icons/heading-icon"

// --- Tiptap UI ---
import {
  headingIcons,
  type Level,
  isHeadingActive,
  canToggle,
  shouldShowButton,
} from "@/components/tiptap-ui/heading-button"

/**
 * Configuration for the heading dropdown menu functionality
 */
export interface UseHeadingDropdownMenuConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Available heading levels to show in the dropdown
   * @default [1, 2, 3, 4, 5, 6]
   */
  levels?: Level[]
  /**
   * Whether the dropdown should hide when headings are not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
}

/**
 * Gets the currently active heading level from the available levels
 */
export function getActiveHeadingLevel(
  editor: Editor | null,
  levels: Level[] = [1, 2, 3, 4, 5, 6]
): Level | undefined {
  if (!editor || !editor.isEditable) return undefined
  return levels.find((level) => isHeadingActive(editor, level))
}

/**
 * Custom hook that provides heading dropdown menu functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MyHeadingDropdown() {
 *   const {
 *     isVisible,
 *     activeLevel,
 *     isAnyHeadingActive,
 *     canToggle,
 *     levels,
 *   } = useHeadingDropdownMenu()
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <DropdownMenu>
 *       // dropdown content
 *     </DropdownMenu>
 *   )
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedHeadingDropdown() {
 *   const {
 *     isVisible,
 *     activeLevel,
 *   } = useHeadingDropdownMenu({
 *     editor: myEditor,
 *     levels: [1, 2, 3],
 *     hideWhenUnavailable: true,
 *   })
 *
 *   // component implementation
 * }
 * ```
 */
export function useHeadingDropdownMenu(config?: UseHeadingDropdownMenuConfig) {
  const {
    editor: providedEditor,
    levels = [1, 2, 3, 4, 5, 6],
    hideWhenUnavailable = false,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState(true)

  const activeLevel = getActiveHeadingLevel(editor, levels)
  const isActive = isHeadingActive(editor)
  const canToggleState = canToggle(editor)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(
        shouldShowButton({ editor, hideWhenUnavailable, level: levels })
      )
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable, levels])

  return {
    isVisible,
    activeLevel,
    isActive,
    canToggle: canToggleState,
    levels,
    label: "Heading",
    Icon: activeLevel ? headingIcons[activeLevel] : HeadingIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/image-upload-button/use-image-upload.ts">
import * as React from "react"
import { useHotkeys } from "react-hotkeys-hook"
import { type Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"
import { useIsMobile } from "@/hooks/use-mobile"

// --- Lib ---
import {
  isExtensionAvailable,
  isNodeTypeSelected,
} from "@/lib/tiptap-utils"

// --- Icons ---
import { ImagePlusIcon } from "@/components/tiptap-icons/image-plus-icon"

export const IMAGE_UPLOAD_SHORTCUT_KEY = "mod+shift+i"

/**
 * Configuration for the image upload functionality
 */
export interface UseImageUploadConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * Whether the button should hide when insertion is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful image insertion.
   */
  onInserted?: () => void
}

/**
 * Checks if image can be inserted in the current editor state
 */
export function canInsertImage(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (
    !isExtensionAvailable(editor, "imageUpload") ||
    isNodeTypeSelected(editor, ["image"])
  )
    return false

  return editor.can().insertContent({ type: "imageUpload" })
}

/**
 * Checks if image is currently active
 */
export function isImageActive(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  return editor.isActive("imageUpload")
}

/**
 * Inserts an image in the editor
 */
export function insertImage(editor: Editor | null): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canInsertImage(editor)) return false

  try {
    return editor
      .chain()
      .focus()
      .insertContent({
        type: "imageUpload",
      })
      .run()
  } catch {
    return false
  }
}

/**
 * Determines if the image button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isExtensionAvailable(editor, "imageUpload")) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canInsertImage(editor)
  }

  return true
}

/**
 * Custom hook that provides image functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage - no params needed
 * function MySimpleImageButton() {
 *   const { isVisible, handleImage } = useImage()
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleImage}>Add Image</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedImageButton() {
 *   const { isVisible, handleImage, label, isActive } = useImage({
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onInserted: () => console.log('Image inserted!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleImage}
 *       aria-pressed={isActive}
 *       aria-label={label}
 *     >
 *       Add Image
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useImageUpload(config?: UseImageUploadConfig) {
  const {
    editor: providedEditor,
    hideWhenUnavailable = false,
    onInserted,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)
  const isMobile = useIsMobile()
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canInsert = canInsertImage(editor)
  const isActive = isImageActive(editor)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, hideWhenUnavailable])

  const handleImage = React.useCallback(() => {
    if (!editor) return false

    const success = insertImage(editor)
    if (success) {
      onInserted?.()
    }
    return success
  }, [editor, onInserted])

  useHotkeys(
    IMAGE_UPLOAD_SHORTCUT_KEY,
    (event) => {
      event.preventDefault()
      handleImage()
    },
    {
      enabled: isVisible && canInsert,
      enableOnContentEditable: !isMobile,
      enableOnFormTags: true,
    }
  )

  return {
    isVisible,
    isActive,
    handleImage,
    canInsert,
    label: "Add image",
    shortcutKeys: IMAGE_UPLOAD_SHORTCUT_KEY,
    Icon: ImagePlusIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/link-popover/link-popover.tsx">
import * as React from "react"
import type { Editor } from "@tiptap/react"

// --- Hooks ---
import { useIsMobile } from "@/hooks/use-mobile"
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { CornerDownLeftIcon } from "@/components/tiptap-icons/corner-down-left-icon"
import { ExternalLinkIcon } from "@/components/tiptap-icons/external-link-icon"
import { LinkIcon } from "@/components/tiptap-icons/link-icon"
import { TrashIcon } from "@/components/tiptap-icons/trash-icon"

// --- Tiptap UI ---
import type { UseLinkPopoverConfig } from "@/components/tiptap-ui/link-popover"
import { useLinkPopover } from "@/components/tiptap-ui/link-popover"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button, ButtonGroup } from "@/components/tiptap-ui-primitive/button"
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/tiptap-ui-primitive/popover"
import { Separator } from "@/components/tiptap-ui-primitive/separator"
import {
  Card,
  CardBody,
  CardItemGroup,
} from "@/components/tiptap-ui-primitive/card"
import { Input, InputGroup } from "@/components/tiptap-ui-primitive/input"

export interface LinkMainProps {
  /**
   * The URL to set for the link.
   */
  url: string
  /**
   * Function to update the URL state.
   */
  setUrl: React.Dispatch<React.SetStateAction<string | null>>
  /**
   * Function to set the link in the editor.
   */
  setLink: () => void
  /**
   * Function to remove the link from the editor.
   */
  removeLink: () => void
  /**
   * Function to open the link.
   */
  openLink: () => void
  /**
   * Whether the link is currently active in the editor.
   */
  isActive: boolean
}

export interface LinkPopoverProps
  extends Omit<ButtonProps, "type">,
  UseLinkPopoverConfig {
  /**
   * Callback for when the popover opens or closes.
   */
  onOpenChange?: (isOpen: boolean) => void
  /**
   * Whether to automatically open the popover when a link is active.
   * @default true
   */
  autoOpenOnLinkActive?: boolean
}

/**
 * Link button component for triggering the link popover
 */
export const LinkButton = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, children, ...props }, ref) => {
    return (
      <Button
        type="button"
        className={className}
        data-style="ghost"
        role="button"
        tabIndex={-1}
        aria-label="Link"
        tooltip="Link"
        ref={ref}
        {...props}
      >
        {children || <LinkIcon className="tiptap-button-icon" />}
      </Button>
    )
  }
)

LinkButton.displayName = "LinkButton"

/**
 * Main content component for the link popover
 */
const LinkMain: React.FC<LinkMainProps> = ({
  url,
  setUrl,
  setLink,
  removeLink,
  openLink,
  isActive,
}) => {
  const isMobile = useIsMobile()

  const handleKeyDown = (event: React.KeyboardEvent) => {
    if (event.key === "Enter") {
      event.preventDefault()
      setLink()
    }
  }

  return (
    <Card
      style={{
        ...(isMobile ? { boxShadow: "none", border: 0 } : {}),
      }}
    >
      <CardBody
        style={{
          ...(isMobile ? { padding: 0 } : {}),
        }}
      >
        <CardItemGroup orientation="horizontal">
          <InputGroup>
            <Input
              type="url"
              placeholder="Paste a link..."
              value={url}
              onChange={(e) => setUrl(e.target.value)}
              onKeyDown={handleKeyDown}
              autoFocus
              autoComplete="off"
              autoCorrect="off"
              autoCapitalize="off"
            />
          </InputGroup>

          <ButtonGroup orientation="horizontal">
            <Button
              type="button"
              onClick={setLink}
              title="Apply link"
              disabled={!url && !isActive}
              data-style="ghost"
            >
              <CornerDownLeftIcon className="tiptap-button-icon" />
            </Button>
          </ButtonGroup>

          <Separator />

          <ButtonGroup orientation="horizontal">
            <Button
              type="button"
              onClick={openLink}
              title="Open in new window"
              disabled={!url && !isActive}
              data-style="ghost"
            >
              <ExternalLinkIcon className="tiptap-button-icon" />
            </Button>

            <Button
              type="button"
              onClick={removeLink}
              title="Remove link"
              disabled={!url && !isActive}
              data-style="ghost"
            >
              <TrashIcon className="tiptap-button-icon" />
            </Button>
          </ButtonGroup>
        </CardItemGroup>
      </CardBody>
    </Card>
  )
}

/**
 * Link content component for standalone use
 */
export const LinkContent: React.FC<{
  editor?: Editor | null
}> = ({ editor }) => {
  const linkPopover = useLinkPopover({
    editor,
  })

  return <LinkMain {...linkPopover} />
}

/**
 * Link popover component for Tiptap editors.
 *
 * For custom popover implementations, use the `useLinkPopover` hook instead.
 */
export const LinkPopover = React.forwardRef<
  HTMLButtonElement,
  LinkPopoverProps
>(
  (
    {
      editor: providedEditor,
      hideWhenUnavailable = false,
      onSetLink,
      onOpenChange,
      autoOpenOnLinkActive = true,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const [isOpen, setIsOpen] = React.useState(false)

    const {
      isVisible,
      canSet,
      isActive,
      url,
      setUrl,
      setLink,
      removeLink,
      openLink,
      label,
      Icon,
    } = useLinkPopover({
      editor,
      hideWhenUnavailable,
      onSetLink,
    })

    const handleOnOpenChange = React.useCallback(
      (nextIsOpen: boolean) => {
        setIsOpen(nextIsOpen)
        onOpenChange?.(nextIsOpen)
      },
      [onOpenChange]
    )

    const handleSetLink = React.useCallback(() => {
      setLink()
      setIsOpen(false)
    }, [setLink])

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        setIsOpen(!isOpen)
      },
      [onClick, isOpen]
    )

    React.useEffect(() => {
      if (autoOpenOnLinkActive && isActive) {
        setIsOpen(true)
      }
    }, [autoOpenOnLinkActive, isActive])

    if (!isVisible) {
      return null
    }

    return (
      <Popover open={isOpen} onOpenChange={handleOnOpenChange}>
        <PopoverTrigger asChild>
          <LinkButton
            disabled={!canSet}
            data-active-state={isActive ? "on" : "off"}
            data-disabled={!canSet}
            aria-label={label}
            aria-pressed={isActive}
            onClick={handleClick}
            {...buttonProps}
            ref={ref}
          >
            {children ?? <Icon className="tiptap-button-icon" />}
          </LinkButton>
        </PopoverTrigger>

        <PopoverContent>
          <LinkMain
            url={url}
            setUrl={setUrl}
            setLink={handleSetLink}
            removeLink={removeLink}
            openLink={openLink}
            isActive={isActive}
          />
        </PopoverContent>
      </Popover>
    )
  }
)

LinkPopover.displayName = "LinkPopover"

export default LinkPopover
</file>

<file path="frontend/src/components/tiptap-ui/list-button/use-list.ts">
import * as React from "react"
import { type Editor } from "@tiptap/react"
import { NodeSelection, TextSelection } from "@tiptap/pm/state"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { ListIcon } from "@/components/tiptap-icons/list-icon"
import { ListOrderedIcon } from "@/components/tiptap-icons/list-ordered-icon"
import { ListTodoIcon } from "@/components/tiptap-icons/list-todo-icon"

// --- Lib ---
import {
  findNodePosition,
  isNodeInSchema,
  isNodeTypeSelected,
  isValidPosition,
} from "@/lib/tiptap-utils"

export type ListType = "bulletList" | "orderedList" | "taskList"

/**
 * Configuration for the list functionality
 */
export interface UseListConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The type of list to toggle.
   */
  type: ListType
  /**
   * Whether the button should hide when list is not available.
   * @default false
   */
  hideWhenUnavailable?: boolean
  /**
   * Callback function called after a successful toggle.
   */
  onToggled?: () => void
}

export const listIcons = {
  bulletList: ListIcon,
  orderedList: ListOrderedIcon,
  taskList: ListTodoIcon,
}

export const listLabels: Record<ListType, string> = {
  bulletList: "Bullet List",
  orderedList: "Ordered List",
  taskList: "Task List",
}

export const LIST_SHORTCUT_KEYS: Record<ListType, string> = {
  bulletList: "mod+shift+8",
  orderedList: "mod+shift+7",
  taskList: "mod+shift+9",
}

/**
 * Checks if a list can be toggled in the current editor state
 */
export function canToggleList(
  editor: Editor | null,
  type: ListType,
  turnInto: boolean = true
): boolean {
  if (!editor || !editor.isEditable) return false
  if (!isNodeInSchema(type, editor) || isNodeTypeSelected(editor, ["image"]))
    return false

  if (!turnInto) {
    switch (type) {
      case "bulletList":
        return editor.can().toggleBulletList()
      case "orderedList":
        return editor.can().toggleOrderedList()
      case "taskList":
        return editor.can().toggleList("taskList", "taskItem")
      default:
        return false
    }
  }

  try {
    const view = editor.view
    const state = view.state
    const selection = state.selection

    if (selection.empty || selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false
    }

    return true
  } catch {
    return false
  }
}

/**
 * Checks if list is currently active
 */
export function isListActive(editor: Editor | null, type: ListType): boolean {
  if (!editor || !editor.isEditable) return false

  switch (type) {
    case "bulletList":
      return editor.isActive("bulletList")
    case "orderedList":
      return editor.isActive("orderedList")
    case "taskList":
      return editor.isActive("taskList")
    default:
      return false
  }
}

/**
 * Toggles list in the editor
 */
export function toggleList(editor: Editor | null, type: ListType): boolean {
  if (!editor || !editor.isEditable) return false
  if (!canToggleList(editor, type)) return false

  try {
    const view = editor.view
    let state = view.state
    let tr = state.tr

    // No selection, find the the cursor position
    if (state.selection.empty || state.selection instanceof TextSelection) {
      const pos = findNodePosition({
        editor,
        node: state.selection.$anchor.node(1),
      })?.pos
      if (!isValidPosition(pos)) return false

      tr = tr.setSelection(NodeSelection.create(state.doc, pos))
      view.dispatch(tr)
      state = view.state
    }

    const selection = state.selection

    let chain = editor.chain().focus()

    // Handle NodeSelection
    if (selection instanceof NodeSelection) {
      const firstChild = selection.node.firstChild?.firstChild
      const lastChild = selection.node.lastChild?.lastChild

      const from = firstChild
        ? selection.from + firstChild.nodeSize
        : selection.from + 1

      const to = lastChild
        ? selection.to - lastChild.nodeSize
        : selection.to - 1

      chain = chain.setTextSelection({ from, to }).clearNodes()
    }

    if (editor.isActive(type)) {
      // Unwrap list
      chain
        .liftListItem("listItem")
        .lift("bulletList")
        .lift("orderedList")
        .lift("taskList")
        .run()
    } else {
      // Wrap in specific list type
      const toggleMap: Record<ListType, () => typeof chain> = {
        bulletList: () => chain.toggleBulletList(),
        orderedList: () => chain.toggleOrderedList(),
        taskList: () => chain.toggleList("taskList", "taskItem"),
      }

      const toggle = toggleMap[type]
      if (!toggle) return false

      toggle().run()
    }

    editor.chain().focus().selectTextblockEnd().run()

    return true
  } catch {
    return false
  }
}

/**
 * Determines if the list button should be shown
 */
export function shouldShowButton(props: {
  editor: Editor | null
  type: ListType
  hideWhenUnavailable: boolean
}): boolean {
  const { editor, type, hideWhenUnavailable } = props

  if (!editor || !editor.isEditable) return false
  if (!isNodeInSchema(type, editor)) return false

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canToggleList(editor, type)
  }

  return true
}

/**
 * Custom hook that provides list functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MySimpleListButton() {
 *   const { isVisible, handleToggle, isActive } = useList({ type: "bulletList" })
 *
 *   if (!isVisible) return null
 *
 *   return <button onClick={handleToggle}>Bullet List</button>
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedListButton() {
 *   const { isVisible, handleToggle, label, isActive } = useList({
 *     type: "orderedList",
 *     editor: myEditor,
 *     hideWhenUnavailable: true,
 *     onToggled: () => console.log('List toggled!')
 *   })
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <MyButton
 *       onClick={handleToggle}
 *       aria-label={label}
 *       aria-pressed={isActive}
 *     >
 *       Toggle List
 *     </MyButton>
 *   )
 * }
 * ```
 */
export function useList(config: UseListConfig) {
  const {
    editor: providedEditor,
    type,
    hideWhenUnavailable = false,
    onToggled,
  } = config

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState<boolean>(true)
  const canToggle = canToggleList(editor, type)
  const isActive = isListActive(editor, type)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(shouldShowButton({ editor, type, hideWhenUnavailable }))
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [editor, type, hideWhenUnavailable])

  const handleToggle = React.useCallback(() => {
    if (!editor) return false

    const success = toggleList(editor, type)
    if (success) {
      onToggled?.()
    }
    return success
  }, [editor, type, onToggled])

  return {
    isVisible,
    isActive,
    handleToggle,
    canToggle,
    label: listLabels[type],
    shortcutKeys: LIST_SHORTCUT_KEYS[type],
    Icon: listIcons[type],
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/list-dropdown-menu/use-list-dropdown-menu.ts">
import * as React from "react"
import type { Editor } from "@tiptap/react"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Icons ---
import { ListIcon } from "@/components/tiptap-icons/list-icon"
import { ListOrderedIcon } from "@/components/tiptap-icons/list-ordered-icon"
import { ListTodoIcon } from "@/components/tiptap-icons/list-todo-icon"

// --- Lib ---
import { isNodeInSchema } from "@/lib/tiptap-utils"

// --- Tiptap UI ---
import {
  canToggleList,
  isListActive,
  listIcons,
  type ListType,
} from "@/components/tiptap-ui/list-button"

/**
 * Configuration for the list dropdown menu functionality
 */
export interface UseListDropdownMenuConfig {
  /**
   * The Tiptap editor instance.
   */
  editor?: Editor | null
  /**
   * The list types to display in the dropdown.
   * @default ["bulletList", "orderedList", "taskList"]
   */
  types?: ListType[]
  /**
   * Whether the dropdown should be hidden when no list types are available
   * @default false
   */
  hideWhenUnavailable?: boolean
}

export interface ListOption {
  label: string
  type: ListType
  icon: React.ElementType
}

export const listOptions: ListOption[] = [
  {
    label: "Bullet List",
    type: "bulletList",
    icon: ListIcon,
  },
  {
    label: "Ordered List",
    type: "orderedList",
    icon: ListOrderedIcon,
  },
  {
    label: "Task List",
    type: "taskList",
    icon: ListTodoIcon,
  },
]

export function canToggleAnyList(
  editor: Editor | null,
  listTypes: ListType[]
): boolean {
  if (!editor || !editor.isEditable) return false
  return listTypes.some((type) => canToggleList(editor, type))
}

export function isAnyListActive(
  editor: Editor | null,
  listTypes: ListType[]
): boolean {
  if (!editor || !editor.isEditable) return false
  return listTypes.some((type) => isListActive(editor, type))
}

export function getFilteredListOptions(
  availableTypes: ListType[]
): typeof listOptions {
  return listOptions.filter(
    (option) => !option.type || availableTypes.includes(option.type)
  )
}

export function shouldShowListDropdown(params: {
  editor: Editor | null
  listTypes: ListType[]
  hideWhenUnavailable: boolean
  listInSchema: boolean
  canToggleAny: boolean
}): boolean {
  const { editor, hideWhenUnavailable, listInSchema, canToggleAny } = params

  if (!listInSchema || !editor) {
    return false
  }

  if (hideWhenUnavailable && !editor.isActive("code")) {
    return canToggleAny
  }

  return true
}

/**
 * Gets the currently active list type from the available types
 */
export function getActiveListType(
  editor: Editor | null,
  availableTypes: ListType[]
): ListType | undefined {
  if (!editor || !editor.isEditable) return undefined
  return availableTypes.find((type) => isListActive(editor, type))
}

/**
 * Custom hook that provides list dropdown menu functionality for Tiptap editor
 *
 * @example
 * ```tsx
 * // Simple usage
 * function MyListDropdown() {
 *   const {
 *     isVisible,
 *     activeType,
 *     isAnyActive,
 *     canToggleAny,
 *     filteredLists,
 *   } = useListDropdownMenu()
 *
 *   if (!isVisible) return null
 *
 *   return (
 *     <DropdownMenu>
 *       // dropdown content
 *     </DropdownMenu>
 *   )
 * }
 *
 * // Advanced usage with configuration
 * function MyAdvancedListDropdown() {
 *   const {
 *     isVisible,
 *     activeType,
 *   } = useListDropdownMenu({
 *     editor: myEditor,
 *     types: ["bulletList", "orderedList"],
 *     hideWhenUnavailable: true,
 *   })
 *
 *   // component implementation
 * }
 * ```
 */
export function useListDropdownMenu(config?: UseListDropdownMenuConfig) {
  const {
    editor: providedEditor,
    types = ["bulletList", "orderedList", "taskList"],
    hideWhenUnavailable = false,
  } = config || {}

  const { editor } = useTiptapEditor(providedEditor)
  const [isVisible, setIsVisible] = React.useState(false)

  const listInSchema = types.some((type) => isNodeInSchema(type, editor))

  const filteredLists = React.useMemo(
    () => getFilteredListOptions(types),
    [types]
  )

  const canToggleAny = canToggleAnyList(editor, types)
  const isAnyActive = isAnyListActive(editor, types)
  const activeType = getActiveListType(editor, types)
  const activeList = filteredLists.find((option) => option.type === activeType)

  React.useEffect(() => {
    if (!editor) return

    const handleSelectionUpdate = () => {
      setIsVisible(
        shouldShowListDropdown({
          editor,
          listTypes: types,
          hideWhenUnavailable,
          listInSchema,
          canToggleAny,
        })
      )
    }

    handleSelectionUpdate()

    editor.on("selectionUpdate", handleSelectionUpdate)

    return () => {
      editor.off("selectionUpdate", handleSelectionUpdate)
    }
  }, [canToggleAny, editor, hideWhenUnavailable, listInSchema, types])

  return {
    isVisible,
    activeType,
    isActive: isAnyActive,
    canToggle: canToggleAny,
    types,
    filteredLists,
    label: "List",
    Icon: activeList ? listIcons[activeList.type] : ListIcon,
  }
}
</file>

<file path="frontend/src/components/tiptap-ui/mark-button/mark-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import type { Mark, UseMarkConfig } from "@/components/tiptap-ui/mark-button"
import { MARK_SHORTCUT_KEYS, useMark } from "@/components/tiptap-ui/mark-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

export interface MarkButtonProps
  extends Omit<ButtonProps, "type">,
  UseMarkConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function MarkShortcutBadge({
  type,
  shortcutKeys = MARK_SHORTCUT_KEYS[type],
}: {
  type: Mark
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for toggling marks in a Tiptap editor.
 *
 * For custom button implementations, use the `useMark` hook instead.
 */
export const MarkButton = React.forwardRef<HTMLButtonElement, MarkButtonProps>(
  (
    {
      editor: providedEditor,
      type,
      text,
      hideWhenUnavailable = false,
      onToggled,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      handleMark,
      label,
      canToggle,
      isActive,
      Icon,
      shortcutKeys,
    } = useMark({
      editor,
      type,
      hideWhenUnavailable,
      onToggled,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleMark()
      },
      [handleMark, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        disabled={!canToggle}
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        data-disabled={!canToggle}
        role="button"
        tabIndex={-1}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <MarkShortcutBadge type={type} shortcutKeys={shortcutKeys} />
            )}
          </>
        )}
      </Button>
    )
  }
)

MarkButton.displayName = "MarkButton"
</file>

<file path="frontend/src/components/tiptap-ui/text-align-button/text-align-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import type {
  TextAlign,
  UseTextAlignConfig,
} from "@/components/tiptap-ui/text-align-button"
import {
  TEXT_ALIGN_SHORTCUT_KEYS,
  useTextAlign,
} from "@/components/tiptap-ui/text-align-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

type IconProps = React.SVGProps<SVGSVGElement>
type IconComponent = ({ className, ...props }: IconProps) => React.ReactElement

export interface TextAlignButtonProps
  extends Omit<ButtonProps, "type">,
  UseTextAlignConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
  /**
   * Optional custom icon component to render instead of the default.
   */
  icon?: React.MemoExoticComponent<IconComponent> | React.FC<IconProps>
}

export function TextAlignShortcutBadge({
  align,
  shortcutKeys = TEXT_ALIGN_SHORTCUT_KEYS[align],
}: {
  align: TextAlign
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for setting text alignment in a Tiptap editor.
 *
 * For custom button implementations, use the `useTextAlign` hook instead.
 */
export const TextAlignButton = React.forwardRef<
  HTMLButtonElement,
  TextAlignButtonProps
>(
  (
    {
      editor: providedEditor,
      align,
      text,
      hideWhenUnavailable = false,
      onAligned,
      showShortcut = false,
      onClick,
      icon: CustomIcon,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const {
      isVisible,
      handleTextAlign,
      label,
      canAlign,
      isActive,
      Icon,
      shortcutKeys,
    } = useTextAlign({
      editor,
      align,
      hideWhenUnavailable,
      onAligned,
    })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleTextAlign()
      },
      [handleTextAlign, onClick]
    )

    if (!isVisible) {
      return null
    }

    const RenderIcon = CustomIcon ?? Icon

    return (
      <Button
        type="button"
        disabled={!canAlign}
        data-style="ghost"
        data-active-state={isActive ? "on" : "off"}
        data-disabled={!canAlign}
        role="button"
        tabIndex={-1}
        aria-label={label}
        aria-pressed={isActive}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <RenderIcon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <TextAlignShortcutBadge
                align={align}
                shortcutKeys={shortcutKeys}
              />
            )}
          </>
        )}
      </Button>
    )
  }
)

TextAlignButton.displayName = "TextAlignButton"
</file>

<file path="frontend/src/components/tiptap-ui/undo-redo-button/undo-redo-button.tsx">
import * as React from "react"

// --- Lib ---
import { parseShortcutKeys } from "@/lib/tiptap-utils"

// --- Hooks ---
import { useTiptapEditor } from "@/hooks/use-tiptap-editor"

// --- Tiptap UI ---
import type {
  UndoRedoAction,
  UseUndoRedoConfig,
} from "@/components/tiptap-ui/undo-redo-button"
import {
  UNDO_REDO_SHORTCUT_KEYS,
  useUndoRedo,
} from "@/components/tiptap-ui/undo-redo-button"

// --- UI Primitives ---
import type { ButtonProps } from "@/components/tiptap-ui-primitive/button"
import { Button } from "@/components/tiptap-ui-primitive/button"
import { Badge } from "@/components/tiptap-ui-primitive/badge"

export interface UndoRedoButtonProps
  extends Omit<ButtonProps, "type">,
  UseUndoRedoConfig {
  /**
   * Optional text to display alongside the icon.
   */
  text?: string
  /**
   * Optional show shortcut keys in the button.
   * @default false
   */
  showShortcut?: boolean
}

export function HistoryShortcutBadge({
  action,
  shortcutKeys = UNDO_REDO_SHORTCUT_KEYS[action],
}: {
  action: UndoRedoAction
  shortcutKeys?: string
}) {
  return <Badge>{parseShortcutKeys({ shortcutKeys })}</Badge>
}

/**
 * Button component for triggering undo/redo actions in a Tiptap editor.
 *
 * For custom button implementations, use the `useHistory` hook instead.
 */
export const UndoRedoButton = React.forwardRef<
  HTMLButtonElement,
  UndoRedoButtonProps
>(
  (
    {
      editor: providedEditor,
      action,
      text,
      hideWhenUnavailable = false,
      onExecuted,
      showShortcut = false,
      onClick,
      children,
      ...buttonProps
    },
    ref
  ) => {
    const { editor } = useTiptapEditor(providedEditor)
    const { isVisible, handleAction, label, canExecute, Icon, shortcutKeys } =
      useUndoRedo({
        editor,
        action,
        hideWhenUnavailable,
        onExecuted,
      })

    const handleClick = React.useCallback(
      (event: React.MouseEvent<HTMLButtonElement>) => {
        onClick?.(event)
        if (event.defaultPrevented) return
        handleAction()
      },
      [handleAction, onClick]
    )

    if (!isVisible) {
      return null
    }

    return (
      <Button
        type="button"
        disabled={!canExecute}
        data-style="ghost"
        data-disabled={!canExecute}
        role="button"
        tabIndex={-1}
        aria-label={label}
        tooltip={label}
        onClick={handleClick}
        {...buttonProps}
        ref={ref}
      >
        {children ?? (
          <>
            <Icon className="tiptap-button-icon" />
            {text && <span className="tiptap-button-text">{text}</span>}
            {showShortcut && (
              <HistoryShortcutBadge
                action={action}
                shortcutKeys={shortcutKeys}
              />
            )}
          </>
        )}
      </Button>
    )
  }
)

UndoRedoButton.displayName = "UndoRedoButton"
</file>

<file path="frontend/src/components/tiptap-ui-primitive/card/card.tsx">
import * as React from "react"
import { cn } from "@/lib/tiptap-utils"
import "@/components/tiptap-ui-primitive/card/card.scss"

const Card = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => {
    return <div ref={ref} className={cn("tiptap-card", className)} {...props} />
  }
)
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div ref={ref} className={cn("tiptap-card-header", className)} {...props} />
  )
})
CardHeader.displayName = "CardHeader"

const CardBody = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => {
    return (
      <div ref={ref} className={cn("tiptap-card-body", className)} {...props} />
    )
  }
)
CardBody.displayName = "CardBody"

const CardItemGroup = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    orientation?: "horizontal" | "vertical"
  }
>(({ className, orientation = "vertical", ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-orientation={orientation}
      className={cn("tiptap-card-item-group", className)}
      {...props}
    />
  )
})
CardItemGroup.displayName = "CardItemGroup"

const CardGroupLabel = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      className={cn("tiptap-card-group-label", className)}
      {...props}
    />
  )
})
CardGroupLabel.displayName = "CardGroupLabel"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div">
>(({ className, ...props }, ref) => {
  return (
    <div ref={ref} className={cn("tiptap-card-footer", className)} {...props} />
  )
})
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardBody, CardItemGroup, CardGroupLabel }
</file>

<file path="frontend/src/components/tiptap-ui-primitive/label/label.tsx">
import * as React from "react"
import "@/components/tiptap-ui-primitive/label/label.scss"
import { cn } from "@/lib/tiptap-utils"

export interface BaseProps extends React.HTMLAttributes<HTMLElement> {
  as?: "label" | "div"
  onMouseDown?: React.MouseEventHandler<HTMLElement>
}

export type LabelProps<T extends "label" | "div"> = T extends "label"
  ? BaseProps & { htmlFor?: string }
  : BaseProps

export const Label = React.forwardRef<
  HTMLElement,
  LabelProps<"label"> | LabelProps<"div">
>(({ as = "div", ...props }, ref) => {
  const renderProps = { ...props }

  if (as === "label") {
    renderProps.onMouseDown = (event: React.MouseEvent<HTMLElement>) => {
      // only prevent text selection if clicking inside the label itself
      const target = event.target as HTMLElement
      if (target.closest("button, input, select, textarea")) return
      props.onMouseDown?.(event)
      // prevent text selection when double clicking label
      if (!event.defaultPrevented && event.detail > 1) event.preventDefault()
    }
  }

  return React.createElement(as, {
    ...renderProps,
    ref,
    className: cn("tiptap-label", props.className),
  })
})

Label.displayName = "Label"

export default Label
</file>

<file path="frontend/src/components/tiptap-ui-primitive/spacer/spacer.tsx">
import * as React from "react"

export type SpacerOrientation = "horizontal" | "vertical"

export interface SpacerProps extends React.HTMLAttributes<HTMLDivElement> {
  orientation?: SpacerOrientation
  size?: string | number
}

export function Spacer({
  orientation = "horizontal",
  size,
  style = {},
  ...props
}: SpacerProps) {
  const computedStyle = {
    ...style,
    ...(orientation === "horizontal" && !size && { flex: 1 }),
    ...(size && {
      width: orientation === "vertical" ? "1px" : size,
      height: orientation === "horizontal" ? "1px" : size,
    }),
  }

  return <div {...props} style={computedStyle} />
}
</file>

<file path="frontend/src/components/tiptap-ui-primitive/tooltip/tooltip.tsx">
import * as React from "react"
import {
  useFloating,
  autoUpdate,
  offset,
  flip,
  shift,
  useHover,
  useFocus,
  useDismiss,
  useRole,
  useInteractions,
  useMergeRefs,
  FloatingPortal,
  type Placement,
  type UseFloatingReturn,
  type ReferenceType,
  FloatingDelayGroup,
} from "@floating-ui/react"
import "@/components/tiptap-ui-primitive/tooltip/tooltip.scss"

interface TooltipProviderProps {
  children: React.ReactNode
  initialOpen?: boolean
  placement?: Placement
  open?: boolean
  onOpenChange?: (open: boolean) => void
  delay?: number
  closeDelay?: number
  timeout?: number
  useDelayGroup?: boolean
}

interface TooltipTriggerProps
  extends Omit<React.HTMLProps<HTMLElement>, "ref"> {
  asChild?: boolean
  children: React.ReactNode
}

interface TooltipContentProps
  extends Omit<React.HTMLProps<HTMLDivElement>, "ref"> {
  children?: React.ReactNode
  portal?: boolean
  portalProps?: Omit<React.ComponentProps<typeof FloatingPortal>, "children">
}

interface TooltipContextValue extends UseFloatingReturn<ReferenceType> {
  open: boolean
  setOpen: (open: boolean) => void
  getReferenceProps: (
    userProps?: React.HTMLProps<HTMLElement>
  ) => Record<string, unknown>
  getFloatingProps: (
    userProps?: React.HTMLProps<HTMLDivElement>
  ) => Record<string, unknown>
}

function useTooltip({
  initialOpen = false,
  placement = "top",
  open: controlledOpen,
  onOpenChange: setControlledOpen,
  delay = 600,
  closeDelay = 0,
}: Omit<TooltipProviderProps, "children"> = {}) {
  const [uncontrolledOpen, setUncontrolledOpen] =
    React.useState<boolean>(initialOpen)

  const open = controlledOpen ?? uncontrolledOpen
  const setOpen = setControlledOpen ?? setUncontrolledOpen

  const data = useFloating({
    placement,
    open,
    onOpenChange: setOpen,
    whileElementsMounted: autoUpdate,
    middleware: [
      offset(4),
      flip({
        crossAxis: placement.includes("-"),
        fallbackAxisSideDirection: "start",
        padding: 4,
      }),
      shift({ padding: 4 }),
    ],
  })

  const context = data.context

  const hover = useHover(context, {
    mouseOnly: true,
    move: false,
    restMs: delay,
    enabled: controlledOpen == null,
    delay: {
      close: closeDelay,
    },
  })
  const focus = useFocus(context, {
    enabled: controlledOpen == null,
  })
  const dismiss = useDismiss(context)
  const role = useRole(context, { role: "tooltip" })

  const interactions = useInteractions([hover, focus, dismiss, role])

  return React.useMemo(
    () => ({
      open,
      setOpen,
      ...interactions,
      ...data,
    }),
    [open, setOpen, interactions, data]
  )
}

const TooltipContext = React.createContext<TooltipContextValue | null>(null)

function useTooltipContext() {
  const context = React.useContext(TooltipContext)

  if (context == null) {
    throw new Error("Tooltip components must be wrapped in <TooltipProvider />")
  }

  return context
}

export function Tooltip({ children, ...props }: TooltipProviderProps) {
  const tooltip = useTooltip(props)

  if (!props.useDelayGroup) {
    return (
      <TooltipContext.Provider value={tooltip}>
        {children}
      </TooltipContext.Provider>
    )
  }

  return (
    <FloatingDelayGroup
      delay={{ open: props.delay ?? 0, close: props.closeDelay ?? 0 }}
      timeoutMs={props.timeout}
    >
      <TooltipContext.Provider value={tooltip}>
        {children}
      </TooltipContext.Provider>
    </FloatingDelayGroup>
  )
}

export const TooltipTrigger = React.forwardRef<
  HTMLElement,
  TooltipTriggerProps
>(function TooltipTrigger({ children, asChild = false, ...props }, propRef) {
  const context = useTooltipContext()
  const childrenRef = React.isValidElement(children)
    ? parseInt(React.version, 10) >= 19
      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any
      (children as { props: { ref?: React.Ref<any> } }).props.ref
      : // eslint-disable-next-line @typescript-eslint/no-explicit-any
      (children as any).ref
    : undefined
  const ref = useMergeRefs([context.refs.setReference, propRef, childrenRef])

  if (asChild && React.isValidElement(children)) {
    const dataAttributes = {
      "data-tooltip-state": context.open ? "open" : "closed",
    }

    return React.cloneElement(
      children,
      context.getReferenceProps({
        ref,
        ...props,
        ...(typeof children.props === "object" ? children.props : {}),
        ...dataAttributes,
      })
    )
  }

  return (
    <button
      ref={ref}
      data-tooltip-state={context.open ? "open" : "closed"}
      {...context.getReferenceProps(props)}
    >
      {children}
    </button>
  )
})

export const TooltipContent = React.forwardRef<
  HTMLDivElement,
  TooltipContentProps
>(function TooltipContent(
  { style, children, portal = true, portalProps = {}, ...props },
  propRef
) {
  const context = useTooltipContext()
  const ref = useMergeRefs([context.refs.setFloating, propRef])

  if (!context.open) return null

  const content = (
    <div
      ref={ref}
      style={{
        ...context.floatingStyles,
        ...style,
      }}
      {...context.getFloatingProps(props)}
      className="tiptap-tooltip"
    >
      {children}
    </div>
  )

  if (portal) {
    return <FloatingPortal {...portalProps}>{content}</FloatingPortal>
  }

  return content
})

Tooltip.displayName = "Tooltip"
TooltipTrigger.displayName = "TooltipTrigger"
TooltipContent.displayName = "TooltipContent"
</file>

<file path="frontend/src/components/ui/3d-card.tsx">
;

import { cn } from "@/lib/utils";

import React, {
  createContext,
  useState,
  useContext,
  useRef,
  useEffect,
} from "react";

const MouseEnterContext = createContext<
  [boolean, React.Dispatch<React.SetStateAction<boolean>>] | undefined
>(undefined);

export const CardContainer = ({
  children,
  className,
  containerClassName,
}: {
  children?: React.ReactNode;
  className?: string;
  containerClassName?: string;
}) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [isMouseEntered, setIsMouseEntered] = useState(false);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!containerRef.current) return;
    const { left, top, width, height } =
      containerRef.current.getBoundingClientRect();
    const x = (e.clientX - left - width / 2) / 25;
    const y = (e.clientY - top - height / 2) / 25;
    containerRef.current.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
  };

  const handleMouseEnter = (e: React.MouseEvent<HTMLDivElement>) => {
    setIsMouseEntered(true);
    if (!containerRef.current) return;
  };

  const handleMouseLeave = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!containerRef.current) return;
    setIsMouseEntered(false);
    containerRef.current.style.transform = `rotateY(0deg) rotateX(0deg)`;
  };
  return (
    <MouseEnterContext.Provider value={[isMouseEntered, setIsMouseEntered]}>
      <div
        className={cn(
          "py-20 flex items-center justify-center",
          containerClassName
        )}
        style={{
          perspective: "1000px",
        }}
      >
        <div
          ref={containerRef}
          onMouseEnter={handleMouseEnter}
          onMouseMove={handleMouseMove}
          onMouseLeave={handleMouseLeave}
          className={cn(
            "flex items-center justify-center relative transition-all duration-200 ease-linear",
            className
          )}
          style={{
            transformStyle: "preserve-3d",
          }}
        >
          {children}
        </div>
      </div>
    </MouseEnterContext.Provider>
  );
};

export const CardBody = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  return (
    <div
      className={cn(
        "h-96 w-96 [transform-style:preserve-3d]  [&>*]:[transform-style:preserve-3d]",
        className
      )}
    >
      {children}
    </div>
  );
};

export const CardItem = ({
  as: Tag = "div",
  children,
  className,
  translateX = 0,
  translateY = 0,
  translateZ = 0,
  rotateX = 0,
  rotateY = 0,
  rotateZ = 0,
  ...rest
}: {
  as?: React.ElementType;
  children: React.ReactNode;
  className?: string;
  translateX?: number | string;
  translateY?: number | string;
  translateZ?: number | string;
  rotateX?: number | string;
  rotateY?: number | string;
  rotateZ?: number | string;
  [key: string]: any;
}) => {
  const ref = useRef<HTMLDivElement>(null);
  const [isMouseEntered] = useMouseEnter();

  useEffect(() => {
    handleAnimations();
  }, [isMouseEntered]);

  const handleAnimations = () => {
    if (!ref.current) return;
    if (isMouseEntered) {
      ref.current.style.transform = `translateX(${translateX}px) translateY(${translateY}px) translateZ(${translateZ}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) rotateZ(${rotateZ}deg)`;
    } else {
      ref.current.style.transform = `translateX(0px) translateY(0px) translateZ(0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg)`;
    }
  };

  return (
    <Tag
      ref={ref}
      className={cn("w-fit transition duration-200 ease-linear", className)}
      {...rest}
    >
      {children}
    </Tag>
  );
};

// Create a hook to use the context
export const useMouseEnter = () => {
  const context = useContext(MouseEnterContext);
  if (context === undefined) {
    throw new Error("useMouseEnter must be used within a MouseEnterProvider");
  }
  return context;
};
</file>

<file path="frontend/src/components/ui/3d-marquee.tsx">
;

import { motion } from "motion/react";
import { cn } from "@/lib/utils";
export const ThreeDMarquee = ({
  images,
  className,
}: {
  images: string[];
  className?: string;
}) => {
  // Split the images array into 4 equal parts
  const chunkSize = Math.ceil(images.length / 4);
  const chunks = Array.from({ length: 4 }, (_, colIndex) => {
    const start = colIndex * chunkSize;
    return images.slice(start, start + chunkSize);
  });
  return (
    <div
      className={cn(
        "mx-auto block h-[600px] overflow-hidden rounded-2xl max-sm:h-100",
        className,
      )}
    >
      <div className="flex size-full items-center justify-center">
        <div className="size-[1720px] shrink-0 scale-50 sm:scale-75 lg:scale-100">
          <div
            style={{
              transform: "rotateX(55deg) rotateY(0deg) rotateZ(-45deg)",
            }}
            className="relative top-96 right-[50%] grid size-full origin-top-left grid-cols-4 gap-8 transform-3d"
          >
            {chunks.map((subarray, colIndex) => (
              <motion.div
                animate={{ y: colIndex % 2 === 0 ? 100 : -100 }}
                transition={{
                  duration: colIndex % 2 === 0 ? 10 : 15,
                  repeat: Infinity,
                  repeatType: "reverse",
                }}
                key={colIndex + "marquee"}
                className="flex flex-col items-start gap-8"
              >
                <GridLineVertical className="-left-4" offset="80px" />
                {subarray.map((image, imageIndex) => (
                  <div className="relative" key={imageIndex + image}>
                    <GridLineHorizontal className="-top-4" offset="20px" />
                    <motion.img
                      whileHover={{
                        y: -10,
                      }}
                      transition={{
                        duration: 0.3,
                        ease: "easeInOut",
                      }}
                      key={imageIndex + image}
                      src={image}
                      alt={`Image ${imageIndex + 1}`}
                      className="aspect-[970/700] rounded-lg object-cover ring ring-gray-950/5 hover:shadow-2xl"
                      width={970}
                      height={700}
                    />
                  </div>
                ))}
              </motion.div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

const GridLineHorizontal = ({
  className,
  offset,
}: {
  className?: string;
  offset?: string;
}) => {
  return (
    <div
      style={
        {
          "--background": "#ffffff",
          "--color": "rgba(0, 0, 0, 0.2)",
          "--height": "1px",
          "--width": "5px",
          "--fade-stop": "90%",
          "--offset": offset || "200px", //-100px if you want to keep the line inside
          "--color-dark": "rgba(255, 255, 255, 0.2)",
          maskComposite: "exclude",
        } as React.CSSProperties
      }
      className={cn(
        "absolute left-[calc(var(--offset)/2*-1)] h-[var(--height)] w-[calc(100%+var(--offset))]",
        "bg-[linear-gradient(to_right,var(--color),var(--color)_50%,transparent_0,transparent)]",
        "[background-size:var(--width)_var(--height)]",
        "[mask:linear-gradient(to_left,var(--background)_var(--fade-stop),transparent),_linear-gradient(to_right,var(--background)_var(--fade-stop),transparent),_linear-gradient(black,black)]",
        "[mask-composite:exclude]",
        "z-30",
        "dark:bg-[linear-gradient(to_right,var(--color-dark),var(--color-dark)_50%,transparent_0,transparent)]",
        className,
      )}
    ></div>
  );
};

const GridLineVertical = ({
  className,
  offset,
}: {
  className?: string;
  offset?: string;
}) => {
  return (
    <div
      style={
        {
          "--background": "#ffffff",
          "--color": "rgba(0, 0, 0, 0.2)",
          "--height": "5px",
          "--width": "1px",
          "--fade-stop": "90%",
          "--offset": offset || "150px", //-100px if you want to keep the line inside
          "--color-dark": "rgba(255, 255, 255, 0.2)",
          maskComposite: "exclude",
        } as React.CSSProperties
      }
      className={cn(
        "absolute top-[calc(var(--offset)/2*-1)] h-[calc(100%+var(--offset))] w-[var(--width)]",
        "bg-[linear-gradient(to_bottom,var(--color),var(--color)_50%,transparent_0,transparent)]",
        "[background-size:var(--width)_var(--height)]",
        "[mask:linear-gradient(to_top,var(--background)_var(--fade-stop),transparent),_linear-gradient(to_bottom,var(--background)_var(--fade-stop),transparent),_linear-gradient(black,black)]",
        "[mask-composite:exclude]",
        "z-30",
        "dark:bg-[linear-gradient(to_bottom,var(--color-dark),var(--color-dark)_50%,transparent_0,transparent)]",
        className,
      )}
    ></div>
  );
};
</file>

<file path="frontend/src/components/ui/3d-pin.tsx">
;
import React, { useState } from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";


export const PinContainer = ({
  children,
  title,
  href,
  className,
  containerClassName,
}: {
  children: React.ReactNode;
  title?: string;
  href?: string;
  className?: string;
  containerClassName?: string;
}) => {
  const [transform, setTransform] = useState(
    "translate(-50%,-50%) rotateX(0deg)"
  );

  const onMouseEnter = () => {
    setTransform("translate(-50%,-50%) rotateX(40deg) scale(0.8)");
  };
  const onMouseLeave = () => {
    setTransform("translate(-50%,-50%) rotateX(0deg) scale(1)");
  };

  return (
    <a
      className={cn(
        "relative group/pin z-50  cursor-pointer",
        containerClassName
      )}
      onMouseEnter={onMouseEnter}
      onMouseLeave={onMouseLeave}
      href={href || "/"}
    >
      <div
        style={{
          perspective: "1000px",
          transform: "rotateX(70deg) translateZ(0deg)",
        }}
        className="absolute left-1/2 top-1/2 ml-[0.09375rem] mt-4 -translate-x-1/2 -translate-y-1/2"
      >
        <div
          style={{
            transform: transform,
          }}
          className="absolute left-1/2 p-4 top-1/2  flex justify-start items-start  rounded-2xl  shadow-[0_8px_16px_rgb(0_0_0/0.4)] bg-black border border-white/[0.1] group-hover/pin:border-white/[0.2] transition duration-700 overflow-hidden"
        >
          <div className={cn(" relative z-50 ", className)}>{children}</div>
        </div>
      </div>
      <PinPerspective title={title} href={href} />
    </a>
  );
};

export const PinPerspective = ({
  title,
  href,
}: {
  title?: string;
  href?: string;
}) => {
  return (
    <motion.div className="pointer-events-none  w-96 h-80 flex items-center justify-center opacity-0 group-hover/pin:opacity-100 z-[60] transition duration-500">
      <div className=" w-full h-full -mt-7 flex-none  inset-0">
        <div className="absolute top-0 inset-x-0  flex justify-center">
          <a
            href={href}
            target={"_blank"}
            className="relative flex space-x-2 items-center z-10 rounded-full bg-zinc-950 py-0.5 px-4 ring-1 ring-white/10 "
          >
            <span className="relative z-20 text-white text-xs font-bold inline-block py-0.5">
              {title}
            </span>

            <span className="absolute -bottom-0 left-[1.125rem] h-px w-[calc(100%-2.25rem)] bg-gradient-to-r from-emerald-400/0 via-emerald-400/90 to-emerald-400/0 transition-opacity duration-500 group-hover/btn:opacity-40"></span>
          </a>
        </div>

        <div
          style={{
            perspective: "1000px",
            transform: "rotateX(70deg) translateZ(0)",
          }}
          className="absolute left-1/2 top-1/2 ml-[0.09375rem] mt-4 -translate-x-1/2 -translate-y-1/2"
        >
          <>
            <motion.div
              initial={{
                opacity: 0,
                scale: 0,
                x: "-50%",
                y: "-50%",
              }}
              animate={{
                opacity: [0, 1, 0.5, 0],
                scale: 1,

                z: 0,
              }}
              transition={{
                duration: 6,
                repeat: Infinity,
                delay: 0,
              }}
              className="absolute left-1/2 top-1/2  h-[11.25rem] w-[11.25rem] rounded-[50%] bg-sky-500/[0.08] shadow-[0_8px_16px_rgb(0_0_0/0.4)]"
            ></motion.div>
            <motion.div
              initial={{
                opacity: 0,
                scale: 0,
                x: "-50%",
                y: "-50%",
              }}
              animate={{
                opacity: [0, 1, 0.5, 0],
                scale: 1,

                z: 0,
              }}
              transition={{
                duration: 6,
                repeat: Infinity,
                delay: 2,
              }}
              className="absolute left-1/2 top-1/2  h-[11.25rem] w-[11.25rem] rounded-[50%] bg-sky-500/[0.08] shadow-[0_8px_16px_rgb(0_0_0/0.4)]"
            ></motion.div>
            <motion.div
              initial={{
                opacity: 0,
                scale: 0,
                x: "-50%",
                y: "-50%",
              }}
              animate={{
                opacity: [0, 1, 0.5, 0],
                scale: 1,

                z: 0,
              }}
              transition={{
                duration: 6,
                repeat: Infinity,
                delay: 4,
              }}
              className="absolute left-1/2 top-1/2  h-[11.25rem] w-[11.25rem] rounded-[50%] bg-sky-500/[0.08] shadow-[0_8px_16px_rgb(0_0_0/0.4)]"
            ></motion.div>
          </>
        </div>

        <>
          <motion.div className="absolute right-1/2 bottom-1/2 bg-gradient-to-b from-transparent to-cyan-500 translate-y-[14px] w-px h-20 group-hover/pin:h-40 blur-[2px]" />
          <motion.div className="absolute right-1/2 bottom-1/2 bg-gradient-to-b from-transparent to-cyan-500 translate-y-[14px] w-px h-20 group-hover/pin:h-40  " />
          <motion.div className="absolute right-1/2 translate-x-[1.5px] bottom-1/2 bg-cyan-600 translate-y-[14px] w-[4px] h-[4px] rounded-full z-40 blur-[3px]" />
          <motion.div className="absolute right-1/2 translate-x-[0.5px] bottom-1/2 bg-cyan-300 translate-y-[14px] w-[2px] h-[2px] rounded-full z-40 " />
        </>
      </div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/animated-modal.tsx">
;
import { cn } from "@/lib/utils";
import { AnimatePresence, motion } from "motion/react";
import React, {
  ReactNode,
  createContext,
  useContext,
  useEffect,
  useRef,
  useState,
} from "react";

interface ModalContextType {
  open: boolean;
  setOpen: (open: boolean) => void;
}

const ModalContext = createContext<ModalContextType | undefined>(undefined);

export const ModalProvider = ({ children }: { children: ReactNode }) => {
  const [open, setOpen] = useState(false);

  return (
    <ModalContext.Provider value={{ open, setOpen }}>
      {children}
    </ModalContext.Provider>
  );
};

export const useModal = () => {
  const context = useContext(ModalContext);
  if (!context) {
    throw new Error("useModal must be used within a ModalProvider");
  }
  return context;
};

export function Modal({ children }: { children: ReactNode }) {
  return <ModalProvider>{children}</ModalProvider>;
}

export const ModalTrigger = ({
  children,
  className,
}: {
  children: ReactNode;
  className?: string;
}) => {
  const { setOpen } = useModal();
  return (
    <button
      className={cn(
        "px-4 py-2 rounded-md text-black dark:text-white text-center relative overflow-hidden",
        className
      )}
      onClick={() => setOpen(true)}
    >
      {children}
    </button>
  );
};

export const ModalBody = ({
  children,
  className,
}: {
  children: ReactNode;
  className?: string;
}) => {
  const { open } = useModal();

  useEffect(() => {
    if (open) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "auto";
    }
  }, [open]);

  const modalRef = useRef(null);
  const { setOpen } = useModal();
  useOutsideClick(modalRef, () => setOpen(false));

  return (
    <AnimatePresence>
      {open && (
        <motion.div
          initial={{
            opacity: 0,
          }}
          animate={{
            opacity: 1,
            backdropFilter: "blur(10px)",
          }}
          exit={{
            opacity: 0,
            backdropFilter: "blur(0px)",
          }}
          className="fixed [perspective:800px] [transform-style:preserve-3d] inset-0 h-full w-full  flex items-center justify-center z-50"
        >
          <Overlay />

          <motion.div
            ref={modalRef}
            className={cn(
              "min-h-[50%] max-h-[90%] md:max-w-[40%] bg-white dark:bg-neutral-950 border border-transparent dark:border-neutral-800 md:rounded-2xl relative z-50 flex flex-col flex-1 overflow-hidden",
              className
            )}
            initial={{
              opacity: 0,
              scale: 0.5,
              rotateX: 40,
              y: 40,
            }}
            animate={{
              opacity: 1,
              scale: 1,
              rotateX: 0,
              y: 0,
            }}
            exit={{
              opacity: 0,
              scale: 0.8,
              rotateX: 10,
            }}
            transition={{
              type: "spring",
              stiffness: 260,
              damping: 15,
            }}
          >
            <CloseIcon />
            {children}
          </motion.div>
        </motion.div>
      )}
    </AnimatePresence>
  );
};

export const ModalContent = ({
  children,
  className,
}: {
  children: ReactNode;
  className?: string;
}) => {
  return (
    <div className={cn("flex flex-col flex-1 p-8 md:p-10", className)}>
      {children}
    </div>
  );
};

export const ModalFooter = ({
  children,
  className,
}: {
  children: ReactNode;
  className?: string;
}) => {
  return (
    <div
      className={cn(
        "flex justify-end p-4 bg-gray-100 dark:bg-neutral-900",
        className
      )}
    >
      {children}
    </div>
  );
};

const Overlay = ({ className }: { className?: string }) => {
  return (
    <motion.div
      initial={{
        opacity: 0,
      }}
      animate={{
        opacity: 1,
        backdropFilter: "blur(10px)",
      }}
      exit={{
        opacity: 0,
        backdropFilter: "blur(0px)",
      }}
      className={`fixed inset-0 h-full w-full bg-black bg-opacity-50 z-50 ${className}`}
    ></motion.div>
  );
};

const CloseIcon = () => {
  const { setOpen } = useModal();
  return (
    <button
      onClick={() => setOpen(false)}
      className="absolute top-4 right-4 group"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
        className="text-black dark:text-white h-4 w-4 group-hover:scale-125 group-hover:rotate-3 transition duration-200"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M18 6l-12 12" />
        <path d="M6 6l12 12" />
      </svg>
    </button>
  );
};

// Hook to detect clicks outside of a component.
// Add it in a separate file, I've added here for simplicity
export const useOutsideClick = (
  ref: React.RefObject<HTMLDivElement>,
  callback: Function
) => {
  useEffect(() => {
    const listener = (event: any) => {
      // DO NOTHING if the element being clicked is the target element or their children
      if (!ref.current || ref.current.contains(event.target)) {
        return;
      }
      callback(event);
    };

    document.addEventListener("mousedown", listener);
    document.addEventListener("touchstart", listener);

    return () => {
      document.removeEventListener("mousedown", listener);
      document.removeEventListener("touchstart", listener);
    };
  }, [ref, callback]);
};
</file>

<file path="frontend/src/components/ui/animated-testimonials.tsx">
;

import { IconArrowLeft, IconArrowRight } from "@tabler/icons-react";
import { motion, AnimatePresence } from "motion/react";

import { useEffect, useState } from "react";

type Testimonial = {
  quote: string;
  name: string;
  designation: string;
  src: string;
};
export const AnimatedTestimonials = ({
  testimonials,
  autoplay = false,
}: {
  testimonials: Testimonial[];
  autoplay?: boolean;
}) => {
  const [active, setActive] = useState(0);

  const handleNext = () => {
    setActive((prev) => (prev + 1) % testimonials.length);
  };

  const handlePrev = () => {
    setActive((prev) => (prev - 1 + testimonials.length) % testimonials.length);
  };

  const isActive = (index: number) => {
    return index === active;
  };

  useEffect(() => {
    if (autoplay) {
      const interval = setInterval(handleNext, 5000);
      return () => clearInterval(interval);
    }
  }, [autoplay]);

  const randomRotateY = () => {
    return Math.floor(Math.random() * 21) - 10;
  };
  return (
    <div className="mx-auto max-w-sm px-4 py-20 font-sans antialiased md:max-w-4xl md:px-8 lg:px-12">
      <div className="relative grid grid-cols-1 gap-20 md:grid-cols-2">
        <div>
          <div className="relative h-80 w-full">
            <AnimatePresence>
              {testimonials.map((testimonial, index) => (
                <motion.div
                  key={testimonial.src}
                  initial={{
                    opacity: 0,
                    scale: 0.9,
                    z: -100,
                    rotate: randomRotateY(),
                  }}
                  animate={{
                    opacity: isActive(index) ? 1 : 0.7,
                    scale: isActive(index) ? 1 : 0.95,
                    z: isActive(index) ? 0 : -100,
                    rotate: isActive(index) ? 0 : randomRotateY(),
                    zIndex: isActive(index)
                      ? 40
                      : testimonials.length + 2 - index,
                    y: isActive(index) ? [0, -80, 0] : 0,
                  }}
                  exit={{
                    opacity: 0,
                    scale: 0.9,
                    z: 100,
                    rotate: randomRotateY(),
                  }}
                  transition={{
                    duration: 0.4,
                    ease: "easeInOut",
                  }}
                  className="absolute inset-0 origin-bottom"
                >
                  <img
                    src={testimonial.src}
                    alt={testimonial.name}
                    width={500}
                    height={500}
                    draggable={false}
                    className="h-full w-full rounded-3xl object-cover object-center"
                  />
                </motion.div>
              ))}
            </AnimatePresence>
          </div>
        </div>
        <div className="flex flex-col justify-between py-4">
          <motion.div
            key={active}
            initial={{
              y: 20,
              opacity: 0,
            }}
            animate={{
              y: 0,
              opacity: 1,
            }}
            exit={{
              y: -20,
              opacity: 0,
            }}
            transition={{
              duration: 0.2,
              ease: "easeInOut",
            }}
          >
            <h3 className="text-2xl font-bold text-black dark:text-white">
              {testimonials[active].name}
            </h3>
            <p className="text-sm text-gray-500 dark:text-neutral-500">
              {testimonials[active].designation}
            </p>
            <motion.p className="mt-8 text-lg text-gray-500 dark:text-neutral-300">
              {testimonials[active].quote.split(" ").map((word, index) => (
                <motion.span
                  key={index}
                  initial={{
                    filter: "blur(10px)",
                    opacity: 0,
                    y: 5,
                  }}
                  animate={{
                    filter: "blur(0px)",
                    opacity: 1,
                    y: 0,
                  }}
                  transition={{
                    duration: 0.2,
                    ease: "easeInOut",
                    delay: 0.02 * index,
                  }}
                  className="inline-block"
                >
                  {word}&nbsp;
                </motion.span>
              ))}
            </motion.p>
          </motion.div>
          <div className="flex gap-4 pt-12 md:pt-0">
            <button
              onClick={handlePrev}
              className="group/button flex h-7 w-7 items-center justify-center rounded-full bg-gray-100 dark:bg-neutral-800"
            >
              <IconArrowLeft className="h-5 w-5 text-black transition-transform duration-300 group-hover/button:rotate-12 dark:text-neutral-400" />
            </button>
            <button
              onClick={handleNext}
              className="group/button flex h-7 w-7 items-center justify-center rounded-full bg-gray-100 dark:bg-neutral-800"
            >
              <IconArrowRight className="h-5 w-5 text-black transition-transform duration-300 group-hover/button:-rotate-12 dark:text-neutral-400" />
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/animated-tooltip.tsx">
;

import React, { useState, useRef } from "react";
import {
  motion,
  useTransform,
  AnimatePresence,
  useMotionValue,
  useSpring,
} from "motion/react";

export const AnimatedTooltip = ({
  items,
}: {
  items: {
    id: number;
    name: string;
    designation: string;
    image: string;
  }[];
}) => {
  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);
  const springConfig = { stiffness: 100, damping: 15 };
  const x = useMotionValue(0);
  const animationFrameRef = useRef<number | null>(null);

  const rotate = useSpring(
    useTransform(x, [-100, 100], [-45, 45]),
    springConfig,
  );
  const translateX = useSpring(
    useTransform(x, [-100, 100], [-50, 50]),
    springConfig,
  );

  const handleMouseMove = (event: any) => {
    if (animationFrameRef.current) {
      cancelAnimationFrame(animationFrameRef.current);
    }

    animationFrameRef.current = requestAnimationFrame(() => {
      const halfWidth = event.target.offsetWidth / 2;
      x.set(event.nativeEvent.offsetX - halfWidth);
    });
  };

  return (
    <>
      {items.map((item, idx) => (
        <div
          className="group relative -mr-4"
          key={item.name}
          onMouseEnter={() => setHoveredIndex(item.id)}
          onMouseLeave={() => setHoveredIndex(null)}
        >
          <AnimatePresence>
            {hoveredIndex === item.id && (
              <motion.div
                initial={{ opacity: 0, y: 20, scale: 0.6 }}
                animate={{
                  opacity: 1,
                  y: 0,
                  scale: 1,
                  transition: {
                    type: "spring",
                    stiffness: 260,
                    damping: 10,
                  },
                }}
                exit={{ opacity: 0, y: 20, scale: 0.6 }}
                style={{
                  translateX: translateX,
                  rotate: rotate,
                  whiteSpace: "nowrap",
                }}
                className="absolute -top-16 left-1/2 z-50 flex -translate-x-1/2 flex-col items-center justify-center rounded-md bg-black px-4 py-2 text-xs shadow-xl"
              >
                <div className="absolute inset-x-10 -bottom-px z-30 h-px w-[20%] bg-gradient-to-r from-transparent via-emerald-500 to-transparent" />
                <div className="absolute -bottom-px left-10 z-30 h-px w-[40%] bg-gradient-to-r from-transparent via-sky-500 to-transparent" />
                <div className="relative z-30 text-base font-bold text-white">
                  {item.name}
                </div>
                <div className="text-xs text-white">{item.designation}</div>
              </motion.div>
            )}
          </AnimatePresence>
          <img
            onMouseMove={handleMouseMove}
            height={100}
            width={100}
            src={item.image}
            alt={item.name}
            className="relative !m-0 h-14 w-14 rounded-full border-2 border-white object-cover object-top !p-0 transition duration-500 group-hover:z-30 group-hover:scale-105"
          />
        </div>
      ))}
    </>
  );
};
</file>

<file path="frontend/src/components/ui/apple-cards-carousel.tsx">
;
import React, {
  useEffect,
  useRef,
  useState,
  createContext,
  useContext,
} from "react";
import {
  IconArrowNarrowLeft,
  IconArrowNarrowRight,
  IconX,
} from "@tabler/icons-react";
import { cn } from "@/lib/utils";
import { AnimatePresence, motion } from "motion/react";
import Image, { ImageProps } from "next/image";
import { useOutsideClick } from "@/hooks/use-outside-click";

interface CarouselProps {
  items: JSX.Element[];
  initialScroll?: number;
}

type Card = {
  src: string;
  title: string;
  category: string;
  content: React.ReactNode;
};

export const CarouselContext = createContext<{
  onCardClose: (index: number) => void;
  currentIndex: number;
}>({
  onCardClose: () => { },
  currentIndex: 0,
});

export const Carousel = ({ items, initialScroll = 0 }: CarouselProps) => {
  const carouselRef = React.useRef<HTMLDivElement>(null);
  const [canScrollLeft, setCanScrollLeft] = React.useState(false);
  const [canScrollRight, setCanScrollRight] = React.useState(true);
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    if (carouselRef.current) {
      carouselRef.current.scrollLeft = initialScroll;
      checkScrollability();
    }
  }, [initialScroll]);

  const checkScrollability = () => {
    if (carouselRef.current) {
      const { scrollLeft, scrollWidth, clientWidth } = carouselRef.current;
      setCanScrollLeft(scrollLeft > 0);
      setCanScrollRight(scrollLeft < scrollWidth - clientWidth);
    }
  };

  const scrollLeft = () => {
    if (carouselRef.current) {
      carouselRef.current.scrollBy({ left: -300, behavior: "smooth" });
    }
  };

  const scrollRight = () => {
    if (carouselRef.current) {
      carouselRef.current.scrollBy({ left: 300, behavior: "smooth" });
    }
  };

  const handleCardClose = (index: number) => {
    if (carouselRef.current) {
      const cardWidth = isMobile() ? 230 : 384; // (md:w-96)
      const gap = isMobile() ? 4 : 8;
      const scrollPosition = (cardWidth + gap) * (index + 1);
      carouselRef.current.scrollTo({
        left: scrollPosition,
        behavior: "smooth",
      });
      setCurrentIndex(index);
    }
  };

  const isMobile = () => {
    return window && window.innerWidth < 768;
  };

  return (
    <CarouselContext.Provider
      value={{ onCardClose: handleCardClose, currentIndex }}
    >
      <div className="relative w-full">
        <div
          className="flex w-full overflow-x-scroll overscroll-x-auto scroll-smooth py-10 [scrollbar-width:none] md:py-20"
          ref={carouselRef}
          onScroll={checkScrollability}
        >
          <div
            className={cn(
              "absolute right-0 z-[1000] h-auto w-[5%] overflow-hidden bg-gradient-to-l",
            )}
          ></div>

          <div
            className={cn(
              "flex flex-row justify-start gap-4 pl-4",
              "mx-auto max-w-7xl", // remove max-w-4xl if you want the carousel to span the full width of its container
            )}
          >
            {items.map((item, index) => (
              <motion.div
                initial={{
                  opacity: 0,
                  y: 20,
                }}
                animate={{
                  opacity: 1,
                  y: 0,
                  transition: {
                    duration: 0.5,
                    delay: 0.2 * index,
                    ease: "easeOut",
                    once: true,
                  },
                }}
                key={"card" + index}
                className="rounded-3xl last:pr-[5%] md:last:pr-[33%]"
              >
                {item}
              </motion.div>
            ))}
          </div>
        </div>
        <div className="mr-10 flex justify-end gap-2">
          <button
            className="relative z-40 flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 disabled:opacity-50"
            onClick={scrollLeft}
            disabled={!canScrollLeft}
          >
            <IconArrowNarrowLeft className="h-6 w-6 text-gray-500" />
          </button>
          <button
            className="relative z-40 flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 disabled:opacity-50"
            onClick={scrollRight}
            disabled={!canScrollRight}
          >
            <IconArrowNarrowRight className="h-6 w-6 text-gray-500" />
          </button>
        </div>
      </div>
    </CarouselContext.Provider>
  );
};

export const Card = ({
  card,
  index,
  layout = false,
}: {
  card: Card;
  index: number;
  layout?: boolean;
}) => {
  const [open, setOpen] = useState(false);
  const containerRef = useRef<HTMLDivElement>(null);
  const { onCardClose, currentIndex } = useContext(CarouselContext);

  useEffect(() => {
    function onKeyDown(event: KeyboardEvent) {
      if (event.key === "Escape") {
        handleClose();
      }
    }

    if (open) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "auto";
    }

    window.addEventListener("keydown", onKeyDown);
    return () => window.removeEventListener("keydown", onKeyDown);
  }, [open]);

  useOutsideClick(containerRef, () => handleClose());

  const handleOpen = () => {
    setOpen(true);
  };

  const handleClose = () => {
    setOpen(false);
    onCardClose(index);
  };

  return (
    <>
      <AnimatePresence>
        {open && (
          <div className="fixed inset-0 z-50 h-screen overflow-auto">
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              className="fixed inset-0 h-full w-full bg-black/80 backdrop-blur-lg"
            />
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              ref={containerRef}
              layoutId={layout ? `card-${card.title}` : undefined}
              className="relative z-[60] mx-auto my-10 h-fit max-w-5xl rounded-3xl bg-white p-4 font-sans md:p-10 dark:bg-neutral-900"
            >
              <button
                className="sticky top-4 right-0 ml-auto flex h-8 w-8 items-center justify-center rounded-full bg-black dark:bg-white"
                onClick={handleClose}
              >
                <IconX className="h-6 w-6 text-neutral-100 dark:text-neutral-900" />
              </button>
              <motion.p
                layoutId={layout ? `category-${card.title}` : undefined}
                className="text-base font-medium text-black dark:text-white"
              >
                {card.category}
              </motion.p>
              <motion.p
                layoutId={layout ? `title-${card.title}` : undefined}
                className="mt-4 text-2xl font-semibold text-neutral-700 md:text-5xl dark:text-white"
              >
                {card.title}
              </motion.p>
              <div className="py-10">{card.content}</div>
            </motion.div>
          </div>
        )}
      </AnimatePresence>
      <motion.button
        layoutId={layout ? `card-${card.title}` : undefined}
        onClick={handleOpen}
        className="relative z-10 flex h-80 w-56 flex-col items-start justify-start overflow-hidden rounded-3xl bg-gray-100 md:h-[40rem] md:w-96 dark:bg-neutral-900"
      >
        <div className="pointer-events-none absolute inset-x-0 top-0 z-30 h-full bg-gradient-to-b from-black/50 via-transparent to-transparent" />
        <div className="relative z-40 p-8">
          <motion.p
            layoutId={layout ? `category-${card.category}` : undefined}
            className="text-left font-sans text-sm font-medium text-white md:text-base"
          >
            {card.category}
          </motion.p>
          <motion.p
            layoutId={layout ? `title-${card.title}` : undefined}
            className="mt-2 max-w-xs text-left font-sans text-xl font-semibold [text-wrap:balance] text-white md:text-3xl"
          >
            {card.title}
          </motion.p>
        </div>
        <BlurImage
          src={card.src}
          alt={card.title}
          fill
          className="absolute inset-0 z-10 object-cover"
        />
      </motion.button>
    </>
  );
};

export const BlurImage = ({
  height,
  width,
  src,
  className,
  alt,
  ...rest
}: ImageProps) => {
  const [isLoading, setLoading] = useState(true);
  return (
    <img
      className={cn(
        "h-full w-full transition duration-300",
        isLoading ? "blur-sm" : "blur-0",
        className,
      )}
      onLoad={() => setLoading(false)}
      src={src as string}
      width={width}
      height={height}
      loading="lazy"
      decoding="async"
      blurDataURL={typeof src === "string" ? src : undefined}
      alt={alt ? alt : "Background of a beautiful view"}
      {...rest}
    />
  );
};
</file>

<file path="frontend/src/components/ui/aurora-background.tsx">
;
import { cn } from "@/lib/utils";
import React, { ReactNode } from "react";

interface AuroraBackgroundProps extends React.HTMLProps<HTMLDivElement> {
  children: ReactNode;
  showRadialGradient?: boolean;
}

export const AuroraBackground = ({
  className,
  children,
  showRadialGradient = true,
  ...props
}: AuroraBackgroundProps) => {
  return (
    <main>
      <div
        className={cn(
          "transition-bg relative flex h-[100vh] flex-col items-center justify-center bg-zinc-50 text-slate-950 dark:bg-zinc-900",
          className,
        )}
        {...props}
      >
        <div
          className="absolute inset-0 overflow-hidden"
          style={
            {
              "--aurora":
                "repeating-linear-gradient(100deg,#3b82f6_10%,#a5b4fc_15%,#93c5fd_20%,#ddd6fe_25%,#60a5fa_30%)",
              "--dark-gradient":
                "repeating-linear-gradient(100deg,#000_0%,#000_7%,transparent_10%,transparent_12%,#000_16%)",
              "--white-gradient":
                "repeating-linear-gradient(100deg,#fff_0%,#fff_7%,transparent_10%,transparent_12%,#fff_16%)",

              "--blue-300": "#93c5fd",
              "--blue-400": "#60a5fa",
              "--blue-500": "#3b82f6",
              "--indigo-300": "#a5b4fc",
              "--violet-200": "#ddd6fe",
              "--black": "#000",
              "--white": "#fff",
              "--transparent": "transparent",
            } as React.CSSProperties
          }
        >
          <div
            //   I'm sorry but this is what peak developer performance looks like // trigger warning
            className={cn(
              `after:animate-aurora pointer-events-none absolute -inset-[10px] [background-image:var(--white-gradient),var(--aurora)] [background-size:300%,_200%] [background-position:50%_50%,50%_50%] opacity-50 blur-[10px] invert filter will-change-transform [--aurora:repeating-linear-gradient(100deg,var(--blue-500)_10%,var(--indigo-300)_15%,var(--blue-300)_20%,var(--violet-200)_25%,var(--blue-400)_30%)] [--dark-gradient:repeating-linear-gradient(100deg,var(--black)_0%,var(--black)_7%,var(--transparent)_10%,var(--transparent)_12%,var(--black)_16%)] [--white-gradient:repeating-linear-gradient(100deg,var(--white)_0%,var(--white)_7%,var(--transparent)_10%,var(--transparent)_12%,var(--white)_16%)] after:absolute after:inset-0 after:[background-image:var(--white-gradient),var(--aurora)] after:[background-size:200%,_100%] after:[background-attachment:fixed] after:mix-blend-difference after:content-[""] dark:[background-image:var(--dark-gradient),var(--aurora)] dark:invert-0 after:dark:[background-image:var(--dark-gradient),var(--aurora)]`,

              showRadialGradient &&
              `[mask-image:radial-gradient(ellipse_at_100%_0%,black_10%,var(--transparent)_70%)]`,
            )}
          ></div>
        </div>
        {children}
      </div>
    </main>
  );
};
</file>

<file path="frontend/src/components/ui/background-beams-with-collision.tsx">
;
import { cn } from "@/lib/utils";
import { motion, AnimatePresence } from "motion/react";
import React, { useRef, useState, useEffect } from "react";

export const BackgroundBeamsWithCollision = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const parentRef = useRef<HTMLDivElement>(null);

  const beams = [
    {
      initialX: 10,
      translateX: 10,
      duration: 7,
      repeatDelay: 3,
      delay: 2,
    },
    {
      initialX: 600,
      translateX: 600,
      duration: 3,
      repeatDelay: 3,
      delay: 4,
    },
    {
      initialX: 100,
      translateX: 100,
      duration: 7,
      repeatDelay: 7,
      className: "h-6",
    },
    {
      initialX: 400,
      translateX: 400,
      duration: 5,
      repeatDelay: 14,
      delay: 4,
    },
    {
      initialX: 800,
      translateX: 800,
      duration: 11,
      repeatDelay: 2,
      className: "h-20",
    },
    {
      initialX: 1000,
      translateX: 1000,
      duration: 4,
      repeatDelay: 2,
      className: "h-12",
    },
    {
      initialX: 1200,
      translateX: 1200,
      duration: 6,
      repeatDelay: 4,
      delay: 2,
      className: "h-6",
    },
  ];

  return (
    <div
      ref={parentRef}
      className={cn(
        "h-96 md:h-[40rem] bg-gradient-to-b from-white to-neutral-100 dark:from-neutral-950 dark:to-neutral-800 relative flex items-center w-full justify-center overflow-hidden",
        // h-screen if you want bigger
        className
      )}
    >
      {beams.map((beam) => (
        <CollisionMechanism
          key={beam.initialX + "beam-idx"}
          beamOptions={beam}
          containerRef={containerRef}
          parentRef={parentRef}
        />
      ))}

      {children}
      <div
        ref={containerRef}
        className="absolute bottom-0 bg-neutral-100 w-full inset-x-0 pointer-events-none"
        style={{
          boxShadow:
            "0 0 24px rgba(34, 42, 53, 0.06), 0 1px 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(34, 42, 53, 0.04), 0 0 4px rgba(34, 42, 53, 0.08), 0 16px 68px rgba(47, 48, 55, 0.05), 0 1px 0 rgba(255, 255, 255, 0.1) inset",
        }}
      ></div>
    </div>
  );
};

const CollisionMechanism = React.forwardRef<
  HTMLDivElement,
  {
    containerRef: React.RefObject<HTMLDivElement>;
    parentRef: React.RefObject<HTMLDivElement>;
    beamOptions?: {
      initialX?: number;
      translateX?: number;
      initialY?: number;
      translateY?: number;
      rotate?: number;
      className?: string;
      duration?: number;
      delay?: number;
      repeatDelay?: number;
    };
  }
>(({ parentRef, containerRef, beamOptions = {} }, ref) => {
  const beamRef = useRef<HTMLDivElement>(null);
  const [collision, setCollision] = useState<{
    detected: boolean;
    coordinates: { x: number; y: number } | null;
  }>({
    detected: false,
    coordinates: null,
  });
  const [beamKey, setBeamKey] = useState(0);
  const [cycleCollisionDetected, setCycleCollisionDetected] = useState(false);

  useEffect(() => {
    const checkCollision = () => {
      if (
        beamRef.current &&
        containerRef.current &&
        parentRef.current &&
        !cycleCollisionDetected
      ) {
        const beamRect = beamRef.current.getBoundingClientRect();
        const containerRect = containerRef.current.getBoundingClientRect();
        const parentRect = parentRef.current.getBoundingClientRect();

        if (beamRect.bottom >= containerRect.top) {
          const relativeX =
            beamRect.left - parentRect.left + beamRect.width / 2;
          const relativeY = beamRect.bottom - parentRect.top;

          setCollision({
            detected: true,
            coordinates: {
              x: relativeX,
              y: relativeY,
            },
          });
          setCycleCollisionDetected(true);
        }
      }
    };

    const animationInterval = setInterval(checkCollision, 50);

    return () => clearInterval(animationInterval);
  }, [cycleCollisionDetected, containerRef]);

  useEffect(() => {
    if (collision.detected && collision.coordinates) {
      setTimeout(() => {
        setCollision({ detected: false, coordinates: null });
        setCycleCollisionDetected(false);
      }, 2000);

      setTimeout(() => {
        setBeamKey((prevKey) => prevKey + 1);
      }, 2000);
    }
  }, [collision]);

  return (
    <>
      <motion.div
        key={beamKey}
        ref={beamRef}
        animate="animate"
        initial={{
          translateY: beamOptions.initialY || "-200px",
          translateX: beamOptions.initialX || "0px",
          rotate: beamOptions.rotate || 0,
        }}
        variants={{
          animate: {
            translateY: beamOptions.translateY || "1800px",
            translateX: beamOptions.translateX || "0px",
            rotate: beamOptions.rotate || 0,
          },
        }}
        transition={{
          duration: beamOptions.duration || 8,
          repeat: Infinity,
          repeatType: "loop",
          ease: "linear",
          delay: beamOptions.delay || 0,
          repeatDelay: beamOptions.repeatDelay || 0,
        }}
        className={cn(
          "absolute left-0 top-20 m-auto h-14 w-px rounded-full bg-gradient-to-t from-indigo-500 via-purple-500 to-transparent",
          beamOptions.className
        )}
      />
      <AnimatePresence>
        {collision.detected && collision.coordinates && (
          <Explosion
            key={`${collision.coordinates.x}-${collision.coordinates.y}`}
            className=""
            style={{
              left: `${collision.coordinates.x}px`,
              top: `${collision.coordinates.y}px`,
              transform: "translate(-50%, -50%)",
            }}
          />
        )}
      </AnimatePresence>
    </>
  );
});

CollisionMechanism.displayName = "CollisionMechanism";

const Explosion = ({ ...props }: React.HTMLProps<HTMLDivElement>) => {
  const spans = Array.from({ length: 20 }, (_, index) => ({
    id: index,
    initialX: 0,
    initialY: 0,
    directionX: Math.floor(Math.random() * 80 - 40),
    directionY: Math.floor(Math.random() * -50 - 10),
  }));

  return (
    <div {...props} className={cn("absolute z-50 h-2 w-2", props.className)}>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        transition={{ duration: 1.5, ease: "easeOut" }}
        className="absolute -inset-x-10 top-0 m-auto h-2 w-10 rounded-full bg-gradient-to-r from-transparent via-indigo-500 to-transparent blur-sm"
      ></motion.div>
      {spans.map((span) => (
        <motion.span
          key={span.id}
          initial={{ x: span.initialX, y: span.initialY, opacity: 1 }}
          animate={{
            x: span.directionX,
            y: span.directionY,
            opacity: 0,
          }}
          transition={{ duration: Math.random() * 1.5 + 0.5, ease: "easeOut" }}
          className="absolute h-1 w-1 rounded-full bg-gradient-to-b from-indigo-500 to-purple-500"
        />
      ))}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/background-beams.tsx">
;
import React from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export const BackgroundBeams = React.memo(
  ({ className }: { className?: string }) => {
    const paths = [
      "M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875",
      "M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867",
      "M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859",
      "M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851",
      "M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843",
      "M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835",
      "M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827",
      "M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819",
      "M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811",
      "M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803",
      "M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795",
      "M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787",
      "M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779",
      "M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771",
      "M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763",
      "M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755",
      "M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747",
      "M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739",
      "M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731",
      "M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723",
      "M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715",
      "M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707",
      "M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699",
      "M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691",
      "M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683",
      "M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675",
      "M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667",
      "M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659",
      "M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651",
      "M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643",
      "M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635",
      "M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627",
      "M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619",
      "M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611",
      "M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603",
      "M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595",
      "M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587",
      "M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579",
      "M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571",
      "M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563",
      "M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555",
      "M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547",
      "M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539",
      "M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531",
      "M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523",
      "M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515",
      "M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507",
      "M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499",
      "M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491",
      "M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483",
    ];
    return (
      <div
        className={cn(
          "absolute inset-0 flex h-full w-full items-center justify-center [mask-repeat:no-repeat] [mask-size:40px]",
          className,
        )}
      >
        <svg
          className="pointer-events-none absolute z-0 h-full w-full"
          width="100%"
          height="100%"
          viewBox="0 0 696 316"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483M-30 -589C-30 -589 38 -184 502 -57C966 70 1034 475 1034 475M-23 -597C-23 -597 45 -192 509 -65C973 62 1041 467 1041 467M-16 -605C-16 -605 52 -200 516 -73C980 54 1048 459 1048 459M-9 -613C-9 -613 59 -208 523 -81C987 46 1055 451 1055 451M-2 -621C-2 -621 66 -216 530 -89C994 38 1062 443 1062 443M5 -629C5 -629 73 -224 537 -97C1001 30 1069 435 1069 435M12 -637C12 -637 80 -232 544 -105C1008 22 1076 427 1076 427M19 -645C19 -645 87 -240 551 -113C1015 14 1083 419 1083 419"
            stroke="url(#paint0_radial_242_278)"
            strokeOpacity="0.05"
            strokeWidth="0.5"
          ></path>

          {paths.map((path, index) => (
            <motion.path
              key={`path-` + index}
              d={path}
              stroke={`url(#linearGradient-${index})`}
              strokeOpacity="0.4"
              strokeWidth="0.5"
            ></motion.path>
          ))}
          <defs>
            {paths.map((path, index) => (
              <motion.linearGradient
                id={`linearGradient-${index}`}
                key={`gradient-${index}`}
                initial={{
                  x1: "0%",
                  x2: "0%",
                  y1: "0%",
                  y2: "0%",
                }}
                animate={{
                  x1: ["0%", "100%"],
                  x2: ["0%", "95%"],
                  y1: ["0%", "100%"],
                  y2: ["0%", `${93 + Math.random() * 8}%`],
                }}
                transition={{
                  duration: Math.random() * 10 + 10,
                  ease: "easeInOut",
                  repeat: Infinity,
                  delay: Math.random() * 10,
                }}
              >
                <stop stopColor="#18CCFC" stopOpacity="0"></stop>
                <stop stopColor="#18CCFC"></stop>
                <stop offset="32.5%" stopColor="#6344F5"></stop>
                <stop offset="100%" stopColor="#AE48FF" stopOpacity="0"></stop>
              </motion.linearGradient>
            ))}

            <radialGradient
              id="paint0_radial_242_278"
              cx="0"
              cy="0"
              r="1"
              gradientUnits="userSpaceOnUse"
              gradientTransform="translate(352 34) rotate(90) scale(555 1560.62)"
            >
              <stop offset="0.0666667" stopColor="#d4d4d4"></stop>
              <stop offset="0.243243" stopColor="#d4d4d4"></stop>
              <stop offset="0.43594" stopColor="white" stopOpacity="0"></stop>
            </radialGradient>
          </defs>
        </svg>
      </div>
    );
  },
);

BackgroundBeams.displayName = "BackgroundBeams";
</file>

<file path="frontend/src/components/ui/background-boxes.tsx">
;
import React from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export const BoxesCore = ({ className, ...rest }: { className?: string }) => {
  const rows = new Array(150).fill(1);
  const cols = new Array(100).fill(1);
  let colors = [
    "#93c5fd",
    "#f9a8d4",
    "#86efac",
    "#fde047",
    "#fca5a5",
    "#d8b4fe",
    "#93c5fd",
    "#a5b4fc",
    "#c4b5fd",
  ];
  const getRandomColor = () => {
    return colors[Math.floor(Math.random() * colors.length)];
  };

  return (
    <div
      style={{
        transform: `translate(-40%,-60%) skewX(-48deg) skewY(14deg) scale(0.675) rotate(0deg) translateZ(0)`,
      }}
      className={cn(
        "absolute -top-1/4 left-1/4 z-0 flex h-full w-full -translate-x-1/2 -translate-y-1/2 p-4",
        className,
      )}
      {...rest}
    >
      {rows.map((_, i) => (
        <motion.div
          key={`row` + i}
          className="relative h-8 w-16 border-l border-slate-700"
        >
          {cols.map((_, j) => (
            <motion.div
              whileHover={{
                backgroundColor: `${getRandomColor()}`,
                transition: { duration: 0 },
              }}
              animate={{
                transition: { duration: 2 },
              }}
              key={`col` + j}
              className="relative h-8 w-16 border-t border-r border-slate-700"
            >
              {j % 2 === 0 && i % 2 === 0 ? (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  strokeWidth="1.5"
                  stroke="currentColor"
                  className="pointer-events-none absolute -top-[14px] -left-[22px] h-6 w-10 stroke-[1px] text-slate-700"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M12 6v12m6-6H6"
                  />
                </svg>
              ) : null}
            </motion.div>
          ))}
        </motion.div>
      ))}
    </div>
  );
};

export const Boxes = React.memo(BoxesCore);
</file>

<file path="frontend/src/components/ui/background-gradient-animation.tsx">
;
import { cn } from "@/lib/utils";
import { useEffect, useRef, useState } from "react";

export const BackgroundGradientAnimation = ({
  gradientBackgroundStart = "rgb(108, 0, 162)",
  gradientBackgroundEnd = "rgb(0, 17, 82)",
  firstColor = "18, 113, 255",
  secondColor = "221, 74, 255",
  thirdColor = "100, 220, 255",
  fourthColor = "200, 50, 50",
  fifthColor = "180, 180, 50",
  pointerColor = "140, 100, 255",
  size = "80%",
  blendingValue = "hard-light",
  children,
  className,
  interactive = true,
  containerClassName,
}: {
  gradientBackgroundStart?: string;
  gradientBackgroundEnd?: string;
  firstColor?: string;
  secondColor?: string;
  thirdColor?: string;
  fourthColor?: string;
  fifthColor?: string;
  pointerColor?: string;
  size?: string;
  blendingValue?: string;
  children?: React.ReactNode;
  className?: string;
  interactive?: boolean;
  containerClassName?: string;
}) => {
  const interactiveRef = useRef<HTMLDivElement>(null);

  const [curX, setCurX] = useState(0);
  const [curY, setCurY] = useState(0);
  const [tgX, setTgX] = useState(0);
  const [tgY, setTgY] = useState(0);
  useEffect(() => {
    document.body.style.setProperty(
      "--gradient-background-start",
      gradientBackgroundStart
    );
    document.body.style.setProperty(
      "--gradient-background-end",
      gradientBackgroundEnd
    );
    document.body.style.setProperty("--first-color", firstColor);
    document.body.style.setProperty("--second-color", secondColor);
    document.body.style.setProperty("--third-color", thirdColor);
    document.body.style.setProperty("--fourth-color", fourthColor);
    document.body.style.setProperty("--fifth-color", fifthColor);
    document.body.style.setProperty("--pointer-color", pointerColor);
    document.body.style.setProperty("--size", size);
    document.body.style.setProperty("--blending-value", blendingValue);
  }, []);

  useEffect(() => {
    function move() {
      if (!interactiveRef.current) {
        return;
      }
      setCurX(curX + (tgX - curX) / 20);
      setCurY(curY + (tgY - curY) / 20);
      interactiveRef.current.style.transform = `translate(${Math.round(
        curX
      )}px, ${Math.round(curY)}px)`;
    }

    move();
  }, [tgX, tgY]);

  const handleMouseMove = (event: React.MouseEvent<HTMLDivElement>) => {
    if (interactiveRef.current) {
      const rect = interactiveRef.current.getBoundingClientRect();
      setTgX(event.clientX - rect.left);
      setTgY(event.clientY - rect.top);
    }
  };

  const [isSafari, setIsSafari] = useState(false);
  useEffect(() => {
    setIsSafari(/^((?!chrome|android).)*safari/i.test(navigator.userAgent));
  }, []);

  return (
    <div
      className={cn(
        "h-screen w-screen relative overflow-hidden top-0 left-0 bg-[linear-gradient(40deg,var(--gradient-background-start),var(--gradient-background-end))]",
        containerClassName
      )}
    >
      <svg className="hidden">
        <defs>
          <filter id="blurMe">
            <feGaussianBlur
              in="SourceGraphic"
              stdDeviation="10"
              result="blur"
            />
            <feColorMatrix
              in="blur"
              mode="matrix"
              values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8"
              result="goo"
            />
            <feBlend in="SourceGraphic" in2="goo" />
          </filter>
        </defs>
      </svg>
      <div className={cn("", className)}>{children}</div>
      <div
        className={cn(
          "gradients-container h-full w-full blur-lg",
          isSafari ? "blur-2xl" : "[filter:url(#blurMe)_blur(40px)]"
        )}
      >
        <div
          className={cn(
            `absolute [background:radial-gradient(circle_at_center,_var(--first-color)_0,_var(--first-color)_50%)_no-repeat]`,
            `[mix-blend-mode:var(--blending-value)] w-[var(--size)] h-[var(--size)] top-[calc(50%-var(--size)/2)] left-[calc(50%-var(--size)/2)]`,
            `[transform-origin:center_center]`,
            `animate-first`,
            `opacity-100`
          )}
        ></div>
        <div
          className={cn(
            `absolute [background:radial-gradient(circle_at_center,_rgba(var(--second-color),_0.8)_0,_rgba(var(--second-color),_0)_50%)_no-repeat]`,
            `[mix-blend-mode:var(--blending-value)] w-[var(--size)] h-[var(--size)] top-[calc(50%-var(--size)/2)] left-[calc(50%-var(--size)/2)]`,
            `[transform-origin:calc(50%-400px)]`,
            `animate-second`,
            `opacity-100`
          )}
        ></div>
        <div
          className={cn(
            `absolute [background:radial-gradient(circle_at_center,_rgba(var(--third-color),_0.8)_0,_rgba(var(--third-color),_0)_50%)_no-repeat]`,
            `[mix-blend-mode:var(--blending-value)] w-[var(--size)] h-[var(--size)] top-[calc(50%-var(--size)/2)] left-[calc(50%-var(--size)/2)]`,
            `[transform-origin:calc(50%+400px)]`,
            `animate-third`,
            `opacity-100`
          )}
        ></div>
        <div
          className={cn(
            `absolute [background:radial-gradient(circle_at_center,_rgba(var(--fourth-color),_0.8)_0,_rgba(var(--fourth-color),_0)_50%)_no-repeat]`,
            `[mix-blend-mode:var(--blending-value)] w-[var(--size)] h-[var(--size)] top-[calc(50%-var(--size)/2)] left-[calc(50%-var(--size)/2)]`,
            `[transform-origin:calc(50%-200px)]`,
            `animate-fourth`,
            `opacity-70`
          )}
        ></div>
        <div
          className={cn(
            `absolute [background:radial-gradient(circle_at_center,_rgba(var(--fifth-color),_0.8)_0,_rgba(var(--fifth-color),_0)_50%)_no-repeat]`,
            `[mix-blend-mode:var(--blending-value)] w-[var(--size)] h-[var(--size)] top-[calc(50%-var(--size)/2)] left-[calc(50%-var(--size)/2)]`,
            `[transform-origin:calc(50%-800px)_calc(50%+800px)]`,
            `animate-fifth`,
            `opacity-100`
          )}
        ></div>

        {interactive && (
          <div
            ref={interactiveRef}
            onMouseMove={handleMouseMove}
            className={cn(
              `absolute [background:radial-gradient(circle_at_center,_rgba(var(--pointer-color),_0.8)_0,_rgba(var(--pointer-color),_0)_50%)_no-repeat]`,
              `[mix-blend-mode:var(--blending-value)] w-full h-full -top-1/2 -left-1/2`,
              `opacity-70`
            )}
          ></div>
        )}
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/background-lines.tsx">
;
import { cn } from "@/lib/utils";
import { motion } from "motion/react";
import React from "react";

export const BackgroundLines = ({
  children,
  className,
  svgOptions,
}: {
  children: React.ReactNode;
  className?: string;
  svgOptions?: {
    duration?: number;
  };
}) => {
  return (
    <div
      className={cn(
        "h-[20rem] md:h-screen w-full bg-white dark:bg-black",
        className
      )}
    >
      <SVG svgOptions={svgOptions} />
      {children}
    </div>
  );
};

const pathVariants = {
  initial: { strokeDashoffset: 800, strokeDasharray: "50 800" },
  animate: {
    strokeDashoffset: 0,
    strokeDasharray: "20 800",
    opacity: [0, 1, 1, 0],
  },
};

const SVG = ({
  svgOptions,
}: {
  svgOptions?: {
    duration?: number;
  };
}) => {
  const paths = [
    "M720 450C720 450 742.459 440.315 755.249 425.626C768.039 410.937 778.88 418.741 789.478 401.499C800.076 384.258 817.06 389.269 826.741 380.436C836.423 371.603 851.957 364.826 863.182 356.242C874.408 347.657 877.993 342.678 898.867 333.214C919.741 323.75 923.618 319.88 934.875 310.177C946.133 300.474 960.784 300.837 970.584 287.701C980.384 274.564 993.538 273.334 1004.85 263.087C1016.15 252.84 1026.42 250.801 1038.22 242.1C1050.02 233.399 1065.19 230.418 1074.63 215.721C1084.07 201.024 1085.49 209.128 1112.65 194.884C1139.8 180.64 1132.49 178.205 1146.43 170.636C1160.37 163.066 1168.97 158.613 1181.46 147.982C1193.95 137.35 1191.16 131.382 1217.55 125.645C1243.93 119.907 1234.19 118.899 1254.53 100.846C1274.86 82.7922 1275.12 92.8914 1290.37 76.09C1305.62 59.2886 1313.91 62.1868 1323.19 56.7536C1332.48 51.3204 1347.93 42.8082 1361.95 32.1468C1375.96 21.4855 1374.06 25.168 1397.08 10.1863C1420.09 -4.79534 1421.41 -3.16992 1431.52 -15.0078",
    "M720 450C720 450 741.044 435.759 753.062 410.636C765.079 385.514 770.541 386.148 782.73 370.489C794.918 354.83 799.378 353.188 811.338 332.597C823.298 312.005 825.578 306.419 843.707 295.493C861.837 284.568 856.194 273.248 877.376 256.48C898.558 239.713 887.536 227.843 909.648 214.958C931.759 202.073 925.133 188.092 941.063 177.621C956.994 167.151 952.171 154.663 971.197 135.041C990.222 115.418 990.785 109.375 999.488 96.1291C1008.19 82.8827 1011.4 82.2181 1032.65 61.8861C1053.9 41.5541 1045.74 48.0281 1064.01 19.5798C1082.29 -8.86844 1077.21 -3.89415 1093.7 -19.66C1110.18 -35.4258 1105.91 -46.1146 1127.68 -60.2834C1149.46 -74.4523 1144.37 -72.1024 1154.18 -97.6802C1163.99 -123.258 1165.6 -111.332 1186.21 -135.809C1206.81 -160.285 1203.29 -160.861 1220.31 -177.633C1237.33 -194.406 1236.97 -204.408 1250.42 -214.196",
    "M720 450C720 450 712.336 437.768 690.248 407.156C668.161 376.544 672.543 394.253 665.951 365.784C659.358 337.316 647.903 347.461 636.929 323.197C625.956 298.933 626.831 303.639 609.939 281.01C593.048 258.381 598.7 255.282 582.342 242.504C565.985 229.726 566.053 217.66 559.169 197.116C552.284 176.572 549.348 171.846 529.347 156.529C509.345 141.211 522.053 134.054 505.192 115.653C488.33 97.2527 482.671 82.5627 473.599 70.7833C464.527 59.0039 464.784 50.2169 447 32.0721C429.215 13.9272 436.29 0.858563 423.534 -12.6868C410.777 -26.2322 407.424 -44.0808 394.364 -56.4916C381.303 -68.9024 373.709 -72.6804 365.591 -96.1992C357.473 -119.718 358.364 -111.509 338.222 -136.495C318.08 -161.481 322.797 -149.499 315.32 -181.761C307.843 -214.023 294.563 -202.561 285.795 -223.25C277.026 -243.94 275.199 -244.055 258.602 -263.871",
    "M720 450C720 450 738.983 448.651 790.209 446.852C841.436 445.052 816.31 441.421 861.866 437.296C907.422 433.172 886.273 437.037 930.656 436.651C975.04 436.264 951.399 432.343 1001.57 425.74C1051.73 419.138 1020.72 425.208 1072.85 424.127C1124.97 423.047 1114.39 420.097 1140.02 414.426C1165.65 408.754 1173.1 412.143 1214.55 411.063C1256.01 409.983 1242.78 406.182 1285.56 401.536C1328.35 396.889 1304.66 400.796 1354.41 399.573C1404.16 398.35 1381.34 394.315 1428.34 389.376C1475.35 384.438 1445.96 386.509 1497.93 385.313C1549.9 384.117 1534.63 382.499 1567.23 381.48",
    "M720 450C720 450 696.366 458.841 682.407 472.967C668.448 487.093 673.23 487.471 647.919 492.882C622.608 498.293 636.85 499.899 609.016 512.944C581.182 525.989 596.778 528.494 571.937 533.778C547.095 539.062 551.762 548.656 536.862 556.816C521.962 564.975 515.626 563.279 497.589 575.159C479.552 587.04 484.343 590.435 461.111 598.728C437.879 607.021 442.512 605.226 423.603 618.397C404.694 631.569 402.411 629.541 390.805 641.555C379.2 653.568 369.754 658.175 353.238 663.929C336.722 669.683 330.161 674.689 312.831 684.116C295.5 693.543 288.711 698.815 278.229 704.041C267.747 709.267 258.395 712.506 240.378 726.65C222.361 740.795 230.097 738.379 203.447 745.613C176.797 752.847 193.747 752.523 166.401 767.148C139.056 781.774 151.342 783.641 130.156 791.074C108.97 798.507 116.461 802.688 96.0974 808.817C75.7334 814.946 83.8553 819.505 59.4513 830.576C35.0473 841.648 48.2548 847.874 21.8337 853.886C-4.58739 859.898 10.5966 869.102 -16.396 874.524",
    "M720 450C720 450 695.644 482.465 682.699 506.197C669.755 529.929 671.059 521.996 643.673 556.974C616.286 591.951 625.698 590.8 606.938 615.255C588.178 639.71 592.715 642.351 569.76 665.92C546.805 689.49 557.014 687.498 538.136 722.318C519.258 757.137 520.671 760.818 503.256 774.428C485.841 788.038 491.288 790.063 463.484 831.358C435.681 872.653 437.554 867.001 425.147 885.248C412.74 903.495 411.451 911.175 389.505 934.331C367.559 957.486 375.779 966.276 352.213 990.918C328.647 1015.56 341.908 1008.07 316.804 1047.24C291.699 1086.42 301.938 1060.92 276.644 1100.23C251.349 1139.54 259.792 1138.78 243.151 1153.64",
    "M719.974 450C719.974 450 765.293 459.346 789.305 476.402C813.318 493.459 825.526 487.104 865.093 495.586C904.659 504.068 908.361 510.231 943.918 523.51C979.475 536.789 963.13 535.277 1009.79 547.428C1056.45 559.579 1062.34 555.797 1089.82 568.96C1117.31 582.124 1133.96 582.816 1159.12 592.861C1184.28 602.906 1182.84 603.359 1233.48 614.514C1284.12 625.67 1254.63 632.207 1306.33 644.465C1358.04 656.723 1359.27 656.568 1378.67 670.21C1398.07 683.852 1406.16 676.466 1456.34 692.827C1506.51 709.188 1497.73 708.471 1527.54 715.212",
    "M720 450C720 450 727.941 430.821 734.406 379.251C740.87 327.681 742.857 359.402 757.864 309.798C772.871 260.194 761.947 271.093 772.992 244.308C784.036 217.524 777.105 200.533 786.808 175.699C796.511 150.864 797.141 144.333 808.694 107.307C820.247 70.2821 812.404 88.4169 819.202 37.1016C826 -14.2137 829.525 -0.990829 839.341 -30.3874C849.157 -59.784 844.404 -61.5924 855.042 -98.7516C865.68 -135.911 862.018 -144.559 876.924 -167.488C891.83 -190.418 886.075 -213.535 892.87 -237.945C899.664 -262.355 903.01 -255.031 909.701 -305.588C916.393 -356.144 917.232 -330.612 925.531 -374.777",
    "M720 450C720 450 722.468 499.363 726.104 520.449C729.739 541.535 730.644 550.025 738.836 589.07C747.028 628.115 743.766 639.319 746.146 659.812C748.526 680.306 754.006 693.598 757.006 732.469C760.007 771.34 760.322 765.244 763.893 805.195C767.465 845.146 769.92 822.227 773.398 868.469C776.875 914.71 776.207 901.365 778.233 940.19C780.259 979.015 782.53 990.477 787.977 1010.39C793.424 1030.3 791.788 1060.01 797.243 1082.24C802.698 1104.47 801.758 1130.29 808.181 1149.64C814.604 1168.99 813.135 1171.5 818.026 1225.28C822.918 1279.06 820.269 1267.92 822.905 1293.75",
    "M720 450C720 450 737.033 492.46 757.251 515.772C777.468 539.084 768.146 548.687 785.517 570.846C802.887 593.005 814.782 609.698 824.589 634.112C834.395 658.525 838.791 656.702 855.55 695.611C872.31 734.519 875.197 724.854 890.204 764.253C905.21 803.653 899.844 790.872 919.927 820.763C940.01 850.654 939.071 862.583 954.382 886.946C969.693 911.309 968.683 909.254 993.997 945.221C1019.31 981.187 1006.67 964.436 1023.49 1007.61C1040.32 1050.79 1046.15 1038.25 1059.01 1073.05C1071.88 1107.86 1081.39 1096.19 1089.45 1131.96C1097.51 1167.73 1106.52 1162.12 1125.77 1196.89",
    "M720 450C720 450 687.302 455.326 670.489 467.898C653.676 480.47 653.159 476.959 626.58 485.127C600.002 493.295 599.626 495.362 577.94 503.841C556.254 512.319 556.35 507.426 533.958 517.44C511.566 527.454 505.82 526.441 486.464 539.172C467.108 551.904 461.312 546.36 439.357 553.508C417.402 560.657 406.993 567.736 389.393 572.603C371.794 577.47 371.139 583.76 344.54 587.931C317.941 592.102 327.375 593.682 299.411 607.275C271.447 620.868 283.617 615.022 249.868 622.622C216.119 630.223 227.07 630.86 203.77 638.635C180.47 646.41 168.948 652.487 156.407 657.28C143.866 662.073 132.426 669.534 110.894 675.555C89.3615 681.575 90.3234 680.232 61.1669 689.897C32.0105 699.562 34.3696 702.021 15.9011 709.789C-2.56738 717.558 2.38861 719.841 -29.9494 729.462C-62.2873 739.083 -52.5552 738.225 -77.4307 744.286",
    "M720 450C720 450 743.97 465.061 754.884 490.648C765.798 516.235 781.032 501.34 791.376 525.115C801.72 548.889 808.417 538.333 829.306 564.807C850.195 591.281 852.336 582.531 865.086 601.843C877.835 621.155 874.512 621.773 902.383 643.857C930.255 665.94 921.885 655.976 938.025 681.74C954.164 707.505 959.384 709.719 977.273 720.525C995.162 731.33 994.233 731.096 1015.92 757.676C1037.61 784.257 1025.74 768.848 1047.82 795.343C1069.91 821.837 1065.95 815.45 1085.93 834.73C1105.91 854.009 1110.53 848.089 1124.97 869.759C1139.4 891.428 1140.57 881.585 1158.53 911.499C1176.5 941.414 1184.96 933.829 1194.53 948.792C1204.09 963.755 1221.35 973.711 1232.08 986.224C1242.8 998.738 1257.34 1015.61 1269.99 1026.53C1282.63 1037.45 1293.81 1040.91 1307.21 1064.56",
    "M720 450C720 450 718.24 412.717 716.359 397.31C714.478 381.902 713.988 362.237 710.785 344.829C707.582 327.42 708.407 322.274 701.686 292.106C694.965 261.937 699.926 270.857 694.84 240.765C689.753 210.674 693.055 217.076 689.674 184.902C686.293 152.728 686.041 149.091 682.676 133.657C679.311 118.223 682.23 106.005 681.826 80.8297C681.423 55.6545 677.891 60.196 675.66 30.0226C673.429 -0.150848 672.665 -7.94842 668.592 -26.771C664.52 -45.5935 664.724 -43.0755 661.034 -78.7766C657.343 -114.478 658.509 -103.181 653.867 -133.45C649.226 -163.719 650.748 -150.38 647.052 -182.682C643.357 -214.984 646.125 -214.921 645.216 -238.402C644.307 -261.883 640.872 -253.4 637.237 -291.706C633.602 -330.012 634.146 -309.868 630.717 -343.769C627.288 -377.669 628.008 -370.682 626.514 -394.844",
    "M720 450C720 450 730.384 481.55 739.215 507.557C748.047 533.564 751.618 537.619 766.222 562.033C780.825 586.447 774.187 582.307 787.606 618.195C801.025 654.082 793.116 653.536 809.138 678.315C825.16 703.095 815.485 717.073 829.898 735.518C844.311 753.964 845.351 773.196 852.197 786.599C859.042 800.001 862.876 805.65 872.809 845.974C882.742 886.297 885.179 874.677 894.963 903.246C904.747 931.816 911.787 924.243 921.827 961.809C931.867 999.374 927.557 998.784 940.377 1013.59C953.197 1028.4 948.555 1055.77 966.147 1070.54C983.739 1085.31 975.539 1105.69 988.65 1125.69C1001.76 1145.69 1001.82 1141.59 1007.54 1184.37C1013.27 1227.15 1018.98 1198.8 1029.67 1241.58",
    "M720 450C720 450 684.591 447.135 657.288 439.014C629.985 430.894 618.318 435.733 600.698 431.723C583.077 427.714 566.975 425.639 537.839 423.315C508.704 420.991 501.987 418.958 476.29 413.658C450.592 408.359 460.205 410.268 416.97 408.927C373.736 407.586 396.443 401.379 359.262 396.612C322.081 391.844 327.081 393.286 300.224 391.917C273.368 390.547 264.902 385.49 241.279 382.114C217.655 378.739 205.497 378.95 181.98 377.253C158.464 375.556 150.084 369.938 117.474 366.078C84.8644 362.218 81.5401 361.501 58.8734 358.545C36.2067 355.59 33.6442 351.938 -3.92281 346.728C-41.4898 341.519 -18.6466 345.082 -61.4654 341.179C-104.284 337.275 -102.32 338.048 -121.821 332.369",
    "M720 450C720 450 714.384 428.193 708.622 410.693C702.86 393.193 705.531 397.066 703.397 372.66C701.264 348.254 697.8 345.181 691.079 330.466C684.357 315.751 686.929 312.356 683.352 292.664C679.776 272.973 679.079 273.949 674.646 255.07C670.213 236.192 670.622 244.371 665.271 214.561C659.921 184.751 659.864 200.13 653.352 172.377C646.841 144.623 647.767 151.954 644.123 136.021C640.48 120.088 638.183 107.491 636.127 96.8178C634.072 86.1443 632.548 77.5871 626.743 54.0492C620.938 30.5112 622.818 28.9757 618.613 16.577C614.407 4.17831 615.555 -13.1527 608.752 -24.5691C601.95 -35.9855 603.375 -51.0511 599.526 -60.1492C595.678 -69.2472 593.676 -79.3623 587.865 -100.431C582.053 -121.5 584.628 -117.913 578.882 -139.408C573.137 -160.903 576.516 -161.693 571.966 -182.241C567.416 -202.789 567.42 -198.681 562.834 -218.28C558.248 -237.879 555.335 -240.47 552.072 -260.968C548.808 -281.466 547.605 -280.956 541.772 -296.427C535.94 -311.898 537.352 -315.211 535.128 -336.018C532.905 -356.826 531.15 -360.702 524.129 -377.124",
    "M720 450C720 450 711.433 430.82 707.745 409.428C704.056 388.035 704.937 381.711 697.503 370.916C690.069 360.121 691.274 359.999 685.371 334.109C679.469 308.22 677.496 323.883 671.24 294.303C664.984 264.724 667.608 284.849 662.065 258.116C656.522 231.383 656.357 229.024 647.442 216.172C638.527 203.319 640.134 192.925 635.555 178.727C630.976 164.529 630.575 150.179 624.994 139.987C619.413 129.794 615.849 112.779 612.251 103.074C608.654 93.3696 606.942 85.6729 603.041 63.0758C599.14 40.4787 595.242 36.9267 589.533 23.8967C583.823 10.8666 581.18 -2.12401 576.96 -14.8333C572.739 -27.5425 572.696 -37.7703 568.334 -51.3441C563.972 -64.9179 562.14 -67.2124 556.992 -93.299C551.844 -119.386 550.685 -109.743 544.056 -129.801C537.428 -149.859 534.97 -151.977 531.034 -170.076C527.099 -188.175 522.979 -185.119 519.996 -207.061C517.012 -229.004 511.045 -224.126 507.478 -247.077C503.912 -270.029 501.417 -271.033 495.534 -287C489.651 -302.968 491.488 -300.977 484.68 -326.317C477.872 -351.657 476.704 -348.494 472.792 -363.258",
    "M720 450C720 450 723.524 466.673 728.513 497.319C733.503 527.964 731.894 519.823 740.001 542.706C748.108 565.589 744.225 560.598 748.996 588.365C753.766 616.131 756.585 602.096 761.881 636.194C767.178 670.293 768.155 649.089 771.853 679.845C775.551 710.6 775.965 703.738 781.753 724.555C787.54 745.372 787.248 758.418 791.422 773.79C795.596 789.162 798.173 807.631 804.056 819.914C809.938 832.197 806.864 843.07 811.518 865.275C816.171 887.48 816.551 892.1 822.737 912.643C828.922 933.185 830.255 942.089 833.153 956.603C836.052 971.117 839.475 969.242 846.83 1003.98C854.185 1038.71 850.193 1028.86 854.119 1048.67C858.045 1068.48 857.963 1074.39 863.202 1094.94C868.44 1115.49 867.891 1108.03 874.497 1138.67C881.102 1169.31 880.502 1170.72 887.307 1186.56C894.111 1202.4 890.388 1209.75 896.507 1231.25C902.627 1252.76 902.54 1245.39 906.742 1279.23",
    "M720 450C720 450 698.654 436.893 669.785 424.902C640.916 412.91 634.741 410.601 615.568 402.586C596.396 394.571 594.829 395.346 568.66 378.206C542.492 361.067 547.454 359.714 514.087 348.978C480.721 338.242 479.79 334.731 467.646 329.846C455.502 324.96 448.63 312.156 416.039 303.755C383.448 295.354 391.682 293.73 365.021 280.975C338.36 268.219 328.715 267.114 309.809 252.575C290.903 238.036 277.185 246.984 259.529 230.958C241.873 214.931 240.502 224.403 211.912 206.241C183.323 188.078 193.288 190.89 157.03 181.714C120.772 172.538 127.621 170.109 108.253 154.714C88.8857 139.319 75.4927 138.974 56.9647 132.314C38.4366 125.654 33.8997 118.704 4.77584 106.7C-24.348 94.6959 -19.1326 90.266 -46.165 81.9082",
    "M720 450C720 450 711.596 475.85 701.025 516.114C690.455 556.378 697.124 559.466 689.441 579.079C681.758 598.693 679.099 597.524 675.382 642.732C671.665 687.94 663.4 677.024 657.844 700.179C652.288 723.333 651.086 724.914 636.904 764.536C622.723 804.158 631.218 802.853 625.414 827.056C619.611 851.259 613.734 856.28 605.94 892.262C598.146 928.244 595.403 924.314 588.884 957.785C582.364 991.255 583.079 991.176 575.561 1022.63C568.044 1054.08 566.807 1058.45 558.142 1084.32C549.476 1110.2 553.961 1129.13 542.367 1149.25C530.772 1169.37 538.268 1180.37 530.338 1207.27C522.407 1234.17 520.826 1245.53 512.156 1274.2",
    "M720 450C720 450 730.571 424.312 761.424 411.44C792.277 398.569 772.385 393.283 804.069 377.232C835.752 361.182 829.975 361.373 848.987 342.782C867.999 324.192 877.583 330.096 890.892 303.897C904.201 277.698 910.277 282.253 937.396 264.293C964.514 246.333 949.357 246.834 978.7 230.438C1008.04 214.042 990.424 217.952 1021.51 193.853C1052.6 169.753 1054.28 184.725 1065.97 158.075C1077.65 131.425 1087.76 139.068 1111.12 120.345C1134.49 101.622 1124.9 104.858 1151.67 86.3162C1178.43 67.7741 1167.09 66.2676 1197.53 47.2606C1227.96 28.2536 1225.78 23.2186 1239.27 12.9649C1252.76 2.7112 1269.32 -9.47929 1282.88 -28.5587C1296.44 -47.6381 1305.81 -41.3853 1323.82 -62.7027C1341.83 -84.0202 1340.32 -82.3794 1368.98 -98.9326",
  ];

  const colors = [
    "#46A5CA",
    "#8C2F2F",
    "#4FAE4D",
    "#D6590C",
    "#811010",
    "#247AFB",
    "#A534A0",
    "#A8A438",
    "#D6590C",
    "#46A29C",
    "#670F6D",
    "#D7C200",
    "#59BBEB",
    "#504F1C",
    "#55BC54",
    "#4D3568",
    "#9F39A5",
    "#363636",
    "#860909",
    "#6A286F",
    "#604483",
  ];
  return (
    <motion.svg
      viewBox="0 0 1440 900"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 1 }}
      className="absolute inset-0 w-full h-full"
    >
      {paths.map((path, idx) => (
        <motion.path
          d={path}
          stroke={colors[idx]}
          strokeWidth="2.3"
          strokeLinecap="round"
          variants={pathVariants}
          initial="initial"
          animate="animate"
          transition={{
            duration: svgOptions?.duration || 10,
            ease: "linear",
            repeat: Infinity,
            repeatType: "loop",
            delay: Math.floor(Math.random() * 10),
            repeatDelay: Math.floor(Math.random() * 10 + 2),
          }}
          key={`path-first-${idx}`}
        />
      ))}

      {/* duplicate for more paths */}
      {paths.map((path, idx) => (
        <motion.path
          d={path}
          stroke={colors[idx]}
          strokeWidth="2.3"
          strokeLinecap="round"
          variants={pathVariants}
          initial="initial"
          animate="animate"
          transition={{
            duration: svgOptions?.duration || 10,
            ease: "linear",
            repeat: Infinity,
            repeatType: "loop",
            delay: Math.floor(Math.random() * 10),
            repeatDelay: Math.floor(Math.random() * 10 + 2),
          }}
          key={`path-second-${idx}`}
        />
      ))}
    </motion.svg>
  );
};
</file>

<file path="frontend/src/components/ui/background-ripple-effect.tsx">
;
import React, { useMemo, useRef, useState } from "react";
import { cn } from "@/lib/utils";

export const BackgroundRippleEffect = ({
  rows = 8,
  cols = 27,
  cellSize = 56,
}: {
  rows?: number;
  cols?: number;
  cellSize?: number;
}) => {
  const [clickedCell, setClickedCell] = useState<{
    row: number;
    col: number;
  } | null>(null);
  const [rippleKey, setRippleKey] = useState(0);
  const ref = useRef<any>(null);

  return (
    <div
      ref={ref}
      className={cn(
        "absolute inset-0 h-full w-full",
        "[--cell-border-color:var(--color-neutral-300)] [--cell-fill-color:var(--color-neutral-100)] [--cell-shadow-color:var(--color-neutral-500)]",
        "dark:[--cell-border-color:var(--color-neutral-700)] dark:[--cell-fill-color:var(--color-neutral-900)] dark:[--cell-shadow-color:var(--color-neutral-800)]",
      )}
    >
      <div className="relative h-auto w-auto overflow-hidden">
        <div className="pointer-events-none absolute inset-0 z-[2] h-full w-full overflow-hidden" />
        <DivGrid
          key={`base-${rippleKey}`}
          className="mask-radial-from-20% mask-radial-at-top opacity-600"
          rows={rows}
          cols={cols}
          cellSize={cellSize}
          borderColor="var(--cell-border-color)"
          fillColor="var(--cell-fill-color)"
          clickedCell={clickedCell}
          onCellClick={(row, col) => {
            setClickedCell({ row, col });
            setRippleKey((k) => k + 1);
          }}
          interactive
        />
      </div>
    </div>
  );
};

type DivGridProps = {
  className?: string;
  rows: number;
  cols: number;
  cellSize: number; // in pixels
  borderColor: string;
  fillColor: string;
  clickedCell: { row: number; col: number } | null;
  onCellClick?: (row: number, col: number) => void;
  interactive?: boolean;
};

type CellStyle = React.CSSProperties & {
  ["--delay"]?: string;
  ["--duration"]?: string;
};

const DivGrid = ({
  className,
  rows = 7,
  cols = 30,
  cellSize = 56,
  borderColor = "#3f3f46",
  fillColor = "rgba(14,165,233,0.3)",
  clickedCell = null,
  onCellClick = () => { },
  interactive = true,
}: DivGridProps) => {
  const cells = useMemo(
    () => Array.from({ length: rows * cols }, (_, idx) => idx),
    [rows, cols],
  );

  const gridStyle: React.CSSProperties = {
    display: "grid",
    gridTemplateColumns: `repeat(${cols}, ${cellSize}px)`,
    gridTemplateRows: `repeat(${rows}, ${cellSize}px)`,
    width: cols * cellSize,
    height: rows * cellSize,
    marginInline: "auto",
  };

  return (
    <div className={cn("relative z-[3]", className)} style={gridStyle}>
      {cells.map((idx) => {
        const rowIdx = Math.floor(idx / cols);
        const colIdx = idx % cols;
        const distance = clickedCell
          ? Math.hypot(clickedCell.row - rowIdx, clickedCell.col - colIdx)
          : 0;
        const delay = clickedCell ? Math.max(0, distance * 55) : 0; // ms
        const duration = 200 + distance * 80; // ms

        const style: CellStyle = clickedCell
          ? {
            "--delay": `${delay}ms`,
            "--duration": `${duration}ms`,
          }
          : {};

        return (
          <div
            key={idx}
            className={cn(
              "cell relative border-[0.5px] opacity-40 transition-opacity duration-150 will-change-transform hover:opacity-80 dark:shadow-[0px_0px_40px_1px_var(--cell-shadow-color)_inset]",
              clickedCell && "animate-cell-ripple [animation-fill-mode:none]",
              !interactive && "pointer-events-none",
            )}
            style={{
              backgroundColor: fillColor,
              borderColor: borderColor,
              ...style,
            }}
            onClick={
              interactive ? () => onCellClick?.(rowIdx, colIdx) : undefined
            }
          />
        );
      })}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/canvas-reveal-effect.tsx">
;
import { cn } from "@/lib/utils";
import { Canvas, useFrame, useThree } from "@react-three/fiber";
import React, { useMemo, useRef } from "react";
import * as THREE from "three";

export const CanvasRevealEffect = ({
  animationSpeed = 0.4,
  opacities = [0.3, 0.3, 0.3, 0.5, 0.5, 0.5, 0.8, 0.8, 0.8, 1],
  colors = [[0, 255, 255]],
  containerClassName,
  dotSize,
  showGradient = true,
}: {
  /**
   * 0.1 - slower
   * 1.0 - faster
   */
  animationSpeed?: number;
  opacities?: number[];
  colors?: number[][];
  containerClassName?: string;
  dotSize?: number;
  showGradient?: boolean;
}) => {
  return (
    <div className={cn("h-full relative bg-white w-full", containerClassName)}>
      <div className="h-full w-full">
        <DotMatrix
          colors={colors ?? [[0, 255, 255]]}
          dotSize={dotSize ?? 3}
          opacities={
            opacities ?? [0.3, 0.3, 0.3, 0.5, 0.5, 0.5, 0.8, 0.8, 0.8, 1]
          }
          shader={`
              float animation_speed_factor = ${animationSpeed.toFixed(1)};
              float intro_offset = distance(u_resolution / 2.0 / u_total_size, st2) * 0.01 + (random(st2) * 0.15);
              opacity *= step(intro_offset, u_time * animation_speed_factor);
              opacity *= clamp((1.0 - step(intro_offset + 0.1, u_time * animation_speed_factor)) * 1.25, 1.0, 1.25);
            `}
          center={["x", "y"]}
        />
      </div>
      {showGradient && (
        <div className="absolute inset-0 bg-gradient-to-t from-gray-950 to-[84%]" />
      )}
    </div>
  );
};

interface DotMatrixProps {
  colors?: number[][];
  opacities?: number[];
  totalSize?: number;
  dotSize?: number;
  shader?: string;
  center?: ("x" | "y")[];
}

const DotMatrix: React.FC<DotMatrixProps> = ({
  colors = [[0, 0, 0]],
  opacities = [0.04, 0.04, 0.04, 0.04, 0.04, 0.08, 0.08, 0.08, 0.08, 0.14],
  totalSize = 4,
  dotSize = 2,
  shader = "",
  center = ["x", "y"],
}) => {
  const uniforms = React.useMemo(() => {
    let colorsArray = [
      colors[0],
      colors[0],
      colors[0],
      colors[0],
      colors[0],
      colors[0],
    ];
    if (colors.length === 2) {
      colorsArray = [
        colors[0],
        colors[0],
        colors[0],
        colors[1],
        colors[1],
        colors[1],
      ];
    } else if (colors.length === 3) {
      colorsArray = [
        colors[0],
        colors[0],
        colors[1],
        colors[1],
        colors[2],
        colors[2],
      ];
    }

    return {
      u_colors: {
        value: colorsArray.map((color) => [
          color[0] / 255,
          color[1] / 255,
          color[2] / 255,
        ]),
        type: "uniform3fv",
      },
      u_opacities: {
        value: opacities,
        type: "uniform1fv",
      },
      u_total_size: {
        value: totalSize,
        type: "uniform1f",
      },
      u_dot_size: {
        value: dotSize,
        type: "uniform1f",
      },
    };
  }, [colors, opacities, totalSize, dotSize]);

  return (
    <Shader
      source={`
        precision mediump float;
        in vec2 fragCoord;

        uniform float u_time;
        uniform float u_opacities[10];
        uniform vec3 u_colors[6];
        uniform float u_total_size;
        uniform float u_dot_size;
        uniform vec2 u_resolution;
        out vec4 fragColor;
        float PHI = 1.61803398874989484820459;
        float random(vec2 xy) {
            return fract(tan(distance(xy * PHI, xy) * 0.5) * xy.x);
        }
        float map(float value, float min1, float max1, float min2, float max2) {
            return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
        }
        void main() {
            vec2 st = fragCoord.xy;
            ${center.includes("x")
          ? "st.x -= abs(floor((mod(u_resolution.x, u_total_size) - u_dot_size) * 0.5));"
          : ""
        }
            ${center.includes("y")
          ? "st.y -= abs(floor((mod(u_resolution.y, u_total_size) - u_dot_size) * 0.5));"
          : ""
        }
      float opacity = step(0.0, st.x);
      opacity *= step(0.0, st.y);

      vec2 st2 = vec2(int(st.x / u_total_size), int(st.y / u_total_size));

      float frequency = 5.0;
      float show_offset = random(st2);
      float rand = random(st2 * floor((u_time / frequency) + show_offset + frequency) + 1.0);
      opacity *= u_opacities[int(rand * 10.0)];
      opacity *= 1.0 - step(u_dot_size / u_total_size, fract(st.x / u_total_size));
      opacity *= 1.0 - step(u_dot_size / u_total_size, fract(st.y / u_total_size));

      vec3 color = u_colors[int(show_offset * 6.0)];

      ${shader}

      fragColor = vec4(color, opacity);
      fragColor.rgb *= fragColor.a;
        }`}
      uniforms={uniforms}
      maxFps={60}
    />
  );
};

type Uniforms = {
  [key: string]: {
    value: number[] | number[][] | number;
    type: string;
  };
};
const ShaderMaterial = ({
  source,
  uniforms,
  maxFps = 60,
}: {
  source: string;
  hovered?: boolean;
  maxFps?: number;
  uniforms: Uniforms;
}) => {
  const { size } = useThree();
  const ref = useRef<THREE.Mesh>();
  let lastFrameTime = 0;

  useFrame(({ clock }) => {
    if (!ref.current) return;
    const timestamp = clock.getElapsedTime();
    if (timestamp - lastFrameTime < 1 / maxFps) {
      return;
    }
    lastFrameTime = timestamp;

    const material: any = ref.current.material;
    const timeLocation = material.uniforms.u_time;
    timeLocation.value = timestamp;
  });

  const getUniforms = () => {
    const preparedUniforms: any = {};

    for (const uniformName in uniforms) {
      const uniform: any = uniforms[uniformName];

      switch (uniform.type) {
        case "uniform1f":
          preparedUniforms[uniformName] = { value: uniform.value, type: "1f" };
          break;
        case "uniform3f":
          preparedUniforms[uniformName] = {
            value: new THREE.Vector3().fromArray(uniform.value),
            type: "3f",
          };
          break;
        case "uniform1fv":
          preparedUniforms[uniformName] = { value: uniform.value, type: "1fv" };
          break;
        case "uniform3fv":
          preparedUniforms[uniformName] = {
            value: uniform.value.map((v: number[]) =>
              new THREE.Vector3().fromArray(v)
            ),
            type: "3fv",
          };
          break;
        case "uniform2f":
          preparedUniforms[uniformName] = {
            value: new THREE.Vector2().fromArray(uniform.value),
            type: "2f",
          };
          break;
        default:
          console.error(`Invalid uniform type for '${uniformName}'.`);
          break;
      }
    }

    preparedUniforms["u_time"] = { value: 0, type: "1f" };
    preparedUniforms["u_resolution"] = {
      value: new THREE.Vector2(size.width * 2, size.height * 2),
    }; // Initialize u_resolution
    return preparedUniforms;
  };

  // Shader material
  const material = useMemo(() => {
    const materialObject = new THREE.ShaderMaterial({
      vertexShader: `
      precision mediump float;
      in vec2 coordinates;
      uniform vec2 u_resolution;
      out vec2 fragCoord;
      void main(){
        float x = position.x;
        float y = position.y;
        gl_Position = vec4(x, y, 0.0, 1.0);
        fragCoord = (position.xy + vec2(1.0)) * 0.5 * u_resolution;
        fragCoord.y = u_resolution.y - fragCoord.y;
      }
      `,
      fragmentShader: source,
      uniforms: getUniforms(),
      glslVersion: THREE.GLSL3,
      blending: THREE.CustomBlending,
      blendSrc: THREE.SrcAlphaFactor,
      blendDst: THREE.OneFactor,
    });

    return materialObject;
  }, [size.width, size.height, source]);

  return (
    <mesh ref={ref as any}>
      <planeGeometry args={[2, 2]} />
      <primitive object={material} attach="material" />
    </mesh>
  );
};

const Shader: React.FC<ShaderProps> = ({ source, uniforms, maxFps = 60 }) => {
  return (
    <Canvas className="absolute inset-0  h-full w-full">
      <ShaderMaterial source={source} uniforms={uniforms} maxFps={maxFps} />
    </Canvas>
  );
};
interface ShaderProps {
  source: string;
  uniforms: {
    [key: string]: {
      value: number[] | number[][] | number;
      type: string;
    };
  };
  maxFps?: number;
}
</file>

<file path="frontend/src/components/ui/card-spotlight.tsx">
;

import { useMotionValue, motion, useMotionTemplate } from "motion/react";
import React, { MouseEvent as ReactMouseEvent, useState } from "react";
import { CanvasRevealEffect } from "@/components/ui/canvas-reveal-effect";
import { cn } from "@/lib/utils";

export const CardSpotlight = ({
  children,
  radius = 350,
  color = "#262626",
  className,
  ...props
}: {
  radius?: number;
  color?: string;
  children: React.ReactNode;
} & React.HTMLAttributes<HTMLDivElement>) => {
  const mouseX = useMotionValue(0);
  const mouseY = useMotionValue(0);
  function handleMouseMove({
    currentTarget,
    clientX,
    clientY,
  }: ReactMouseEvent<HTMLDivElement>) {
    let { left, top } = currentTarget.getBoundingClientRect();

    mouseX.set(clientX - left);
    mouseY.set(clientY - top);
  }

  const [isHovering, setIsHovering] = useState(false);
  const handleMouseEnter = () => setIsHovering(true);
  const handleMouseLeave = () => setIsHovering(false);
  return (
    <div
      className={cn(
        "group/spotlight p-10 rounded-md relative border border-neutral-800 bg-black dark:border-neutral-800",
        className
      )}
      onMouseMove={handleMouseMove}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
      {...props}
    >
      <motion.div
        className="pointer-events-none absolute z-0 -inset-px rounded-md opacity-0 transition duration-300 group-hover/spotlight:opacity-100"
        style={{
          backgroundColor: color,
          maskImage: useMotionTemplate`
            radial-gradient(
              ${radius}px circle at ${mouseX}px ${mouseY}px,
              white,
              transparent 80%
            )
          `,
        }}
      >
        {isHovering && (
          <CanvasRevealEffect
            animationSpeed={5}
            containerClassName="bg-transparent absolute inset-0 pointer-events-none"
            colors={[
              [59, 130, 246],
              [139, 92, 246],
            ]}
            dotSize={3}
          />
        )}
      </motion.div>
      {children}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/card-stack.tsx">
;
import { useEffect, useState } from "react";
import { motion } from "motion/react";

let interval: any;

type Card = {
  id: number;
  name: string;
  designation: string;
  content: React.ReactNode;
};

export const CardStack = ({
  items,
  offset,
  scaleFactor,
}: {
  items: Card[];
  offset?: number;
  scaleFactor?: number;
}) => {
  const CARD_OFFSET = offset || 10;
  const SCALE_FACTOR = scaleFactor || 0.06;
  const [cards, setCards] = useState<Card[]>(items);

  useEffect(() => {
    startFlipping();

    return () => clearInterval(interval);
  }, []);
  const startFlipping = () => {
    interval = setInterval(() => {
      setCards((prevCards: Card[]) => {
        const newArray = [...prevCards]; // create a copy of the array
        newArray.unshift(newArray.pop()!); // move the last element to the front
        return newArray;
      });
    }, 5000);
  };

  return (
    <div className="relative  h-60 w-60 md:h-60 md:w-96">
      {cards.map((card, index) => {
        return (
          <motion.div
            key={card.id}
            className="absolute dark:bg-black bg-white h-60 w-60 md:h-60 md:w-96 rounded-3xl p-4 shadow-xl border border-neutral-200 dark:border-white/[0.1]  shadow-black/[0.1] dark:shadow-white/[0.05] flex flex-col justify-between"
            style={{
              transformOrigin: "top center",
            }}
            animate={{
              top: index * -CARD_OFFSET,
              scale: 1 - index * SCALE_FACTOR, // decrease scale for cards that are behind
              zIndex: cards.length - index, //  decrease z-index for the cards that are behind
            }}
          >
            <div className="font-normal text-neutral-700 dark:text-neutral-200">
              {card.content}
            </div>
            <div>
              <p className="text-neutral-500 font-medium dark:text-white">
                {card.name}
              </p>
              <p className="text-neutral-400 font-normal dark:text-neutral-200">
                {card.designation}
              </p>
            </div>
          </motion.div>
        );
      })}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/carousel.tsx">
;
import { IconArrowNarrowRight } from "@tabler/icons-react";
import { useState, useRef, useId, useEffect } from "react";

interface SlideData {
  title: string;
  button: string;
  src: string;
}

interface SlideProps {
  slide: SlideData;
  index: number;
  current: number;
  handleSlideClick: (index: number) => void;
}

const Slide = ({ slide, index, current, handleSlideClick }: SlideProps) => {
  const slideRef = useRef<HTMLLIElement>(null);

  const xRef = useRef(0);
  const yRef = useRef(0);
  const frameRef = useRef<number>();

  useEffect(() => {
    const animate = () => {
      if (!slideRef.current) return;

      const x = xRef.current;
      const y = yRef.current;

      slideRef.current.style.setProperty("--x", `${x}px`);
      slideRef.current.style.setProperty("--y", `${y}px`);

      frameRef.current = requestAnimationFrame(animate);
    };

    frameRef.current = requestAnimationFrame(animate);

    return () => {
      if (frameRef.current) {
        cancelAnimationFrame(frameRef.current);
      }
    };
  }, []);

  const handleMouseMove = (event: React.MouseEvent) => {
    const el = slideRef.current;
    if (!el) return;

    const r = el.getBoundingClientRect();
    xRef.current = event.clientX - (r.left + Math.floor(r.width / 2));
    yRef.current = event.clientY - (r.top + Math.floor(r.height / 2));
  };

  const handleMouseLeave = () => {
    xRef.current = 0;
    yRef.current = 0;
  };

  const imageLoaded = (event: React.SyntheticEvent<HTMLImageElement>) => {
    event.currentTarget.style.opacity = "1";
  };

  const { src, button, title } = slide;

  return (
    <div className="[perspective:1200px] [transform-style:preserve-3d]">
      <li
        ref={slideRef}
        className="flex flex-1 flex-col items-center justify-center relative text-center text-white opacity-100 transition-all duration-300 ease-in-out w-[70vmin] h-[70vmin] mx-[4vmin] z-10 "
        onClick={() => handleSlideClick(index)}
        onMouseMove={handleMouseMove}
        onMouseLeave={handleMouseLeave}
        style={{
          transform:
            current !== index
              ? "scale(0.98) rotateX(8deg)"
              : "scale(1) rotateX(0deg)",
          transition: "transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",
          transformOrigin: "bottom",
        }}
      >
        <div
          className="absolute top-0 left-0 w-full h-full bg-[#1D1F2F] rounded-[1%] overflow-hidden transition-all duration-150 ease-out"
          style={{
            transform:
              current === index
                ? "translate3d(calc(var(--x) / 30), calc(var(--y) / 30), 0)"
                : "none",
          }}
        >
          <img
            className="absolute inset-0 w-[120%] h-[120%] object-cover opacity-100 transition-opacity duration-600 ease-in-out"
            style={{
              opacity: current === index ? 1 : 0.5,
            }}
            alt={title}
            src={src}
            onLoad={imageLoaded}
            loading="eager"
            decoding="sync"
          />
          {current === index && (
            <div className="absolute inset-0 bg-black/30 transition-all duration-1000" />
          )}
        </div>

        <article
          className={`relative p-[4vmin] transition-opacity duration-1000 ease-in-out ${current === index ? "opacity-100 visible" : "opacity-0 invisible"
            }`}
        >
          <h2 className="text-lg md:text-2xl lg:text-4xl font-semibold  relative">
            {title}
          </h2>
          <div className="flex justify-center">
            <button className="mt-6  px-4 py-2 w-fit mx-auto sm:text-sm text-black bg-white h-12 border border-transparent text-xs flex justify-center items-center rounded-2xl hover:shadow-lg transition duration-200 shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)]">
              {button}
            </button>
          </div>
        </article>
      </li>
    </div>
  );
};

interface CarouselControlProps {
  type: string;
  title: string;
  handleClick: () => void;
}

const CarouselControl = ({
  type,
  title,
  handleClick,
}: CarouselControlProps) => {
  return (
    <button
      className={`w-10 h-10 flex items-center mx-2 justify-center bg-neutral-200 dark:bg-neutral-800 border-3 border-transparent rounded-full focus:border-[#6D64F7] focus:outline-none hover:-translate-y-0.5 active:translate-y-0.5 transition duration-200 ${type === "previous" ? "rotate-180" : ""
        }`}
      title={title}
      onClick={handleClick}
    >
      <IconArrowNarrowRight className="text-neutral-600 dark:text-neutral-200" />
    </button>
  );
};

interface CarouselProps {
  slides: SlideData[];
}

export default function Carousel({ slides }: CarouselProps) {
  const [current, setCurrent] = useState(0);

  const handlePreviousClick = () => {
    const previous = current - 1;
    setCurrent(previous < 0 ? slides.length - 1 : previous);
  };

  const handleNextClick = () => {
    const next = current + 1;
    setCurrent(next === slides.length ? 0 : next);
  };

  const handleSlideClick = (index: number) => {
    if (current !== index) {
      setCurrent(index);
    }
  };

  const id = useId();

  return (
    <div
      className="relative w-[70vmin] h-[70vmin] mx-auto"
      aria-labelledby={`carousel-heading-${id}`}
    >
      <ul
        className="absolute flex mx-[-4vmin] transition-transform duration-1000 ease-in-out"
        style={{
          transform: `translateX(-${current * (100 / slides.length)}%)`,
        }}
      >
        {slides.map((slide, index) => (
          <Slide
            key={index}
            slide={slide}
            index={index}
            current={current}
            handleSlideClick={handleSlideClick}
          />
        ))}
      </ul>

      <div className="absolute flex justify-center w-full top-[calc(100%+1rem)]">
        <CarouselControl
          type="previous"
          title="Go to previous slide"
          handleClick={handlePreviousClick}
        />

        <CarouselControl
          type="next"
          title="Go to next slide"
          handleClick={handleNextClick}
        />
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/code-block.tsx">
;
import React from "react";
import { Prism as SyntaxHighlighter } from "react-syntax-highlighter";
import { atomDark } from "react-syntax-highlighter/dist/cjs/styles/prism";
import { IconCheck, IconCopy } from "@tabler/icons-react";

type CodeBlockProps = {
  language: string;
  filename: string;
  highlightLines?: number[];
} & (
    | {
      code: string;
      tabs?: never;
    }
    | {
      code?: never;
      tabs: Array<{
        name: string;
        code: string;
        language?: string;
        highlightLines?: number[];
      }>;
    }
  );

export const CodeBlock = ({
  language,
  filename,
  code,
  highlightLines = [],
  tabs = [],
}: CodeBlockProps) => {
  const [copied, setCopied] = React.useState(false);
  const [activeTab, setActiveTab] = React.useState(0);

  const tabsExist = tabs.length > 0;

  const copyToClipboard = async () => {
    const textToCopy = tabsExist ? tabs[activeTab].code : code;
    if (textToCopy) {
      await navigator.clipboard.writeText(textToCopy);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    }
  };

  const activeCode = tabsExist ? tabs[activeTab].code : code;
  const activeLanguage = tabsExist
    ? tabs[activeTab].language || language
    : language;
  const activeHighlightLines = tabsExist
    ? tabs[activeTab].highlightLines || []
    : highlightLines;

  return (
    <div className="relative w-full rounded-lg bg-slate-900 p-4 font-mono text-sm">
      <div className="flex flex-col gap-2">
        {tabsExist && (
          <div className="flex  overflow-x-auto">
            {tabs.map((tab, index) => (
              <button
                key={index}
                onClick={() => setActiveTab(index)}
                className={`px-3 !py-2 text-xs transition-colors font-sans ${activeTab === index
                    ? "text-white"
                    : "text-zinc-400 hover:text-zinc-200"
                  }`}
              >
                {tab.name}
              </button>
            ))}
          </div>
        )}
        {!tabsExist && filename && (
          <div className="flex justify-between items-center py-2">
            <div className="text-xs text-zinc-400">{filename}</div>
            <button
              onClick={copyToClipboard}
              className="flex items-center gap-1 text-xs text-zinc-400 hover:text-zinc-200 transition-colors font-sans"
            >
              {copied ? <IconCheck size={14} /> : <IconCopy size={14} />}
            </button>
          </div>
        )}
      </div>
      <SyntaxHighlighter
        language={activeLanguage}
        style={atomDark}
        customStyle={{
          margin: 0,
          padding: 0,
          background: "transparent",
          fontSize: "0.875rem", // text-sm equivalent
        }}
        wrapLines={true}
        showLineNumbers={true}
        lineProps={(lineNumber) => ({
          style: {
            backgroundColor: activeHighlightLines.includes(lineNumber)
              ? "rgba(255,255,255,0.1)"
              : "transparent",
            display: "block",
            width: "100%",
          },
        })}
        PreTag="div"
      >
        {String(activeCode)}
      </SyntaxHighlighter>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/colourful-text.tsx">
;
import React from "react";
import { motion } from "motion/react";

export default function ColourfulText({ text }: { text: string }) {
  const colors = [
    "rgb(131, 179, 32)",
    "rgb(47, 195, 106)",
    "rgb(42, 169, 210)",
    "rgb(4, 112, 202)",
    "rgb(107, 10, 255)",
    "rgb(183, 0, 218)",
    "rgb(218, 0, 171)",
    "rgb(230, 64, 92)",
    "rgb(232, 98, 63)",
    "rgb(249, 129, 47)",
  ];

  const [currentColors, setCurrentColors] = React.useState(colors);
  const [count, setCount] = React.useState(0);

  React.useEffect(() => {
    const interval = setInterval(() => {
      const shuffled = [...colors].sort(() => Math.random() - 0.5);
      setCurrentColors(shuffled);
      setCount((prev) => prev + 1);
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  return text.split("").map((char, index) => (
    <motion.span
      key={`${char}-${count}-${index}`}
      initial={{
        y: 0,
      }}
      animate={{
        color: currentColors[index % currentColors.length],
        y: [0, -3, 0],
        scale: [1, 1.01, 1],
        filter: ["blur(0px)", `blur(5px)`, "blur(0px)"],
        opacity: [1, 0.8, 1],
      }}
      transition={{
        duration: 0.5,
        delay: index * 0.05,
      }}
      className="inline-block whitespace-pre font-sans tracking-tight"
    >
      {char}
    </motion.span>
  ));
}
</file>

<file path="frontend/src/components/ui/comet-card.tsx">
;
import React, { useRef } from "react";
import {
  motion,
  useMotionValue,
  useSpring,
  useTransform,
  useMotionTemplate,
} from "motion/react";
import { cn } from "@/lib/utils";

export const CometCard = ({
  rotateDepth = 17.5,
  translateDepth = 20,
  className,
  children,
}: {
  rotateDepth?: number;
  translateDepth?: number;
  className?: string;
  children: React.ReactNode;
}) => {
  const ref = useRef<HTMLDivElement>(null);

  const x = useMotionValue(0);
  const y = useMotionValue(0);

  const mouseXSpring = useSpring(x);
  const mouseYSpring = useSpring(y);

  const rotateX = useTransform(
    mouseYSpring,
    [-0.5, 0.5],
    [`-${rotateDepth}deg`, `${rotateDepth}deg`],
  );
  const rotateY = useTransform(
    mouseXSpring,
    [-0.5, 0.5],
    [`${rotateDepth}deg`, `-${rotateDepth}deg`],
  );

  const translateX = useTransform(
    mouseXSpring,
    [-0.5, 0.5],
    [`-${translateDepth}px`, `${translateDepth}px`],
  );
  const translateY = useTransform(
    mouseYSpring,
    [-0.5, 0.5],
    [`${translateDepth}px`, `-${translateDepth}px`],
  );

  const glareX = useTransform(mouseXSpring, [-0.5, 0.5], [0, 100]);
  const glareY = useTransform(mouseYSpring, [-0.5, 0.5], [0, 100]);

  const glareBackground = useMotionTemplate`radial-gradient(circle at ${glareX}% ${glareY}%, rgba(255, 255, 255, 0.9) 10%, rgba(255, 255, 255, 0.75) 20%, rgba(255, 255, 255, 0) 80%)`;

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!ref.current) return;

    const rect = ref.current.getBoundingClientRect();

    const width = rect.width;
    const height = rect.height;

    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    const xPct = mouseX / width - 0.5;
    const yPct = mouseY / height - 0.5;

    x.set(xPct);
    y.set(yPct);
  };

  const handleMouseLeave = () => {
    x.set(0);
    y.set(0);
  };

  return (
    <div className={cn("perspective-distant transform-3d", className)}>
      <motion.div
        ref={ref}
        onMouseMove={handleMouseMove}
        onMouseLeave={handleMouseLeave}
        style={{
          rotateX,
          rotateY,
          translateX,
          translateY,
          boxShadow:
            "rgba(0, 0, 0, 0.01) 0px 520px 146px 0px, rgba(0, 0, 0, 0.04) 0px 333px 133px 0px, rgba(0, 0, 0, 0.26) 0px 83px 83px 0px, rgba(0, 0, 0, 0.29) 0px 21px 46px 0px",
        }}
        initial={{ scale: 1, z: 0 }}
        whileHover={{
          scale: 1.05,
          z: 50,
          transition: { duration: 0.2 },
        }}
        className="relative rounded-2xl"
      >
        {children}
        <motion.div
          className="pointer-events-none absolute inset-0 z-50 h-full w-full rounded-[16px] mix-blend-overlay"
          style={{
            background: glareBackground,
            opacity: 0.6,
          }}
          transition={{ duration: 0.2 }}
        />
      </motion.div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/compare.tsx">
;
import React, { useState, useEffect, useRef, useCallback } from "react";
import { SparklesCore } from "@/components/ui/sparkles";
import { AnimatePresence, motion } from "motion/react";
import { cn } from "@/lib/utils";
import { IconDotsVertical } from "@tabler/icons-react";

interface CompareProps {
  firstImage?: string;
  secondImage?: string;
  className?: string;
  firstImageClassName?: string;
  secondImageClassname?: string;
  initialSliderPercentage?: number;
  slideMode?: "hover" | "drag";
  showHandlebar?: boolean;
  autoplay?: boolean;
  autoplayDuration?: number;
}
export const Compare = ({
  firstImage = "",
  secondImage = "",
  className,
  firstImageClassName,
  secondImageClassname,
  initialSliderPercentage = 50,
  slideMode = "hover",
  showHandlebar = true,
  autoplay = false,
  autoplayDuration = 5000,
}: CompareProps) => {
  const [sliderXPercent, setSliderXPercent] = useState(initialSliderPercentage);
  const [isDragging, setIsDragging] = useState(false);

  const sliderRef = useRef<HTMLDivElement>(null);

  const [isMouseOver, setIsMouseOver] = useState(false);

  const autoplayRef = useRef<NodeJS.Timeout | null>(null);

  const startAutoplay = useCallback(() => {
    if (!autoplay) return;

    const startTime = Date.now();
    const animate = () => {
      const elapsedTime = Date.now() - startTime;
      const progress =
        (elapsedTime % (autoplayDuration * 2)) / autoplayDuration;
      const percentage = progress <= 1 ? progress * 100 : (2 - progress) * 100;

      setSliderXPercent(percentage);
      autoplayRef.current = setTimeout(animate, 16); // ~60fps
    };

    animate();
  }, [autoplay, autoplayDuration]);

  const stopAutoplay = useCallback(() => {
    if (autoplayRef.current) {
      clearTimeout(autoplayRef.current);
      autoplayRef.current = null;
    }
  }, []);

  useEffect(() => {
    startAutoplay();
    return () => stopAutoplay();
  }, [startAutoplay, stopAutoplay]);

  function mouseEnterHandler() {
    setIsMouseOver(true);
    stopAutoplay();
  }

  function mouseLeaveHandler() {
    setIsMouseOver(false);
    if (slideMode === "hover") {
      setSliderXPercent(initialSliderPercentage);
    }
    if (slideMode === "drag") {
      setIsDragging(false);
    }
    startAutoplay();
  }

  const handleStart = useCallback(
    (clientX: number) => {
      if (slideMode === "drag") {
        setIsDragging(true);
      }
    },
    [slideMode]
  );

  const handleEnd = useCallback(() => {
    if (slideMode === "drag") {
      setIsDragging(false);
    }
  }, [slideMode]);

  const handleMove = useCallback(
    (clientX: number) => {
      if (!sliderRef.current) return;
      if (slideMode === "hover" || (slideMode === "drag" && isDragging)) {
        const rect = sliderRef.current.getBoundingClientRect();
        const x = clientX - rect.left;
        const percent = (x / rect.width) * 100;
        requestAnimationFrame(() => {
          setSliderXPercent(Math.max(0, Math.min(100, percent)));
        });
      }
    },
    [slideMode, isDragging]
  );

  const handleMouseDown = useCallback(
    (e: React.MouseEvent) => handleStart(e.clientX),
    [handleStart]
  );
  const handleMouseUp = useCallback(() => handleEnd(), [handleEnd]);
  const handleMouseMove = useCallback(
    (e: React.MouseEvent) => handleMove(e.clientX),
    [handleMove]
  );

  const handleTouchStart = useCallback(
    (e: React.TouchEvent) => {
      if (!autoplay) {
        handleStart(e.touches[0].clientX);
      }
    },
    [handleStart, autoplay]
  );

  const handleTouchEnd = useCallback(() => {
    if (!autoplay) {
      handleEnd();
    }
  }, [handleEnd, autoplay]);

  const handleTouchMove = useCallback(
    (e: React.TouchEvent) => {
      if (!autoplay) {
        handleMove(e.touches[0].clientX);
      }
    },
    [handleMove, autoplay]
  );

  return (
    <div
      ref={sliderRef}
      className={cn("w-[400px] h-[400px] overflow-hidden", className)}
      style={{
        position: "relative",
        cursor: slideMode === "drag" ? "grab" : "col-resize",
      }}
      onMouseMove={handleMouseMove}
      onMouseLeave={mouseLeaveHandler}
      onMouseEnter={mouseEnterHandler}
      onMouseDown={handleMouseDown}
      onMouseUp={handleMouseUp}
      onTouchStart={handleTouchStart}
      onTouchEnd={handleTouchEnd}
      onTouchMove={handleTouchMove}
    >
      <AnimatePresence initial={false}>
        <motion.div
          className="h-full w-px absolute top-0 m-auto z-30 bg-gradient-to-b from-transparent from-[5%] to-[95%] via-indigo-500 to-transparent"
          style={{
            left: `${sliderXPercent}%`,
            top: "0",
            zIndex: 40,
          }}
          transition={{ duration: 0 }}
        >
          <div className="w-36 h-full [mask-image:radial-gradient(100px_at_left,white,transparent)] absolute top-1/2 -translate-y-1/2 left-0 bg-gradient-to-r from-indigo-400 via-transparent to-transparent z-20 opacity-50" />
          <div className="w-10 h-1/2 [mask-image:radial-gradient(50px_at_left,white,transparent)] absolute top-1/2 -translate-y-1/2 left-0 bg-gradient-to-r from-cyan-400 via-transparent to-transparent z-10 opacity-100" />
          <div className="w-10 h-3/4 top-1/2 -translate-y-1/2 absolute -right-10 [mask-image:radial-gradient(100px_at_left,white,transparent)]">
            <MemoizedSparklesCore
              background="transparent"
              minSize={0.4}
              maxSize={1}
              particleDensity={1200}
              className="w-full h-full"
              particleColor="#FFFFFF"
            />
          </div>
          {showHandlebar && (
            <div className="h-5 w-5 rounded-md top-1/2 -translate-y-1/2 bg-white z-30 -right-2.5 absolute   flex items-center justify-center shadow-[0px_-1px_0px_0px_#FFFFFF40]">
              <IconDotsVertical className="h-4 w-4 text-black" />
            </div>
          )}
        </motion.div>
      </AnimatePresence>
      <div className="overflow-hidden w-full h-full relative z-20 pointer-events-none">
        <AnimatePresence initial={false}>
          {firstImage ? (
            <motion.div
              className={cn(
                "absolute inset-0 z-20 rounded-2xl shrink-0 w-full h-full select-none overflow-hidden",
                firstImageClassName
              )}
              style={{
                clipPath: `inset(0 ${100 - sliderXPercent}% 0 0)`,
              }}
              transition={{ duration: 0 }}
            >
              <img
                alt="first image"
                src={firstImage}
                className={cn(
                  "absolute inset-0  z-20 rounded-2xl shrink-0 w-full h-full select-none",
                  firstImageClassName
                )}
                draggable={false}
              />
            </motion.div>
          ) : null}
        </AnimatePresence>
      </div>

      <AnimatePresence initial={false}>
        {secondImage ? (
          <motion.img
            className={cn(
              "absolute top-0 left-0 z-[19]  rounded-2xl w-full h-full select-none",
              secondImageClassname
            )}
            alt="second image"
            src={secondImage}
            draggable={false}
          />
        ) : null}
      </AnimatePresence>
    </div>
  );
};

const MemoizedSparklesCore = React.memo(SparklesCore);
</file>

<file path="frontend/src/components/ui/container-scroll-animation.tsx">
;
import React, { useRef } from "react";
import { useScroll, useTransform, motion, MotionValue } from "motion/react";

export const ContainerScroll = ({
  titleComponent,
  children,
}: {
  titleComponent: string | React.ReactNode;
  children: React.ReactNode;
}) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const { scrollYProgress } = useScroll({
    target: containerRef,
  });
  const [isMobile, setIsMobile] = React.useState(false);

  React.useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth <= 768);
    };
    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => {
      window.removeEventListener("resize", checkMobile);
    };
  }, []);

  const scaleDimensions = () => {
    return isMobile ? [0.7, 0.9] : [1.05, 1];
  };

  const rotate = useTransform(scrollYProgress, [0, 1], [20, 0]);
  const scale = useTransform(scrollYProgress, [0, 1], scaleDimensions());
  const translate = useTransform(scrollYProgress, [0, 1], [0, -100]);

  return (
    <div
      className="h-[60rem] md:h-[80rem] flex items-center justify-center relative p-2 md:p-20"
      ref={containerRef}
    >
      <div
        className="py-10 md:py-40 w-full relative"
        style={{
          perspective: "1000px",
        }}
      >
        <Header translate={translate} titleComponent={titleComponent} />
        <Card rotate={rotate} translate={translate} scale={scale}>
          {children}
        </Card>
      </div>
    </div>
  );
};

export const Header = ({ translate, titleComponent }: any) => {
  return (
    <motion.div
      style={{
        translateY: translate,
      }}
      className="div max-w-5xl mx-auto text-center"
    >
      {titleComponent}
    </motion.div>
  );
};

export const Card = ({
  rotate,
  scale,
  children,
}: {
  rotate: MotionValue<number>;
  scale: MotionValue<number>;
  translate: MotionValue<number>;
  children: React.ReactNode;
}) => {
  return (
    <motion.div
      style={{
        rotateX: rotate,
        scale,
        boxShadow:
          "0 0 #0000004d, 0 9px 20px #0000004a, 0 37px 37px #00000042, 0 84px 50px #00000026, 0 149px 60px #0000000a, 0 233px 65px #00000003",
      }}
      className="max-w-5xl -mt-12 mx-auto h-[30rem] md:h-[40rem] w-full border-4 border-[#6C6C6C] p-2 md:p-6 bg-[#222222] rounded-[30px] shadow-2xl"
    >
      <div className=" h-full w-full  overflow-hidden rounded-2xl bg-gray-100 dark:bg-zinc-900 md:rounded-2xl md:p-4 ">
        {children}
      </div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/container-text-flip.tsx">
;

import React, { useState, useEffect, useId } from "react";

import { motion } from "motion/react";
import { cn } from "@/utils/cn";

export interface ContainerTextFlipProps {
  /** Array of words to cycle through in the animation */
  words?: string[];
  /** Time in milliseconds between word transitions */
  interval?: number;
  /** Additional CSS classes to apply to the container */
  className?: string;
  /** Additional CSS classes to apply to the text */
  textClassName?: string;
  /** Duration of the transition animation in milliseconds */
  animationDuration?: number;
}

export function ContainerTextFlip({
  words = ["better", "modern", "beautiful", "awesome"],
  interval = 3000,
  className,
  textClassName,
  animationDuration = 700,
}: ContainerTextFlipProps) {
  const id = useId();
  const [currentWordIndex, setCurrentWordIndex] = useState(0);
  const [width, setWidth] = useState(100);
  const textRef = React.useRef(null);

  const updateWidthForWord = () => {
    if (textRef.current) {
      // Add some padding to the text width (30px on each side)
      // @ts-ignore
      const textWidth = textRef.current.scrollWidth + 30;
      setWidth(textWidth);
    }
  };

  useEffect(() => {
    // Update width whenever the word changes
    updateWidthForWord();
  }, [currentWordIndex]);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setCurrentWordIndex((prevIndex) => (prevIndex + 1) % words.length);
      // Width will be updated in the effect that depends on currentWordIndex
    }, interval);

    return () => clearInterval(intervalId);
  }, [words, interval]);

  return (
    <motion.p
      layout
      layoutId={`words-here-${id}`}
      animate={{ width }}
      transition={{ duration: animationDuration / 2000 }}
      className={cn(
        "relative inline-block rounded-lg pt-2 pb-3 text-center text-4xl font-bold text-black md:text-7xl dark:text-white",
        "[background:linear-gradient(to_bottom,#f3f4f6,#e5e7eb)]",
        "shadow-[inset_0_-1px_#d1d5db,inset_0_0_0_1px_#d1d5db,_0_4px_8px_#d1d5db]",
        "dark:[background:linear-gradient(to_bottom,#374151,#1f2937)]",
        "dark:shadow-[inset_0_-1px_#10171e,inset_0_0_0_1px_hsla(205,89%,46%,.24),_0_4px_8px_#00000052]",
        className,
      )}
      key={words[currentWordIndex]}
    >
      <motion.div
        transition={{
          duration: animationDuration / 1000,
          ease: "easeInOut",
        }}
        className={cn("inline-block", textClassName)}
        ref={textRef}
        layoutId={`word-div-${words[currentWordIndex]}-${id}`}
      >
        <motion.div className="inline-block">
          {words[currentWordIndex].split("").map((letter, index) => (
            <motion.span
              key={index}
              initial={{
                opacity: 0,
                filter: "blur(10px)",
              }}
              animate={{
                opacity: 1,
                filter: "blur(0px)",
              }}
              transition={{
                delay: index * 0.02,
              }}
            >
              {letter}
            </motion.span>
          ))}
        </motion.div>
      </motion.div>
    </motion.p>
  );
}
</file>

<file path="frontend/src/components/ui/cover.tsx">
;
import React, { useEffect, useId, useState } from "react";
import { AnimatePresence, motion } from "motion/react";
import { useRef } from "react";
import { cn } from "@/lib/utils";
import { SparklesCore } from "@/components/ui/sparkles";

export const Cover = ({
  children,
  className,
}: {
  children?: React.ReactNode;
  className?: string;
}) => {
  const [hovered, setHovered] = useState(false);

  const ref = useRef<HTMLDivElement>(null);

  const [containerWidth, setContainerWidth] = useState(0);
  const [beamPositions, setBeamPositions] = useState<number[]>([]);

  useEffect(() => {
    if (ref.current) {
      setContainerWidth(ref.current?.clientWidth ?? 0);

      const height = ref.current?.clientHeight ?? 0;
      const numberOfBeams = Math.floor(height / 10); // Adjust the divisor to control the spacing
      const positions = Array.from(
        { length: numberOfBeams },
        (_, i) => (i + 1) * (height / (numberOfBeams + 1))
      );
      setBeamPositions(positions);
    }
  }, [ref.current]);

  return (
    <div
      onMouseEnter={() => setHovered(true)}
      onMouseLeave={() => setHovered(false)}
      ref={ref}
      className="relative hover:bg-neutral-900  group/cover inline-block dark:bg-neutral-900 bg-neutral-100 px-2 py-2  transition duration-200 rounded-sm"
    >
      <AnimatePresence>
        {hovered && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{
              opacity: {
                duration: 0.2,
              },
            }}
            className="h-full w-full overflow-hidden absolute inset-0"
          >
            <motion.div
              animate={{
                translateX: ["-50%", "0%"],
              }}
              transition={{
                translateX: {
                  duration: 10,
                  ease: "linear",
                  repeat: Infinity,
                },
              }}
              className="w-[200%] h-full flex"
            >
              <SparklesCore
                background="transparent"
                minSize={0.4}
                maxSize={1}
                particleDensity={500}
                className="w-full h-full"
                particleColor="#FFFFFF"
              />
              <SparklesCore
                background="transparent"
                minSize={0.4}
                maxSize={1}
                particleDensity={500}
                className="w-full h-full"
                particleColor="#FFFFFF"
              />
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>
      {beamPositions.map((position, index) => (
        <Beam
          key={index}
          hovered={hovered}
          duration={Math.random() * 2 + 1}
          delay={Math.random() * 2 + 1}
          width={containerWidth}
          style={{
            top: `${position}px`,
          }}
        />
      ))}
      <motion.span
        key={String(hovered)}
        animate={{
          scale: hovered ? 0.8 : 1,
          x: hovered ? [0, -30, 30, -30, 30, 0] : 0,
          y: hovered ? [0, 30, -30, 30, -30, 0] : 0,
        }}
        exit={{
          filter: "none",
          scale: 1,
          x: 0,
          y: 0,
        }}
        transition={{
          duration: 0.2,
          x: {
            duration: 0.2,
            repeat: Infinity,
            repeatType: "loop",
          },
          y: {
            duration: 0.2,
            repeat: Infinity,
            repeatType: "loop",
          },
          scale: {
            duration: 0.2,
          },
          filter: {
            duration: 0.2,
          },
        }}
        className={cn(
          "dark:text-white inline-block text-neutral-900 relative z-20 group-hover/cover:text-white transition duration-200",
          className
        )}
      >
        {children}
      </motion.span>
      <CircleIcon className="absolute -right-[2px] -top-[2px]" />
      <CircleIcon className="absolute -bottom-[2px] -right-[2px]" delay={0.4} />
      <CircleIcon className="absolute -left-[2px] -top-[2px]" delay={0.8} />
      <CircleIcon className="absolute -bottom-[2px] -left-[2px]" delay={1.6} />
    </div>
  );
};

export const Beam = ({
  className,
  delay,
  duration,
  hovered,
  width = 600,
  ...svgProps
}: {
  className?: string;
  delay?: number;
  duration?: number;
  hovered?: boolean;
  width?: number;
} & React.ComponentProps<typeof motion.svg>) => {
  const id = useId();

  return (
    <motion.svg
      width={width ?? "600"}
      height="1"
      viewBox={`0 0 ${width ?? "600"} 1`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={cn("absolute inset-x-0 w-full", className)}
      {...svgProps}
    >
      <motion.path
        d={`M0 0.5H${width ?? "600"}`}
        stroke={`url(#svgGradient-${id})`}
      />

      <defs>
        <motion.linearGradient
          id={`svgGradient-${id}`}
          key={String(hovered)}
          gradientUnits="userSpaceOnUse"
          initial={{
            x1: "0%",
            x2: hovered ? "-10%" : "-5%",
            y1: 0,
            y2: 0,
          }}
          animate={{
            x1: "110%",
            x2: hovered ? "100%" : "105%",
            y1: 0,
            y2: 0,
          }}
          transition={{
            duration: hovered ? 0.5 : duration ?? 2,
            ease: "linear",
            repeat: Infinity,
            delay: hovered ? Math.random() * (1 - 0.2) + 0.2 : 0,
            repeatDelay: hovered ? Math.random() * (2 - 1) + 1 : delay ?? 1,
          }}
        >
          <stop stopColor="#2EB9DF" stopOpacity="0" />
          <stop stopColor="#3b82f6" />
          <stop offset="1" stopColor="#3b82f6" stopOpacity="0" />
        </motion.linearGradient>
      </defs>
    </motion.svg>
  );
};

export const CircleIcon = ({
  className,
  delay,
}: {
  className?: string;
  delay?: number;
}) => {
  return (
    <div
      className={cn(
        `pointer-events-none animate-pulse group-hover/cover:hidden group-hover/cover:opacity-100 group h-2 w-2 rounded-full bg-neutral-600 dark:bg-white opacity-20 group-hover/cover:bg-white`,
        className
      )}
    ></div>
  );
};
</file>

<file path="frontend/src/components/ui/direction-aware-hover.tsx">
;

import { useRef, useState } from "react";

import { AnimatePresence, motion } from "motion/react";
import { cn } from "@/lib/utils";

export const DirectionAwareHover = ({
  imageUrl,
  children,
  childrenClassName,
  imageClassName,
  className,
}: {
  imageUrl: string;
  children: React.ReactNode | string;
  childrenClassName?: string;
  imageClassName?: string;
  className?: string;
}) => {
  const ref = useRef<HTMLDivElement>(null);

  const [direction, setDirection] = useState<
    "top" | "bottom" | "left" | "right" | string
  >("left");

  const handleMouseEnter = (
    event: React.MouseEvent<HTMLDivElement, MouseEvent>
  ) => {
    if (!ref.current) return;

    const direction = getDirection(event, ref.current);
    console.log("direction", direction);
    switch (direction) {
      case 0:
        setDirection("top");
        break;
      case 1:
        setDirection("right");
        break;
      case 2:
        setDirection("bottom");
        break;
      case 3:
        setDirection("left");
        break;
      default:
        setDirection("left");
        break;
    }
  };

  const getDirection = (
    ev: React.MouseEvent<HTMLDivElement, MouseEvent>,
    obj: HTMLElement
  ) => {
    const { width: w, height: h, left, top } = obj.getBoundingClientRect();
    const x = ev.clientX - left - (w / 2) * (w > h ? h / w : 1);
    const y = ev.clientY - top - (h / 2) * (h > w ? w / h : 1);
    const d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;
    return d;
  };

  return (
    <motion.div
      onMouseEnter={handleMouseEnter}
      ref={ref}
      className={cn(
        "md:h-96 w-60 h-60 md:w-96 bg-transparent rounded-lg overflow-hidden group/card relative",
        className
      )}
    >
      <AnimatePresence mode="wait">
        <motion.div
          className="relative h-full w-full"
          initial="initial"
          whileHover={direction}
          exit="exit"
        >
          <motion.div className="group-hover/card:block hidden absolute inset-0 w-full h-full bg-black/40 z-10 transition duration-500" />
          <motion.div
            variants={variants}
            className="h-full w-full relative bg-gray-50 dark:bg-black"
            transition={{
              duration: 0.2,
              ease: "easeOut",
            }}
          >
            <img
              alt="image"
              className={cn(
                "h-full w-full object-cover scale-[1.15]",
                imageClassName
              )}
              width="1000"
              height="1000"
              src={imageUrl}
            />
          </motion.div>
          <motion.div
            variants={textVariants}
            transition={{
              duration: 0.5,
              ease: "easeOut",
            }}
            className={cn(
              "text-white absolute bottom-4 left-4 z-40",
              childrenClassName
            )}
          >
            {children}
          </motion.div>
        </motion.div>
      </AnimatePresence>
    </motion.div>
  );
};

const variants = {
  initial: {
    x: 0,
  },

  exit: {
    x: 0,
    y: 0,
  },
  top: {
    y: 20,
  },
  bottom: {
    y: -20,
  },
  left: {
    x: 20,
  },
  right: {
    x: -20,
  },
};

const textVariants = {
  initial: {
    y: 0,
    x: 0,
    opacity: 0,
  },
  exit: {
    y: 0,
    x: 0,
    opacity: 0,
  },
  top: {
    y: -20,
    opacity: 1,
  },
  bottom: {
    y: 2,
    opacity: 1,
  },
  left: {
    x: -2,
    opacity: 1,
  },
  right: {
    x: 20,
    opacity: 1,
  },
};
</file>

<file path="frontend/src/components/ui/draggable-card.tsx">
;
import { cn } from "@/lib/utils";
import React, { useRef, useState, useEffect } from "react";
import {
  motion,
  useMotionValue,
  useSpring,
  useTransform,
  animate,
  useVelocity,
  useAnimationControls,
} from "motion/react";

export const DraggableCardBody = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  const mouseX = useMotionValue(0);
  const mouseY = useMotionValue(0);
  const cardRef = useRef<HTMLDivElement>(null);
  const controls = useAnimationControls();
  const [constraints, setConstraints] = useState({
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
  });

  // physics biatch
  const velocityX = useVelocity(mouseX);
  const velocityY = useVelocity(mouseY);

  const springConfig = {
    stiffness: 100,
    damping: 20,
    mass: 0.5,
  };

  const rotateX = useSpring(
    useTransform(mouseY, [-300, 300], [25, -25]),
    springConfig,
  );
  const rotateY = useSpring(
    useTransform(mouseX, [-300, 300], [-25, 25]),
    springConfig,
  );

  const opacity = useSpring(
    useTransform(mouseX, [-300, 0, 300], [0.8, 1, 0.8]),
    springConfig,
  );

  const glareOpacity = useSpring(
    useTransform(mouseX, [-300, 0, 300], [0.2, 0, 0.2]),
    springConfig,
  );

  useEffect(() => {
    // Update constraints when component mounts or window resizes
    const updateConstraints = () => {
      if (typeof window !== "undefined") {
        setConstraints({
          top: -window.innerHeight / 2,
          left: -window.innerWidth / 2,
          right: window.innerWidth / 2,
          bottom: window.innerHeight / 2,
        });
      }
    };

    updateConstraints();

    // Add resize listener
    window.addEventListener("resize", updateConstraints);

    // Clean up
    return () => {
      window.removeEventListener("resize", updateConstraints);
    };
  }, []);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    const { clientX, clientY } = e;
    const { width, height, left, top } =
      cardRef.current?.getBoundingClientRect() ?? {
        width: 0,
        height: 0,
        left: 0,
        top: 0,
      };
    const centerX = left + width / 2;
    const centerY = top + height / 2;
    const deltaX = clientX - centerX;
    const deltaY = clientY - centerY;
    mouseX.set(deltaX);
    mouseY.set(deltaY);
  };

  const handleMouseLeave = () => {
    mouseX.set(0);
    mouseY.set(0);
  };

  return (
    <motion.div
      ref={cardRef}
      drag
      dragConstraints={constraints}
      onDragStart={() => {
        document.body.style.cursor = "grabbing";
      }}
      onDragEnd={(event, info) => {
        document.body.style.cursor = "default";

        controls.start({
          rotateX: 0,
          rotateY: 0,
          transition: {
            type: "spring",
            ...springConfig,
          },
        });
        const currentVelocityX = velocityX.get();
        const currentVelocityY = velocityY.get();

        const velocityMagnitude = Math.sqrt(
          currentVelocityX * currentVelocityX +
          currentVelocityY * currentVelocityY,
        );
        const bounce = Math.min(0.8, velocityMagnitude / 1000);

        animate(info.point.x, info.point.x + currentVelocityX * 0.3, {
          duration: 0.8,
          ease: [0.2, 0, 0, 1],
          bounce,
          type: "spring",
          stiffness: 50,
          damping: 15,
          mass: 0.8,
        });

        animate(info.point.y, info.point.y + currentVelocityY * 0.3, {
          duration: 0.8,
          ease: [0.2, 0, 0, 1],
          bounce,
          type: "spring",
          stiffness: 50,
          damping: 15,
          mass: 0.8,
        });
      }}
      style={{
        rotateX,
        rotateY,
        opacity,
        willChange: "transform",
      }}
      animate={controls}
      whileHover={{ scale: 1.02 }}
      onMouseMove={handleMouseMove}
      onMouseLeave={handleMouseLeave}
      className={cn(
        "relative min-h-96 w-80 overflow-hidden rounded-md bg-neutral-100 p-6 shadow-2xl transform-3d dark:bg-neutral-900",
        className,
      )}
    >
      {children}
      <motion.div
        style={{
          opacity: glareOpacity,
        }}
        className="pointer-events-none absolute inset-0 bg-white select-none"
      />
    </motion.div>
  );
};

export const DraggableCardContainer = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  return (
    <div className={cn("[perspective:3000px]", className)}>{children}</div>
  );
};
</file>

<file path="frontend/src/components/ui/evervault-card.tsx">
;
import { useMotionValue } from "motion/react";
import React, { useState, useEffect } from "react";
import { useMotionTemplate, motion } from "motion/react";
import { cn } from "@/lib/utils";

export const EvervaultCard = ({
  text,
  className,
}: {
  text?: string;
  className?: string;
}) => {
  let mouseX = useMotionValue(0);
  let mouseY = useMotionValue(0);

  const [randomString, setRandomString] = useState("");

  useEffect(() => {
    let str = generateRandomString(1500);
    setRandomString(str);
  }, []);

  function onMouseMove({ currentTarget, clientX, clientY }: any) {
    let { left, top } = currentTarget.getBoundingClientRect();
    mouseX.set(clientX - left);
    mouseY.set(clientY - top);

    const str = generateRandomString(1500);
    setRandomString(str);
  }

  return (
    <div
      className={cn(
        "p-0.5  bg-transparent aspect-square  flex items-center justify-center w-full h-full relative",
        className
      )}
    >
      <div
        onMouseMove={onMouseMove}
        className="group/card rounded-3xl w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full"
      >
        <CardPattern
          mouseX={mouseX}
          mouseY={mouseY}
          randomString={randomString}
        />
        <div className="relative z-10 flex items-center justify-center">
          <div className="relative h-44 w-44  rounded-full flex items-center justify-center text-white font-bold text-4xl">
            <div className="absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full" />
            <span className="dark:text-white text-black z-20">{text}</span>
          </div>
        </div>
      </div>
    </div>
  );
};

export function CardPattern({ mouseX, mouseY, randomString }: any) {
  let maskImage = useMotionTemplate`radial-gradient(250px at ${mouseX}px ${mouseY}px, white, transparent)`;
  let style = { maskImage, WebkitMaskImage: maskImage };

  return (
    <div className="pointer-events-none">
      <div className="absolute inset-0 rounded-2xl  [mask-image:linear-gradient(white,transparent)] group-hover/card:opacity-50"></div>
      <motion.div
        className="absolute inset-0 rounded-2xl bg-gradient-to-r from-green-500 to-blue-700 opacity-0  group-hover/card:opacity-100 backdrop-blur-xl transition duration-500"
        style={style}
      />
      <motion.div
        className="absolute inset-0 rounded-2xl opacity-0 mix-blend-overlay  group-hover/card:opacity-100"
        style={style}
      >
        <p className="absolute inset-x-0 text-xs h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500">
          {randomString}
        </p>
      </motion.div>
    </div>
  );
}

const characters =
  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
export const generateRandomString = (length: number) => {
  let result = "";
  for (let i = 0; i < length; i++) {
    result += characters.charAt(Math.floor(Math.random() * characters.length));
  }
  return result;
};

export const Icon = ({ className, ...rest }: any) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      strokeWidth="1.5"
      stroke="currentColor"
      className={className}
      {...rest}
    >
      <path strokeLinecap="round" strokeLinejoin="round" d="M12 6v12m6-6H6" />
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/flip-words.tsx">
;
import React, { useCallback, useEffect, useRef, useState } from "react";
import { AnimatePresence, motion, LayoutGroup } from "motion/react";
import { cn } from "@/lib/utils";

export const FlipWords = ({
  words,
  duration = 3000,
  className,
}: {
  words: string[];
  duration?: number;
  className?: string;
}) => {
  const [currentWord, setCurrentWord] = useState(words[0]);
  const [isAnimating, setIsAnimating] = useState<boolean>(false);

  // thanks for the fix Julian - https://github.com/Julian-AT
  const startAnimation = useCallback(() => {
    const word = words[words.indexOf(currentWord) + 1] || words[0];
    setCurrentWord(word);
    setIsAnimating(true);
  }, [currentWord, words]);

  useEffect(() => {
    if (!isAnimating)
      setTimeout(() => {
        startAnimation();
      }, duration);
  }, [isAnimating, duration, startAnimation]);

  return (
    <AnimatePresence
      onExitComplete={() => {
        setIsAnimating(false);
      }}
    >
      <motion.div
        initial={{
          opacity: 0,
          y: 10,
        }}
        animate={{
          opacity: 1,
          y: 0,
        }}
        transition={{
          type: "spring",
          stiffness: 100,
          damping: 10,
        }}
        exit={{
          opacity: 0,
          y: -40,
          x: 40,
          filter: "blur(8px)",
          scale: 2,
          position: "absolute",
        }}
        className={cn(
          "z-10 inline-block relative text-left text-neutral-900 dark:text-neutral-100 px-2",
          className
        )}
        key={currentWord}
      >
        {/* edit suggested by Sajal: https://x.com/DewanganSajal */}
        {currentWord.split(" ").map((word, wordIndex) => (
          <motion.span
            key={word + wordIndex}
            initial={{ opacity: 0, y: 10, filter: "blur(8px)" }}
            animate={{ opacity: 1, y: 0, filter: "blur(0px)" }}
            transition={{
              delay: wordIndex * 0.3,
              duration: 0.3,
            }}
            className="inline-block whitespace-nowrap"
          >
            {word.split("").map((letter, letterIndex) => (
              <motion.span
                key={word + letterIndex}
                initial={{ opacity: 0, y: 10, filter: "blur(8px)" }}
                animate={{ opacity: 1, y: 0, filter: "blur(0px)" }}
                transition={{
                  delay: wordIndex * 0.3 + letterIndex * 0.05,
                  duration: 0.2,
                }}
                className="inline-block"
              >
                {letter}
              </motion.span>
            ))}
            <span className="inline-block">&nbsp;</span>
          </motion.span>
        ))}
      </motion.div>
    </AnimatePresence>
  );
};
</file>

<file path="frontend/src/components/ui/floating-navbar.tsx">
;
import React, { useState } from "react";
import {
  motion,
  AnimatePresence,
  useScroll,
  useMotionValueEvent,
} from "motion/react";
import { cn } from "@/lib/utils";


export const FloatingNav = ({
  navItems,
  className,
}: {
  navItems: {
    name: string;
    link: string;
    icon?: JSX.Element;
  }[];
  className?: string;
}) => {
  const { scrollYProgress } = useScroll();

  const [visible, setVisible] = useState(false);

  useMotionValueEvent(scrollYProgress, "change", (current) => {
    // Check if current is not undefined and is a number
    if (typeof current === "number") {
      let direction = current! - scrollYProgress.getPrevious()!;

      if (scrollYProgress.get() < 0.05) {
        setVisible(false);
      } else {
        if (direction < 0) {
          setVisible(true);
        } else {
          setVisible(false);
        }
      }
    }
  });

  return (
    <AnimatePresence mode="wait">
      <motion.div
        initial={{
          opacity: 1,
          y: -100,
        }}
        animate={{
          y: visible ? 0 : -100,
          opacity: visible ? 1 : 0,
        }}
        transition={{
          duration: 0.2,
        }}
        className={cn(
          "flex max-w-fit  fixed top-10 inset-x-0 mx-auto border border-transparent dark:border-white/[0.2] rounded-full dark:bg-black bg-white shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),0px_1px_0px_0px_rgba(25,28,33,0.02),0px_0px_0px_1px_rgba(25,28,33,0.08)] z-[5000] pr-2 pl-8 py-2  items-center justify-center space-x-4",
          className
        )}
      >
        {navItems.map((navItem: any, idx: number) => (
          <a
            key={`link=${idx}`}
            href={navItem.link}
            className={cn(
              "relative dark:text-neutral-50 items-center flex space-x-1 text-neutral-600 dark:hover:text-neutral-300 hover:text-neutral-500"
            )}
          >
            <span className="block sm:hidden">{navItem.icon}</span>
            <span className="hidden sm:block text-sm">{navItem.name}</span>
          </a>
        ))}
        <button className="border text-sm font-medium relative border-neutral-200 dark:border-white/[0.2] text-black dark:text-white px-4 py-2 rounded-full">
          <span>Login</span>
          <span className="absolute inset-x-0 w-1/2 mx-auto -bottom-px bg-gradient-to-r from-transparent via-blue-500 to-transparent  h-px" />
        </button>
      </motion.div>
    </AnimatePresence>
  );
};
</file>

<file path="frontend/src/components/ui/focus-cards.tsx">
;

import React, { useState } from "react";
import { cn } from "@/lib/utils";

export const Card = React.memo(
  ({
    card,
    index,
    hovered,
    setHovered,
  }: {
    card: any;
    index: number;
    hovered: number | null;
    setHovered: React.Dispatch<React.SetStateAction<number | null>>;
  }) => (
    <div
      onMouseEnter={() => setHovered(index)}
      onMouseLeave={() => setHovered(null)}
      className={cn(
        "rounded-lg relative bg-gray-100 dark:bg-neutral-900 overflow-hidden h-60 md:h-96 w-full transition-all duration-300 ease-out",
        hovered !== null && hovered !== index && "blur-sm scale-[0.98]"
      )}
    >
      <img
        src={card.src}
        alt={card.title}
        className="object-cover absolute inset-0"
      />
      <div
        className={cn(
          "absolute inset-0 bg-black/50 flex items-end py-8 px-4 transition-opacity duration-300",
          hovered === index ? "opacity-100" : "opacity-0"
        )}
      >
        <div className="text-xl md:text-2xl font-medium bg-clip-text text-transparent bg-gradient-to-b from-neutral-50 to-neutral-200">
          {card.title}
        </div>
      </div>
    </div>
  )
);

Card.displayName = "Card";

type Card = {
  title: string;
  src: string;
};

export function FocusCards({ cards }: { cards: Card[] }) {
  const [hovered, setHovered] = useState<number | null>(null);

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-10 max-w-5xl mx-auto md:px-8 w-full">
      {cards.map((card, index) => (
        <Card
          key={card.title}
          card={card}
          index={index}
          hovered={hovered}
          setHovered={setHovered}
        />
      ))}
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/globe.tsx">
;
import { useEffect, useRef, useState } from "react";
import { Color, Scene, Fog, PerspectiveCamera, Vector3 } from "three";
import ThreeGlobe from "three-globe";
import { useThree, Canvas, extend } from "@react-three/fiber";
import { OrbitControls } from "@react-three/drei";
import countries from "@/data/globe.json";
declare module "@react-three/fiber" {
  interface ThreeElements {
    threeGlobe: ThreeElements["mesh"] & {
      new(): ThreeGlobe;
    };
  }
}

extend({ ThreeGlobe: ThreeGlobe });

const RING_PROPAGATION_SPEED = 3;
const aspect = 1.2;
const cameraZ = 300;

type Position = {
  order: number;
  startLat: number;
  startLng: number;
  endLat: number;
  endLng: number;
  arcAlt: number;
  color: string;
};

export type GlobeConfig = {
  pointSize?: number;
  globeColor?: string;
  showAtmosphere?: boolean;
  atmosphereColor?: string;
  atmosphereAltitude?: number;
  emissive?: string;
  emissiveIntensity?: number;
  shininess?: number;
  polygonColor?: string;
  ambientLight?: string;
  directionalLeftLight?: string;
  directionalTopLight?: string;
  pointLight?: string;
  arcTime?: number;
  arcLength?: number;
  rings?: number;
  maxRings?: number;
  initialPosition?: {
    lat: number;
    lng: number;
  };
  autoRotate?: boolean;
  autoRotateSpeed?: number;
};

interface WorldProps {
  globeConfig: GlobeConfig;
  data: Position[];
}

let numbersOfRings = [0];

export function Globe({ globeConfig, data }: WorldProps) {
  const globeRef = useRef<ThreeGlobe | null>(null);
  const groupRef = useRef();
  const [isInitialized, setIsInitialized] = useState(false);

  const defaultProps = {
    pointSize: 1,
    atmosphereColor: "#ffffff",
    showAtmosphere: true,
    atmosphereAltitude: 0.1,
    polygonColor: "rgba(255,255,255,0.7)",
    globeColor: "#1d072e",
    emissive: "#000000",
    emissiveIntensity: 0.1,
    shininess: 0.9,
    arcTime: 2000,
    arcLength: 0.9,
    rings: 1,
    maxRings: 3,
    ...globeConfig,
  };

  // Initialize globe only once
  useEffect(() => {
    if (!globeRef.current && groupRef.current) {
      globeRef.current = new ThreeGlobe();
      (groupRef.current as any).add(globeRef.current);
      setIsInitialized(true);
    }
  }, []);

  // Build material when globe is initialized or when relevant props change
  useEffect(() => {
    if (!globeRef.current || !isInitialized) return;

    const globeMaterial = globeRef.current.globeMaterial() as unknown as {
      color: Color;
      emissive: Color;
      emissiveIntensity: number;
      shininess: number;
    };
    globeMaterial.color = new Color(globeConfig.globeColor);
    globeMaterial.emissive = new Color(globeConfig.emissive);
    globeMaterial.emissiveIntensity = globeConfig.emissiveIntensity || 0.1;
    globeMaterial.shininess = globeConfig.shininess || 0.9;
  }, [
    isInitialized,
    globeConfig.globeColor,
    globeConfig.emissive,
    globeConfig.emissiveIntensity,
    globeConfig.shininess,
  ]);

  // Build data when globe is initialized or when data changes
  useEffect(() => {
    if (!globeRef.current || !isInitialized || !data) return;

    const arcs = data;
    let points = [];
    for (let i = 0; i < arcs.length; i++) {
      const arc = arcs[i];
      const rgb = hexToRgb(arc.color) as { r: number; g: number; b: number };
      points.push({
        size: defaultProps.pointSize,
        order: arc.order,
        color: arc.color,
        lat: arc.startLat,
        lng: arc.startLng,
      });
      points.push({
        size: defaultProps.pointSize,
        order: arc.order,
        color: arc.color,
        lat: arc.endLat,
        lng: arc.endLng,
      });
    }

    // remove duplicates for same lat and lng
    const filteredPoints = points.filter(
      (v, i, a) =>
        a.findIndex((v2) =>
          ["lat", "lng"].every(
            (k) => v2[k as "lat" | "lng"] === v[k as "lat" | "lng"],
          ),
        ) === i,
    );

    globeRef.current
      .hexPolygonsData(countries.features)
      .hexPolygonResolution(3)
      .hexPolygonMargin(0.7)
      .showAtmosphere(defaultProps.showAtmosphere)
      .atmosphereColor(defaultProps.atmosphereColor)
      .atmosphereAltitude(defaultProps.atmosphereAltitude)
      .hexPolygonColor(() => defaultProps.polygonColor);

    globeRef.current
      .arcsData(data)
      .arcStartLat((d) => (d as { startLat: number }).startLat * 1)
      .arcStartLng((d) => (d as { startLng: number }).startLng * 1)
      .arcEndLat((d) => (d as { endLat: number }).endLat * 1)
      .arcEndLng((d) => (d as { endLng: number }).endLng * 1)
      .arcColor((e: any) => (e as { color: string }).color)
      .arcAltitude((e) => (e as { arcAlt: number }).arcAlt * 1)
      .arcStroke(() => [0.32, 0.28, 0.3][Math.round(Math.random() * 2)])
      .arcDashLength(defaultProps.arcLength)
      .arcDashInitialGap((e) => (e as { order: number }).order * 1)
      .arcDashGap(15)
      .arcDashAnimateTime(() => defaultProps.arcTime);

    globeRef.current
      .pointsData(filteredPoints)
      .pointColor((e) => (e as { color: string }).color)
      .pointsMerge(true)
      .pointAltitude(0.0)
      .pointRadius(2);

    globeRef.current
      .ringsData([])
      .ringColor(() => defaultProps.polygonColor)
      .ringMaxRadius(defaultProps.maxRings)
      .ringPropagationSpeed(RING_PROPAGATION_SPEED)
      .ringRepeatPeriod(
        (defaultProps.arcTime * defaultProps.arcLength) / defaultProps.rings,
      );
  }, [
    isInitialized,
    data,
    defaultProps.pointSize,
    defaultProps.showAtmosphere,
    defaultProps.atmosphereColor,
    defaultProps.atmosphereAltitude,
    defaultProps.polygonColor,
    defaultProps.arcLength,
    defaultProps.arcTime,
    defaultProps.rings,
    defaultProps.maxRings,
  ]);

  // Handle rings animation with cleanup
  useEffect(() => {
    if (!globeRef.current || !isInitialized || !data) return;

    const interval = setInterval(() => {
      if (!globeRef.current) return;

      const newNumbersOfRings = genRandomNumbers(
        0,
        data.length,
        Math.floor((data.length * 4) / 5),
      );

      const ringsData = data
        .filter((d, i) => newNumbersOfRings.includes(i))
        .map((d) => ({
          lat: d.startLat,
          lng: d.startLng,
          color: d.color,
        }));

      globeRef.current.ringsData(ringsData);
    }, 2000);

    return () => {
      clearInterval(interval);
    };
  }, [isInitialized, data]);

  return <group ref={groupRef} />;
}

export function WebGLRendererConfig() {
  const { gl, size } = useThree();

  useEffect(() => {
    gl.setPixelRatio(window.devicePixelRatio);
    gl.setSize(size.width, size.height);
    gl.setClearColor(0xffaaff, 0);
  }, []);

  return null;
}

export function World(props: WorldProps) {
  const { globeConfig } = props;
  const scene = new Scene();
  scene.fog = new Fog(0xffffff, 400, 2000);
  return (
    <Canvas scene={scene} camera={new PerspectiveCamera(50, aspect, 180, 1800)}>
      <WebGLRendererConfig />
      <ambientLight color={globeConfig.ambientLight} intensity={0.6} />
      <directionalLight
        color={globeConfig.directionalLeftLight}
        position={new Vector3(-400, 100, 400)}
      />
      <directionalLight
        color={globeConfig.directionalTopLight}
        position={new Vector3(-200, 500, 200)}
      />
      <pointLight
        color={globeConfig.pointLight}
        position={new Vector3(-200, 500, 200)}
        intensity={0.8}
      />
      <Globe {...props} />
      <OrbitControls
        enablePan={false}
        enableZoom={false}
        minDistance={cameraZ}
        maxDistance={cameraZ}
        autoRotateSpeed={1}
        autoRotate={true}
        minPolarAngle={Math.PI / 3.5}
        maxPolarAngle={Math.PI - Math.PI / 3}
      />
    </Canvas>
  );
}

export function hexToRgb(hex: string) {
  var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
  hex = hex.replace(shorthandRegex, function (m, r, g, b) {
    return r + r + g + g + b + b;
  });

  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result
    ? {
      r: parseInt(result[1], 16),
      g: parseInt(result[2], 16),
      b: parseInt(result[3], 16),
    }
    : null;
}

export function genRandomNumbers(min: number, max: number, count: number) {
  const arr = [];
  while (arr.length < count) {
    const r = Math.floor(Math.random() * (max - min)) + min;
    if (arr.indexOf(r) === -1) arr.push(r);
  }

  return arr;
}
</file>

<file path="frontend/src/components/ui/glowing-effect.tsx">
;

import { memo, useCallback, useEffect, useRef } from "react";
import { cn } from "@/lib/utils";
import { animate } from "motion/react";

interface GlowingEffectProps {
  blur?: number;
  inactiveZone?: number;
  proximity?: number;
  spread?: number;
  variant?: "default" | "white";
  glow?: boolean;
  className?: string;
  disabled?: boolean;
  movementDuration?: number;
  borderWidth?: number;
}
const GlowingEffect = memo(
  ({
    blur = 0,
    inactiveZone = 0.7,
    proximity = 0,
    spread = 20,
    variant = "default",
    glow = false,
    className,
    movementDuration = 2,
    borderWidth = 1,
    disabled = true,
  }: GlowingEffectProps) => {
    const containerRef = useRef<HTMLDivElement>(null);
    const lastPosition = useRef({ x: 0, y: 0 });
    const animationFrameRef = useRef<number>(0);

    const handleMove = useCallback(
      (e?: MouseEvent | { x: number; y: number }) => {
        if (!containerRef.current) return;

        if (animationFrameRef.current) {
          cancelAnimationFrame(animationFrameRef.current);
        }

        animationFrameRef.current = requestAnimationFrame(() => {
          const element = containerRef.current;
          if (!element) return;

          const { left, top, width, height } = element.getBoundingClientRect();
          const mouseX = e?.x ?? lastPosition.current.x;
          const mouseY = e?.y ?? lastPosition.current.y;

          if (e) {
            lastPosition.current = { x: mouseX, y: mouseY };
          }

          const center = [left + width * 0.5, top + height * 0.5];
          const distanceFromCenter = Math.hypot(
            mouseX - center[0],
            mouseY - center[1]
          );
          const inactiveRadius = 0.5 * Math.min(width, height) * inactiveZone;

          if (distanceFromCenter < inactiveRadius) {
            element.style.setProperty("--active", "0");
            return;
          }

          const isActive =
            mouseX > left - proximity &&
            mouseX < left + width + proximity &&
            mouseY > top - proximity &&
            mouseY < top + height + proximity;

          element.style.setProperty("--active", isActive ? "1" : "0");

          if (!isActive) return;

          const currentAngle =
            parseFloat(element.style.getPropertyValue("--start")) || 0;
          let targetAngle =
            (180 * Math.atan2(mouseY - center[1], mouseX - center[0])) /
            Math.PI +
            90;

          const angleDiff = ((targetAngle - currentAngle + 180) % 360) - 180;
          const newAngle = currentAngle + angleDiff;

          animate(currentAngle, newAngle, {
            duration: movementDuration,
            ease: [0.16, 1, 0.3, 1],
            onUpdate: (value) => {
              element.style.setProperty("--start", String(value));
            },
          });
        });
      },
      [inactiveZone, proximity, movementDuration]
    );

    useEffect(() => {
      if (disabled) return;

      const handleScroll = () => handleMove();
      const handlePointerMove = (e: PointerEvent) => handleMove(e);

      window.addEventListener("scroll", handleScroll, { passive: true });
      document.body.addEventListener("pointermove", handlePointerMove, {
        passive: true,
      });

      return () => {
        if (animationFrameRef.current) {
          cancelAnimationFrame(animationFrameRef.current);
        }
        window.removeEventListener("scroll", handleScroll);
        document.body.removeEventListener("pointermove", handlePointerMove);
      };
    }, [handleMove, disabled]);

    return (
      <>
        <div
          className={cn(
            "pointer-events-none absolute -inset-px hidden rounded-[inherit] border opacity-0 transition-opacity",
            glow && "opacity-100",
            variant === "white" && "border-white",
            disabled && "!block"
          )}
        />
        <div
          ref={containerRef}
          style={
            {
              "--blur": `${blur}px`,
              "--spread": spread,
              "--start": "0",
              "--active": "0",
              "--glowingeffect-border-width": `${borderWidth}px`,
              "--repeating-conic-gradient-times": "5",
              "--gradient":
                variant === "white"
                  ? `repeating-conic-gradient(
                  from 236.84deg at 50% 50%,
                  var(--black),
                  var(--black) calc(25% / var(--repeating-conic-gradient-times))
                )`
                  : `radial-gradient(circle, #dd7bbb 10%, #dd7bbb00 20%),
                radial-gradient(circle at 40% 40%, #d79f1e 5%, #d79f1e00 15%),
                radial-gradient(circle at 60% 60%, #5a922c 10%, #5a922c00 20%), 
                radial-gradient(circle at 40% 60%, #4c7894 10%, #4c789400 20%),
                repeating-conic-gradient(
                  from 236.84deg at 50% 50%,
                  #dd7bbb 0%,
                  #d79f1e calc(25% / var(--repeating-conic-gradient-times)),
                  #5a922c calc(50% / var(--repeating-conic-gradient-times)), 
                  #4c7894 calc(75% / var(--repeating-conic-gradient-times)),
                  #dd7bbb calc(100% / var(--repeating-conic-gradient-times))
                )`,
            } as React.CSSProperties
          }
          className={cn(
            "pointer-events-none absolute inset-0 rounded-[inherit] opacity-100 transition-opacity",
            glow && "opacity-100",
            blur > 0 && "blur-[var(--blur)] ",
            className,
            disabled && "!hidden"
          )}
        >
          <div
            className={cn(
              "glow",
              "rounded-[inherit]",
              'after:content-[""] after:rounded-[inherit] after:absolute after:inset-[calc(-1*var(--glowingeffect-border-width))]',
              "after:[border:var(--glowingeffect-border-width)_solid_transparent]",
              "after:[background:var(--gradient)] after:[background-attachment:fixed]",
              "after:opacity-[var(--active)] after:transition-opacity after:duration-300",
              "after:[mask-clip:padding-box,border-box]",
              "after:[mask-composite:intersect]",
              "after:[mask-image:linear-gradient(#0000,#0000),conic-gradient(from_calc((var(--start)-var(--spread))*1deg),#00000000_0deg,#fff,#00000000_calc(var(--spread)*2deg))]"
            )}
          />
        </div>
      </>
    );
  }
);

GlowingEffect.displayName = "GlowingEffect";

export { GlowingEffect };
</file>

<file path="frontend/src/components/ui/glowing-stars.tsx">
;

import React, { useEffect, useRef, useState } from "react";
import { AnimatePresence, motion } from "motion/react";
import { cn } from "@/lib/utils";

export const GlowingStarsBackgroundCard = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  const [mouseEnter, setMouseEnter] = useState(false);

  return (
    <div
      onMouseEnter={() => {
        setMouseEnter(true);
      }}
      onMouseLeave={() => {
        setMouseEnter(false);
      }}
      className={cn(
        "bg-[linear-gradient(110deg,#333_0.6%,#222)] p-4 max-w-md max-h-[20rem] h-full w-full rounded-xl border border-[#eaeaea] dark:border-neutral-600",
        className
      )}
    >
      <div className="flex justify-center items-center">
        <Illustration mouseEnter={mouseEnter} />
      </div>
      <div className="px-2 pb-6">{children}</div>
    </div>
  );
};

export const GlowingStarsDescription = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  return (
    <p className={cn("text-base text-white max-w-[16rem]", className)}>
      {children}
    </p>
  );
};

export const GlowingStarsTitle = ({
  className,
  children,
}: {
  className?: string;
  children?: React.ReactNode;
}) => {
  return (
    <h2 className={cn("font-bold text-2xl text-[#eaeaea]", className)}>
      {children}
    </h2>
  );
};

export const Illustration = ({ mouseEnter }: { mouseEnter: boolean }) => {
  const stars = 108;
  const columns = 18;

  const [glowingStars, setGlowingStars] = useState<number[]>([]);

  const highlightedStars = useRef<number[]>([]);

  useEffect(() => {
    const interval = setInterval(() => {
      highlightedStars.current = Array.from({ length: 5 }, () =>
        Math.floor(Math.random() * stars)
      );
      setGlowingStars([...highlightedStars.current]);
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  return (
    <div
      className="h-48 p-1 w-full"
      style={{
        display: "grid",
        gridTemplateColumns: `repeat(${columns}, 1fr)`,
        gap: `1px`,
      }}
    >
      {[...Array(stars)].map((_, starIdx) => {
        const isGlowing = glowingStars.includes(starIdx);
        const delay = (starIdx % 10) * 0.1;
        const staticDelay = starIdx * 0.01;
        return (
          <div
            key={`matrix-col-${starIdx}}`}
            className="relative flex items-center justify-center"
          >
            <Star
              isGlowing={mouseEnter ? true : isGlowing}
              delay={mouseEnter ? staticDelay : delay}
            />
            {mouseEnter && <Glow delay={staticDelay} />}
            <AnimatePresence mode="wait">
              {isGlowing && <Glow delay={delay} />}
            </AnimatePresence>
          </div>
        );
      })}
    </div>
  );
};

const Star = ({ isGlowing, delay }: { isGlowing: boolean; delay: number }) => {
  return (
    <motion.div
      key={delay}
      initial={{
        scale: 1,
      }}
      animate={{
        scale: isGlowing ? [1, 1.2, 2.5, 2.2, 1.5] : 1,
        background: isGlowing ? "#fff" : "#666",
      }}
      transition={{
        duration: 2,
        ease: "easeInOut",
        delay: delay,
      }}
      className={cn("bg-[#666] h-[1px] w-[1px] rounded-full relative z-20")}
    ></motion.div>
  );
};

const Glow = ({ delay }: { delay: number }) => {
  return (
    <motion.div
      initial={{
        opacity: 0,
      }}
      animate={{
        opacity: 1,
      }}
      transition={{
        duration: 2,
        ease: "easeInOut",
        delay: delay,
      }}
      exit={{
        opacity: 0,
      }}
      className="absolute  left-1/2 -translate-x-1/2 z-10 h-[4px] w-[4px] rounded-full bg-blue-500 blur-[1px] shadow-2xl shadow-blue-400"
    />
  );
};
</file>

<file path="frontend/src/components/ui/google-gemini-effect.tsx">
;
import { cn } from "@/lib/utils";
import { motion, MotionValue } from "motion/react";
import React from "react";

const transition = {
  duration: 0,
  ease: "linear",
};

export const GoogleGeminiEffect = ({
  pathLengths,
  title,
  description,
  className,
}: {
  pathLengths: MotionValue[];
  title?: string;
  description?: string;
  className?: string;
}) => {
  return (
    <div className={cn("sticky top-80", className)}>
      <p className="text-lg md:text-7xl font-normal pb-4 text-center bg-clip-text text-transparent bg-gradient-to-b from-neutral-100 to-neutral-300">
        {title || `Build with Aceternity UI`}
      </p>
      <p className="text-xs md:text-xl font-normal text-center text-neutral-400 mt-4 max-w-lg mx-auto">
        {description ||
          `Scroll this component and see the bottom SVG come to life wow this
        works!`}
      </p>
      <div className="w-full h-[890px] -top-60 md:-top-40  flex items-center justify-center bg-red-transparent absolute ">
        <button className="font-bold bg-white rounded-full md:px-4 md:py-2 px-2 py-1 md:mt-24 mt-8 z-30 md:text-base text-black text-xs  w-fit mx-auto ">
          ui.aceternity.com
        </button>
      </div>
      <svg
        width="1440"
        height="890"
        viewBox="0 0 1440 890"
        xmlns="http://www.w3.org/2000/svg"
        className=" absolute -top-60  md:-top-40 w-full"
      >
        <motion.path
          d="M0 663C145.5 663 191 666.265 269 647C326.5 630 339.5 621 397.5 566C439 531.5 455 529.5 490 523C509.664 519.348 521 503.736 538 504.236C553.591 504.236 562.429 514.739 584.66 522.749C592.042 525.408 600.2 526.237 607.356 523.019C624.755 515.195 641.446 496.324 657 496.735C673.408 496.735 693.545 519.572 712.903 526.769C718.727 528.934 725.184 528.395 730.902 525.965C751.726 517.115 764.085 497.106 782 496.735C794.831 496.47 804.103 508.859 822.469 518.515C835.13 525.171 850.214 526.815 862.827 520.069C875.952 513.049 889.748 502.706 903.5 503.736C922.677 505.171 935.293 510.562 945.817 515.673C954.234 519.76 963.095 522.792 972.199 524.954C996.012 530.611 1007.42 534.118 1034 549C1077.5 573.359 1082.5 594.5 1140 629C1206 670 1328.5 662.5 1440 662.5"
          stroke="#FFB7C5"
          strokeWidth="2"
          fill="none"
          initial={{
            pathLength: 0,
          }}
          style={{
            pathLength: pathLengths[0],
          }}
          transition={transition}
        />
        <motion.path
          d="M0 587.5C147 587.5 277 587.5 310 573.5C348 563 392.5 543.5 408 535C434 523.5 426 526.235 479 515.235C494 512.729 523 510.435 534.5 512.735C554.5 516.735 555.5 523.235 576 523.735C592 523.735 616 496.735 633 497.235C648.671 497.235 661.31 515.052 684.774 524.942C692.004 527.989 700.2 528.738 707.349 525.505C724.886 517.575 741.932 498.33 757.5 498.742C773.864 498.742 791.711 520.623 810.403 527.654C816.218 529.841 822.661 529.246 828.451 526.991C849.246 518.893 861.599 502.112 879.5 501.742C886.47 501.597 896.865 506.047 907.429 510.911C930.879 521.707 957.139 519.639 982.951 520.063C1020.91 520.686 1037.5 530.797 1056.5 537C1102.24 556.627 1116.5 570.704 1180.5 579.235C1257.5 589.5 1279 587 1440 588"
          stroke="#FFDDB7"
          strokeWidth="2"
          fill="none"
          initial={{
            pathLength: 0,
          }}
          style={{
            pathLength: pathLengths[1],
          }}
          transition={transition}
        />
        <motion.path
          d="M0 514C147.5 514.333 294.5 513.735 380.5 513.735C405.976 514.94 422.849 515.228 436.37 515.123C477.503 514.803 518.631 506.605 559.508 511.197C564.04 511.706 569.162 512.524 575 513.735C588 516.433 616 521.702 627.5 519.402C647.5 515.402 659 499.235 680.5 499.235C700.5 499.235 725 529.235 742 528.735C757.654 528.735 768.77 510.583 791.793 500.59C798.991 497.465 807.16 496.777 814.423 499.745C832.335 507.064 850.418 524.648 866 524.235C882.791 524.235 902.316 509.786 921.814 505.392C926.856 504.255 932.097 504.674 937.176 505.631C966.993 511.248 970.679 514.346 989.5 514.735C1006.3 515.083 1036.5 513.235 1055.5 513.235C1114.5 513.235 1090.5 513.235 1124 513.235C1177.5 513.235 1178.99 514.402 1241 514.402C1317.5 514.402 1274.5 512.568 1440 513.235"
          stroke="#B1C5FF"
          strokeWidth="2"
          fill="none"
          initial={{
            pathLength: 0,
          }}
          style={{
            pathLength: pathLengths[2],
          }}
          transition={transition}
        />
        <motion.path
          d="M0 438.5C150.5 438.5 261 438.318 323.5 456.5C351 464.5 387.517 484.001 423.5 494.5C447.371 501.465 472 503.735 487 507.735C503.786 512.212 504.5 516.808 523 518.735C547 521.235 564.814 501.235 584.5 501.235C604.5 501.235 626 529.069 643 528.569C658.676 528.569 672.076 511.63 695.751 501.972C703.017 499.008 711.231 498.208 718.298 501.617C735.448 509.889 751.454 529.98 767 529.569C783.364 529.569 801.211 507.687 819.903 500.657C825.718 498.469 832.141 499.104 837.992 501.194C859.178 508.764 873.089 523.365 891 523.735C907.8 524.083 923 504.235 963 506.735C1034.5 506.735 1047.5 492.68 1071 481.5C1122.5 457 1142.23 452.871 1185 446.5C1255.5 436 1294 439 1439.5 439"
          stroke="#4FABFF"
          strokeWidth="2"
          fill="none"
          initial={{
            pathLength: 0,
          }}
          style={{
            pathLength: pathLengths[3],
          }}
          transition={transition}
        />
        <motion.path
          d="M0.5 364C145.288 362.349 195 361.5 265.5 378C322 391.223 399.182 457.5 411 467.5C424.176 478.649 456.916 491.677 496.259 502.699C498.746 503.396 501.16 504.304 503.511 505.374C517.104 511.558 541.149 520.911 551.5 521.236C571.5 521.236 590 498.736 611.5 498.736C631.5 498.736 652.5 529.236 669.5 528.736C685.171 528.736 697.81 510.924 721.274 501.036C728.505 497.988 736.716 497.231 743.812 500.579C761.362 508.857 778.421 529.148 794 528.736C810.375 528.736 829.35 508.68 848.364 502.179C854.243 500.169 860.624 500.802 866.535 502.718C886.961 509.338 898.141 519.866 916 520.236C932.8 520.583 934.5 510.236 967.5 501.736C1011.5 491 1007.5 493.5 1029.5 480C1069.5 453.5 1072 440.442 1128.5 403.5C1180.5 369.5 1275 360.374 1439 364"
          stroke="#076EFF"
          strokeWidth="2"
          fill="none"
          initial={{
            pathLength: 0,
          }}
          style={{
            pathLength: pathLengths[4],
          }}
          transition={transition}
        />

        {/* Gaussian blur for the background paths */}

        <path
          d="M0 663C145.5 663 191 666.265 269 647C326.5 630 339.5 621 397.5 566C439 531.5 455 529.5 490 523C509.664 519.348 521 503.736 538 504.236C553.591 504.236 562.429 514.739 584.66 522.749C592.042 525.408 600.2 526.237 607.356 523.019C624.755 515.195 641.446 496.324 657 496.735C673.408 496.735 693.545 519.572 712.903 526.769C718.727 528.934 725.184 528.395 730.902 525.965C751.726 517.115 764.085 497.106 782 496.735C794.831 496.47 804.103 508.859 822.469 518.515C835.13 525.171 850.214 526.815 862.827 520.069C875.952 513.049 889.748 502.706 903.5 503.736C922.677 505.171 935.293 510.562 945.817 515.673C954.234 519.76 963.095 522.792 972.199 524.954C996.012 530.611 1007.42 534.118 1034 549C1077.5 573.359 1082.5 594.5 1140 629C1206 670 1328.5 662.5 1440 662.5"
          stroke="#FFB7C5"
          strokeWidth="2"
          fill="none"
          pathLength={1}
          filter="url(#blurMe)"
        />
        <path
          d="M0 587.5C147 587.5 277 587.5 310 573.5C348 563 392.5 543.5 408 535C434 523.5 426 526.235 479 515.235C494 512.729 523 510.435 534.5 512.735C554.5 516.735 555.5 523.235 576 523.735C592 523.735 616 496.735 633 497.235C648.671 497.235 661.31 515.052 684.774 524.942C692.004 527.989 700.2 528.738 707.349 525.505C724.886 517.575 741.932 498.33 757.5 498.742C773.864 498.742 791.711 520.623 810.403 527.654C816.218 529.841 822.661 529.246 828.451 526.991C849.246 518.893 861.599 502.112 879.5 501.742C886.47 501.597 896.865 506.047 907.429 510.911C930.879 521.707 957.139 519.639 982.951 520.063C1020.91 520.686 1037.5 530.797 1056.5 537C1102.24 556.627 1116.5 570.704 1180.5 579.235C1257.5 589.5 1279 587 1440 588"
          stroke="#FFDDB7"
          strokeWidth="2"
          fill="none"
          pathLength={1}
          filter="url(#blurMe)"
        />
        <path
          d="M0 514C147.5 514.333 294.5 513.735 380.5 513.735C405.976 514.94 422.849 515.228 436.37 515.123C477.503 514.803 518.631 506.605 559.508 511.197C564.04 511.706 569.162 512.524 575 513.735C588 516.433 616 521.702 627.5 519.402C647.5 515.402 659 499.235 680.5 499.235C700.5 499.235 725 529.235 742 528.735C757.654 528.735 768.77 510.583 791.793 500.59C798.991 497.465 807.16 496.777 814.423 499.745C832.335 507.064 850.418 524.648 866 524.235C882.791 524.235 902.316 509.786 921.814 505.392C926.856 504.255 932.097 504.674 937.176 505.631C966.993 511.248 970.679 514.346 989.5 514.735C1006.3 515.083 1036.5 513.235 1055.5 513.235C1114.5 513.235 1090.5 513.235 1124 513.235C1177.5 513.235 1178.99 514.402 1241 514.402C1317.5 514.402 1274.5 512.568 1440 513.235"
          stroke="#B1C5FF"
          strokeWidth="2"
          fill="none"
          pathLength={1}
          filter="url(#blurMe)"
        />
        <path
          d="M0 438.5C150.5 438.5 261 438.318 323.5 456.5C351 464.5 387.517 484.001 423.5 494.5C447.371 501.465 472 503.735 487 507.735C503.786 512.212 504.5 516.808 523 518.735C547 521.235 564.814 501.235 584.5 501.235C604.5 501.235 626 529.069 643 528.569C658.676 528.569 672.076 511.63 695.751 501.972C703.017 499.008 711.231 498.208 718.298 501.617C735.448 509.889 751.454 529.98 767 529.569C783.364 529.569 801.211 507.687 819.903 500.657C825.718 498.469 832.141 499.104 837.992 501.194C859.178 508.764 873.089 523.365 891 523.735C907.8 524.083 923 504.235 963 506.735C1034.5 506.735 1047.5 492.68 1071 481.5C1122.5 457 1142.23 452.871 1185 446.5C1255.5 436 1294 439 1439.5 439"
          stroke="#4FABFF"
          strokeWidth="2"
          fill="none"
          pathLength={1}
          filter="url(#blurMe)"
        />
        <path
          d="M0.5 364C145.288 362.349 195 361.5 265.5 378C322 391.223 399.182 457.5 411 467.5C424.176 478.649 456.916 491.677 496.259 502.699C498.746 503.396 501.16 504.304 503.511 505.374C517.104 511.558 541.149 520.911 551.5 521.236C571.5 521.236 590 498.736 611.5 498.736C631.5 498.736 652.5 529.236 669.5 528.736C685.171 528.736 697.81 510.924 721.274 501.036C728.505 497.988 736.716 497.231 743.812 500.579C761.362 508.857 778.421 529.148 794 528.736C810.375 528.736 829.35 508.68 848.364 502.179C854.243 500.169 860.624 500.802 866.535 502.718C886.961 509.338 898.141 519.866 916 520.236C932.8 520.583 934.5 510.236 967.5 501.736C1011.5 491 1007.5 493.5 1029.5 480C1069.5 453.5 1072 440.442 1128.5 403.5C1180.5 369.5 1275 360.374 1439 364"
          stroke="#076EFF"
          strokeWidth="2"
          fill="none"
          pathLength={1}
          filter="url(#blurMe)"
        />

        <defs>
          <filter id="blurMe">
            <feGaussianBlur in="SourceGraphic" stdDeviation="5" />
          </filter>
        </defs>
      </svg>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/hero-highlight.tsx">
;
import { cn } from "@/lib/utils";
import { useMotionValue, motion, useMotionTemplate } from "motion/react";
import React from "react";

export const HeroHighlight = ({
  children,
  className,
  containerClassName,
}: {
  children: React.ReactNode;
  className?: string;
  containerClassName?: string;
}) => {
  let mouseX = useMotionValue(0);
  let mouseY = useMotionValue(0);

  // SVG patterns for different states and themes
  const dotPatterns = {
    light: {
      default: `url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='16' height='16' fill='none'%3E%3Ccircle fill='%23d4d4d4' id='pattern-circle' cx='10' cy='10' r='2.5'%3E%3C/circle%3E%3C/svg%3E")`,
      hover: `url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='16' height='16' fill='none'%3E%3Ccircle fill='%236366f1' id='pattern-circle' cx='10' cy='10' r='2.5'%3E%3C/circle%3E%3C/svg%3E")`,
    },
    dark: {
      default: `url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='16' height='16' fill='none'%3E%3Ccircle fill='%23404040' id='pattern-circle' cx='10' cy='10' r='2.5'%3E%3C/circle%3E%3C/svg%3E")`,
      hover: `url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='16' height='16' fill='none'%3E%3Ccircle fill='%238183f4' id='pattern-circle' cx='10' cy='10' r='2.5'%3E%3C/circle%3E%3C/svg%3E")`,
    },
  };

  function handleMouseMove({
    currentTarget,
    clientX,
    clientY,
  }: React.MouseEvent<HTMLDivElement>) {
    if (!currentTarget) return;
    let { left, top } = currentTarget.getBoundingClientRect();

    mouseX.set(clientX - left);
    mouseY.set(clientY - top);
  }
  return (
    <div
      className={cn(
        "group relative flex h-[40rem] w-full items-center justify-center bg-white dark:bg-black",
        containerClassName,
      )}
      onMouseMove={handleMouseMove}
    >
      <div
        className="pointer-events-none absolute inset-0 dark:hidden"
        style={{
          backgroundImage: dotPatterns.light.default,
        }}
      />
      <div
        className="pointer-events-none absolute inset-0 hidden dark:block"
        style={{
          backgroundImage: dotPatterns.dark.default,
        }}
      />
      <motion.div
        className="pointer-events-none absolute inset-0 opacity-0 transition duration-300 group-hover:opacity-100 dark:hidden"
        style={{
          backgroundImage: dotPatterns.light.hover,
          WebkitMaskImage: useMotionTemplate`
            radial-gradient(
              200px circle at ${mouseX}px ${mouseY}px,
              black 0%,
              transparent 100%
            )
          `,
          maskImage: useMotionTemplate`
            radial-gradient(
              200px circle at ${mouseX}px ${mouseY}px,
              black 0%,
              transparent 100%
            )
          `,
        }}
      />
      <motion.div
        className="pointer-events-none absolute inset-0 hidden opacity-0 transition duration-300 group-hover:opacity-100 dark:block"
        style={{
          backgroundImage: dotPatterns.dark.hover,
          WebkitMaskImage: useMotionTemplate`
            radial-gradient(
              200px circle at ${mouseX}px ${mouseY}px,
              black 0%,
              transparent 100%
            )
          `,
          maskImage: useMotionTemplate`
            radial-gradient(
              200px circle at ${mouseX}px ${mouseY}px,
              black 0%,
              transparent 100%
            )
          `,
        }}
      />

      <div className={cn("relative z-20", className)}>{children}</div>
    </div>
  );
};

export const Highlight = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  return (
    <motion.span
      initial={{
        backgroundSize: "0% 100%",
      }}
      animate={{
        backgroundSize: "100% 100%",
      }}
      transition={{
        duration: 2,
        ease: "linear",
        delay: 0.5,
      }}
      style={{
        backgroundRepeat: "no-repeat",
        backgroundPosition: "left center",
        display: "inline",
      }}
      className={cn(
        `relative inline-block rounded-lg bg-gradient-to-r from-indigo-300 to-purple-300 px-1 pb-1 dark:from-indigo-500 dark:to-purple-500`,
        className,
      )}
    >
      {children}
    </motion.span>
  );
};
</file>

<file path="frontend/src/components/ui/hero-parallax.tsx">
;
import React from "react";
import {
  motion,
  useScroll,
  useTransform,
  useSpring,
  MotionValue,
} from "motion/react";



export const HeroParallax = ({
  products,
}: {
  products: {
    title: string;
    link: string;
    thumbnail: string;
  }[];
}) => {
  const firstRow = products.slice(0, 5);
  const secondRow = products.slice(5, 10);
  const thirdRow = products.slice(10, 15);
  const ref = React.useRef(null);
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start start", "end start"],
  });

  const springConfig = { stiffness: 300, damping: 30, bounce: 100 };

  const translateX = useSpring(
    useTransform(scrollYProgress, [0, 1], [0, 1000]),
    springConfig
  );
  const translateXReverse = useSpring(
    useTransform(scrollYProgress, [0, 1], [0, -1000]),
    springConfig
  );
  const rotateX = useSpring(
    useTransform(scrollYProgress, [0, 0.2], [15, 0]),
    springConfig
  );
  const opacity = useSpring(
    useTransform(scrollYProgress, [0, 0.2], [0.2, 1]),
    springConfig
  );
  const rotateZ = useSpring(
    useTransform(scrollYProgress, [0, 0.2], [20, 0]),
    springConfig
  );
  const translateY = useSpring(
    useTransform(scrollYProgress, [0, 0.2], [-700, 500]),
    springConfig
  );
  return (
    <div
      ref={ref}
      className="h-[300vh] py-40 overflow-hidden  antialiased relative flex flex-col self-auto [perspective:1000px] [transform-style:preserve-3d]"
    >
      <Header />
      <motion.div
        style={{
          rotateX,
          rotateZ,
          translateY,
          opacity,
        }}
        className=""
      >
        <motion.div className="flex flex-row-reverse space-x-reverse space-x-20 mb-20">
          {firstRow.map((product) => (
            <ProductCard
              product={product}
              translate={translateX}
              key={product.title}
            />
          ))}
        </motion.div>
        <motion.div className="flex flex-row  mb-20 space-x-20 ">
          {secondRow.map((product) => (
            <ProductCard
              product={product}
              translate={translateXReverse}
              key={product.title}
            />
          ))}
        </motion.div>
        <motion.div className="flex flex-row-reverse space-x-reverse space-x-20">
          {thirdRow.map((product) => (
            <ProductCard
              product={product}
              translate={translateX}
              key={product.title}
            />
          ))}
        </motion.div>
      </motion.div>
    </div>
  );
};

export const Header = () => {
  return (
    <div className="max-w-7xl relative mx-auto py-20 md:py-40 px-4 w-full  left-0 top-0">
      <h1 className="text-2xl md:text-7xl font-bold dark:text-white">
        The Ultimate <br /> development studio
      </h1>
      <p className="max-w-2xl text-base md:text-xl mt-8 dark:text-neutral-200">
        We build beautiful products with the latest technologies and frameworks.
        We are a team of passionate developers and designers that love to build
        amazing products.
      </p>
    </div>
  );
};

export const ProductCard = ({
  product,
  translate,
}: {
  product: {
    title: string;
    link: string;
    thumbnail: string;
  };
  translate: MotionValue<number>;
}) => {
  return (
    <motion.div
      style={{
        x: translate,
      }}
      whileHover={{
        y: -20,
      }}
      key={product.title}
      className="group/product h-96 w-[30rem] relative shrink-0"
    >
      <a
        href={product.link}
        className="block group-hover/product:shadow-2xl "
      >
        <img
          src={product.thumbnail}
          height="600"
          width="600"
          className="object-cover object-left-top absolute h-full w-full inset-0"
          alt={product.title}
        />
      </a>
      <div className="absolute inset-0 h-full w-full opacity-0 group-hover/product:opacity-80 bg-black pointer-events-none"></div>
      <h2 className="absolute bottom-4 left-4 opacity-0 group-hover/product:opacity-100 text-white">
        {product.title}
      </h2>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/hover-border-gradient.tsx">
;
import React, { useState, useEffect, useRef } from "react";

import { motion } from "motion/react";
import { cn } from "@/lib/utils";

type Direction = "TOP" | "LEFT" | "BOTTOM" | "RIGHT";

export function HoverBorderGradient({
  children,
  containerClassName,
  className,
  as: Tag = "button",
  duration = 1,
  clockwise = true,
  ...props
}: React.PropsWithChildren<
  {
    as?: React.ElementType;
    containerClassName?: string;
    className?: string;
    duration?: number;
    clockwise?: boolean;
  } & React.HTMLAttributes<HTMLElement>
>) {
  const [hovered, setHovered] = useState<boolean>(false);
  const [direction, setDirection] = useState<Direction>("TOP");

  const rotateDirection = (currentDirection: Direction): Direction => {
    const directions: Direction[] = ["TOP", "LEFT", "BOTTOM", "RIGHT"];
    const currentIndex = directions.indexOf(currentDirection);
    const nextIndex = clockwise
      ? (currentIndex - 1 + directions.length) % directions.length
      : (currentIndex + 1) % directions.length;
    return directions[nextIndex];
  };

  const movingMap: Record<Direction, string> = {
    TOP: "radial-gradient(20.7% 50% at 50% 0%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",
    LEFT: "radial-gradient(16.6% 43.1% at 0% 50%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",
    BOTTOM:
      "radial-gradient(20.7% 50% at 50% 100%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",
    RIGHT:
      "radial-gradient(16.2% 41.199999999999996% at 100% 50%, hsl(0, 0%, 100%) 0%, rgba(255, 255, 255, 0) 100%)",
  };

  const highlight =
    "radial-gradient(75% 181.15942028985506% at 50% 50%, #3275F8 0%, rgba(255, 255, 255, 0) 100%)";

  useEffect(() => {
    if (!hovered) {
      const interval = setInterval(() => {
        setDirection((prevState) => rotateDirection(prevState));
      }, duration * 1000);
      return () => clearInterval(interval);
    }
  }, [hovered]);
  return (
    <Tag
      onMouseEnter={(event: React.MouseEvent<HTMLDivElement>) => {
        setHovered(true);
      }}
      onMouseLeave={() => setHovered(false)}
      className={cn(
        "relative flex rounded-full border  content-center bg-black/20 hover:bg-black/10 transition duration-500 dark:bg-white/20 items-center flex-col flex-nowrap gap-10 h-min justify-center overflow-visible p-px decoration-clone w-fit",
        containerClassName
      )}
      {...props}
    >
      <div
        className={cn(
          "w-auto text-white z-10 bg-black px-4 py-2 rounded-[inherit]",
          className
        )}
      >
        {children}
      </div>
      <motion.div
        className={cn(
          "flex-none inset-0 overflow-hidden absolute z-0 rounded-[inherit]"
        )}
        style={{
          filter: "blur(2px)",
          position: "absolute",
          width: "100%",
          height: "100%",
        }}
        initial={{ background: movingMap[direction] }}
        animate={{
          background: hovered
            ? [movingMap[direction], highlight]
            : movingMap[direction],
        }}
        transition={{ ease: "linear", duration: duration ?? 1 }}
      />
      <div className="bg-black absolute z-1 flex-none inset-[2px] rounded-[100px]" />
    </Tag>
  );
}
</file>

<file path="frontend/src/components/ui/images-slider.tsx">
;
import { cn } from "@/lib/utils";
import { motion, AnimatePresence } from "motion/react";
import React, { useEffect, useState } from "react";

export const ImagesSlider = ({
  images,
  children,
  overlay = true,
  overlayClassName,
  className,
  autoplay = true,
  direction = "up",
}: {
  images: string[];
  children: React.ReactNode;
  overlay?: React.ReactNode;
  overlayClassName?: string;
  className?: string;
  autoplay?: boolean;
  direction?: "up" | "down";
}) => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [loading, setLoading] = useState(false);
  const [loadedImages, setLoadedImages] = useState<string[]>([]);

  const handleNext = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex + 1 === images.length ? 0 : prevIndex + 1
    );
  };

  const handlePrevious = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex - 1 < 0 ? images.length - 1 : prevIndex - 1
    );
  };

  useEffect(() => {
    loadImages();
  }, []);

  const loadImages = () => {
    setLoading(true);
    const loadPromises = images.map((image) => {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.src = image;
        img.onload = () => resolve(image);
        img.onerror = reject;
      });
    });

    Promise.all(loadPromises)
      .then((loadedImages) => {
        setLoadedImages(loadedImages as string[]);
        setLoading(false);
      })
      .catch((error) => console.error("Failed to load images", error));
  };
  useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (event.key === "ArrowRight") {
        handleNext();
      } else if (event.key === "ArrowLeft") {
        handlePrevious();
      }
    };

    window.addEventListener("keydown", handleKeyDown);

    // autoplay
    let interval: any;
    if (autoplay) {
      interval = setInterval(() => {
        handleNext();
      }, 5000);
    }

    return () => {
      window.removeEventListener("keydown", handleKeyDown);
      clearInterval(interval);
    };
  }, []);

  const slideVariants = {
    initial: {
      scale: 0,
      opacity: 0,
      rotateX: 45,
    },
    visible: {
      scale: 1,
      rotateX: 0,
      opacity: 1,
      transition: {
        duration: 0.5,
        ease: [0.645, 0.045, 0.355, 1.0],
      },
    },
    upExit: {
      opacity: 1,
      y: "-150%",
      transition: {
        duration: 1,
      },
    },
    downExit: {
      opacity: 1,
      y: "150%",
      transition: {
        duration: 1,
      },
    },
  };

  const areImagesLoaded = loadedImages.length > 0;

  return (
    <div
      className={cn(
        "overflow-hidden h-full w-full relative flex items-center justify-center",
        className
      )}
      style={{
        perspective: "1000px",
      }}
    >
      {areImagesLoaded && children}
      {areImagesLoaded && overlay && (
        <div
          className={cn("absolute inset-0 bg-black/60 z-40", overlayClassName)}
        />
      )}

      {areImagesLoaded && (
        <AnimatePresence>
          <motion.img
            key={currentIndex}
            src={loadedImages[currentIndex]}
            initial="initial"
            animate="visible"
            exit={direction === "up" ? "upExit" : "downExit"}
            variants={slideVariants}
            className="image h-full w-full absolute inset-0 object-cover object-center"
          />
        </AnimatePresence>
      )}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/infinite-moving-cards.tsx">
;

import { cn } from "@/lib/utils";
import React, { useEffect, useState } from "react";

export const InfiniteMovingCards = ({
  items,
  direction = "left",
  speed = "fast",
  pauseOnHover = true,
  className,
}: {
  items: {
    quote: string;
    name: string;
    title: string;
  }[];
  direction?: "left" | "right";
  speed?: "fast" | "normal" | "slow";
  pauseOnHover?: boolean;
  className?: string;
}) => {
  const containerRef = React.useRef<HTMLDivElement>(null);
  const scrollerRef = React.useRef<HTMLUListElement>(null);

  useEffect(() => {
    addAnimation();
  }, []);
  const [start, setStart] = useState(false);
  function addAnimation() {
    if (containerRef.current && scrollerRef.current) {
      const scrollerContent = Array.from(scrollerRef.current.children);

      scrollerContent.forEach((item) => {
        const duplicatedItem = item.cloneNode(true);
        if (scrollerRef.current) {
          scrollerRef.current.appendChild(duplicatedItem);
        }
      });

      getDirection();
      getSpeed();
      setStart(true);
    }
  }
  const getDirection = () => {
    if (containerRef.current) {
      if (direction === "left") {
        containerRef.current.style.setProperty(
          "--animation-direction",
          "forwards",
        );
      } else {
        containerRef.current.style.setProperty(
          "--animation-direction",
          "reverse",
        );
      }
    }
  };
  const getSpeed = () => {
    if (containerRef.current) {
      if (speed === "fast") {
        containerRef.current.style.setProperty("--animation-duration", "20s");
      } else if (speed === "normal") {
        containerRef.current.style.setProperty("--animation-duration", "40s");
      } else {
        containerRef.current.style.setProperty("--animation-duration", "80s");
      }
    }
  };
  return (
    <div
      ref={containerRef}
      className={cn(
        "scroller relative z-20 max-w-7xl overflow-hidden [mask-image:linear-gradient(to_right,transparent,white_20%,white_80%,transparent)]",
        className,
      )}
    >
      <ul
        ref={scrollerRef}
        className={cn(
          "flex w-max min-w-full shrink-0 flex-nowrap gap-4 py-4",
          start && "animate-scroll",
          pauseOnHover && "hover:[animation-play-state:paused]",
        )}
      >
        {items.map((item, idx) => (
          <li
            className="relative w-[350px] max-w-full shrink-0 rounded-2xl border border-b-0 border-zinc-200 bg-[linear-gradient(180deg,#fafafa,#f5f5f5)] px-8 py-6 md:w-[450px] dark:border-zinc-700 dark:bg-[linear-gradient(180deg,#27272a,#18181b)]"
            key={item.name}
          >
            <blockquote>
              <div
                aria-hidden="true"
                className="user-select-none pointer-events-none absolute -top-0.5 -left-0.5 -z-1 h-[calc(100%_+_4px)] w-[calc(100%_+_4px)]"
              ></div>
              <span className="relative z-20 text-sm leading-[1.6] font-normal text-neutral-800 dark:text-gray-100">
                {item.quote}
              </span>
              <div className="relative z-20 mt-6 flex flex-row items-center">
                <span className="flex flex-col gap-1">
                  <span className="text-sm leading-[1.6] font-normal text-neutral-500 dark:text-gray-400">
                    {item.name}
                  </span>
                  <span className="text-sm leading-[1.6] font-normal text-neutral-500 dark:text-gray-400">
                    {item.title}
                  </span>
                </span>
              </div>
            </blockquote>
          </li>
        ))}
      </ul>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/input.tsx">
;
import * as React from "react";
import { cn } from "@/lib/utils";
import { useMotionTemplate, useMotionValue, motion } from "motion/react";

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> { }

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    const radius = 100; // change this to increase the rdaius of the hover effect
    const [visible, setVisible] = React.useState(false);

    let mouseX = useMotionValue(0);
    let mouseY = useMotionValue(0);

    function handleMouseMove({ currentTarget, clientX, clientY }: any) {
      let { left, top } = currentTarget.getBoundingClientRect();

      mouseX.set(clientX - left);
      mouseY.set(clientY - top);
    }
    return (
      <motion.div
        style={{
          background: useMotionTemplate`
        radial-gradient(
          ${visible ? radius + "px" : "0px"} circle at ${mouseX}px ${mouseY}px,
          #3b82f6,
          transparent 80%
        )
      `,
        }}
        onMouseMove={handleMouseMove}
        onMouseEnter={() => setVisible(true)}
        onMouseLeave={() => setVisible(false)}
        className="group/input rounded-lg p-[2px] transition duration-300"
      >
        <input
          type={type}
          className={cn(
            `shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600`,
            className,
          )}
          ref={ref}
          {...props}
        />
      </motion.div>
    );
  },
);
Input.displayName = "Input";

export { Input };
</file>

<file path="frontend/src/components/ui/label.tsx">
;
import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label";

import { cn } from "@/lib/utils";

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(
      "text-sm font-medium text-black dark:text-white leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",
      className
    )}
    {...props}
  />
));
Label.displayName = LabelPrimitive.Root.displayName;

export { Label };
</file>

<file path="frontend/src/components/ui/lamp.tsx">
;
import React from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export default function LampDemo() {
  return (
    <LampContainer>
      <motion.h1
        initial={{ opacity: 0.5, y: 100 }}
        whileInView={{ opacity: 1, y: 0 }}
        transition={{
          delay: 0.3,
          duration: 0.8,
          ease: "easeInOut",
        }}
        className="mt-8 bg-gradient-to-br from-slate-300 to-slate-500 py-4 bg-clip-text text-center text-4xl font-medium tracking-tight text-transparent md:text-7xl"
      >
        Build lamps <br /> the right way
      </motion.h1>
    </LampContainer>
  );
}

export const LampContainer = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  return (
    <div
      className={cn(
        "relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-slate-950 w-full rounded-md z-0",
        className
      )}
    >
      <div className="relative flex w-full flex-1 scale-y-125 items-center justify-center isolate z-0 ">
        <motion.div
          initial={{ opacity: 0.5, width: "15rem" }}
          whileInView={{ opacity: 1, width: "30rem" }}
          transition={{
            delay: 0.3,
            duration: 0.8,
            ease: "easeInOut",
          }}
          style={{
            backgroundImage: `conic-gradient(var(--conic-position), var(--tw-gradient-stops))`,
          }}
          className="absolute inset-auto right-1/2 h-56 overflow-visible w-[30rem] bg-gradient-conic from-cyan-500 via-transparent to-transparent text-white [--conic-position:from_70deg_at_center_top]"
        >
          <div className="absolute  w-[100%] left-0 bg-slate-950 h-40 bottom-0 z-20 [mask-image:linear-gradient(to_top,white,transparent)]" />
          <div className="absolute  w-40 h-[100%] left-0 bg-slate-950  bottom-0 z-20 [mask-image:linear-gradient(to_right,white,transparent)]" />
        </motion.div>
        <motion.div
          initial={{ opacity: 0.5, width: "15rem" }}
          whileInView={{ opacity: 1, width: "30rem" }}
          transition={{
            delay: 0.3,
            duration: 0.8,
            ease: "easeInOut",
          }}
          style={{
            backgroundImage: `conic-gradient(var(--conic-position), var(--tw-gradient-stops))`,
          }}
          className="absolute inset-auto left-1/2 h-56 w-[30rem] bg-gradient-conic from-transparent via-transparent to-cyan-500 text-white [--conic-position:from_290deg_at_center_top]"
        >
          <div className="absolute  w-40 h-[100%] right-0 bg-slate-950  bottom-0 z-20 [mask-image:linear-gradient(to_left,white,transparent)]" />
          <div className="absolute  w-[100%] right-0 bg-slate-950 h-40 bottom-0 z-20 [mask-image:linear-gradient(to_top,white,transparent)]" />
        </motion.div>
        <div className="absolute top-1/2 h-48 w-full translate-y-12 scale-x-150 bg-slate-950 blur-2xl"></div>
        <div className="absolute top-1/2 z-50 h-48 w-full bg-transparent opacity-10 backdrop-blur-md"></div>
        <div className="absolute inset-auto z-50 h-36 w-[28rem] -translate-y-1/2 rounded-full bg-cyan-500 opacity-50 blur-3xl"></div>
        <motion.div
          initial={{ width: "8rem" }}
          whileInView={{ width: "16rem" }}
          transition={{
            delay: 0.3,
            duration: 0.8,
            ease: "easeInOut",
          }}
          className="absolute inset-auto z-30 h-36 w-64 -translate-y-[6rem] rounded-full bg-cyan-400 blur-2xl"
        ></motion.div>
        <motion.div
          initial={{ width: "15rem" }}
          whileInView={{ width: "30rem" }}
          transition={{
            delay: 0.3,
            duration: 0.8,
            ease: "easeInOut",
          }}
          className="absolute inset-auto z-50 h-0.5 w-[30rem] -translate-y-[7rem] bg-cyan-400 "
        ></motion.div>

        <div className="absolute inset-auto z-40 h-44 w-full -translate-y-[12.5rem] bg-slate-950 "></div>
      </div>

      <div className="relative z-50 flex -translate-y-80 flex-col items-center px-5">
        {children}
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/layout-grid.tsx">
;
import React, { useState } from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

type Card = {
  id: number;
  content: JSX.Element | React.ReactNode | string;
  className: string;
  thumbnail: string;
};

export const LayoutGrid = ({ cards }: { cards: Card[] }) => {
  const [selected, setSelected] = useState<Card | null>(null);
  const [lastSelected, setLastSelected] = useState<Card | null>(null);

  const handleClick = (card: Card) => {
    setLastSelected(selected);
    setSelected(card);
  };

  const handleOutsideClick = () => {
    setLastSelected(selected);
    setSelected(null);
  };

  return (
    <div className="w-full h-full p-10 grid grid-cols-1 md:grid-cols-3  max-w-7xl mx-auto gap-4 relative">
      {cards.map((card, i) => (
        <div key={i} className={cn(card.className, "")}>
          <motion.div
            onClick={() => handleClick(card)}
            className={cn(
              card.className,
              "relative overflow-hidden",
              selected?.id === card.id
                ? "rounded-lg cursor-pointer absolute inset-0 h-1/2 w-full md:w-1/2 m-auto z-50 flex justify-center items-center flex-wrap flex-col"
                : lastSelected?.id === card.id
                  ? "z-40 bg-white rounded-xl h-full w-full"
                  : "bg-white rounded-xl h-full w-full"
            )}
            layoutId={`card-${card.id}`}
          >
            {selected?.id === card.id && <SelectedCard selected={selected} />}
            <ImageComponent card={card} />
          </motion.div>
        </div>
      ))}
      <motion.div
        onClick={handleOutsideClick}
        className={cn(
          "absolute h-full w-full left-0 top-0 bg-black opacity-0 z-10",
          selected?.id ? "pointer-events-auto" : "pointer-events-none"
        )}
        animate={{ opacity: selected?.id ? 0.3 : 0 }}
      />
    </div>
  );
};

const ImageComponent = ({ card }: { card: Card }) => {
  return (
    <motion.img
      layoutId={`image-${card.id}-image`}
      src={card.thumbnail}
      height="500"
      width="500"
      className={cn(
        "object-cover object-top absolute inset-0 h-full w-full transition duration-200"
      )}
      alt="thumbnail"
    />
  );
};

const SelectedCard = ({ selected }: { selected: Card | null }) => {
  return (
    <div className="bg-transparent h-full w-full flex flex-col justify-end rounded-lg shadow-2xl relative z-[60]">
      <motion.div
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 0.6,
        }}
        className="absolute inset-0 h-full w-full bg-black opacity-60 z-10"
      />
      <motion.div
        layoutId={`content-${selected?.id}`}
        initial={{
          opacity: 0,
          y: 100,
        }}
        animate={{
          opacity: 1,
          y: 0,
        }}
        exit={{
          opacity: 0,
          y: 100,
        }}
        transition={{
          duration: 0.3,
          ease: "easeInOut",
        }}
        className="relative px-8 pb-4 z-[70]"
      >
        {selected?.content}
      </motion.div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/lens.tsx">
;

import React, { useRef, useState } from "react";
import { AnimatePresence, motion } from "motion/react";

interface LensProps {
  children: React.ReactNode;
  zoomFactor?: number;
  lensSize?: number;
  position?: {
    x: number;
    y: number;
  };
  isStatic?: boolean;
  isFocusing?: () => void;
  hovering?: boolean;
  setHovering?: (hovering: boolean) => void;
}

export const Lens: React.FC<LensProps> = ({
  children,
  zoomFactor = 1.5,
  lensSize = 170,
  isStatic = false,
  position = { x: 200, y: 150 },
  hovering,
  setHovering,
}) => {
  const containerRef = useRef<HTMLDivElement>(null);

  const [localIsHovering, setLocalIsHovering] = useState(false);

  const isHovering = hovering !== undefined ? hovering : localIsHovering;
  const setIsHovering = setHovering || setLocalIsHovering;

  // const [isHovering, setIsHovering] = useState(false);
  const [mousePosition, setMousePosition] = useState({ x: 100, y: 100 });

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    setMousePosition({ x, y });
  };

  return (
    <div
      ref={containerRef}
      className="relative overflow-hidden rounded-lg z-20"
      onMouseEnter={() => {
        setIsHovering(true);
      }}
      onMouseLeave={() => setIsHovering(false)}
      onMouseMove={handleMouseMove}
    >
      {children}

      {isStatic ? (
        <div>
          <motion.div
            initial={{ opacity: 0, scale: 0.58 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.8 }}
            transition={{ duration: 0.3, ease: "easeOut" }}
            className="absolute inset-0 overflow-hidden"
            style={{
              maskImage: `radial-gradient(circle ${lensSize / 2}px at ${position.x
                }px ${position.y}px, black 100%, transparent 100%)`,
              WebkitMaskImage: `radial-gradient(circle ${lensSize / 2}px at ${position.x
                }px ${position.y}px, black 100%, transparent 100%)`,
              transformOrigin: `${position.x}px ${position.y}px`,
            }}
          >
            <div
              className="absolute inset-0"
              style={{
                transform: `scale(${zoomFactor})`,
                transformOrigin: `${position.x}px ${position.y}px`,
              }}
            >
              {children}
            </div>
          </motion.div>
        </div>
      ) : (
        <AnimatePresence>
          {isHovering && (
            <div>
              <motion.div
                initial={{ opacity: 0, scale: 0.58 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.8 }}
                transition={{ duration: 0.3, ease: "easeOut" }}
                className="absolute inset-0 overflow-hidden"
                style={{
                  maskImage: `radial-gradient(circle ${lensSize / 2}px at ${mousePosition.x
                    }px ${mousePosition.y}px, black 100%, transparent 100%)`,
                  WebkitMaskImage: `radial-gradient(circle ${lensSize / 2
                    }px at ${mousePosition.x}px ${mousePosition.y
                    }px, black 100%, transparent 100%)`,
                  transformOrigin: `${mousePosition.x}px ${mousePosition.y}px`,
                  zIndex: 50,
                }}
              >
                <div
                  className="absolute inset-0"
                  style={{
                    transform: `scale(${zoomFactor})`,
                    transformOrigin: `${mousePosition.x}px ${mousePosition.y}px`,
                  }}
                >
                  {children}
                </div>
              </motion.div>
            </div>
          )}
        </AnimatePresence>
      )}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/link-preview.tsx">
;
import * as HoverCardPrimitive from "@radix-ui/react-hover-card";

import { encode } from "qss";
import React from "react";
import {
  AnimatePresence,
  motion,
  useMotionValue,
  useSpring,
} from "motion/react";

import { cn } from "@/lib/utils";

type LinkPreviewProps = {
  children: React.ReactNode;
  url: string;
  className?: string;
  width?: number;
  height?: number;
  quality?: number;
  layout?: string;
} & (
    | { isStatic: true; imageSrc: string }
    | { isStatic?: false; imageSrc?: never }
  );

export const LinkPreview = ({
  children,
  url,
  className,
  width = 200,
  height = 125,
  quality = 50,
  layout = "fixed",
  isStatic = false,
  imageSrc = "",
}: LinkPreviewProps) => {
  let src;
  if (!isStatic) {
    const params = encode({
      url,
      screenshot: true,
      meta: false,
      embed: "screenshot.url",
      colorScheme: "dark",
      "viewport.isMobile": true,
      "viewport.deviceScaleFactor": 1,
      "viewport.width": width * 3,
      "viewport.height": height * 3,
    });
    src = `https://api.microlink.io/?${params}`;
  } else {
    src = imageSrc;
  }

  const [isOpen, setOpen] = React.useState(false);

  const [isMounted, setIsMounted] = React.useState(false);

  React.useEffect(() => {
    setIsMounted(true);
  }, []);

  const springConfig = { stiffness: 100, damping: 15 };
  const x = useMotionValue(0);

  const translateX = useSpring(x, springConfig);

  const handleMouseMove = (event: any) => {
    const targetRect = event.target.getBoundingClientRect();
    const eventOffsetX = event.clientX - targetRect.left;
    const offsetFromCenter = (eventOffsetX - targetRect.width / 2) / 2; // Reduce the effect to make it subtle
    x.set(offsetFromCenter);
  };

  return (
    <>
      {isMounted ? (
        <div className="hidden">
          <img
            src={src}
            width={width}
            height={height}
            alt="hidden image"
          />
        </div>
      ) : null}

      <HoverCardPrimitive.Root
        openDelay={50}
        closeDelay={100}
        onOpenChange={(open) => {
          setOpen(open);
        }}
      >
        <HoverCardPrimitive.Trigger
          onMouseMove={handleMouseMove}
          className={cn("text-black dark:text-white", className)}
          href={url}
        >
          {children}
        </HoverCardPrimitive.Trigger>

        <HoverCardPrimitive.Content
          className="[transform-origin:var(--radix-hover-card-content-transform-origin)]"
          side="top"
          align="center"
          sideOffset={10}
        >
          <AnimatePresence>
            {isOpen && (
              <motion.div
                initial={{ opacity: 0, y: 20, scale: 0.6 }}
                animate={{
                  opacity: 1,
                  y: 0,
                  scale: 1,
                  transition: {
                    type: "spring",
                    stiffness: 260,
                    damping: 20,
                  },
                }}
                exit={{ opacity: 0, y: 20, scale: 0.6 }}
                className="shadow-xl rounded-xl"
                style={{
                  x: translateX,
                }}
              >
                <a
                  href={url}
                  className="block p-1 bg-white border-2 border-transparent shadow rounded-xl hover:border-neutral-200 dark:hover:border-neutral-800"
                  style={{ fontSize: 0 }}
                >
                  <img
                    src={isStatic ? imageSrc : src}
                    width={width}
                    height={height}
                    className="rounded-lg"
                    alt="preview image"
                  />
                </a>
              </motion.div>
            )}
          </AnimatePresence>
        </HoverCardPrimitive.Content>
      </HoverCardPrimitive.Root>
    </>
  );
};
</file>

<file path="frontend/src/components/ui/loader.tsx">
;
import { motion } from "motion/react";
import React from "react";

export const LoaderOne = () => {
  const transition = (x: number) => {
    return {
      duration: 1,
      repeat: Infinity,
      repeatType: "loop" as const,
      delay: x * 0.2,
      ease: "easeInOut",
    };
  };
  return (
    <div className="flex items-center gap-2">
      <motion.div
        initial={{
          y: 0,
        }}
        animate={{
          y: [0, 10, 0],
        }}
        transition={transition(0)}
        className="h-4 w-4 rounded-full border border-neutral-300 bg-gradient-to-b from-neutral-400 to-neutral-300"
      />
      <motion.div
        initial={{
          y: 0,
        }}
        animate={{
          y: [0, 10, 0],
        }}
        transition={transition(1)}
        className="h-4 w-4 rounded-full border border-neutral-300 bg-gradient-to-b from-neutral-400 to-neutral-300"
      />
      <motion.div
        initial={{
          y: 0,
        }}
        animate={{
          y: [0, 10, 0],
        }}
        transition={transition(2)}
        className="h-4 w-4 rounded-full border border-neutral-300 bg-gradient-to-b from-neutral-400 to-neutral-300"
      />
    </div>
  );
};

export const LoaderTwo = () => {
  const transition = (x: number) => {
    return {
      duration: 2,
      repeat: Infinity,
      repeatType: "loop" as const,
      delay: x * 0.2,
      ease: "easeInOut",
    };
  };
  return (
    <div className="flex items-center">
      <motion.div
        transition={transition(0)}
        initial={{
          x: 0,
        }}
        animate={{
          x: [0, 20, 0],
        }}
        className="h-4 w-4 rounded-full bg-neutral-200 shadow-md dark:bg-neutral-500"
      />
      <motion.div
        initial={{
          x: 0,
        }}
        animate={{
          x: [0, 20, 0],
        }}
        transition={transition(0.4)}
        className="h-4 w-4 -translate-x-2 rounded-full bg-neutral-200 shadow-md dark:bg-neutral-500"
      />
      <motion.div
        initial={{
          x: 0,
        }}
        animate={{
          x: [0, 20, 0],
        }}
        transition={transition(0.8)}
        className="h-4 w-4 -translate-x-4 rounded-full bg-neutral-200 shadow-md dark:bg-neutral-500"
      />
    </div>
  );
};

export const LoaderThree = () => {
  return (
    <motion.svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="1"
      strokeLinecap="round"
      strokeLinejoin="round"
      className="h-20 w-20 stroke-neutral-500 [--fill-final:var(--color-yellow-300)] [--fill-initial:var(--color-neutral-50)] dark:stroke-neutral-100 dark:[--fill-final:var(--color-yellow-500)] dark:[--fill-initial:var(--color-neutral-800)]"
    >
      <motion.path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <motion.path
        initial={{ pathLength: 0, fill: "var(--fill-initial)" }}
        animate={{ pathLength: 1, fill: "var(--fill-final)" }}
        transition={{
          duration: 2,
          ease: "easeInOut",
          repeat: Infinity,
          repeatType: "reverse",
        }}
        d="M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"
      />
    </motion.svg>
  );
};

export const LoaderFour = ({ text = "Loading..." }: { text?: string }) => {
  return (
    <div className="relative font-bold text-black [perspective:1000px] dark:text-white">
      <motion.span
        animate={{
          skew: [0, -40, 0],
          scaleX: [1, 2, 1],
        }}
        transition={{
          duration: 0.05,
          repeat: Infinity,
          repeatType: "reverse",
          repeatDelay: 2,
          ease: "linear",
          times: [0, 0.2, 0.5, 0.8, 1],
        }}
        className="relative z-20 inline-block"
      >
        {text}
      </motion.span>
      <motion.span
        className="absolute inset-0 text-[#00e571]/50 blur-[0.5px] dark:text-[#00e571]"
        animate={{
          x: [-2, 4, -3, 1.5, -2],
          y: [-2, 4, -3, 1.5, -2],
          opacity: [0.3, 0.9, 0.4, 0.8, 0.3],
        }}
        transition={{
          duration: 0.5,
          repeat: Infinity,
          repeatType: "reverse",
          ease: "linear",
          times: [0, 0.2, 0.5, 0.8, 1],
        }}
      >
        {text}
      </motion.span>
      <motion.span
        className="absolute inset-0 text-[#8b00ff]/50 dark:text-[#8b00ff]"
        animate={{
          x: [0, 1, -1.5, 1.5, -1, 0],
          y: [0, -1, 1.5, -0.5, 0],
          opacity: [0.4, 0.8, 0.3, 0.9, 0.4],
        }}
        transition={{
          duration: 0.8,
          repeat: Infinity,
          repeatType: "reverse",
          ease: "linear",
          times: [0, 0.3, 0.6, 0.8, 1],
        }}
      >
        {text}
      </motion.span>
    </div>
  );
};

export const LoaderFive = ({ text }: { text: string }) => {
  return (
    <div className="font-sans font-bold [--shadow-color:var(--color-neutral-500)] dark:[--shadow-color:var(--color-neutral-100)]">
      {text.split("").map((char, i) => (
        <motion.span
          key={i}
          className="inline-block"
          initial={{ scale: 1, opacity: 0.5 }}
          animate={{
            scale: [1, 1.1, 1],
            textShadow: [
              "0 0 0 var(--shadow-color)",
              "0 0 1px var(--shadow-color)",
              "0 0 0 var(--shadow-color)",
            ],
            opacity: [0.5, 1, 0.5],
          }}
          transition={{
            duration: 0.5,
            repeat: Infinity,
            repeatType: "loop",
            delay: i * 0.05,
            ease: "easeInOut",
            repeatDelay: 2,
          }}
        >
          {char === " " ? "\u00A0" : char}
        </motion.span>
      ))}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/macbook-scroll.tsx">
;
import React, { useEffect, useMemo, useRef, useState } from "react";
import { MotionValue, motion, useScroll, useTransform } from "motion/react";
import { cn } from "@/lib/utils";
import {
  IconBrightnessDown,
  IconBrightnessUp,
  IconCaretRightFilled,
  IconCaretUpFilled,
  IconChevronUp,
  IconMicrophone,
  IconMoon,
  IconPlayerSkipForward,
  IconPlayerTrackNext,
  IconPlayerTrackPrev,
  IconTable,
  IconVolume,
  IconVolume2,
  IconVolume3,
} from "@tabler/icons-react";
import { IconSearch } from "@tabler/icons-react";
import { IconWorld } from "@tabler/icons-react";
import { IconCommand } from "@tabler/icons-react";
import { IconCaretLeftFilled } from "@tabler/icons-react";
import { IconCaretDownFilled } from "@tabler/icons-react";


export const MacbookScroll = ({
  src,
  showGradient,
  title,
  badge,
}: {
  src?: string;
  showGradient?: boolean;
  title?: string | React.ReactNode;
  badge?: React.ReactNode;
}) => {
  const ref = useRef<HTMLDivElement>(null);
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start start", "end start"],
  });

  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    if (window && window.innerWidth < 768) {
      setIsMobile(true);
    }
  }, []);

  const scaleX = useTransform(
    scrollYProgress,
    [0, 0.3],
    [1.2, isMobile ? 1 : 1.5],
  );
  const scaleY = useTransform(
    scrollYProgress,
    [0, 0.3],
    [0.6, isMobile ? 1 : 1.5],
  );
  const translate = useTransform(scrollYProgress, [0, 1], [0, 1500]);
  const rotate = useTransform(scrollYProgress, [0.1, 0.12, 0.3], [-28, -28, 0]);
  const textTransform = useTransform(scrollYProgress, [0, 0.3], [0, 100]);
  const textOpacity = useTransform(scrollYProgress, [0, 0.2], [1, 0]);

  return (
    <div
      ref={ref}
      className="flex min-h-[200vh] shrink-0 scale-[0.35] transform flex-col items-center justify-start py-0 [perspective:800px] sm:scale-50 md:scale-100 md:py-80"
    >
      <motion.h2
        style={{
          translateY: textTransform,
          opacity: textOpacity,
        }}
        className="mb-20 text-center text-3xl font-bold text-neutral-800 dark:text-white"
      >
        {title || (
          <span>
            This Macbook is built with Tailwindcss. <br /> No kidding.
          </span>
        )}
      </motion.h2>
      {/* Lid */}
      <Lid
        src={src}
        scaleX={scaleX}
        scaleY={scaleY}
        rotate={rotate}
        translate={translate}
      />
      {/* Base area */}
      <div className="relative -z-10 h-[22rem] w-[32rem] overflow-hidden rounded-2xl bg-gray-200 dark:bg-[#272729]">
        {/* above keyboard bar */}
        <div className="relative h-10 w-full">
          <div className="absolute inset-x-0 mx-auto h-4 w-[80%] bg-[#050505]" />
        </div>
        <div className="relative flex">
          <div className="mx-auto h-full w-[10%] overflow-hidden">
            <SpeakerGrid />
          </div>
          <div className="mx-auto h-full w-[80%]">
            <Keypad />
          </div>
          <div className="mx-auto h-full w-[10%] overflow-hidden">
            <SpeakerGrid />
          </div>
        </div>
        <Trackpad />
        <div className="absolute inset-x-0 bottom-0 mx-auto h-2 w-20 rounded-tl-3xl rounded-tr-3xl bg-gradient-to-t from-[#272729] to-[#050505]" />
        {showGradient && (
          <div className="absolute inset-x-0 bottom-0 z-50 h-40 w-full bg-gradient-to-t from-white via-white to-transparent dark:from-black dark:via-black"></div>
        )}
        {badge && <div className="absolute bottom-4 left-4">{badge}</div>}
      </div>
    </div>
  );
};

export const Lid = ({
  scaleX,
  scaleY,
  rotate,
  translate,
  src,
}: {
  scaleX: MotionValue<number>;
  scaleY: MotionValue<number>;
  rotate: MotionValue<number>;
  translate: MotionValue<number>;
  src?: string;
}) => {
  return (
    <div className="relative [perspective:800px]">
      <div
        style={{
          transform: "perspective(800px) rotateX(-25deg) translateZ(0px)",
          transformOrigin: "bottom",
          transformStyle: "preserve-3d",
        }}
        className="relative h-[12rem] w-[32rem] rounded-2xl bg-[#010101] p-2"
      >
        <div
          style={{
            boxShadow: "0px 2px 0px 2px #171717 inset",
          }}
          className="absolute inset-0 flex items-center justify-center rounded-lg bg-[#010101]"
        >
          <span className="text-white">
            <AceternityLogo />
          </span>
        </div>
      </div>
      <motion.div
        style={{
          scaleX: scaleX,
          scaleY: scaleY,
          rotateX: rotate,
          translateY: translate,
          transformStyle: "preserve-3d",
          transformOrigin: "top",
        }}
        className="absolute inset-0 h-96 w-[32rem] rounded-2xl bg-[#010101] p-2"
      >
        <div className="absolute inset-0 rounded-lg bg-[#272729]" />
        <img
          src={src as string}
          alt="aceternity logo"
          className="absolute inset-0 h-full w-full rounded-lg object-cover object-left-top"
        />
      </motion.div>
    </div>
  );
};

export const Trackpad = () => {
  return (
    <div
      className="mx-auto my-1 h-32 w-[40%] rounded-xl"
      style={{
        boxShadow: "0px 0px 1px 1px #00000020 inset",
      }}
    ></div>
  );
};

export const Keypad = () => {
  return (
    <div className="mx-1 h-full [transform:translateZ(0)] rounded-md bg-[#050505] p-1 [will-change:transform]">
      {/* First Row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn
          className="w-10 items-end justify-start pb-[2px] pl-[4px]"
          childrenClassName="items-start"
        >
          esc
        </KBtn>
        <KBtn>
          <IconBrightnessDown className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F1</span>
        </KBtn>
        <KBtn>
          <IconBrightnessUp className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F2</span>
        </KBtn>
        <KBtn>
          <IconTable className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F3</span>
        </KBtn>
        <KBtn>
          <IconSearch className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F4</span>
        </KBtn>
        <KBtn>
          <IconMicrophone className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F5</span>
        </KBtn>
        <KBtn>
          <IconMoon className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F6</span>
        </KBtn>
        <KBtn>
          <IconPlayerTrackPrev className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F7</span>
        </KBtn>
        <KBtn>
          <IconPlayerSkipForward className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F8</span>
        </KBtn>
        <KBtn>
          <IconPlayerTrackNext className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F8</span>
        </KBtn>
        <KBtn>
          <IconVolume3 className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F10</span>
        </KBtn>
        <KBtn>
          <IconVolume2 className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F11</span>
        </KBtn>
        <KBtn>
          <IconVolume className="h-[6px] w-[6px]" />
          <span className="mt-1 inline-block">F12</span>
        </KBtn>
        <KBtn>
          <div className="h-4 w-4 rounded-full bg-gradient-to-b from-neutral-900 from-20% via-black via-50% to-neutral-900 to-95% p-px">
            <div className="h-full w-full rounded-full bg-black" />
          </div>
        </KBtn>
      </div>

      {/* Second row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn>
          <span className="block">~</span>
          <span className="mt-1 block">`</span>
        </KBtn>
        <KBtn>
          <span className="block">!</span>
          <span className="block">1</span>
        </KBtn>
        <KBtn>
          <span className="block">@</span>
          <span className="block">2</span>
        </KBtn>
        <KBtn>
          <span className="block">#</span>
          <span className="block">3</span>
        </KBtn>
        <KBtn>
          <span className="block">$</span>
          <span className="block">4</span>
        </KBtn>
        <KBtn>
          <span className="block">%</span>
          <span className="block">5</span>
        </KBtn>
        <KBtn>
          <span className="block">^</span>
          <span className="block">6</span>
        </KBtn>
        <KBtn>
          <span className="block">&</span>
          <span className="block">7</span>
        </KBtn>
        <KBtn>
          <span className="block">*</span>
          <span className="block">8</span>
        </KBtn>
        <KBtn>
          <span className="block">(</span>
          <span className="block">9</span>
        </KBtn>
        <KBtn>
          <span className="block">)</span>
          <span className="block">0</span>
        </KBtn>
        <KBtn>
          <span className="block">&mdash;</span>
          <span className="block">_</span>
        </KBtn>
        <KBtn>
          <span className="block">+</span>
          <span className="block"> = </span>
        </KBtn>
        <KBtn
          className="w-10 items-end justify-end pr-[4px] pb-[2px]"
          childrenClassName="items-end"
        >
          delete
        </KBtn>
      </div>

      {/* Third row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn
          className="w-10 items-end justify-start pb-[2px] pl-[4px]"
          childrenClassName="items-start"
        >
          tab
        </KBtn>
        <KBtn>
          <span className="block">Q</span>
        </KBtn>
        <KBtn>
          <span className="block">W</span>
        </KBtn>
        <KBtn>
          <span className="block">E</span>
        </KBtn>
        <KBtn>
          <span className="block">R</span>
        </KBtn>
        <KBtn>
          <span className="block">T</span>
        </KBtn>
        <KBtn>
          <span className="block">Y</span>
        </KBtn>
        <KBtn>
          <span className="block">U</span>
        </KBtn>
        <KBtn>
          <span className="block">I</span>
        </KBtn>
        <KBtn>
          <span className="block">O</span>
        </KBtn>
        <KBtn>
          <span className="block">P</span>
        </KBtn>
        <KBtn>
          <span className="block">{`{`}</span>
          <span className="block">{`[`}</span>
        </KBtn>
        <KBtn>
          <span className="block">{`}`}</span>
          <span className="block">{`]`}</span>
        </KBtn>
        <KBtn>
          <span className="block">{`|`}</span>
          <span className="block">{`\\`}</span>
        </KBtn>
      </div>

      {/* Fourth Row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn
          className="w-[2.8rem] items-end justify-start pb-[2px] pl-[4px]"
          childrenClassName="items-start"
        >
          caps lock
        </KBtn>
        <KBtn>
          <span className="block">A</span>
        </KBtn>
        <KBtn>
          <span className="block">S</span>
        </KBtn>
        <KBtn>
          <span className="block">D</span>
        </KBtn>
        <KBtn>
          <span className="block">F</span>
        </KBtn>
        <KBtn>
          <span className="block">G</span>
        </KBtn>
        <KBtn>
          <span className="block">H</span>
        </KBtn>
        <KBtn>
          <span className="block">J</span>
        </KBtn>
        <KBtn>
          <span className="block">K</span>
        </KBtn>
        <KBtn>
          <span className="block">L</span>
        </KBtn>
        <KBtn>
          <span className="block">{`:`}</span>
          <span className="block">{`;`}</span>
        </KBtn>
        <KBtn>
          <span className="block">{`"`}</span>
          <span className="block">{`'`}</span>
        </KBtn>
        <KBtn
          className="w-[2.85rem] items-end justify-end pr-[4px] pb-[2px]"
          childrenClassName="items-end"
        >
          return
        </KBtn>
      </div>

      {/* Fifth Row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn
          className="w-[3.65rem] items-end justify-start pb-[2px] pl-[4px]"
          childrenClassName="items-start"
        >
          shift
        </KBtn>
        <KBtn>
          <span className="block">Z</span>
        </KBtn>
        <KBtn>
          <span className="block">X</span>
        </KBtn>
        <KBtn>
          <span className="block">C</span>
        </KBtn>
        <KBtn>
          <span className="block">V</span>
        </KBtn>
        <KBtn>
          <span className="block">B</span>
        </KBtn>
        <KBtn>
          <span className="block">N</span>
        </KBtn>
        <KBtn>
          <span className="block">M</span>
        </KBtn>
        <KBtn>
          <span className="block">{`<`}</span>
          <span className="block">{`,`}</span>
        </KBtn>
        <KBtn>
          <span className="block">{`>`}</span>
          <span className="block">{`.`}</span>
        </KBtn>
        <KBtn>
          <span className="block">{`?`}</span>
          <span className="block">{`/`}</span>
        </KBtn>
        <KBtn
          className="w-[3.65rem] items-end justify-end pr-[4px] pb-[2px]"
          childrenClassName="items-end"
        >
          shift
        </KBtn>
      </div>

      {/* sixth Row */}
      <div className="mb-[2px] flex w-full shrink-0 gap-[2px]">
        <KBtn className="" childrenClassName="h-full justify-between py-[4px]">
          <div className="flex w-full justify-end pr-1">
            <span className="block">fn</span>
          </div>
          <div className="flex w-full justify-start pl-1">
            <IconWorld className="h-[6px] w-[6px]" />
          </div>
        </KBtn>
        <KBtn className="" childrenClassName="h-full justify-between py-[4px]">
          <div className="flex w-full justify-end pr-1">
            <IconChevronUp className="h-[6px] w-[6px]" />
          </div>
          <div className="flex w-full justify-start pl-1">
            <span className="block">control</span>
          </div>
        </KBtn>
        <KBtn className="" childrenClassName="h-full justify-between py-[4px]">
          <div className="flex w-full justify-end pr-1">
            <OptionKey className="h-[6px] w-[6px]" />
          </div>
          <div className="flex w-full justify-start pl-1">
            <span className="block">option</span>
          </div>
        </KBtn>
        <KBtn
          className="w-8"
          childrenClassName="h-full justify-between py-[4px]"
        >
          <div className="flex w-full justify-end pr-1">
            <IconCommand className="h-[6px] w-[6px]" />
          </div>
          <div className="flex w-full justify-start pl-1">
            <span className="block">command</span>
          </div>
        </KBtn>
        <KBtn className="w-[8.2rem]"></KBtn>
        <KBtn
          className="w-8"
          childrenClassName="h-full justify-between py-[4px]"
        >
          <div className="flex w-full justify-start pl-1">
            <IconCommand className="h-[6px] w-[6px]" />
          </div>
          <div className="flex w-full justify-start pl-1">
            <span className="block">command</span>
          </div>
        </KBtn>
        <KBtn className="" childrenClassName="h-full justify-between py-[4px]">
          <div className="flex w-full justify-start pl-1">
            <OptionKey className="h-[6px] w-[6px]" />
          </div>
          <div className="flex w-full justify-start pl-1">
            <span className="block">option</span>
          </div>
        </KBtn>
        <div className="mt-[2px] flex h-6 w-[4.9rem] flex-col items-center justify-end rounded-[4px] p-[0.5px]">
          <KBtn className="h-3 w-6">
            <IconCaretUpFilled className="h-[6px] w-[6px]" />
          </KBtn>
          <div className="flex">
            <KBtn className="h-3 w-6">
              <IconCaretLeftFilled className="h-[6px] w-[6px]" />
            </KBtn>
            <KBtn className="h-3 w-6">
              <IconCaretDownFilled className="h-[6px] w-[6px]" />
            </KBtn>
            <KBtn className="h-3 w-6">
              <IconCaretRightFilled className="h-[6px] w-[6px]" />
            </KBtn>
          </div>
        </div>
      </div>
    </div>
  );
};

export const KBtn = ({
  className,
  children,
  childrenClassName,
  backlit = true,
}: {
  className?: string;
  children?: React.ReactNode;
  childrenClassName?: string;
  backlit?: boolean;
}) => {
  return (
    <div
      className={cn(
        "[transform:translateZ(0)] rounded-[4px] p-[0.5px] [will-change:transform]",
        backlit && "bg-white/[0.2] shadow-xl shadow-white",
      )}
    >
      <div
        className={cn(
          "flex h-6 w-6 items-center justify-center rounded-[3.5px] bg-[#0A090D]",
          className,
        )}
        style={{
          boxShadow:
            "0px -0.5px 2px 0 #0D0D0F inset, -0.5px 0px 2px 0 #0D0D0F inset",
        }}
      >
        <div
          className={cn(
            "flex w-full flex-col items-center justify-center text-[5px] text-neutral-200",
            childrenClassName,
            backlit && "text-white",
          )}
        >
          {children}
        </div>
      </div>
    </div>
  );
};

export const SpeakerGrid = () => {
  return (
    <div
      className="mt-2 flex h-40 gap-[2px] px-[0.5px]"
      style={{
        backgroundImage:
          "radial-gradient(circle, #08080A 0.5px, transparent 0.5px)",
        backgroundSize: "3px 3px",
      }}
    ></div>
  );
};

export const OptionKey = ({ className }: { className: string }) => {
  return (
    <svg
      fill="none"
      version="1.1"
      id="icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 32 32"
      className={className}
    >
      <rect
        stroke="currentColor"
        strokeWidth={2}
        x="18"
        y="5"
        width="10"
        height="2"
      />
      <polygon
        stroke="currentColor"
        strokeWidth={2}
        points="10.6,5 4,5 4,7 9.4,7 18.4,27 28,27 28,25 19.6,25 "
      />
      <rect
        id="_Transparent_Rectangle_"
        className="st0"
        width="32"
        height="32"
        stroke="none"
      />
    </svg>
  );
};

const AceternityLogo = () => {
  return (
    <svg
      width="66"
      height="65"
      viewBox="0 0 66 65"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="h-3 w-3 text-white"
    >
      <path
        d="M8 8.05571C8 8.05571 54.9009 18.1782 57.8687 30.062C60.8365 41.9458 9.05432 57.4696 9.05432 57.4696"
        stroke="currentColor"
        strokeWidth="15"
        strokeMiterlimit="3.86874"
        strokeLinecap="round"
      />
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/meteors.tsx">
;
import { cn } from "@/lib/utils";
import { motion } from "motion/react";
import React from "react";

export const Meteors = ({
  number,
  className,
}: {
  number?: number;
  className?: string;
}) => {
  const meteors = new Array(number || 20).fill(true);
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.5 }}
    >
      {meteors.map((el, idx) => {
        const meteorCount = number || 20;
        // Calculate position to evenly distribute meteors across container width
        const position = idx * (800 / meteorCount) - 400; // Spread across 800px range, centered

        return (
          <span
            key={"meteor" + idx}
            className={cn(
              "animate-meteor-effect absolute h-0.5 w-0.5 rotate-[45deg] rounded-[9999px] bg-slate-500 shadow-[0_0_0_1px_#ffffff10]",
              "before:absolute before:top-1/2 before:h-[1px] before:w-[50px] before:-translate-y-[50%] before:transform before:bg-gradient-to-r before:from-[#64748b] before:to-transparent before:content-['']",
              className,
            )}
            style={{
              top: "-40px", // Start above the container
              left: position + "px",
              animationDelay: Math.random() * 5 + "s", // Random delay between 0-5s
              animationDuration: Math.floor(Math.random() * (10 - 5) + 5) + "s", // Keep some randomness in duration
            }}
          ></span>
        );
      })}
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/moving-border.tsx">
;
import React from "react";
import {
  motion,
  useAnimationFrame,
  useMotionTemplate,
  useMotionValue,
  useTransform,
} from "motion/react";
import { useRef } from "react";
import { cn } from "@/lib/utils";

export function Button({
  borderRadius = "1.75rem",
  children,
  as: Component = "button",
  containerClassName,
  borderClassName,
  duration,
  className,
  ...otherProps
}: {
  borderRadius?: string;
  children: React.ReactNode;
  as?: any;
  containerClassName?: string;
  borderClassName?: string;
  duration?: number;
  className?: string;
  [key: string]: any;
}) {
  return (
    <Component
      className={cn(
        "relative h-16 w-40 overflow-hidden bg-transparent p-[1px] text-xl",
        containerClassName,
      )}
      style={{
        borderRadius: borderRadius,
      }}
      {...otherProps}
    >
      <div
        className="absolute inset-0"
        style={{ borderRadius: `calc(${borderRadius} * 0.96)` }}
      >
        <MovingBorder duration={duration} rx="30%" ry="30%">
          <div
            className={cn(
              "h-20 w-20 bg-[radial-gradient(#0ea5e9_40%,transparent_60%)] opacity-[0.8]",
              borderClassName,
            )}
          />
        </MovingBorder>
      </div>

      <div
        className={cn(
          "relative flex h-full w-full items-center justify-center border border-slate-800 bg-slate-900/[0.8] text-sm text-white antialiased backdrop-blur-xl",
          className,
        )}
        style={{
          borderRadius: `calc(${borderRadius} * 0.96)`,
        }}
      >
        {children}
      </div>
    </Component>
  );
}

export const MovingBorder = ({
  children,
  duration = 3000,
  rx,
  ry,
  ...otherProps
}: {
  children: React.ReactNode;
  duration?: number;
  rx?: string;
  ry?: string;
  [key: string]: any;
}) => {
  const pathRef = useRef<any>();
  const progress = useMotionValue<number>(0);

  useAnimationFrame((time) => {
    const length = pathRef.current?.getTotalLength();
    if (length) {
      const pxPerMillisecond = length / duration;
      progress.set((time * pxPerMillisecond) % length);
    }
  });

  const x = useTransform(
    progress,
    (val) => pathRef.current?.getPointAtLength(val).x,
  );
  const y = useTransform(
    progress,
    (val) => pathRef.current?.getPointAtLength(val).y,
  );

  const transform = useMotionTemplate`translateX(${x}px) translateY(${y}px) translateX(-50%) translateY(-50%)`;

  return (
    <>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="none"
        className="absolute h-full w-full"
        width="100%"
        height="100%"
        {...otherProps}
      >
        <rect
          fill="none"
          width="100%"
          height="100%"
          rx={rx}
          ry={ry}
          ref={pathRef}
        />
      </svg>
      <motion.div
        style={{
          position: "absolute",
          top: 0,
          left: 0,
          display: "inline-block",
          transform,
        }}
      >
        {children}
      </motion.div>
    </>
  );
};
</file>

<file path="frontend/src/components/ui/multi-step-loader.tsx">
;
import { cn } from "@/lib/utils";
import { AnimatePresence, motion } from "motion/react";
import { useState, useEffect } from "react";

const CheckIcon = ({ className }: { className?: string }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      strokeWidth={1.5}
      stroke="currentColor"
      className={cn("w-6 h-6 ", className)}
    >
      <path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
    </svg>
  );
};

const CheckFilled = ({ className }: { className?: string }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      className={cn("w-6 h-6 ", className)}
    >
      <path
        fillRule="evenodd"
        d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z"
        clipRule="evenodd"
      />
    </svg>
  );
};

type LoadingState = {
  text: string;
};

const LoaderCore = ({
  loadingStates,
  value = 0,
}: {
  loadingStates: LoadingState[];
  value?: number;
}) => {
  return (
    <div className="flex relative justify-start max-w-xl mx-auto flex-col mt-40">
      {loadingStates.map((loadingState, index) => {
        const distance = Math.abs(index - value);
        const opacity = Math.max(1 - distance * 0.2, 0); // Minimum opacity is 0, keep it 0.2 if you're sane.

        return (
          <motion.div
            key={index}
            className={cn("text-left flex gap-2 mb-4")}
            initial={{ opacity: 0, y: -(value * 40) }}
            animate={{ opacity: opacity, y: -(value * 40) }}
            transition={{ duration: 0.5 }}
          >
            <div>
              {index > value && (
                <CheckIcon className="text-black dark:text-white" />
              )}
              {index <= value && (
                <CheckFilled
                  className={cn(
                    "text-black dark:text-white",
                    value === index &&
                    "text-black dark:text-lime-500 opacity-100"
                  )}
                />
              )}
            </div>
            <span
              className={cn(
                "text-black dark:text-white",
                value === index && "text-black dark:text-lime-500 opacity-100"
              )}
            >
              {loadingState.text}
            </span>
          </motion.div>
        );
      })}
    </div>
  );
};

export const MultiStepLoader = ({
  loadingStates,
  loading,
  duration = 2000,
  loop = true,
}: {
  loadingStates: LoadingState[];
  loading?: boolean;
  duration?: number;
  loop?: boolean;
}) => {
  const [currentState, setCurrentState] = useState(0);

  useEffect(() => {
    if (!loading) {
      setCurrentState(0);
      return;
    }
    const timeout = setTimeout(() => {
      setCurrentState((prevState) =>
        loop
          ? prevState === loadingStates.length - 1
            ? 0
            : prevState + 1
          : Math.min(prevState + 1, loadingStates.length - 1)
      );
    }, duration);

    return () => clearTimeout(timeout);
  }, [currentState, loading, loop, loadingStates.length, duration]);
  return (
    <AnimatePresence mode="wait">
      {loading && (
        <motion.div
          initial={{
            opacity: 0,
          }}
          animate={{
            opacity: 1,
          }}
          exit={{
            opacity: 0,
          }}
          className="w-full h-full fixed inset-0 z-[100] flex items-center justify-center backdrop-blur-2xl"
        >
          <div className="h-96  relative">
            <LoaderCore value={currentState} loadingStates={loadingStates} />
          </div>

          <div className="bg-gradient-to-t inset-x-0 z-20 bottom-0 bg-white dark:bg-black h-full absolute [mask-image:radial-gradient(900px_at_center,transparent_30%,white)]" />
        </motion.div>
      )}
    </AnimatePresence>
  );
};
</file>

<file path="frontend/src/components/ui/navbar-menu.tsx">
;
import React from "react";
import { motion } from "motion/react";



const transition = {
  type: "spring",
  mass: 0.5,
  damping: 11.5,
  stiffness: 100,
  restDelta: 0.001,
  restSpeed: 0.001,
};

export const MenuItem = ({
  setActive,
  active,
  item,
  children,
}: {
  setActive: (item: string) => void;
  active: string | null;
  item: string;
  children?: React.ReactNode;
}) => {
  return (
    <div onMouseEnter={() => setActive(item)} className="relative ">
      <motion.p
        transition={{ duration: 0.3 }}
        className="cursor-pointer text-black hover:opacity-[0.9] dark:text-white"
      >
        {item}
      </motion.p>
      {active !== null && (
        <motion.div
          initial={{ opacity: 0, scale: 0.85, y: 10 }}
          animate={{ opacity: 1, scale: 1, y: 0 }}
          transition={transition}
        >
          {active === item && (
            <div className="absolute top-[calc(100%_+_1.2rem)] left-1/2 transform -translate-x-1/2 pt-4">
              <motion.div
                transition={transition}
                layoutId="active" // layoutId ensures smooth animation
                className="bg-white dark:bg-black backdrop-blur-sm rounded-2xl overflow-hidden border border-black/[0.2] dark:border-white/[0.2] shadow-xl"
              >
                <motion.div
                  layout // layout ensures smooth animation
                  className="w-max h-full p-4"
                >
                  {children}
                </motion.div>
              </motion.div>
            </div>
          )}
        </motion.div>
      )}
    </div>
  );
};

export const Menu = ({
  setActive,
  children,
}: {
  setActive: (item: string | null) => void;
  children: React.ReactNode;
}) => {
  return (
    <nav
      onMouseLeave={() => setActive(null)} // resets the state
      className="relative rounded-full border border-transparent dark:bg-black dark:border-white/[0.2] bg-white shadow-input flex justify-center space-x-4 px-8 py-6 "
    >
      {children}
    </nav>
  );
};

export const ProductItem = ({
  title,
  description,
  href,
  src,
}: {
  title: string;
  description: string;
  href: string;
  src: string;
}) => {
  return (
    <a href={href} className="flex space-x-2">
      <img
        src={src}
        width={140}
        height={70}
        alt={title}
        className="shrink-0 rounded-md shadow-2xl"
      />
      <div>
        <h4 className="text-xl font-bold mb-1 text-black dark:text-white">
          {title}
        </h4>
        <p className="text-neutral-700 text-sm max-w-[10rem] dark:text-neutral-300">
          {description}
        </p>
      </div>
    </a>
  );
};

export const HoveredLink = ({ children, ...rest }: any) => {
  return (
    <a
      {...rest}
      className="text-neutral-700 dark:text-neutral-200 hover:text-black "
    >
      {children}
    </a>
  );
};
</file>

<file path="frontend/src/components/ui/parallax-scroll-2.tsx">
;
import { useScroll, useTransform } from "motion/react";
import { useRef } from "react";
import { motion } from "motion/react";

import { cn } from "@/lib/utils";

export const ParallaxScrollSecond = ({
  images,
  className,
}: {
  images: string[];
  className?: string;
}) => {
  const gridRef = useRef<any>(null);
  const { scrollYProgress } = useScroll({
    container: gridRef, // remove this if your container is not fixed height
    offset: ["start start", "end start"], // remove this if your container is not fixed height
  });

  const translateYFirst = useTransform(scrollYProgress, [0, 1], [0, -200]);
  const translateXFirst = useTransform(scrollYProgress, [0, 1], [0, -200]);
  const rotateXFirst = useTransform(scrollYProgress, [0, 1], [0, -20]);

  const translateYThird = useTransform(scrollYProgress, [0, 1], [0, -200]);
  const translateXThird = useTransform(scrollYProgress, [0, 1], [0, 200]);
  const rotateXThird = useTransform(scrollYProgress, [0, 1], [0, 20]);

  const third = Math.ceil(images.length / 3);

  const firstPart = images.slice(0, third);
  const secondPart = images.slice(third, 2 * third);
  const thirdPart = images.slice(2 * third);

  return (
    <div
      className={cn("h-[40rem] items-start overflow-y-auto w-full", className)}
      ref={gridRef}
    >
      <div
        className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 items-start max-w-5xl mx-auto gap-10 py-40 px-10"
        ref={gridRef}
      >
        <div className="grid gap-10">
          {firstPart.map((el, idx) => (
            <motion.div
              style={{
                y: translateYFirst,
                x: translateXFirst,
                rotateZ: rotateXFirst,
              }} // Apply the translateY motion value here
              key={"grid-1" + idx}
            >
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
        <div className="grid gap-10">
          {secondPart.map((el, idx) => (
            <motion.div key={"grid-2" + idx}>
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
        <div className="grid gap-10">
          {thirdPart.map((el, idx) => (
            <motion.div
              style={{
                y: translateYThird,
                x: translateXThird,
                rotateZ: rotateXThird,
              }}
              key={"grid-3" + idx}
            >
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/parallax-scroll.tsx">
;
import { useScroll, useTransform } from "motion/react";
import { useRef } from "react";
import { motion } from "motion/react";

import { cn } from "@/lib/utils";

export const ParallaxScroll = ({
  images,
  className,
}: {
  images: string[];
  className?: string;
}) => {
  const gridRef = useRef<any>(null);
  const { scrollYProgress } = useScroll({
    container: gridRef, // remove this if your container is not fixed height
    offset: ["start start", "end start"], // remove this if your container is not fixed height
  });

  const translateFirst = useTransform(scrollYProgress, [0, 1], [0, -200]);
  const translateSecond = useTransform(scrollYProgress, [0, 1], [0, 200]);
  const translateThird = useTransform(scrollYProgress, [0, 1], [0, -200]);

  const third = Math.ceil(images.length / 3);

  const firstPart = images.slice(0, third);
  const secondPart = images.slice(third, 2 * third);
  const thirdPart = images.slice(2 * third);

  return (
    <div
      className={cn("h-[40rem] items-start overflow-y-auto w-full", className)}
      ref={gridRef}
    >
      <div
        className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 items-start  max-w-5xl mx-auto gap-10 py-40 px-10"
        ref={gridRef}
      >
        <div className="grid gap-10">
          {firstPart.map((el, idx) => (
            <motion.div
              style={{ y: translateFirst }} // Apply the translateY motion value here
              key={"grid-1" + idx}
            >
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
        <div className="grid gap-10">
          {secondPart.map((el, idx) => (
            <motion.div style={{ y: translateSecond }} key={"grid-2" + idx}>
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
        <div className="grid gap-10">
          {thirdPart.map((el, idx) => (
            <motion.div style={{ y: translateThird }} key={"grid-3" + idx}>
              <img
                src={el}
                className="h-80 w-full object-cover object-left-top rounded-lg gap-10 !m-0 !p-0"
                height="400"
                width="400"
                alt="thumbnail"
              />
            </motion.div>
          ))}
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/pixelated-canvas.tsx">
;
import React from "react";

type PixelatedCanvasProps = {
  src: string;
  width?: number;
  height?: number;
  /** Size of each cell (in CSS pixels) used for sampling and spacing. */
  cellSize?: number;
  /** Dot size as a fraction of cell size (0..1). */
  dotScale?: number;
  /** Shape of the dot drawn for each sample. */
  shape?: "circle" | "square";
  /** Optional background color to clear the canvas with before drawing. */
  backgroundColor?: string;
  /** Convert to grayscale before drawing. */
  grayscale?: boolean;
  className?: string;
  /** Redraw on window resize using the provided width/height. */
  responsive?: boolean;
  /** 0..1. Higher value removes more dots in low-contrast regions. */
  dropoutStrength?: number;
  /** Enable interactive mouse distortion animation. */
  interactive?: boolean;
  /** Max per-dot offset (px) due to distortion. */
  distortionStrength?: number;
  /** Radius (px) around pointer influencing distortion. */
  distortionRadius?: number;
  /** How pixels move near the pointer. */
  distortionMode?: "repel" | "attract" | "swirl";
  /** 0..1 smoothing factor for pointer follow. */
  followSpeed?: number;
  /** Average multiple samples per cell instead of single center sample. */
  sampleAverage?: boolean;
  /** Apply a color tint (e.g., "#0ea5e9" or "rgb(14,165,233)"). */
  tintColor?: string;
  /** 0..1 tint mix amount with original colors. */
  tintStrength?: number;
  /** Cap animation frame rate to improve perf on large canvases. */
  maxFps?: number;
  /** Object-fit behavior for the source image within the canvas. */
  objectFit?: "cover" | "contain" | "fill" | "none";
  /** Random motion amplitude for dots near the pointer. */
  jitterStrength?: number;
  /** Speed factor for the random motion. */
  jitterSpeed?: number;
  /** Smoothly fade the distortion when the pointer leaves. */
  fadeOnLeave?: boolean;
  /** 0..1 smoothing factor for leave fade. Higher = faster fade. */
  fadeSpeed?: number;
};

export const PixelatedCanvas: React.FC<PixelatedCanvasProps> = ({
  src,
  width = 400,
  height = 500,
  cellSize = 3,
  dotScale = 0.9,
  shape = "square",
  backgroundColor = "#000000",
  grayscale = false,
  className,
  responsive = false,
  dropoutStrength = 0.4,
  interactive = true,
  distortionStrength = 3,
  distortionRadius = 80,
  distortionMode = "swirl",
  followSpeed = 0.2,
  sampleAverage = true,
  tintColor = "#FFFFFF",
  tintStrength = 0.2,
  maxFps = 60,
  objectFit = "cover",
  jitterStrength = 4,
  jitterSpeed = 4,
  fadeOnLeave = true,
  fadeSpeed = 0.1,
}) => {
  const canvasRef = React.useRef<HTMLCanvasElement | null>(null);
  const samplesRef = React.useRef<
    Array<{
      x: number;
      y: number;
      r: number;
      g: number;
      b: number;
      a: number;
      drop: boolean;
      seed: number;
    }>
  >([]);
  const dimsRef = React.useRef<{
    width: number;
    height: number;
    dot: number;
  } | null>(null);
  const targetMouseRef = React.useRef<{ x: number; y: number }>({
    x: -9999,
    y: -9999,
  });
  const animMouseRef = React.useRef<{ x: number; y: number }>({
    x: -9999,
    y: -9999,
  });
  const rafRef = React.useRef<number | null>(null);
  const lastFrameRef = React.useRef<number>(0);
  const pointerInsideRef = React.useRef<boolean>(false);
  const activityRef = React.useRef<number>(0);
  const activityTargetRef = React.useRef<number>(0);

  React.useEffect(() => {
    let isCancelled = false;
    const canvas = canvasRef.current;
    if (!canvas) return;

    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = src;

    const compute = () => {
      if (!canvas) return;
      const dpr =
        typeof window !== "undefined" ? window.devicePixelRatio || 1 : 1;

      const displayWidth = width ?? img.naturalWidth;
      const displayHeight = height ?? img.naturalHeight;

      canvas.width = Math.max(1, Math.floor(displayWidth * dpr));
      canvas.height = Math.max(1, Math.floor(displayHeight * dpr));
      canvas.style.width = `${displayWidth}px`;
      canvas.style.height = `${displayHeight}px`;

      const ctx = canvas.getContext("2d");
      if (!ctx) return;
      ctx.resetTransform();
      ctx.scale(dpr, dpr);

      if (backgroundColor) {
        ctx.fillStyle = backgroundColor;
        ctx.fillRect(0, 0, displayWidth, displayHeight);
      } else {
        ctx.clearRect(0, 0, displayWidth, displayHeight);
      }

      const offscreen = document.createElement("canvas");
      offscreen.width = Math.max(1, Math.floor(displayWidth));
      offscreen.height = Math.max(1, Math.floor(displayHeight));
      const off = offscreen.getContext("2d");
      if (!off) return;

      const iw = img.naturalWidth || displayWidth;
      const ih = img.naturalHeight || displayHeight;
      let dw = displayWidth;
      let dh = displayHeight;
      let dx = 0;
      let dy = 0;
      if (objectFit === "cover") {
        const scale = Math.max(displayWidth / iw, displayHeight / ih);
        dw = Math.ceil(iw * scale);
        dh = Math.ceil(ih * scale);
        dx = Math.floor((displayWidth - dw) / 2);
        dy = Math.floor((displayHeight - dh) / 2);
      } else if (objectFit === "contain") {
        const scale = Math.min(displayWidth / iw, displayHeight / ih);
        dw = Math.ceil(iw * scale);
        dh = Math.ceil(ih * scale);
        dx = Math.floor((displayWidth - dw) / 2);
        dy = Math.floor((displayHeight - dh) / 2);
      } else if (objectFit === "fill") {
        dw = displayWidth;
        dh = displayHeight;
      } else {
        dw = iw;
        dh = ih;
        dx = Math.floor((displayWidth - dw) / 2);
        dy = Math.floor((displayHeight - dh) / 2);
      }
      off.drawImage(img, dx, dy, dw, dh);

      let imageData: ImageData;
      try {
        imageData = off.getImageData(0, 0, offscreen.width, offscreen.height);
      } catch {
        ctx.drawImage(img, 0, 0, displayWidth, displayHeight);
        return;
      }

      const data = imageData.data;
      const stride = offscreen.width * 4;
      const effectiveDotSize = Math.max(1, Math.floor(cellSize * dotScale));
      dimsRef.current = {
        width: displayWidth,
        height: displayHeight,
        dot: effectiveDotSize,
      };

      const luminanceAt = (px: number, py: number) => {
        const ix = Math.max(0, Math.min(offscreen.width - 1, px));
        const iy = Math.max(0, Math.min(offscreen.height - 1, py));
        const i = iy * stride + ix * 4;
        const rr = data[i];
        const gg = data[i + 1];
        const bb = data[i + 2];
        return 0.2126 * rr + 0.7152 * gg + 0.0722 * bb;
      };

      const hash2D = (ix: number, iy: number) => {
        const s = Math.sin(ix * 12.9898 + iy * 78.233) * 43758.5453123;
        return s - Math.floor(s);
      };

      const samples: Array<{
        x: number;
        y: number;
        r: number;
        g: number;
        b: number;
        a: number;
        drop: boolean;
        seed: number;
      }> = [];

      let tintRGB: [number, number, number] | null = null;
      if (tintColor && tintStrength > 0) {
        const parse = (c: string): [number, number, number] | null => {
          if (c.startsWith("#")) {
            const hex = c.slice(1);
            if (hex.length === 3) {
              const r = parseInt(hex[0] + hex[0], 16);
              const g = parseInt(hex[1] + hex[1], 16);
              const b = parseInt(hex[2] + hex[2], 16);
              return [r, g, b];
            }
            const r = parseInt(hex.slice(0, 2), 16);
            const g = parseInt(hex.slice(2, 4), 16);
            const b = parseInt(hex.slice(4, 6), 16);
            return [r, g, b];
          }
          const m = c.match(/rgb\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\)/i);
          if (m)
            return [parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10)];
          return null;
        };
        tintRGB = parse(tintColor) as any;
      }

      for (let y = 0; y < offscreen.height; y += cellSize) {
        const cy = Math.min(offscreen.height - 1, y + Math.floor(cellSize / 2));
        for (let x = 0; x < offscreen.width; x += cellSize) {
          const cx = Math.min(
            offscreen.width - 1,
            x + Math.floor(cellSize / 2),
          );
          let r = 0;
          let g = 0;
          let b = 0;
          let a = 0;
          if (!sampleAverage) {
            const idx = cy * stride + cx * 4;
            r = data[idx];
            g = data[idx + 1];
            b = data[idx + 2];
            a = data[idx + 3] / 255;
          } else {
            let count = 0;
            for (let oy = -1; oy <= 1; oy++) {
              for (let ox = -1; ox <= 1; ox++) {
                const sx = Math.max(0, Math.min(offscreen.width - 1, cx + ox));
                const sy = Math.max(0, Math.min(offscreen.height - 1, cy + oy));
                const sIdx = sy * stride + sx * 4;
                r += data[sIdx];
                g += data[sIdx + 1];
                b += data[sIdx + 2];
                a += data[sIdx + 3] / 255;
                count++;
              }
            }
            r = Math.round(r / count);
            g = Math.round(g / count);
            b = Math.round(b / count);
            a = a / count;
          }

          if (grayscale) {
            const L = Math.round(0.2126 * r + 0.7152 * g + 0.0722 * b);
            r = L;
            g = L;
            b = L;
          } else if (tintRGB && tintStrength > 0) {
            const k = Math.max(0, Math.min(1, tintStrength));
            r = Math.round(r * (1 - k) + tintRGB[0] * k);
            g = Math.round(g * (1 - k) + tintRGB[1] * k);
            b = Math.round(b * (1 - k) + tintRGB[2] * k);
          }

          const Lc = luminanceAt(cx, cy);
          const Lx1 = luminanceAt(cx - 1, cy);
          const Lx2 = luminanceAt(cx + 1, cy);
          const Ly1 = luminanceAt(cx, cy - 1);
          const Ly2 = luminanceAt(cx, cy + 1);
          const grad =
            Math.abs(Lx2 - Lx1) +
            Math.abs(Ly2 - Ly1) +
            Math.abs(Lc - (Lx1 + Lx2 + Ly1 + Ly2) / 4);
          const gradientNorm = Math.max(0, Math.min(1, grad / 255));
          const dropoutProb = Math.max(
            0,
            Math.min(1, (1 - gradientNorm) * dropoutStrength),
          );
          const drop = hash2D(cx, cy) < dropoutProb;
          const seed = hash2D(cx, cy);

          samples.push({ x, y, r, g, b, a, drop, seed });
        }
      }

      samplesRef.current = samples;
    };

    img.onload = () => {
      if (isCancelled) return;
      compute();
      const canvasEl = canvasRef.current;
      if (!canvasEl) return;

      if (!interactive) {
        const ctx = canvasEl.getContext("2d");
        const dims = dimsRef.current;
        const samples = samplesRef.current;
        if (!ctx || !dims || !samples) return;
        if (backgroundColor) {
          ctx.fillStyle = backgroundColor;
          ctx.fillRect(0, 0, dims.width, dims.height);
        } else {
          ctx.clearRect(0, 0, dims.width, dims.height);
        }
        for (const s of samples) {
          if (s.drop || s.a <= 0) continue;
          ctx.globalAlpha = s.a;
          ctx.fillStyle = `rgb(${s.r}, ${s.g}, ${s.b})`;
          if (shape === "circle") {
            const radius = dims.dot / 2;
            ctx.beginPath();
            ctx.arc(
              s.x + cellSize / 2,
              s.y + cellSize / 2,
              radius,
              0,
              Math.PI * 2,
            );
            ctx.fill();
          } else {
            ctx.fillRect(
              s.x + cellSize / 2 - dims.dot / 2,
              s.y + cellSize / 2 - dims.dot / 2,
              dims.dot,
              dims.dot,
            );
          }
        }
        ctx.globalAlpha = 1;
        return;
      }

      const onPointerMove = (e: PointerEvent) => {
        const rect = canvasEl.getBoundingClientRect();
        targetMouseRef.current.x = e.clientX - rect.left;
        targetMouseRef.current.y = e.clientY - rect.top;
        pointerInsideRef.current = true;
        activityTargetRef.current = 1;
      };
      const onPointerEnter = () => {
        pointerInsideRef.current = true;
        activityTargetRef.current = 1;
      };
      const onPointerLeave = () => {
        pointerInsideRef.current = false;
        if (fadeOnLeave) {
          activityTargetRef.current = 0;
        } else {
          targetMouseRef.current.x = -9999;
          targetMouseRef.current.y = -9999;
        }
      };
      canvasEl.addEventListener("pointermove", onPointerMove);
      canvasEl.addEventListener("pointerenter", onPointerEnter);
      canvasEl.addEventListener("pointerleave", onPointerLeave);

      const animate = () => {
        const now = performance.now();
        const minDelta = 1000 / Math.max(1, maxFps);
        if (now - lastFrameRef.current < minDelta) {
          rafRef.current = requestAnimationFrame(animate);
          return;
        }
        lastFrameRef.current = now;
        const ctx = canvasEl.getContext("2d");
        const dims = dimsRef.current;
        const samples = samplesRef.current;
        if (!ctx || !dims || !samples) {
          rafRef.current = requestAnimationFrame(animate);
          return;
        }

        animMouseRef.current.x =
          animMouseRef.current.x +
          (targetMouseRef.current.x - animMouseRef.current.x) * followSpeed;
        animMouseRef.current.y =
          animMouseRef.current.y +
          (targetMouseRef.current.y - animMouseRef.current.y) * followSpeed;

        if (fadeOnLeave) {
          activityRef.current =
            activityRef.current +
            (activityTargetRef.current - activityRef.current) * fadeSpeed;
        } else {
          activityRef.current = pointerInsideRef.current ? 1 : 0;
        }

        if (backgroundColor) {
          ctx.fillStyle = backgroundColor;
          ctx.fillRect(0, 0, dims.width, dims.height);
        } else {
          ctx.clearRect(0, 0, dims.width, dims.height);
        }

        const mx = animMouseRef.current.x;
        const my = animMouseRef.current.y;
        const sigma = Math.max(1, distortionRadius * 0.5);
        const t = now * 0.001 * jitterSpeed;
        const activity = Math.max(0, Math.min(1, activityRef.current));

        for (const s of samples) {
          if (s.drop || s.a <= 0) continue;
          let drawX = s.x + cellSize / 2;
          let drawY = s.y + cellSize / 2;
          const dx = drawX - mx;
          const dy = drawY - my;
          const dist2 = dx * dx + dy * dy;
          const falloff = Math.exp(-dist2 / (2 * sigma * sigma));
          const influence = falloff * activity;
          if (influence > 0.0005) {
            if (distortionMode === "repel") {
              const dist = Math.sqrt(dist2) + 0.0001;
              drawX += (dx / dist) * distortionStrength * influence;
              drawY += (dy / dist) * distortionStrength * influence;
            } else if (distortionMode === "attract") {
              const dist = Math.sqrt(dist2) + 0.0001;
              drawX -= (dx / dist) * distortionStrength * influence;
              drawY -= (dy / dist) * distortionStrength * influence;
            } else if (distortionMode === "swirl") {
              const angle = distortionStrength * 0.05 * influence;
              const cosA = Math.cos(angle);
              const sinA = Math.sin(angle);
              const rx = cosA * dx - sinA * dy;
              const ry = sinA * dx + cosA * dy;
              drawX = mx + rx;
              drawY = my + ry;
            }

            if (jitterStrength > 0) {
              const k = s.seed * 43758.5453;
              const jx = Math.sin(t + k) * jitterStrength * influence;
              const jy = Math.cos(t + k * 1.13) * jitterStrength * influence;
              drawX += jx;
              drawY += jy;
            }
          }

          ctx.globalAlpha = s.a;
          ctx.fillStyle = `rgb(${s.r}, ${s.g}, ${s.b})`;
          if (shape === "circle") {
            const radius = dims.dot / 2;
            ctx.beginPath();
            ctx.arc(drawX, drawY, radius, 0, Math.PI * 2);
            ctx.fill();
          } else {
            ctx.fillRect(
              drawX - dims.dot / 2,
              drawY - dims.dot / 2,
              dims.dot,
              dims.dot,
            );
          }
        }
        ctx.globalAlpha = 1;

        rafRef.current = requestAnimationFrame(animate);
      };

      if (rafRef.current) cancelAnimationFrame(rafRef.current);
      rafRef.current = requestAnimationFrame(animate);

      const cleanup = () => {
        canvasEl.removeEventListener("pointermove", onPointerMove);
        canvasEl.removeEventListener("pointerenter", onPointerEnter);
        canvasEl.removeEventListener("pointerleave", onPointerLeave);
        if (rafRef.current) cancelAnimationFrame(rafRef.current);
      };
      (img as any)._cleanup = cleanup;
    };

    img.onerror = () => {
      console.error("Failed to load image for PixelatedCanvas:", src);
    };

    if (responsive) {
      const onResize = () => {
        if (img.complete && img.naturalWidth) {
          compute();
        }
      };
      window.addEventListener("resize", onResize);
      return () => {
        isCancelled = true;
        window.removeEventListener("resize", onResize);
        if ((img as any)._cleanup) (img as any)._cleanup();
      };
    }

    return () => {
      isCancelled = true;
      if ((img as any)._cleanup) (img as any)._cleanup();
    };
  }, [
    src,
    width,
    height,
    cellSize,
    dotScale,
    shape,
    backgroundColor,
    grayscale,
    responsive,
    dropoutStrength,
    interactive,
    distortionStrength,
    distortionRadius,
    distortionMode,
    followSpeed,
    sampleAverage,
    tintColor,
    tintStrength,
    maxFps,
    objectFit,
    jitterStrength,
    jitterSpeed,
    fadeOnLeave,
    fadeSpeed,
  ]);

  return (
    <canvas
      ref={canvasRef}
      className={className}
      aria-label="Pixelated rendering of source image"
      role="img"
    />
  );
};
</file>

<file path="frontend/src/components/ui/placeholders-and-vanish-input.tsx">
;

import { AnimatePresence, motion } from "motion/react";
import { useCallback, useEffect, useRef, useState } from "react";
import { cn } from "@/lib/utils";

export function PlaceholdersAndVanishInput({
  placeholders,
  onChange,
  onSubmit,
}: {
  placeholders: string[];
  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
  onSubmit: (e: React.FormEvent<HTMLFormElement>) => void;
}) {
  const [currentPlaceholder, setCurrentPlaceholder] = useState(0);

  const intervalRef = useRef<NodeJS.Timeout | null>(null);
  const startAnimation = () => {
    intervalRef.current = setInterval(() => {
      setCurrentPlaceholder((prev) => (prev + 1) % placeholders.length);
    }, 3000);
  };
  const handleVisibilityChange = () => {
    if (document.visibilityState !== "visible" && intervalRef.current) {
      clearInterval(intervalRef.current); // Clear the interval when the tab is not visible
      intervalRef.current = null;
    } else if (document.visibilityState === "visible") {
      startAnimation(); // Restart the interval when the tab becomes visible
    }
  };

  useEffect(() => {
    startAnimation();
    document.addEventListener("visibilitychange", handleVisibilityChange);

    return () => {
      if (intervalRef.current) {
        clearInterval(intervalRef.current);
      }
      document.removeEventListener("visibilitychange", handleVisibilityChange);
    };
  }, [placeholders]);

  const canvasRef = useRef<HTMLCanvasElement>(null);
  const newDataRef = useRef<any[]>([]);
  const inputRef = useRef<HTMLInputElement>(null);
  const [value, setValue] = useState("");
  const [animating, setAnimating] = useState(false);

  const draw = useCallback(() => {
    if (!inputRef.current) return;
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    if (!ctx) return;

    canvas.width = 800;
    canvas.height = 800;
    ctx.clearRect(0, 0, 800, 800);
    const computedStyles = getComputedStyle(inputRef.current);

    const fontSize = parseFloat(computedStyles.getPropertyValue("font-size"));
    ctx.font = `${fontSize * 2}px ${computedStyles.fontFamily}`;
    ctx.fillStyle = "#FFF";
    ctx.fillText(value, 16, 40);

    const imageData = ctx.getImageData(0, 0, 800, 800);
    const pixelData = imageData.data;
    const newData: any[] = [];

    for (let t = 0; t < 800; t++) {
      let i = 4 * t * 800;
      for (let n = 0; n < 800; n++) {
        let e = i + 4 * n;
        if (
          pixelData[e] !== 0 &&
          pixelData[e + 1] !== 0 &&
          pixelData[e + 2] !== 0
        ) {
          newData.push({
            x: n,
            y: t,
            color: [
              pixelData[e],
              pixelData[e + 1],
              pixelData[e + 2],
              pixelData[e + 3],
            ],
          });
        }
      }
    }

    newDataRef.current = newData.map(({ x, y, color }) => ({
      x,
      y,
      r: 1,
      color: `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`,
    }));
  }, [value]);

  useEffect(() => {
    draw();
  }, [value, draw]);

  const animate = (start: number) => {
    const animateFrame = (pos: number = 0) => {
      requestAnimationFrame(() => {
        const newArr = [];
        for (let i = 0; i < newDataRef.current.length; i++) {
          const current = newDataRef.current[i];
          if (current.x < pos) {
            newArr.push(current);
          } else {
            if (current.r <= 0) {
              current.r = 0;
              continue;
            }
            current.x += Math.random() > 0.5 ? 1 : -1;
            current.y += Math.random() > 0.5 ? 1 : -1;
            current.r -= 0.05 * Math.random();
            newArr.push(current);
          }
        }
        newDataRef.current = newArr;
        const ctx = canvasRef.current?.getContext("2d");
        if (ctx) {
          ctx.clearRect(pos, 0, 800, 800);
          newDataRef.current.forEach((t) => {
            const { x: n, y: i, r: s, color: color } = t;
            if (n > pos) {
              ctx.beginPath();
              ctx.rect(n, i, s, s);
              ctx.fillStyle = color;
              ctx.strokeStyle = color;
              ctx.stroke();
            }
          });
        }
        if (newDataRef.current.length > 0) {
          animateFrame(pos - 8);
        } else {
          setValue("");
          setAnimating(false);
        }
      });
    };
    animateFrame(start);
  };

  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === "Enter" && !animating) {
      vanishAndSubmit();
    }
  };

  const vanishAndSubmit = () => {
    setAnimating(true);
    draw();

    const value = inputRef.current?.value || "";
    if (value && inputRef.current) {
      const maxX = newDataRef.current.reduce(
        (prev, current) => (current.x > prev ? current.x : prev),
        0
      );
      animate(maxX);
    }
  };

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    vanishAndSubmit();
    onSubmit && onSubmit(e);
  };
  return (
    <form
      className={cn(
        "w-full relative max-w-xl mx-auto bg-white dark:bg-zinc-800 h-12 rounded-full overflow-hidden shadow-[0px_2px_3px_-1px_rgba(0,0,0,0.1),_0px_1px_0px_0px_rgba(25,28,33,0.02),_0px_0px_0px_1px_rgba(25,28,33,0.08)] transition duration-200",
        value && "bg-gray-50"
      )}
      onSubmit={handleSubmit}
    >
      <canvas
        className={cn(
          "absolute pointer-events-none  text-base transform scale-50 top-[20%] left-2 sm:left-8 origin-top-left filter invert dark:invert-0 pr-20",
          !animating ? "opacity-0" : "opacity-100"
        )}
        ref={canvasRef}
      />
      <input
        onChange={(e) => {
          if (!animating) {
            setValue(e.target.value);
            onChange && onChange(e);
          }
        }}
        onKeyDown={handleKeyDown}
        ref={inputRef}
        value={value}
        type="text"
        className={cn(
          "w-full relative text-sm sm:text-base z-50 border-none dark:text-white bg-transparent text-black h-full rounded-full focus:outline-none focus:ring-0 pl-4 sm:pl-10 pr-20",
          animating && "text-transparent dark:text-transparent"
        )}
      />

      <button
        disabled={!value}
        type="submit"
        className="absolute right-2 top-1/2 z-50 -translate-y-1/2 h-8 w-8 rounded-full disabled:bg-gray-100 bg-black dark:bg-zinc-900 dark:disabled:bg-zinc-800 transition duration-200 flex items-center justify-center"
      >
        <motion.svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className="text-gray-300 h-4 w-4"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <motion.path
            d="M5 12l14 0"
            initial={{
              strokeDasharray: "50%",
              strokeDashoffset: "50%",
            }}
            animate={{
              strokeDashoffset: value ? 0 : "50%",
            }}
            transition={{
              duration: 0.3,
              ease: "linear",
            }}
          />
          <path d="M13 18l6 -6" />
          <path d="M13 6l6 6" />
        </motion.svg>
      </button>

      <div className="absolute inset-0 flex items-center rounded-full pointer-events-none">
        <AnimatePresence mode="wait">
          {!value && (
            <motion.p
              initial={{
                y: 5,
                opacity: 0,
              }}
              key={`current-placeholder-${currentPlaceholder}`}
              animate={{
                y: 0,
                opacity: 1,
              }}
              exit={{
                y: -15,
                opacity: 0,
              }}
              transition={{
                duration: 0.3,
                ease: "linear",
              }}
              className="dark:text-zinc-500 text-sm sm:text-base font-normal text-neutral-500 pl-4 sm:pl-12 text-left w-[calc(100%-2rem)] truncate"
            >
              {placeholders[currentPlaceholder]}
            </motion.p>
          )}
        </AnimatePresence>
      </div>
    </form>
  );
}
</file>

<file path="frontend/src/components/ui/pointer-highlight.tsx">
;
import { cn } from "@/lib/utils";
import { motion } from "motion/react";
import { useRef, useEffect, useState } from "react";

export function PointerHighlight({
  children,
  rectangleClassName,
  pointerClassName,
  containerClassName,
}: {
  children: React.ReactNode;
  rectangleClassName?: string;
  pointerClassName?: string;
  containerClassName?: string;
}) {
  const containerRef = useRef<HTMLDivElement>(null);
  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });

  useEffect(() => {
    if (containerRef.current) {
      const { width, height } = containerRef.current.getBoundingClientRect();
      setDimensions({ width, height });
    }

    const resizeObserver = new ResizeObserver((entries) => {
      for (const entry of entries) {
        const { width, height } = entry.contentRect;
        setDimensions({ width, height });
      }
    });

    if (containerRef.current) {
      resizeObserver.observe(containerRef.current);
    }

    return () => {
      if (containerRef.current) {
        resizeObserver.unobserve(containerRef.current);
      }
    };
  }, []);

  return (
    <div
      className={cn("relative w-fit", containerClassName)}
      ref={containerRef}
    >
      {children}
      {dimensions.width > 0 && dimensions.height > 0 && (
        <motion.div
          className="pointer-events-none absolute inset-0 z-0"
          initial={{ opacity: 0, scale: 0.95, originX: 0, originY: 0 }}
          animate={{ opacity: 1, scale: 1 }}
          transition={{ duration: 0.5, ease: "easeOut" }}
        >
          <motion.div
            className={cn(
              "absolute inset-0 border border-neutral-800 dark:border-neutral-200",
              rectangleClassName,
            )}
            initial={{
              width: 0,
              height: 0,
            }}
            whileInView={{
              width: dimensions.width,
              height: dimensions.height,
            }}
            transition={{
              duration: 1,
              ease: "easeInOut",
            }}
          />
          <motion.div
            className="pointer-events-none absolute"
            initial={{ opacity: 0 }}
            whileInView={{
              opacity: 1,
              x: dimensions.width + 4,
              y: dimensions.height + 4,
            }}
            style={{
              rotate: -90,
            }}
            transition={{
              opacity: { duration: 0.1, ease: "easeInOut" },
              duration: 1,
              ease: "easeInOut",
            }}
          >
            <Pointer
              className={cn("h-5 w-5 text-blue-500", pointerClassName)}
            />
          </motion.div>
        </motion.div>
      )}
    </div>
  );
}

const Pointer = ({ ...props }: React.SVGProps<SVGSVGElement>) => {
  return (
    <svg
      stroke="currentColor"
      fill="currentColor"
      strokeWidth="1"
      strokeLinecap="round"
      strokeLinejoin="round"
      viewBox="0 0 16 16"
      height="1em"
      width="1em"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"></path>
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/resizable-navbar.tsx">
;
import { cn } from "@/lib/utils";
import { IconMenu2, IconX } from "@tabler/icons-react";
import {
  motion,
  AnimatePresence,
  useScroll,
  useMotionValueEvent,
} from "motion/react";

import React, { useRef, useState } from "react";


interface NavbarProps {
  children: React.ReactNode;
  className?: string;
}

interface NavBodyProps {
  children: React.ReactNode;
  className?: string;
  visible?: boolean;
}

interface NavItemsProps {
  items: {
    name: string;
    link: string;
  }[];
  className?: string;
  onItemClick?: () => void;
}

interface MobileNavProps {
  children: React.ReactNode;
  className?: string;
  visible?: boolean;
}

interface MobileNavHeaderProps {
  children: React.ReactNode;
  className?: string;
}

interface MobileNavMenuProps {
  children: React.ReactNode;
  className?: string;
  isOpen: boolean;
  onClose: () => void;
}

export const Navbar = ({ children, className }: NavbarProps) => {
  const ref = useRef<HTMLDivElement>(null);
  const { scrollY } = useScroll({
    target: ref,
    offset: ["start start", "end start"],
  });
  const [visible, setVisible] = useState<boolean>(false);

  useMotionValueEvent(scrollY, "change", (latest) => {
    if (latest > 100) {
      setVisible(true);
    } else {
      setVisible(false);
    }
  });

  return (
    <motion.div
      ref={ref}
      // IMPORTANT: Change this to class of `fixed` if you want the navbar to be fixed
      className={cn("sticky inset-x-0 top-20 z-40 w-full", className)}
    >
      {React.Children.map(children, (child) =>
        React.isValidElement(child)
          ? React.cloneElement(
            child as React.ReactElement<{ visible?: boolean }>,
            { visible },
          )
          : child,
      )}
    </motion.div>
  );
};

export const NavBody = ({ children, className, visible }: NavBodyProps) => {
  return (
    <motion.div
      animate={{
        backdropFilter: visible ? "blur(10px)" : "none",
        boxShadow: visible
          ? "0 0 24px rgba(34, 42, 53, 0.06), 0 1px 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(34, 42, 53, 0.04), 0 0 4px rgba(34, 42, 53, 0.08), 0 16px 68px rgba(47, 48, 55, 0.05), 0 1px 0 rgba(255, 255, 255, 0.1) inset"
          : "none",
        width: visible ? "40%" : "100%",
        y: visible ? 20 : 0,
      }}
      transition={{
        type: "spring",
        stiffness: 200,
        damping: 50,
      }}
      style={{
        minWidth: "800px",
      }}
      className={cn(
        "relative z-[60] mx-auto hidden w-full max-w-7xl flex-row items-center justify-between self-start rounded-full bg-transparent px-4 py-2 lg:flex dark:bg-transparent",
        visible && "bg-white/80 dark:bg-neutral-950/80",
        className,
      )}
    >
      {children}
    </motion.div>
  );
};

export const NavItems = ({ items, className, onItemClick }: NavItemsProps) => {
  const [hovered, setHovered] = useState<number | null>(null);

  return (
    <motion.div
      onMouseLeave={() => setHovered(null)}
      className={cn(
        "absolute inset-0 hidden flex-1 flex-row items-center justify-center space-x-2 text-sm font-medium text-zinc-600 transition duration-200 hover:text-zinc-800 lg:flex lg:space-x-2",
        className,
      )}
    >
      {items.map((item, idx) => (
        <a
          onMouseEnter={() => setHovered(idx)}
          onClick={onItemClick}
          className="relative px-4 py-2 text-neutral-600 dark:text-neutral-300"
          key={`link-${idx}`}
          href={item.link}
        >
          {hovered === idx && (
            <motion.div
              layoutId="hovered"
              className="absolute inset-0 h-full w-full rounded-full bg-gray-100 dark:bg-neutral-800"
            />
          )}
          <span className="relative z-20">{item.name}</span>
        </a>
      ))}
    </motion.div>
  );
};

export const MobileNav = ({ children, className, visible }: MobileNavProps) => {
  return (
    <motion.div
      animate={{
        backdropFilter: visible ? "blur(10px)" : "none",
        boxShadow: visible
          ? "0 0 24px rgba(34, 42, 53, 0.06), 0 1px 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(34, 42, 53, 0.04), 0 0 4px rgba(34, 42, 53, 0.08), 0 16px 68px rgba(47, 48, 55, 0.05), 0 1px 0 rgba(255, 255, 255, 0.1) inset"
          : "none",
        width: visible ? "90%" : "100%",
        paddingRight: visible ? "12px" : "0px",
        paddingLeft: visible ? "12px" : "0px",
        borderRadius: visible ? "4px" : "2rem",
        y: visible ? 20 : 0,
      }}
      transition={{
        type: "spring",
        stiffness: 200,
        damping: 50,
      }}
      className={cn(
        "relative z-50 mx-auto flex w-full max-w-[calc(100vw-2rem)] flex-col items-center justify-between bg-transparent px-0 py-2 lg:hidden",
        visible && "bg-white/80 dark:bg-neutral-950/80",
        className,
      )}
    >
      {children}
    </motion.div>
  );
};

export const MobileNavHeader = ({
  children,
  className,
}: MobileNavHeaderProps) => {
  return (
    <div
      className={cn(
        "flex w-full flex-row items-center justify-between",
        className,
      )}
    >
      {children}
    </div>
  );
};

export const MobileNavMenu = ({
  children,
  className,
  isOpen,
  onClose,
}: MobileNavMenuProps) => {
  return (
    <AnimatePresence>
      {isOpen && (
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          className={cn(
            "absolute inset-x-0 top-16 z-50 flex w-full flex-col items-start justify-start gap-4 rounded-lg bg-white px-4 py-8 shadow-[0_0_24px_rgba(34,_42,_53,_0.06),_0_1px_1px_rgba(0,_0,_0,_0.05),_0_0_0_1px_rgba(34,_42,_53,_0.04),_0_0_4px_rgba(34,_42,_53,_0.08),_0_16px_68px_rgba(47,_48,_55,_0.05),_0_1px_0_rgba(255,_255,_255,_0.1)_inset] dark:bg-neutral-950",
            className,
          )}
        >
          {children}
        </motion.div>
      )}
    </AnimatePresence>
  );
};

export const MobileNavToggle = ({
  isOpen,
  onClick,
}: {
  isOpen: boolean;
  onClick: () => void;
}) => {
  return isOpen ? (
    <IconX className="text-black dark:text-white" onClick={onClick} />
  ) : (
    <IconMenu2 className="text-black dark:text-white" onClick={onClick} />
  );
};

export const NavbarLogo = () => {
  return (
    <a
      href="#"
      className="relative z-20 mr-4 flex items-center space-x-2 px-2 py-1 text-sm font-normal text-black"
    >
      <img
        src="https://assets.aceternity.com/logo-dark.png"
        alt="logo"
        width={30}
        height={30}
      />
      <span className="font-medium text-black dark:text-white">Startup</span>
    </a>
  );
};

export const NavbarButton = ({
  href,
  as: Tag = "a",
  children,
  className,
  variant = "primary",
  ...props
}: {
  href?: string;
  as?: React.ElementType;
  children: React.ReactNode;
  className?: string;
  variant?: "primary" | "secondary" | "dark" | "gradient";
} & (
    | React.ComponentPropsWithoutRef<"a">
    | React.ComponentPropsWithoutRef<"button">
  )) => {
  const baseStyles =
    "px-4 py-2 rounded-md bg-white button bg-white text-black text-sm font-bold relative cursor-pointer hover:-translate-y-0.5 transition duration-200 inline-block text-center";

  const variantStyles = {
    primary:
      "shadow-[0_0_24px_rgba(34,_42,_53,_0.06),_0_1px_1px_rgba(0,_0,_0,_0.05),_0_0_0_1px_rgba(34,_42,_53,_0.04),_0_0_4px_rgba(34,_42,_53,_0.08),_0_16px_68px_rgba(47,_48,_55,_0.05),_0_1px_0_rgba(255,_255,_255,_0.1)_inset]",
    secondary: "bg-transparent shadow-none dark:text-white",
    dark: "bg-black text-white shadow-[0_0_24px_rgba(34,_42,_53,_0.06),_0_1px_1px_rgba(0,_0,_0,_0.05),_0_0_0_1px_rgba(34,_42,_53,_0.04),_0_0_4px_rgba(34,_42,_53,_0.08),_0_16px_68px_rgba(47,_48,_55,_0.05),_0_1px_0_rgba(255,_255,_255,_0.1)_inset]",
    gradient:
      "bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-[0px_2px_0px_0px_rgba(255,255,255,0.3)_inset]",
  };

  return (
    <Tag
      href={href || undefined}
      className={cn(baseStyles, variantStyles[variant], className)}
      {...props}
    >
      {children}
    </Tag>
  );
};
</file>

<file path="frontend/src/components/ui/shooting-stars.tsx">
;
import { cn } from "@/lib/utils";
import React, { useEffect, useState, useRef } from "react";

interface ShootingStar {
  id: number;
  x: number;
  y: number;
  angle: number;
  scale: number;
  speed: number;
  distance: number;
}

interface ShootingStarsProps {
  minSpeed?: number;
  maxSpeed?: number;
  minDelay?: number;
  maxDelay?: number;
  starColor?: string;
  trailColor?: string;
  starWidth?: number;
  starHeight?: number;
  className?: string;
}

const getRandomStartPoint = () => {
  const side = Math.floor(Math.random() * 4);
  const offset = Math.random() * window.innerWidth;

  switch (side) {
    case 0:
      return { x: offset, y: 0, angle: 45 };
    case 1:
      return { x: window.innerWidth, y: offset, angle: 135 };
    case 2:
      return { x: offset, y: window.innerHeight, angle: 225 };
    case 3:
      return { x: 0, y: offset, angle: 315 };
    default:
      return { x: 0, y: 0, angle: 45 };
  }
};
export const ShootingStars: React.FC<ShootingStarsProps> = ({
  minSpeed = 10,
  maxSpeed = 30,
  minDelay = 1200,
  maxDelay = 4200,
  starColor = "#9E00FF",
  trailColor = "#2EB9DF",
  starWidth = 10,
  starHeight = 1,
  className,
}) => {
  const [star, setStar] = useState<ShootingStar | null>(null);
  const svgRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    const createStar = () => {
      const { x, y, angle } = getRandomStartPoint();
      const newStar: ShootingStar = {
        id: Date.now(),
        x,
        y,
        angle,
        scale: 1,
        speed: Math.random() * (maxSpeed - minSpeed) + minSpeed,
        distance: 0,
      };
      setStar(newStar);

      const randomDelay = Math.random() * (maxDelay - minDelay) + minDelay;
      setTimeout(createStar, randomDelay);
    };

    createStar();

    return () => { };
  }, [minSpeed, maxSpeed, minDelay, maxDelay]);

  useEffect(() => {
    const moveStar = () => {
      if (star) {
        setStar((prevStar) => {
          if (!prevStar) return null;
          const newX =
            prevStar.x +
            prevStar.speed * Math.cos((prevStar.angle * Math.PI) / 180);
          const newY =
            prevStar.y +
            prevStar.speed * Math.sin((prevStar.angle * Math.PI) / 180);
          const newDistance = prevStar.distance + prevStar.speed;
          const newScale = 1 + newDistance / 100;
          if (
            newX < -20 ||
            newX > window.innerWidth + 20 ||
            newY < -20 ||
            newY > window.innerHeight + 20
          ) {
            return null;
          }
          return {
            ...prevStar,
            x: newX,
            y: newY,
            distance: newDistance,
            scale: newScale,
          };
        });
      }
    };

    const animationFrame = requestAnimationFrame(moveStar);
    return () => cancelAnimationFrame(animationFrame);
  }, [star]);

  return (
    <svg
      ref={svgRef}
      className={cn("w-full h-full absolute inset-0", className)}
    >
      {star && (
        <rect
          key={star.id}
          x={star.x}
          y={star.y}
          width={starWidth * star.scale}
          height={starHeight}
          fill="url(#gradient)"
          transform={`rotate(${star.angle}, ${star.x + (starWidth * star.scale) / 2
            }, ${star.y + starHeight / 2})`}
        />
      )}
      <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style={{ stopColor: trailColor, stopOpacity: 0 }} />
          <stop
            offset="100%"
            style={{ stopColor: starColor, stopOpacity: 1 }}
          />
        </linearGradient>
      </defs>
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/sidebar.tsx">
;
import { cn } from "@/lib/utils";
import React, { useState, createContext, useContext } from "react";
import { AnimatePresence, motion } from "motion/react";
import { IconMenu2, IconX } from "@tabler/icons-react";

interface Links {
  label: string;
  href: string;
  icon: React.JSX.Element | React.ReactNode;
}

interface SidebarContextProps {
  open: boolean;
  setOpen: React.Dispatch<React.SetStateAction<boolean>>;
  animate: boolean;
}

const SidebarContext = createContext<SidebarContextProps | undefined>(
  undefined
);

export const useSidebar = () => {
  const context = useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider");
  }
  return context;
};

export const SidebarProvider = ({
  children,
  open: openProp,
  setOpen: setOpenProp,
  animate = true,
}: {
  children: React.ReactNode;
  open?: boolean;
  setOpen?: React.Dispatch<React.SetStateAction<boolean>>;
  animate?: boolean;
}) => {
  const [openState, setOpenState] = useState(false);

  const open = openProp !== undefined ? openProp : openState;
  const setOpen = setOpenProp !== undefined ? setOpenProp : setOpenState;

  return (
    <SidebarContext.Provider value={{ open, setOpen, animate: animate }}>
      {children}
    </SidebarContext.Provider>
  );
};

export const Sidebar = ({
  children,
  open,
  setOpen,
  animate,
}: {
  children: React.ReactNode;
  open?: boolean;
  setOpen?: React.Dispatch<React.SetStateAction<boolean>>;
  animate?: boolean;
}) => {
  return (
    <SidebarProvider open={open} setOpen={setOpen} animate={animate}>
      {children}
    </SidebarProvider>
  );
};

export const SidebarBody = (props: React.ComponentProps<typeof motion.div>) => {
  return (
    <>
      <DesktopSidebar {...props} />
      <MobileSidebar {...(props as React.ComponentProps<"div">)} />
    </>
  );
};

export const DesktopSidebar = ({
  className,
  children,
  ...props
}: React.ComponentProps<typeof motion.div>) => {
  const { open, setOpen, animate } = useSidebar();
  return (
    <>
      <motion.div
        className={cn(
          "h-full px-4 py-4 hidden  md:flex md:flex-col bg-neutral-100 dark:bg-neutral-800 w-[300px] shrink-0",
          className
        )}
        animate={{
          width: animate ? (open ? "300px" : "60px") : "300px",
        }}
        onMouseEnter={() => setOpen(true)}
        onMouseLeave={() => setOpen(false)}
        {...props}
      >
        {children}
      </motion.div>
    </>
  );
};

export const MobileSidebar = ({
  className,
  children,
  ...props
}: React.ComponentProps<"div">) => {
  const { open, setOpen } = useSidebar();
  return (
    <>
      <div
        className={cn(
          "h-10 px-4 py-4 flex flex-row md:hidden  items-center justify-between bg-neutral-100 dark:bg-neutral-800 w-full"
        )}
        {...props}
      >
        <div className="flex justify-end z-20 w-full">
          <IconMenu2
            className="text-neutral-800 dark:text-neutral-200"
            onClick={() => setOpen(!open)}
          />
        </div>
        <AnimatePresence>
          {open && (
            <motion.div
              initial={{ x: "-100%", opacity: 0 }}
              animate={{ x: 0, opacity: 1 }}
              exit={{ x: "-100%", opacity: 0 }}
              transition={{
                duration: 0.3,
                ease: "easeInOut",
              }}
              className={cn(
                "fixed h-full w-full inset-0 bg-white dark:bg-neutral-900 p-10 z-[100] flex flex-col justify-between",
                className
              )}
            >
              <div
                className="absolute right-10 top-10 z-50 text-neutral-800 dark:text-neutral-200"
                onClick={() => setOpen(!open)}
              >
                <IconX />
              </div>
              {children}
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </>
  );
};

export const SidebarLink = ({
  link,
  className,
  ...props
}: {
  link: Links;
  className?: string;
}) => {
  const { open, animate } = useSidebar();
  return (
    <a
      href={link.href}
      className={cn(
        "flex items-center justify-start gap-2  group/sidebar py-2",
        className
      )}
      {...props}
    >
      {link.icon}

      <motion.span
        animate={{
          display: animate ? (open ? "inline-block" : "none") : "inline-block",
          opacity: animate ? (open ? 1 : 0) : 1,
        }}
        className="text-neutral-700 dark:text-neutral-200 text-sm group-hover/sidebar:translate-x-1 transition duration-150 whitespace-pre inline-block !p-0 !m-0"
      >
        {link.label}
      </motion.span>
    </a>
  );
};
</file>

<file path="frontend/src/components/ui/spotlight-new.tsx">
;
import React from "react";
import { motion } from "motion/react";

type SpotlightProps = {
  gradientFirst?: string;
  gradientSecond?: string;
  gradientThird?: string;
  translateY?: number;
  width?: number;
  height?: number;
  smallWidth?: number;
  duration?: number;
  xOffset?: number;
};

export const Spotlight = ({
  gradientFirst = "radial-gradient(68.54% 68.72% at 55.02% 31.46%, hsla(210, 100%, 85%, .08) 0, hsla(210, 100%, 55%, .02) 50%, hsla(210, 100%, 45%, 0) 80%)",
  gradientSecond = "radial-gradient(50% 50% at 50% 50%, hsla(210, 100%, 85%, .06) 0, hsla(210, 100%, 55%, .02) 80%, transparent 100%)",
  gradientThird = "radial-gradient(50% 50% at 50% 50%, hsla(210, 100%, 85%, .04) 0, hsla(210, 100%, 45%, .02) 80%, transparent 100%)",
  translateY = -350,
  width = 560,
  height = 1380,
  smallWidth = 240,
  duration = 7,
  xOffset = 100,
}: SpotlightProps = {}) => {
  return (
    <motion.div
      initial={{
        opacity: 0,
      }}
      animate={{
        opacity: 1,
      }}
      transition={{
        duration: 1.5,
      }}
      className="pointer-events-none absolute inset-0 h-full w-full"
    >
      <motion.div
        animate={{
          x: [0, xOffset, 0],
        }}
        transition={{
          duration,
          repeat: Infinity,
          repeatType: "reverse",
          ease: "easeInOut",
        }}
        className="absolute top-0 left-0 w-screen h-screen z-40 pointer-events-none"
      >
        <div
          style={{
            transform: `translateY(${translateY}px) rotate(-45deg)`,
            background: gradientFirst,
            width: `${width}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 left-0`}
        />

        <div
          style={{
            transform: "rotate(-45deg) translate(5%, -50%)",
            background: gradientSecond,
            width: `${smallWidth}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 left-0 origin-top-left`}
        />

        <div
          style={{
            transform: "rotate(-45deg) translate(-180%, -70%)",
            background: gradientThird,
            width: `${smallWidth}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 left-0 origin-top-left`}
        />
      </motion.div>

      <motion.div
        animate={{
          x: [0, -xOffset, 0],
        }}
        transition={{
          duration,
          repeat: Infinity,
          repeatType: "reverse",
          ease: "easeInOut",
        }}
        className="absolute top-0 right-0 w-screen h-screen z-40 pointer-events-none"
      >
        <div
          style={{
            transform: `translateY(${translateY}px) rotate(45deg)`,
            background: gradientFirst,
            width: `${width}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 right-0`}
        />

        <div
          style={{
            transform: "rotate(45deg) translate(-5%, -50%)",
            background: gradientSecond,
            width: `${smallWidth}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 right-0 origin-top-right`}
        />

        <div
          style={{
            transform: "rotate(45deg) translate(180%, -70%)",
            background: gradientThird,
            width: `${smallWidth}px`,
            height: `${height}px`,
          }}
          className={`absolute top-0 right-0 origin-top-right`}
        />
      </motion.div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/stars-background.tsx">
;
import { cn } from "@/lib/utils";
import React, {
  useState,
  useEffect,
  useRef,
  RefObject,
  useCallback,
} from "react";

interface StarProps {
  x: number;
  y: number;
  radius: number;
  opacity: number;
  twinkleSpeed: number | null;
}

interface StarBackgroundProps {
  starDensity?: number;
  allStarsTwinkle?: boolean;
  twinkleProbability?: number;
  minTwinkleSpeed?: number;
  maxTwinkleSpeed?: number;
  className?: string;
}

export const StarsBackground: React.FC<StarBackgroundProps> = ({
  starDensity = 0.00015,
  allStarsTwinkle = true,
  twinkleProbability = 0.7,
  minTwinkleSpeed = 0.5,
  maxTwinkleSpeed = 1,
  className,
}) => {
  const [stars, setStars] = useState<StarProps[]>([]);
  const canvasRef: RefObject<HTMLCanvasElement> =
    useRef<HTMLCanvasElement>(null);

  const generateStars = useCallback(
    (width: number, height: number): StarProps[] => {
      const area = width * height;
      const numStars = Math.floor(area * starDensity);
      return Array.from({ length: numStars }, () => {
        const shouldTwinkle =
          allStarsTwinkle || Math.random() < twinkleProbability;
        return {
          x: Math.random() * width,
          y: Math.random() * height,
          radius: Math.random() * 0.05 + 0.5,
          opacity: Math.random() * 0.5 + 0.5,
          twinkleSpeed: shouldTwinkle
            ? minTwinkleSpeed +
            Math.random() * (maxTwinkleSpeed - minTwinkleSpeed)
            : null,
        };
      });
    },
    [
      starDensity,
      allStarsTwinkle,
      twinkleProbability,
      minTwinkleSpeed,
      maxTwinkleSpeed,
    ]
  );

  useEffect(() => {
    const updateStars = () => {
      if (canvasRef.current) {
        const canvas = canvasRef.current;
        const ctx = canvas.getContext("2d");
        if (!ctx) return;

        const { width, height } = canvas.getBoundingClientRect();
        canvas.width = width;
        canvas.height = height;
        setStars(generateStars(width, height));
      }
    };

    updateStars();

    const resizeObserver = new ResizeObserver(updateStars);
    if (canvasRef.current) {
      resizeObserver.observe(canvasRef.current);
    }

    return () => {
      if (canvasRef.current) {
        resizeObserver.unobserve(canvasRef.current);
      }
    };
  }, [
    starDensity,
    allStarsTwinkle,
    twinkleProbability,
    minTwinkleSpeed,
    maxTwinkleSpeed,
    generateStars,
  ]);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext("2d");
    if (!ctx) return;

    let animationFrameId: number;

    const render = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      stars.forEach((star) => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
        ctx.fill();

        if (star.twinkleSpeed !== null) {
          star.opacity =
            0.5 +
            Math.abs(Math.sin((Date.now() * 0.001) / star.twinkleSpeed) * 0.5);
        }
      });

      animationFrameId = requestAnimationFrame(render);
    };

    render();

    return () => {
      cancelAnimationFrame(animationFrameId);
    };
  }, [stars]);

  return (
    <canvas
      ref={canvasRef}
      className={cn("h-full w-full absolute inset-0", className)}
    />
  );
};
</file>

<file path="frontend/src/components/ui/stateful-button.tsx">
;
import { cn } from "@/lib/utils";
import React from "react";
import { motion, AnimatePresence, useAnimate } from "motion/react";

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  className?: string;
  children: React.ReactNode;
}

export const Button = ({ className, children, ...props }: ButtonProps) => {
  const [scope, animate] = useAnimate();

  const animateLoading = async () => {
    await animate(
      ".loader",
      {
        width: "20px",
        scale: 1,
        display: "block",
      },
      {
        duration: 0.2,
      },
    );
  };

  const animateSuccess = async () => {
    await animate(
      ".loader",
      {
        width: "0px",
        scale: 0,
        display: "none",
      },
      {
        duration: 0.2,
      },
    );
    await animate(
      ".check",
      {
        width: "20px",
        scale: 1,
        display: "block",
      },
      {
        duration: 0.2,
      },
    );

    await animate(
      ".check",
      {
        width: "0px",
        scale: 0,
        display: "none",
      },
      {
        delay: 2,
        duration: 0.2,
      },
    );
  };

  const handleClick = async (event: React.MouseEvent<HTMLButtonElement>) => {
    await animateLoading();
    await props.onClick?.(event);
    await animateSuccess();
  };

  const {
    onClick,
    onDrag,
    onDragStart,
    onDragEnd,
    onAnimationStart,
    onAnimationEnd,
    ...buttonProps
  } = props;

  return (
    <motion.button
      layout
      layoutId="button"
      ref={scope}
      className={cn(
        "flex min-w-[120px] cursor-pointer items-center justify-center gap-2 rounded-full bg-green-500 px-4 py-2 font-medium text-white ring-offset-2 transition duration-200 hover:ring-2 hover:ring-green-500 dark:ring-offset-black",
        className,
      )}
      {...buttonProps}
      onClick={handleClick}
    >
      <motion.div layout className="flex items-center gap-2">
        <Loader />
        <CheckIcon />
        <motion.span layout>{children}</motion.span>
      </motion.div>
    </motion.button>
  );
};

const Loader = () => {
  return (
    <motion.svg
      animate={{
        rotate: [0, 360],
      }}
      initial={{
        scale: 0,
        width: 0,
        display: "none",
      }}
      style={{
        scale: 0.5,
        display: "none",
      }}
      transition={{
        duration: 0.3,
        repeat: Infinity,
        ease: "linear",
      }}
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      className="loader text-white"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3a9 9 0 1 0 9 9" />
    </motion.svg>
  );
};

const CheckIcon = () => {
  return (
    <motion.svg
      initial={{
        scale: 0,
        width: 0,
        display: "none",
      }}
      style={{
        scale: 0.5,
        display: "none",
      }}
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      className="check text-white"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
      <path d="M9 12l2 2l4 -4" />
    </motion.svg>
  );
};
</file>

<file path="frontend/src/components/ui/sticky-banner.tsx">
;
import React, { SVGProps, useState } from "react";
import { motion, useMotionValueEvent, useScroll } from "motion/react";
import { cn } from "@/lib/utils";

export const StickyBanner = ({
  className,
  children,
  hideOnScroll = false,
}: {
  className?: string;
  children: React.ReactNode;
  hideOnScroll?: boolean;
}) => {
  const [open, setOpen] = useState(true);
  const { scrollY } = useScroll();

  useMotionValueEvent(scrollY, "change", (latest) => {
    console.log(latest);
    if (hideOnScroll && latest > 40) {
      setOpen(false);
    } else {
      setOpen(true);
    }
  });

  return (
    <motion.div
      className={cn(
        "sticky inset-x-0 top-0 z-40 flex min-h-14 w-full items-center justify-center bg-transparent px-4 py-1",
        className,
      )}
      initial={{
        y: -100,
        opacity: 0,
      }}
      animate={{
        y: open ? 0 : -100,
        opacity: open ? 1 : 0,
      }}
      transition={{
        duration: 0.3,
        ease: "easeInOut",
      }}
    >
      {children}

      <motion.button
        initial={{
          scale: 0,
        }}
        animate={{
          scale: 1,
        }}
        className="absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer"
        onClick={() => setOpen(!open)}
      >
        <CloseIcon className="h-5 w-5 text-white" />
      </motion.button>
    </motion.div>
  );
};

const CloseIcon = (props: SVGProps<SVGSVGElement>) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      {...props}
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 6l-12 12" />
      <path d="M6 6l12 12" />
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/sticky-scroll-reveal.tsx">
;
import React, { useEffect, useRef, useState } from "react";
import { useMotionValueEvent, useScroll } from "motion/react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export const StickyScroll = ({
  content,
  contentClassName,
}: {
  content: {
    title: string;
    description: string;
    content?: React.ReactNode | any;
  }[];
  contentClassName?: string;
}) => {
  const [activeCard, setActiveCard] = React.useState(0);
  const ref = useRef<any>(null);
  const { scrollYProgress } = useScroll({
    // uncomment line 22 and comment line 23 if you DONT want the overflow container and want to have it change on the entire page scroll
    // target: ref
    container: ref,
    offset: ["start start", "end start"],
  });
  const cardLength = content.length;

  useMotionValueEvent(scrollYProgress, "change", (latest) => {
    const cardsBreakpoints = content.map((_, index) => index / cardLength);
    const closestBreakpointIndex = cardsBreakpoints.reduce(
      (acc, breakpoint, index) => {
        const distance = Math.abs(latest - breakpoint);
        if (distance < Math.abs(latest - cardsBreakpoints[acc])) {
          return index;
        }
        return acc;
      },
      0,
    );
    setActiveCard(closestBreakpointIndex);
  });

  const backgroundColors = [
    "#0f172a", // slate-900
    "#000000", // black
    "#171717", // neutral-900
  ];
  const linearGradients = [
    "linear-gradient(to bottom right, #06b6d4, #10b981)", // cyan-500 to emerald-500
    "linear-gradient(to bottom right, #ec4899, #6366f1)", // pink-500 to indigo-500
    "linear-gradient(to bottom right, #f97316, #eab308)", // orange-500 to yellow-500
  ];

  const [backgroundGradient, setBackgroundGradient] = useState(
    linearGradients[0],
  );

  useEffect(() => {
    setBackgroundGradient(linearGradients[activeCard % linearGradients.length]);
  }, [activeCard]);

  return (
    <motion.div
      animate={{
        backgroundColor: backgroundColors[activeCard % backgroundColors.length],
      }}
      className="relative flex h-[30rem] justify-center space-x-10 overflow-y-auto rounded-md p-10"
      ref={ref}
    >
      <div className="div relative flex items-start px-4">
        <div className="max-w-2xl">
          {content.map((item, index) => (
            <div key={item.title + index} className="my-20">
              <motion.h2
                initial={{
                  opacity: 0,
                }}
                animate={{
                  opacity: activeCard === index ? 1 : 0.3,
                }}
                className="text-2xl font-bold text-slate-100"
              >
                {item.title}
              </motion.h2>
              <motion.p
                initial={{
                  opacity: 0,
                }}
                animate={{
                  opacity: activeCard === index ? 1 : 0.3,
                }}
                className="text-kg mt-10 max-w-sm text-slate-300"
              >
                {item.description}
              </motion.p>
            </div>
          ))}
          <div className="h-40" />
        </div>
      </div>
      <div
        style={{ background: backgroundGradient }}
        className={cn(
          "sticky top-10 hidden h-60 w-80 overflow-hidden rounded-md bg-white lg:block",
          contentClassName,
        )}
      >
        {content[activeCard].content ?? null}
      </div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/svg-mask-effect.tsx">
;
import { useState, useEffect, useRef } from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export const MaskContainer = ({
  children,
  revealText,
  size = 10,
  revealSize = 600,
  className,
}: {
  children?: string | React.ReactNode;
  revealText?: string | React.ReactNode;
  size?: number;
  revealSize?: number;
  className?: string;
}) => {
  const [isHovered, setIsHovered] = useState(false);
  const [mousePosition, setMousePosition] = useState<any>({ x: null, y: null });
  const containerRef = useRef<any>(null);
  const updateMousePosition = (e: any) => {
    const rect = containerRef.current.getBoundingClientRect();
    setMousePosition({ x: e.clientX - rect.left, y: e.clientY - rect.top });
  };

  useEffect(() => {
    containerRef.current.addEventListener("mousemove", updateMousePosition);
    return () => {
      if (containerRef.current) {
        containerRef.current.removeEventListener(
          "mousemove",
          updateMousePosition,
        );
      }
    };
  }, []);
  let maskSize = isHovered ? revealSize : size;

  return (
    <motion.div
      ref={containerRef}
      className={cn("relative h-screen", className)}
      animate={{
        backgroundColor: isHovered ? "var(--slate-900)" : "var(--white)",
      }}
      transition={{
        backgroundColor: { duration: 0.3 },
      }}
    >
      <motion.div
        className="absolute flex h-full w-full items-center justify-center bg-black text-6xl [mask-image:url(/mask.svg)] [mask-repeat:no-repeat] [mask-size:40px] dark:bg-white"
        animate={{
          maskPosition: `${mousePosition.x - maskSize / 2}px ${mousePosition.y - maskSize / 2
            }px`,
          maskSize: `${maskSize}px`,
        }}
        transition={{
          maskSize: { duration: 0.3, ease: "easeInOut" },
          maskPosition: { duration: 0.15, ease: "linear" },
        }}
      >
        <div className="absolute inset-0 z-0 h-full w-full bg-black opacity-50 dark:bg-white" />
        <div
          onMouseEnter={() => {
            setIsHovered(true);
          }}
          onMouseLeave={() => {
            setIsHovered(false);
          }}
          className="relative z-20 mx-auto max-w-4xl text-center text-4xl font-bold"
        >
          {children}
        </div>
      </motion.div>

      <div className="flex h-full w-full items-center justify-center">
        {revealText}
      </div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/tabs.tsx">
;

import { useState } from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

type Tab = {
  title: string;
  value: string;
  content?: string | React.ReactNode | any;
};

export const Tabs = ({
  tabs: propTabs,
  containerClassName,
  activeTabClassName,
  tabClassName,
  contentClassName,
}: {
  tabs: Tab[];
  containerClassName?: string;
  activeTabClassName?: string;
  tabClassName?: string;
  contentClassName?: string;
}) => {
  const [active, setActive] = useState<Tab>(propTabs[0]);
  const [tabs, setTabs] = useState<Tab[]>(propTabs);

  const moveSelectedTabToTop = (idx: number) => {
    const newTabs = [...propTabs];
    const selectedTab = newTabs.splice(idx, 1);
    newTabs.unshift(selectedTab[0]);
    setTabs(newTabs);
    setActive(newTabs[0]);
  };

  const [hovering, setHovering] = useState(false);

  return (
    <>
      <div
        className={cn(
          "flex flex-row items-center justify-start [perspective:1000px] relative overflow-auto sm:overflow-visible no-visible-scrollbar max-w-full w-full",
          containerClassName
        )}
      >
        {propTabs.map((tab, idx) => (
          <button
            key={tab.title}
            onClick={() => {
              moveSelectedTabToTop(idx);
            }}
            onMouseEnter={() => setHovering(true)}
            onMouseLeave={() => setHovering(false)}
            className={cn("relative px-4 py-2 rounded-full", tabClassName)}
            style={{
              transformStyle: "preserve-3d",
            }}
          >
            {active.value === tab.value && (
              <motion.div
                layoutId="clickedbutton"
                transition={{ type: "spring", bounce: 0.3, duration: 0.6 }}
                className={cn(
                  "absolute inset-0 bg-gray-200 dark:bg-zinc-800 rounded-full ",
                  activeTabClassName
                )}
              />
            )}

            <span className="relative block text-black dark:text-white">
              {tab.title}
            </span>
          </button>
        ))}
      </div>
      <FadeInDiv
        tabs={tabs}
        active={active}
        key={active.value}
        hovering={hovering}
        className={cn("mt-32", contentClassName)}
      />
    </>
  );
};

export const FadeInDiv = ({
  className,
  tabs,
  hovering,
}: {
  className?: string;
  key?: string;
  tabs: Tab[];
  active: Tab;
  hovering?: boolean;
}) => {
  const isActive = (tab: Tab) => {
    return tab.value === tabs[0].value;
  };
  return (
    <div className="relative w-full h-full">
      {tabs.map((tab, idx) => (
        <motion.div
          key={tab.value}
          layoutId={tab.value}
          style={{
            scale: 1 - idx * 0.1,
            top: hovering ? idx * -50 : 0,
            zIndex: -idx,
            opacity: idx < 3 ? 1 - idx * 0.1 : 0,
          }}
          animate={{
            y: isActive(tab) ? [0, 40, 0] : 0,
          }}
          className={cn("w-full h-full absolute top-0 left-0", className)}
        >
          {tab.content}
        </motion.div>
      ))}
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/tailwindcss-buttons.tsx">
;
import React from "react";
import { IconClipboard } from "@tabler/icons-react";
import { cn } from "@/lib/utils";

export const ButtonsCard = ({
  children,
  className,
  onClick,
}: {
  children?: React.ReactNode;
  className?: string;
  onClick?: () => void;
}) => {
  return (
    <div
      onClick={onClick}
      className={cn(
        "h-60 w-full bg-white rounded-xl border border-neutral-100 dark:bg-black dark:border-white/[0.2] hover:border-neutral-200 group/btn overflow-hidden relative flex items-center justify-center",
        className
      )}
    >
      <div className="absolute inset-0 dark:bg-dot-white/[0.1] bg-dot-black/[0.1]" />
      <IconClipboard className="absolute top-2 right-2 text-neutral-300 group-hover/btn:block hidden h-4 w-4 transition duration-200" />
      <div className="relative z-40">{children}</div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/text-generate-effect.tsx">
;
import { useEffect } from "react";
import { motion, stagger, useAnimate } from "motion/react";
import { cn } from "@/lib/utils";

export const TextGenerateEffect = ({
  words,
  className,
  filter = true,
  duration = 0.5,
}: {
  words: string;
  className?: string;
  filter?: boolean;
  duration?: number;
}) => {
  const [scope, animate] = useAnimate();
  let wordsArray = words.split(" ");
  useEffect(() => {
    animate(
      "span",
      {
        opacity: 1,
        filter: filter ? "blur(0px)" : "none",
      },
      {
        duration: duration ? duration : 1,
        delay: stagger(0.2),
      }
    );
  }, [scope.current]);

  const renderWords = () => {
    return (
      <motion.div ref={scope}>
        {wordsArray.map((word, idx) => {
          return (
            <motion.span
              key={word + idx}
              className="dark:text-white text-black opacity-0"
              style={{
                filter: filter ? "blur(10px)" : "none",
              }}
            >
              {word}{" "}
            </motion.span>
          );
        })}
      </motion.div>
    );
  };

  return (
    <div className={cn("font-bold", className)}>
      <div className="mt-4">
        <div className=" dark:text-white text-black text-2xl leading-snug tracking-wide">
          {renderWords()}
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/text-hover-effect.tsx">
;
import React, { useRef, useEffect, useState } from "react";
import { motion } from "motion/react";

export const TextHoverEffect = ({
  text,
  duration,
}: {
  text: string;
  duration?: number;
  automatic?: boolean;
}) => {
  const svgRef = useRef<SVGSVGElement>(null);
  const [cursor, setCursor] = useState({ x: 0, y: 0 });
  const [hovered, setHovered] = useState(false);
  const [maskPosition, setMaskPosition] = useState({ cx: "50%", cy: "50%" });

  useEffect(() => {
    if (svgRef.current && cursor.x !== null && cursor.y !== null) {
      const svgRect = svgRef.current.getBoundingClientRect();
      const cxPercentage = ((cursor.x - svgRect.left) / svgRect.width) * 100;
      const cyPercentage = ((cursor.y - svgRect.top) / svgRect.height) * 100;
      setMaskPosition({
        cx: `${cxPercentage}%`,
        cy: `${cyPercentage}%`,
      });
    }
  }, [cursor]);

  return (
    <svg
      ref={svgRef}
      width="100%"
      height="100%"
      viewBox="0 0 300 100"
      xmlns="http://www.w3.org/2000/svg"
      onMouseEnter={() => setHovered(true)}
      onMouseLeave={() => setHovered(false)}
      onMouseMove={(e) => setCursor({ x: e.clientX, y: e.clientY })}
      className="select-none"
    >
      <defs>
        <linearGradient
          id="textGradient"
          gradientUnits="userSpaceOnUse"
          cx="50%"
          cy="50%"
          r="25%"
        >
          {hovered && (
            <>
              <stop offset="0%" stopColor="#eab308" />
              <stop offset="25%" stopColor="#ef4444" />
              <stop offset="50%" stopColor="#3b82f6" />
              <stop offset="75%" stopColor="#06b6d4" />
              <stop offset="100%" stopColor="#8b5cf6" />
            </>
          )}
        </linearGradient>

        <motion.radialGradient
          id="revealMask"
          gradientUnits="userSpaceOnUse"
          r="20%"
          initial={{ cx: "50%", cy: "50%" }}
          animate={maskPosition}
          transition={{ duration: duration ?? 0, ease: "easeOut" }}

        // example for a smoother animation below

        //   transition={{
        //     type: "spring",
        //     stiffness: 300,
        //     damping: 50,
        //   }}
        >
          <stop offset="0%" stopColor="white" />
          <stop offset="100%" stopColor="black" />
        </motion.radialGradient>
        <mask id="textMask">
          <rect
            x="0"
            y="0"
            width="100%"
            height="100%"
            fill="url(#revealMask)"
          />
        </mask>
      </defs>
      <text
        x="50%"
        y="50%"
        textAnchor="middle"
        dominantBaseline="middle"
        strokeWidth="0.3"
        className="fill-transparent stroke-neutral-200 font-[helvetica] text-7xl font-bold dark:stroke-neutral-800"
        style={{ opacity: hovered ? 0.7 : 0 }}
      >
        {text}
      </text>
      <motion.text
        x="50%"
        y="50%"
        textAnchor="middle"
        dominantBaseline="middle"
        strokeWidth="0.3"
        className="fill-transparent stroke-neutral-200 font-[helvetica] text-7xl font-bold dark:stroke-neutral-800"
        initial={{ strokeDashoffset: 1000, strokeDasharray: 1000 }}
        animate={{
          strokeDashoffset: 0,
          strokeDasharray: 1000,
        }}
        transition={{
          duration: 4,
          ease: "easeInOut",
        }}
      >
        {text}
      </motion.text>
      <text
        x="50%"
        y="50%"
        textAnchor="middle"
        dominantBaseline="middle"
        stroke="url(#textGradient)"
        strokeWidth="0.3"
        mask="url(#textMask)"
        className="fill-transparent font-[helvetica] text-7xl font-bold"
      >
        {text}
      </text>
    </svg>
  );
};
</file>

<file path="frontend/src/components/ui/text-reveal-card.tsx">
;
import React, { useEffect, useRef, useState, memo } from "react";
import { motion } from "motion/react";
import { twMerge } from "tailwind-merge";
import { cn } from "@/lib/utils";

export const TextRevealCard = ({
  text,
  revealText,
  children,
  className,
}: {
  text: string;
  revealText: string;
  children?: React.ReactNode;
  className?: string;
}) => {
  const [widthPercentage, setWidthPercentage] = useState(0);
  const cardRef = useRef<HTMLDivElement | any>(null);
  const [left, setLeft] = useState(0);
  const [localWidth, setLocalWidth] = useState(0);
  const [isMouseOver, setIsMouseOver] = useState(false);

  useEffect(() => {
    if (cardRef.current) {
      const { left, width: localWidth } =
        cardRef.current.getBoundingClientRect();
      setLeft(left);
      setLocalWidth(localWidth);
    }
  }, []);

  function mouseMoveHandler(event: any) {
    event.preventDefault();

    const { clientX } = event;
    if (cardRef.current) {
      const relativeX = clientX - left;
      setWidthPercentage((relativeX / localWidth) * 100);
    }
  }

  function mouseLeaveHandler() {
    setIsMouseOver(false);
    setWidthPercentage(0);
  }
  function mouseEnterHandler() {
    setIsMouseOver(true);
  }
  function touchMoveHandler(event: React.TouchEvent<HTMLDivElement>) {
    event.preventDefault();
    const clientX = event.touches[0]!.clientX;
    if (cardRef.current) {
      const relativeX = clientX - left;
      setWidthPercentage((relativeX / localWidth) * 100);
    }
  }

  const rotateDeg = (widthPercentage - 50) * 0.1;
  return (
    <div
      onMouseEnter={mouseEnterHandler}
      onMouseLeave={mouseLeaveHandler}
      onMouseMove={mouseMoveHandler}
      onTouchStart={mouseEnterHandler}
      onTouchEnd={mouseLeaveHandler}
      onTouchMove={touchMoveHandler}
      ref={cardRef}
      className={cn(
        "bg-[#1d1c20] border border-white/[0.08] w-[40rem] rounded-lg p-8 relative overflow-hidden",
        className
      )}
    >
      {children}

      <div className="h-40  relative flex items-center overflow-hidden">
        <motion.div
          style={{
            width: "100%",
          }}
          animate={
            isMouseOver
              ? {
                opacity: widthPercentage > 0 ? 1 : 0,
                clipPath: `inset(0 ${100 - widthPercentage}% 0 0)`,
              }
              : {
                clipPath: `inset(0 ${100 - widthPercentage}% 0 0)`,
              }
          }
          transition={isMouseOver ? { duration: 0 } : { duration: 0.4 }}
          className="absolute bg-[#1d1c20] z-20  will-change-transform"
        >
          <p
            style={{
              textShadow: "4px 4px 15px rgba(0,0,0,0.5)",
            }}
            className="text-base sm:text-[3rem] py-10 font-bold text-white bg-clip-text text-transparent bg-gradient-to-b from-white to-neutral-300"
          >
            {revealText}
          </p>
        </motion.div>
        <motion.div
          animate={{
            left: `${widthPercentage}%`,
            rotate: `${rotateDeg}deg`,
            opacity: widthPercentage > 0 ? 1 : 0,
          }}
          transition={isMouseOver ? { duration: 0 } : { duration: 0.4 }}
          className="h-40 w-[8px] bg-gradient-to-b from-transparent via-neutral-800 to-transparent absolute z-50 will-change-transform"
        ></motion.div>

        <div className=" overflow-hidden [mask-image:linear-gradient(to_bottom,transparent,white,transparent)]">
          <p className="text-base sm:text-[3rem] py-10 font-bold bg-clip-text text-transparent bg-[#323238]">
            {text}
          </p>
          <MemoizedStars />
        </div>
      </div>
    </div>
  );
};

export const TextRevealCardTitle = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  return (
    <h2 className={twMerge("text-white text-lg mb-2", className)}>
      {children}
    </h2>
  );
};

export const TextRevealCardDescription = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  return (
    <p className={twMerge("text-[#a9a9a9] text-sm", className)}>{children}</p>
  );
};

const Stars = () => {
  const randomMove = () => Math.random() * 4 - 2;
  const randomOpacity = () => Math.random();
  const random = () => Math.random();
  return (
    <div className="absolute inset-0">
      {[...Array(80)].map((_, i) => (
        <motion.span
          key={`star-${i}`}
          animate={{
            top: `calc(${random() * 100}% + ${randomMove()}px)`,
            left: `calc(${random() * 100}% + ${randomMove()}px)`,
            opacity: randomOpacity(),
            scale: [1, 1.2, 0],
          }}
          transition={{
            duration: random() * 10 + 20,
            repeat: Infinity,
            ease: "linear",
          }}
          style={{
            position: "absolute",
            top: `${random() * 100}%`,
            left: `${random() * 100}%`,
            width: `2px`,
            height: `2px`,
            backgroundColor: "white",
            borderRadius: "50%",
            zIndex: 1,
          }}
          className="inline-block"
        ></motion.span>
      ))}
    </div>
  );
};

export const MemoizedStars = memo(Stars);
</file>

<file path="frontend/src/components/ui/timeline.tsx">
;
import {
  useMotionValueEvent,
  useScroll,
  useTransform,
  motion,
} from "motion/react";
import React, { useEffect, useRef, useState } from "react";

interface TimelineEntry {
  title: string;
  content: React.ReactNode;
}

export const Timeline = ({ data }: { data: TimelineEntry[] }) => {
  const ref = useRef<HTMLDivElement>(null);
  const containerRef = useRef<HTMLDivElement>(null);
  const [height, setHeight] = useState(0);

  useEffect(() => {
    if (ref.current) {
      const rect = ref.current.getBoundingClientRect();
      setHeight(rect.height);
    }
  }, [ref]);

  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ["start 10%", "end 50%"],
  });

  const heightTransform = useTransform(scrollYProgress, [0, 1], [0, height]);
  const opacityTransform = useTransform(scrollYProgress, [0, 0.1], [0, 1]);

  return (
    <div
      className="w-full bg-white dark:bg-neutral-950 font-sans md:px-10"
      ref={containerRef}
    >
      <div className="max-w-7xl mx-auto py-20 px-4 md:px-8 lg:px-10">
        <h2 className="text-lg md:text-4xl mb-4 text-black dark:text-white max-w-4xl">
          Changelog from my journey
        </h2>
        <p className="text-neutral-700 dark:text-neutral-300 text-sm md:text-base max-w-sm">
          I&apos;ve been working on Aceternity for the past 2 years. Here&apos;s
          a timeline of my journey.
        </p>
      </div>

      <div ref={ref} className="relative max-w-7xl mx-auto pb-20">
        {data.map((item, index) => (
          <div
            key={index}
            className="flex justify-start pt-10 md:pt-40 md:gap-10"
          >
            <div className="sticky flex flex-col md:flex-row z-40 items-center top-40 self-start max-w-xs lg:max-w-sm md:w-full">
              <div className="h-10 absolute left-3 md:left-3 w-10 rounded-full bg-white dark:bg-black flex items-center justify-center">
                <div className="h-4 w-4 rounded-full bg-neutral-200 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 p-2" />
              </div>
              <h3 className="hidden md:block text-xl md:pl-20 md:text-5xl font-bold text-neutral-500 dark:text-neutral-500 ">
                {item.title}
              </h3>
            </div>

            <div className="relative pl-20 pr-4 md:pl-4 w-full">
              <h3 className="md:hidden block text-2xl mb-4 text-left font-bold text-neutral-500 dark:text-neutral-500">
                {item.title}
              </h3>
              {item.content}{" "}
            </div>
          </div>
        ))}
        <div
          style={{
            height: height + "px",
          }}
          className="absolute md:left-8 left-8 top-0 overflow-hidden w-[2px] bg-[linear-gradient(to_bottom,var(--tw-gradient-stops))] from-transparent from-[0%] via-neutral-200 dark:via-neutral-700 to-transparent to-[99%]  [mask-image:linear-gradient(to_bottom,transparent_0%,black_10%,black_90%,transparent_100%)] "
        >
          <motion.div
            style={{
              height: heightTransform,
              opacity: opacityTransform,
            }}
            className="absolute inset-x-0 top-0  w-[2px] bg-gradient-to-t from-purple-500 via-blue-500 to-transparent from-[0%] via-[10%] rounded-full"
          />
        </div>
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/tracing-beam.tsx">
;
import React, { useEffect, useRef, useState } from "react";
import {
  motion,
  useTransform,
  useScroll,
  useVelocity,
  useSpring,
} from "motion/react";
import { cn } from "@/lib/utils";

export const TracingBeam = ({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) => {
  const ref = useRef<HTMLDivElement>(null);
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start start", "end start"],
  });

  const contentRef = useRef<HTMLDivElement>(null);
  const [svgHeight, setSvgHeight] = useState(0);

  useEffect(() => {
    if (contentRef.current) {
      setSvgHeight(contentRef.current.offsetHeight);
    }
  }, []);

  const y1 = useSpring(
    useTransform(scrollYProgress, [0, 0.8], [50, svgHeight]),
    {
      stiffness: 500,
      damping: 90,
    },
  );
  const y2 = useSpring(
    useTransform(scrollYProgress, [0, 1], [50, svgHeight - 200]),
    {
      stiffness: 500,
      damping: 90,
    },
  );

  return (
    <motion.div
      ref={ref}
      className={cn("relative mx-auto h-full w-full max-w-4xl", className)}
    >
      <div className="absolute top-3 -left-4 md:-left-20">
        <motion.div
          transition={{
            duration: 0.2,
            delay: 0.5,
          }}
          animate={{
            boxShadow:
              scrollYProgress.get() > 0
                ? "none"
                : "rgba(0, 0, 0, 0.24) 0px 3px 8px",
          }}
          className="border-netural-200 ml-[27px] flex h-4 w-4 items-center justify-center rounded-full border shadow-sm"
        >
          <motion.div
            transition={{
              duration: 0.2,
              delay: 0.5,
            }}
            animate={{
              backgroundColor: scrollYProgress.get() > 0 ? "white" : "#10b981",
              borderColor: scrollYProgress.get() > 0 ? "white" : "#059669",
            }}
            className="h-2 w-2 rounded-full border border-neutral-300 bg-white"
          />
        </motion.div>
        <svg
          viewBox={`0 0 20 ${svgHeight}`}
          width="20"
          height={svgHeight} // Set the SVG height
          className="ml-4 block"
          aria-hidden="true"
        >
          <motion.path
            d={`M 1 0V -36 l 18 24 V ${svgHeight * 0.8} l -18 24V ${svgHeight}`}
            fill="none"
            stroke="#9091A0"
            strokeOpacity="0.16"
            transition={{
              duration: 10,
            }}
          ></motion.path>
          <motion.path
            d={`M 1 0V -36 l 18 24 V ${svgHeight * 0.8} l -18 24V ${svgHeight}`}
            fill="none"
            stroke="url(#gradient)"
            strokeWidth="1.25"
            className="motion-reduce:hidden"
            transition={{
              duration: 10,
            }}
          ></motion.path>
          <defs>
            <motion.linearGradient
              id="gradient"
              gradientUnits="userSpaceOnUse"
              x1="0"
              x2="0"
              y1={y1} // set y1 for gradient
              y2={y2} // set y2 for gradient
            >
              <stop stopColor="#18CCFC" stopOpacity="0"></stop>
              <stop stopColor="#18CCFC"></stop>
              <stop offset="0.325" stopColor="#6344F5"></stop>
              <stop offset="1" stopColor="#AE48FF" stopOpacity="0"></stop>
            </motion.linearGradient>
          </defs>
        </svg>
      </div>
      <div ref={contentRef}>{children}</div>
    </motion.div>
  );
};
</file>

<file path="frontend/src/components/ui/typewriter-effect.tsx">
;

import { cn } from "@/lib/utils";
import { motion, stagger, useAnimate, useInView } from "motion/react";
import { useEffect } from "react";

export const TypewriterEffect = ({
  words,
  className,
  cursorClassName,
}: {
  words: {
    text: string;
    className?: string;
  }[];
  className?: string;
  cursorClassName?: string;
}) => {
  // split text inside of words into array of characters
  const wordsArray = words.map((word) => {
    return {
      ...word,
      text: word.text.split(""),
    };
  });

  const [scope, animate] = useAnimate();
  const isInView = useInView(scope);
  useEffect(() => {
    if (isInView) {
      animate(
        "span",
        {
          display: "inline-block",
          opacity: 1,
          width: "fit-content",
        },
        {
          duration: 0.3,
          delay: stagger(0.1),
          ease: "easeInOut",
        }
      );
    }
  }, [isInView]);

  const renderWords = () => {
    return (
      <motion.div ref={scope} className="inline">
        {wordsArray.map((word, idx) => {
          return (
            <div key={`word-${idx}`} className="inline-block">
              {word.text.map((char, index) => (
                <motion.span
                  initial={{}}
                  key={`char-${index}`}
                  className={cn(
                    `dark:text-white text-black opacity-0 hidden`,
                    word.className
                  )}
                >
                  {char}
                </motion.span>
              ))}
              &nbsp;
            </div>
          );
        })}
      </motion.div>
    );
  };
  return (
    <div
      className={cn(
        "text-base sm:text-xl md:text-3xl lg:text-5xl font-bold text-center",
        className
      )}
    >
      {renderWords()}
      <motion.span
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 1,
        }}
        transition={{
          duration: 0.8,
          repeat: Infinity,
          repeatType: "reverse",
        }}
        className={cn(
          "inline-block rounded-sm w-[4px] h-4 md:h-6 lg:h-10 bg-blue-500",
          cursorClassName
        )}
      ></motion.span>
    </div>
  );
};

export const TypewriterEffectSmooth = ({
  words,
  className,
  cursorClassName,
}: {
  words: {
    text: string;
    className?: string;
  }[];
  className?: string;
  cursorClassName?: string;
}) => {
  // split text inside of words into array of characters
  const wordsArray = words.map((word) => {
    return {
      ...word,
      text: word.text.split(""),
    };
  });
  const renderWords = () => {
    return (
      <div>
        {wordsArray.map((word, idx) => {
          return (
            <div key={`word-${idx}`} className="inline-block">
              {word.text.map((char, index) => (
                <span
                  key={`char-${index}`}
                  className={cn(`dark:text-white text-black `, word.className)}
                >
                  {char}
                </span>
              ))}
              &nbsp;
            </div>
          );
        })}
      </div>
    );
  };

  return (
    <div className={cn("flex space-x-1 my-6", className)}>
      <motion.div
        className="overflow-hidden pb-2"
        initial={{
          width: "0%",
        }}
        whileInView={{
          width: "fit-content",
        }}
        transition={{
          duration: 2,
          ease: "linear",
          delay: 1,
        }}
      >
        <div
          className="text-xs sm:text-base md:text-xl lg:text:3xl xl:text-5xl font-bold"
          style={{
            whiteSpace: "nowrap",
          }}
        >
          {renderWords()}{" "}
        </div>{" "}
      </motion.div>
      <motion.span
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 1,
        }}
        transition={{
          duration: 0.8,

          repeat: Infinity,
          repeatType: "reverse",
        }}
        className={cn(
          "block rounded-sm w-[4px]  h-4 sm:h-6 xl:h-12 bg-blue-500",
          cursorClassName
        )}
      ></motion.span>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/wavy-background.tsx">
;
import { cn } from "@/lib/utils";
import React, { useEffect, useRef, useState } from "react";
import { createNoise3D } from "simplex-noise";

export const WavyBackground = ({
  children,
  className,
  containerClassName,
  colors,
  waveWidth,
  backgroundFill,
  blur = 10,
  speed = "fast",
  waveOpacity = 0.5,
  ...props
}: {
  children?: any;
  className?: string;
  containerClassName?: string;
  colors?: string[];
  waveWidth?: number;
  backgroundFill?: string;
  blur?: number;
  speed?: "slow" | "fast";
  waveOpacity?: number;
  [key: string]: any;
}) => {
  const noise = createNoise3D();
  let w: number,
    h: number,
    nt: number,
    i: number,
    x: number,
    ctx: any,
    canvas: any;
  const canvasRef = useRef<HTMLCanvasElement>(null);
  const getSpeed = () => {
    switch (speed) {
      case "slow":
        return 0.001;
      case "fast":
        return 0.002;
      default:
        return 0.001;
    }
  };

  const init = () => {
    canvas = canvasRef.current;
    ctx = canvas.getContext("2d");
    w = ctx.canvas.width = window.innerWidth;
    h = ctx.canvas.height = window.innerHeight;
    ctx.filter = `blur(${blur}px)`;
    nt = 0;
    window.onresize = function () {
      w = ctx.canvas.width = window.innerWidth;
      h = ctx.canvas.height = window.innerHeight;
      ctx.filter = `blur(${blur}px)`;
    };
    render();
  };

  const waveColors = colors ?? [
    "#38bdf8",
    "#818cf8",
    "#c084fc",
    "#e879f9",
    "#22d3ee",
  ];
  const drawWave = (n: number) => {
    nt += getSpeed();
    for (i = 0; i < n; i++) {
      ctx.beginPath();
      ctx.lineWidth = waveWidth || 50;
      ctx.strokeStyle = waveColors[i % waveColors.length];
      for (x = 0; x < w; x += 5) {
        var y = noise(x / 800, 0.3 * i, nt) * 100;
        ctx.lineTo(x, y + h * 0.5); // adjust for height, currently at 50% of the container
      }
      ctx.stroke();
      ctx.closePath();
    }
  };

  let animationId: number;
  const render = () => {
    ctx.fillStyle = backgroundFill || "black";
    ctx.globalAlpha = waveOpacity || 0.5;
    ctx.fillRect(0, 0, w, h);
    drawWave(5);
    animationId = requestAnimationFrame(render);
  };

  useEffect(() => {
    init();
    return () => {
      cancelAnimationFrame(animationId);
    };
  }, []);

  const [isSafari, setIsSafari] = useState(false);
  useEffect(() => {
    // I'm sorry but i have got to support it on safari.
    setIsSafari(
      typeof window !== "undefined" &&
      navigator.userAgent.includes("Safari") &&
      !navigator.userAgent.includes("Chrome")
    );
  }, []);

  return (
    <div
      className={cn(
        "h-screen flex flex-col items-center justify-center",
        containerClassName
      )}
    >
      <canvas
        className="absolute inset-0 z-0"
        ref={canvasRef}
        id="canvas"
        style={{
          ...(isSafari ? { filter: `blur(${blur}px)` } : {}),
        }}
      ></canvas>
      <div className={cn("relative z-10", className)} {...props}>
        {children}
      </div>
    </div>
  );
};
</file>

<file path="frontend/src/components/ui/wobble-card.tsx">
;
import React, { useState } from "react";
import { motion } from "motion/react";
import { cn } from "@/lib/utils";

export const WobbleCard = ({
  children,
  containerClassName,
  className,
}: {
  children: React.ReactNode;
  containerClassName?: string;
  className?: string;
}) => {
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const [isHovering, setIsHovering] = useState(false);

  const handleMouseMove = (event: React.MouseEvent<HTMLElement>) => {
    const { clientX, clientY } = event;
    const rect = event.currentTarget.getBoundingClientRect();
    const x = (clientX - (rect.left + rect.width / 2)) / 20;
    const y = (clientY - (rect.top + rect.height / 2)) / 20;
    setMousePosition({ x, y });
  };
  return (
    <motion.section
      onMouseMove={handleMouseMove}
      onMouseEnter={() => setIsHovering(true)}
      onMouseLeave={() => {
        setIsHovering(false);
        setMousePosition({ x: 0, y: 0 });
      }}
      style={{
        transform: isHovering
          ? `translate3d(${mousePosition.x}px, ${mousePosition.y}px, 0) scale3d(1, 1, 1)`
          : "translate3d(0px, 0px, 0) scale3d(1, 1, 1)",
        transition: "transform 0.1s ease-out",
      }}
      className={cn(
        "mx-auto w-full bg-indigo-800  relative rounded-2xl overflow-hidden",
        containerClassName
      )}
    >
      <div
        className="relative  h-full [background-image:radial-gradient(88%_100%_at_top,rgba(255,255,255,0.5),rgba(255,255,255,0))]  sm:mx-0 sm:rounded-2xl overflow-hidden"
        style={{
          boxShadow:
            "0 10px 32px rgba(34, 42, 53, 0.12), 0 1px 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(34, 42, 53, 0.05), 0 4px 6px rgba(34, 42, 53, 0.08), 0 24px 108px rgba(47, 48, 55, 0.10)",
        }}
      >
        <motion.div
          style={{
            transform: isHovering
              ? `translate3d(${-mousePosition.x}px, ${-mousePosition.y}px, 0) scale3d(1.03, 1.03, 1)`
              : "translate3d(0px, 0px, 0) scale3d(1, 1, 1)",
            transition: "transform 0.1s ease-out",
          }}
          className={cn("h-full px-4 py-20 sm:px-10", className)}
        >
          <Noise />
          {children}
        </motion.div>
      </div>
    </motion.section>
  );
};

const Noise = () => {
  return (
    <div
      className="absolute inset-0 w-full h-full scale-[1.2] transform opacity-10 [mask-image:radial-gradient(#fff,transparent,75%)]"
      style={{
        backgroundImage: "url(/noise.webp)",
        backgroundSize: "30%",
      }}
    ></div>
  );
};
</file>

<file path="frontend/src/components/ui/world-map.tsx">
;

import { useRef } from "react";
import { motion } from "motion/react";
import DottedMap from "dotted-map";

import { useTheme } from "next-themes";

interface MapProps {
  dots?: Array<{
    start: { lat: number; lng: number; label?: string };
    end: { lat: number; lng: number; label?: string };
  }>;
  lineColor?: string;
}

export default function WorldMap({
  dots = [],
  lineColor = "#0ea5e9",
}: MapProps) {
  const svgRef = useRef<SVGSVGElement>(null);
  const map = new DottedMap({ height: 100, grid: "diagonal" });

  const { theme } = useTheme();

  const svgMap = map.getSVG({
    radius: 0.22,
    color: theme === "dark" ? "#FFFFFF40" : "#00000040",
    shape: "circle",
    backgroundColor: theme === "dark" ? "black" : "white",
  });

  const projectPoint = (lat: number, lng: number) => {
    const x = (lng + 180) * (800 / 360);
    const y = (90 - lat) * (400 / 180);
    return { x, y };
  };

  const createCurvedPath = (
    start: { x: number; y: number },
    end: { x: number; y: number }
  ) => {
    const midX = (start.x + end.x) / 2;
    const midY = Math.min(start.y, end.y) - 50;
    return `M ${start.x} ${start.y} Q ${midX} ${midY} ${end.x} ${end.y}`;
  };

  return (
    <div className="w-full aspect-[2/1] dark:bg-black bg-white rounded-lg  relative font-sans">
      <img
        src={`data:image/svg+xml;utf8,${encodeURIComponent(svgMap)}`}
        className="h-full w-full [mask-image:linear-gradient(to_bottom,transparent,white_10%,white_90%,transparent)] pointer-events-none select-none"
        alt="world map"
        height="495"
        width="1056"
        draggable={false}
      />
      <svg
        ref={svgRef}
        viewBox="0 0 800 400"
        className="w-full h-full absolute inset-0 pointer-events-none select-none"
      >
        {dots.map((dot, i) => {
          const startPoint = projectPoint(dot.start.lat, dot.start.lng);
          const endPoint = projectPoint(dot.end.lat, dot.end.lng);
          return (
            <g key={`path-group-${i}`}>
              <motion.path
                d={createCurvedPath(startPoint, endPoint)}
                fill="none"
                stroke="url(#path-gradient)"
                strokeWidth="1"
                initial={{
                  pathLength: 0,
                }}
                animate={{
                  pathLength: 1,
                }}
                transition={{
                  duration: 1,
                  delay: 0.5 * i,
                  ease: "easeOut",
                }}
                key={`start-upper-${i}`}
              ></motion.path>
            </g>
          );
        })}

        <defs>
          <linearGradient id="path-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stopColor="white" stopOpacity="0" />
            <stop offset="5%" stopColor={lineColor} stopOpacity="1" />
            <stop offset="95%" stopColor={lineColor} stopOpacity="1" />
            <stop offset="100%" stopColor="white" stopOpacity="0" />
          </linearGradient>
        </defs>

        {dots.map((dot, i) => (
          <g key={`points-group-${i}`}>
            <g key={`start-${i}`}>
              <circle
                cx={projectPoint(dot.start.lat, dot.start.lng).x}
                cy={projectPoint(dot.start.lat, dot.start.lng).y}
                r="2"
                fill={lineColor}
              />
              <circle
                cx={projectPoint(dot.start.lat, dot.start.lng).x}
                cy={projectPoint(dot.start.lat, dot.start.lng).y}
                r="2"
                fill={lineColor}
                opacity="0.5"
              >
                <animate
                  attributeName="r"
                  from="2"
                  to="8"
                  dur="1.5s"
                  begin="0s"
                  repeatCount="indefinite"
                />
                <animate
                  attributeName="opacity"
                  from="0.5"
                  to="0"
                  dur="1.5s"
                  begin="0s"
                  repeatCount="indefinite"
                />
              </circle>
            </g>
            <g key={`end-${i}`}>
              <circle
                cx={projectPoint(dot.end.lat, dot.end.lng).x}
                cy={projectPoint(dot.end.lat, dot.end.lng).y}
                r="2"
                fill={lineColor}
              />
              <circle
                cx={projectPoint(dot.end.lat, dot.end.lng).x}
                cy={projectPoint(dot.end.lat, dot.end.lng).y}
                r="2"
                fill={lineColor}
                opacity="0.5"
              >
                <animate
                  attributeName="r"
                  from="2"
                  to="8"
                  dur="1.5s"
                  begin="0s"
                  repeatCount="indefinite"
                />
                <animate
                  attributeName="opacity"
                  from="0.5"
                  to="0"
                  dur="1.5s"
                  begin="0s"
                  repeatCount="indefinite"
                />
              </circle>
            </g>
          </g>
        ))}
      </svg>
    </div>
  );
}
</file>

<file path="frontend/src/hooks/use-composed-ref.ts">
import * as React from "react"

// basically Exclude<React.ClassAttributes<T>["ref"], string>
type UserRef<T> =
  | ((instance: T | null) => void)
  | React.RefObject<T | null>
  | null
  | undefined

const updateRef = <T>(ref: NonNullable<UserRef<T>>, value: T | null) => {
  if (typeof ref === "function") {
    ref(value)
  } else if (ref && typeof ref === "object" && "current" in ref) {
    // Safe assignment without MutableRefObject
    ;(ref as { current: T | null }).current = value
  }
}

export const useComposedRef = <T extends HTMLElement>(
  libRef: React.RefObject<T | null>,
  userRef: UserRef<T>
) => {
  const prevUserRef = React.useRef<UserRef<T>>(null)

  return React.useCallback(
    (instance: T | null) => {
      if (libRef && "current" in libRef) {
        ;(libRef as { current: T | null }).current = instance
      }

      if (prevUserRef.current) {
        updateRef(prevUserRef.current, null)
      }

      prevUserRef.current = userRef

      if (userRef) {
        updateRef(userRef, instance)
      }
    },
    [libRef, userRef]
  )
}

export default useComposedRef
</file>

<file path="frontend/src/hooks/use-element-rect.ts">
import * as React from "react"
import { useThrottledCallback } from "./use-throttled-callback"

export type RectState = Omit<DOMRect, "toJSON">

export interface ElementRectOptions {
  /**
   * The element to track. Can be an Element, ref, or selector string.
   * Defaults to document.body if not provided.
   */
  element?: Element | React.RefObject<Element> | string | null
  /**
   * Whether to enable rect tracking
   */
  enabled?: boolean
  /**
   * Throttle delay in milliseconds for rect updates
   */
  throttleMs?: number
  /**
   * Whether to use ResizeObserver for more accurate tracking
   */
  useResizeObserver?: boolean
}

const initialRect: RectState = {
  x: 0,
  y: 0,
  width: 0,
  height: 0,
  top: 0,
  right: 0,
  bottom: 0,
  left: 0,
}

const isSSR = typeof window === "undefined"
const hasResizeObserver = !isSSR && typeof ResizeObserver !== "undefined"

/**
 * Helper function to check if code is running on client side
 */
const isClientSide = (): boolean => !isSSR

/**
 * Custom hook that tracks an element's bounding rectangle and updates on resize, scroll, etc.
 *
 * @param options Configuration options for element rect tracking
 * @returns The current bounding rectangle of the element
 */
export function useElementRect({
  element,
  enabled = true,
  throttleMs = 100,
  useResizeObserver = true,
}: ElementRectOptions = {}): RectState {
  const [rect, setRect] = React.useState<RectState>(initialRect)

  const getTargetElement = React.useCallback((): Element | null => {
    if (!enabled || !isClientSide()) return null

    if (!element) {
      return document.body
    }

    if (typeof element === "string") {
      return document.querySelector(element)
    }

    if ("current" in element) {
      return element.current
    }

    return element
  }, [element, enabled])

  const updateRect = useThrottledCallback(
    () => {
      if (!enabled || !isClientSide()) return

      const targetElement = getTargetElement()
      if (!targetElement) {
        setRect(initialRect)
        return
      }

      const newRect = targetElement.getBoundingClientRect()
      setRect({
        x: newRect.x,
        y: newRect.y,
        width: newRect.width,
        height: newRect.height,
        top: newRect.top,
        right: newRect.right,
        bottom: newRect.bottom,
        left: newRect.left,
      })
    },
    throttleMs,
    [enabled, getTargetElement],
    { leading: true, trailing: true }
  )

  React.useEffect(() => {
    if (!enabled || !isClientSide()) {
      setRect(initialRect)
      return
    }

    const targetElement = getTargetElement()
    if (!targetElement) return

    updateRect()

    const cleanup: (() => void)[] = []

    if (useResizeObserver && hasResizeObserver) {
      const resizeObserver = new ResizeObserver(() => {
        window.requestAnimationFrame(updateRect)
      })
      resizeObserver.observe(targetElement)
      cleanup.push(() => resizeObserver.disconnect())
    }

    const handleUpdate = () => updateRect()

    window.addEventListener("scroll", handleUpdate, { passive: true })
    window.addEventListener("resize", handleUpdate, { passive: true })

    cleanup.push(() => {
      window.removeEventListener("scroll", handleUpdate)
      window.removeEventListener("resize", handleUpdate)
    })

    return () => {
      cleanup.forEach((fn) => fn())
      setRect(initialRect)
    }
  }, [enabled, getTargetElement, updateRect, useResizeObserver])

  return rect
}

/**
 * Convenience hook for tracking document.body rect
 */
export function useBodyRect(
  options: Omit<ElementRectOptions, "element"> = {}
): RectState {
  return useElementRect({
    ...options,
    element: isClientSide() ? document.body : null,
  })
}

/**
 * Convenience hook for tracking a ref element's rect
 */
export function useRefRect<T extends Element>(
  ref: React.RefObject<T>,
  options: Omit<ElementRectOptions, "element"> = {}
): RectState {
  return useElementRect({ ...options, element: ref })
}
</file>

<file path="frontend/src/hooks/use-isomorphic-layout-effect.ts">
import { useEffect, useLayoutEffect } from "react"

/**
 * Custom hook that uses either `useLayoutEffect` or `useEffect` based on the environment (client-side or server-side).
 * @param {Function} effect - The effect function to be executed.
 * @param {Array<any>} [dependencies] - An array of dependencies for the effect (optional).
 */
export const useIsomorphicLayoutEffect =
  typeof window !== "undefined" ? useLayoutEffect : useEffect
</file>

<file path="frontend/src/hooks/use-window-size.ts">
import * as React from "react"
import { useThrottledCallback } from "./use-throttled-callback"

export interface WindowSizeState {
  /**
   * The width of the window's visual viewport in pixels.
   */
  width: number
  /**
   * The height of the window's visual viewport in pixels.
   */
  height: number
  /**
   * The distance from the top of the visual viewport to the top of the layout viewport.
   * Particularly useful for handling mobile keyboard appearance.
   */
  offsetTop: number
  /**
   * The distance from the left of the visual viewport to the left of the layout viewport.
   */
  offsetLeft: number
  /**
   * The scale factor of the visual viewport.
   * This is useful for scaling elements based on the current zoom level.
   */
  scale: number
}

/**
 * Hook that tracks the window's visual viewport dimensions, position, and provides
 * a CSS transform for positioning elements.
 *
 * Uses the Visual Viewport API to get accurate measurements, especially important
 * for mobile devices where virtual keyboards can change the visible area.
 * Only updates state when values actually change to optimize performance.
 *
 * @returns An object containing viewport properties and a CSS transform string
 */
export function useWindowSize(): WindowSizeState {
  const [windowSize, setWindowSize] = React.useState<WindowSizeState>({
    width: 0,
    height: 0,
    offsetTop: 0,
    offsetLeft: 0,
    scale: 0,
  })

  const handleViewportChange = useThrottledCallback(() => {
    if (typeof window === "undefined") return

    const vp = window.visualViewport
    if (!vp) return

    const {
      width = 0,
      height = 0,
      offsetTop = 0,
      offsetLeft = 0,
      scale = 0,
    } = vp

    setWindowSize((prevState) => {
      if (
        width === prevState.width &&
        height === prevState.height &&
        offsetTop === prevState.offsetTop &&
        offsetLeft === prevState.offsetLeft &&
        scale === prevState.scale
      ) {
        return prevState
      }

      return { width, height, offsetTop, offsetLeft, scale }
    })
  }, 200)

  React.useEffect(() => {
    const visualViewport = window.visualViewport
    if (!visualViewport) return

    visualViewport.addEventListener("resize", handleViewportChange)

    handleViewportChange()

    return () => {
      visualViewport.removeEventListener("resize", handleViewportChange)
    }
  }, [handleViewportChange])

  return windowSize
}
</file>

<file path="frontend/src/main.tsx">
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';
import './styles/globals.css';

const container = document.getElementById('root');
if (!container) {
  throw new Error('Root element not found');
}

const root = createRoot(container);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
</file>

<file path="scripts/dev-backend.sh">
#!/bin/bash

# Watson Backend Development Server
# Starts Django development server with hot reload

set -e

echo "🚀 Starting Watson Backend Development Server..."

# Load development environment variables
if [ -f .env.dev ]; then
    export $(cat .env.dev | grep -v '^#' | xargs)
    echo "✅ Loaded development environment variables"
else
    echo "⚠️  No .env.dev file found, using default settings"
fi

# Navigate to backend directory
cd backend

# Activate virtual environment
source ../.venv/bin/activate

# Run migrations if needed
echo "🔄 Checking for pending migrations..."
python manage.py migrate --check || {
    echo "📝 Running migrations..."
    python manage.py migrate
}

# Start development server with hot reload
echo "🔥 Starting Django development server with hot reload..."
echo "📍 Server will be available at: http://localhost:8888"
echo "🛑 Press Ctrl+C to stop the server"
echo ""

python manage.py runserver 0.0.0.0:8888
</file>

<file path="scripts/dev-frontend.sh">
#!/bin/bash

# Watson Frontend Development Server
# Starts Bun development server with HMR

set -e

echo "🚀 Starting Watson Frontend Development Server..."

# Load development environment variables
if [ -f .env.dev ]; then
    export $(cat .env.dev | grep -v '^#' | xargs)
    echo "✅ Loaded development environment variables"
else
    echo "⚠️  No .env.dev file found, using default settings"
fi

# Navigate to frontend directory
cd frontend

# Start Bun development server with HMR
echo "🔥 Starting Bun development server with Hot Module Reloading..."
echo "📍 Frontend will be available at: http://localhost:8881"
echo "🔗 API proxy to Django backend at: http://localhost:8888"
echo "🛑 Press Ctrl+C to stop the server"
echo ""

bun --hot ./index.ts
</file>

<file path="scripts/dev.sh">
#!/bin/bash

# Watson Unified Development Server
# Starts both Django backend and Bun frontend concurrently

set -e

echo "🚀 Starting Watson Development Environment..."
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Function to cleanup processes on exit
cleanup() {
    echo -e "\n${YELLOW}🛑 Shutting down development servers...${NC}"
    kill $(jobs -p) 2>/dev/null || true
    exit 0
}

# Trap Ctrl+C and other termination signals
trap cleanup INT TERM

# Load development environment variables
if [ -f .env.dev ]; then
    export $(cat .env.dev | grep -v '^#' | xargs)
    echo -e "${GREEN}✅ Loaded development environment variables${NC}"
else
    echo -e "${YELLOW}⚠️  No .env.dev file found, using default settings${NC}"
fi

echo ""
echo -e "${BLUE}📋 Services to start:${NC}"
echo -e "  • Django Backend (port 8888)"
echo -e "  • React Frontend (port 8881)"
echo ""

# Start Django backend in background
echo -e "${BLUE}🐍 Starting Django backend...${NC}"
cd backend
source ../.venv/bin/activate

# Check and run migrations
echo -e "${BLUE}🔄 Checking for pending migrations...${NC}"
uv run python manage.py migrate --check || {
    echo -e "${YELLOW}📝 Running migrations...${NC}"
    uv run python manage.py migrate
}

# Start Django development server
uv run python manage.py runserver 0.0.0.0:8888 &
BACKEND_PID=$!
cd ..

# Wait a moment for backend to start
sleep 2

# Start Bun frontend in background
echo -e "${BLUE}⚡ Starting Bun frontend...${NC}"
cd frontend
bun --hot ./index.ts &
FRONTEND_PID=$!
cd ..

# Wait for both services to start
sleep 3

echo ""
echo -e "${GREEN}🎉 Watson Development Environment Ready!${NC}"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo -e "${BLUE}📍 Frontend:${NC} http://localhost:8881"
echo -e "${BLUE}📍 Backend API:${NC} http://localhost:8888"
echo -e "${BLUE}📍 Django Admin:${NC} http://localhost:8888/admin"
echo ""
echo -e "${YELLOW}🛑 Press Ctrl+C to stop all servers${NC}"
echo ""

# Keep script running and wait for background processes
wait $BACKEND_PID $FRONTEND_PID
</file>

<file path="scripts/health-check.sh">
#!/bin/bash

# Watson Development Environment Health Check
# Verifies that all development dependencies and services are ready

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "🏥 Watson Development Environment Health Check"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

SUCCESS_COUNT=0
TOTAL_CHECKS=0

# Function to check and report status
check_status() {
    local name=$1
    local command=$2
    TOTAL_CHECKS=$((TOTAL_CHECKS + 1))
    
    printf "%-30s " "$name:"
    
    if eval "$command" &>/dev/null; then
        echo -e "${GREEN}✅ OK${NC}"
        SUCCESS_COUNT=$((SUCCESS_COUNT + 1))
    else
        echo -e "${RED}❌ FAIL${NC}"
    fi
}

# Check Python and virtual environment
echo -e "\n${BLUE}🐍 Python Environment${NC}"
check_status "Virtual environment" "[ -d .venv ]"
check_status "Python executable" ".venv/bin/python --version"
check_status "Django installation" ".venv/bin/python -c 'import django'"
check_status "Django REST Framework" ".venv/bin/python -c 'import rest_framework'"

# Check Bun and Node dependencies
echo -e "\n${BLUE}⚡ Bun Environment${NC}"
check_status "Bun installation" "bun --version"
check_status "Node modules" "[ -d node_modules ]"
check_status "React installation" "[ -f node_modules/react/package.json ]"
check_status "TipTap installation" "[ -f node_modules/@tiptap/core/package.json ]"

# Check project structure
echo -e "\n${BLUE}📁 Project Structure${NC}"
check_status "Backend directory" "[ -d backend ]"
check_status "Frontend directory" "[ -d frontend ]"
check_status "Django project" "[ -f backend/manage.py ]"
check_status "Frontend entry point" "[ -f frontend/index.ts ]"

# Check configuration files
echo -e "\n${BLUE}⚙️  Configuration${NC}"
check_status "Django settings" "[ -f backend/watson/settings.py ]"
check_status "Package.json" "[ -f package.json ]"
check_status "Pyproject.toml" "[ -f pyproject.toml ]"
check_status "TypeScript config" "[ -f tsconfig.json ]"

# Check development scripts
echo -e "\n${BLUE}🛠️  Development Scripts${NC}"
check_status "Backend dev script" "[ -x scripts/dev-backend.sh ]"
check_status "Frontend dev script" "[ -x scripts/dev-frontend.sh ]"
check_status "Unified dev script" "[ -x scripts/dev.sh ]"
check_status "Environment file" "[ -f .env.dev ]"

# Database connectivity check
echo -e "\n${BLUE}💾 Database${NC}"
cd backend
if ./../.venv/bin/python manage.py migrate --check &>/dev/null; then
    echo -e "Database migrations     : ${GREEN}✅ OK${NC}"
    SUCCESS_COUNT=$((SUCCESS_COUNT + 1))
else
    echo -e "Database migrations     : ${YELLOW}⚠️  Pending migrations detected${NC}"
fi
cd ..
TOTAL_CHECKS=$((TOTAL_CHECKS + 1))

# Port availability check
echo -e "\n${BLUE}🔌 Port Availability${NC}"
if ! lsof -i :8888 &>/dev/null; then
    echo -e "Port 8888 (Django)      : ${GREEN}✅ Available${NC}"
    SUCCESS_COUNT=$((SUCCESS_COUNT + 1))
else
    echo -e "Port 8888 (Django)      : ${YELLOW}⚠️  In use${NC}"
fi

if ! lsof -i :8881 &>/dev/null; then
    echo -e "Port 8881 (Frontend)    : ${GREEN}✅ Available${NC}"
    SUCCESS_COUNT=$((SUCCESS_COUNT + 1))
else
    echo -e "Port 8881 (Frontend)    : ${YELLOW}⚠️  In use${NC}"
fi
TOTAL_CHECKS=$((TOTAL_CHECKS + 2))

# Summary
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
if [ $SUCCESS_COUNT -eq $TOTAL_CHECKS ]; then
    echo -e "${GREEN}🎉 All checks passed! ($SUCCESS_COUNT/$TOTAL_CHECKS)${NC}"
    echo -e "${GREEN}Ready to start development with: ./scripts/dev.sh${NC}"
    exit 0
else
    echo -e "${YELLOW}⚠️  Some checks failed: ($SUCCESS_COUNT/$TOTAL_CHECKS passed)${NC}"
    echo -e "${YELLOW}Please resolve the issues above before starting development${NC}"
    exit 1
fi
</file>

<file path=".env.dev">
# Watson Development Environment Variables
# Note: Use .env.local for full local development configuration

# Database
DATABASE_URL=postgresql://watson:watson_dev_password@localhost:5001/watson_dev

# Django settings
DEBUG=true
SECRET_KEY=dev-secret-key-change-in-production
ALLOWED_HOSTS=localhost,127.0.0.1,watson.lvh.me
DJANGO_SETTINGS_MODULE=watson.settings.base

# Passport Authentication
AUTH_URL=http://passport.lvh.me:5555
JWT_SECRET=development-jwt-secret-min-32-characters
JWT_ALGORITHM=HS256
COOKIE_DOMAIN=.lvh.me
SUBDOMAIN_NAME=watson

# Frontend/API
NODE_ENV=development
VITE_AUTH_URL=http://passport.lvh.me:5555
VITE_API_URL=http://localhost:8001
VITE_USE_PASSPORT=true
PORT=3001
</file>

<file path=".env.production">
# Watson Production Environment Variables

# Django settings
DEBUG=false
SECRET_KEY=${SECRET_KEY}
ALLOWED_HOSTS=${ALLOWED_HOSTS}

# Database
DATABASE_URL=${DATABASE_URL}

# Passport Authentication
AUTH_URL=https://passport.oceanheart.ai
JWT_SECRET=${JWT_SECRET}
COOKIE_DOMAIN=.oceanheart.ai
SUBDOMAIN_NAME=watson
PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json
JWT_ALGORITHM=HS256

# Frontend/API
NODE_ENV=production
API_URL=${API_URL}

# Vercel Frontend Variables
VITE_AUTH_URL=https://passport.oceanheart.ai
VITE_API_URL=${VITE_API_URL:-https://api.watson.oceanheart.ai}
VITE_APP_ENV=production
VITE_PUBLIC_URL=${VITE_PUBLIC_URL:-https://watson.oceanheart.ai}
VITE_USE_PASSPORT=true

# Static files and CDN
STATIC_URL=/static/
MEDIA_URL=/media/

# Security settings
SECURE_SSL_REDIRECT=true
SESSION_COOKIE_SECURE=true
CSRF_COOKIE_SECURE=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_CONTENT_TYPE_NOSNIFF=true

# Logging
LOG_LEVEL=INFO
SENTRY_DSN=${SENTRY_DSN}

# Performance
CACHE_TTL=3600
</file>

<file path=".gitignore">
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/
.pytest_cache/
.coverage
htmlcov/

# TypeScript/JavaScript
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.npm
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
dist/
build/
*.tsbuildinfo
.next/
out/
.nuxt/
.vuepress/dist/
.serverless/
.fusebox/
.dynamodb/
.tern-port

# Ruby
*.gem
*.rbc
/.config
/coverage/
/InstalledFiles
/pkg/
/spec/reports/
/spec/examples.txt
/test/tmp/
/test/version_tmp/
/tmp/
.bundle
/vendor/bundle
lib/bundler/man/
.rvmrc
/.ruby-version
/.ruby-gemset
.rbenv-version
Gemfile.lock

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Logs
logs/
*.log

# Temporary files
*.tmp
*.temp

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Database
*.db
*.sqlite
*.sqlite3

# Compiled files
*.com
*.class
*.dll
*.exe
*.o
*.so

backend/watson/staticfiles/*
.vercel
.env*.local
</file>

<file path="build.config.ts">
// Watson Build Configuration for Production
// Optimized Bun build settings for clinical review application

export default {
  // Build targets and entry points
  entryPoints: ['./frontend/src/main.tsx'],
  outdir: './dist/static',
  
  // Optimization settings
  minify: true,
  splitting: true,
  format: 'esm' as const,
  target: 'browser',
  
  // Static asset configuration
  publicPath: '/static/',
  
  // Advanced optimization
  define: {
    'process.env.NODE_ENV': '"production"',
    'process.env.API_URL': 'process.env.API_URL || "http://localhost:8888"',
  },
  
  // Bundle splitting for better caching
  external: [],
  
  // Source maps for production debugging
  sourcemap: 'linked',
  
  // Asset handling
  loader: {
    '.png': 'file',
    '.jpg': 'file',
    '.jpeg': 'file',
    '.svg': 'file',
    '.woff': 'file',
    '.woff2': 'file',
    '.ttf': 'file',
    '.eot': 'file',
  },
  
  // Build metadata
  metafile: true,
  
  // Production-specific settings
  treeshaking: true,
  mangling: true,
  
  // Output naming for caching
  naming: {
    entry: '[name]-[hash].js',
    chunk: 'chunks/[name]-[hash].js',
    asset: 'assets/[name]-[hash].[ext]',
  },
} as const;
</file>

<file path="bun.test.config.ts">
import { GlobalWindow } from "happy-dom";

// Setup DOM environment for React component tests
const window = new GlobalWindow({
  url: 'http://localhost:8881',
  width: 1024,
  height: 768,
});

global.window = window as any;
global.document = window.document as any;
global.navigator = window.navigator as any;
global.HTMLElement = window.HTMLElement as any;
global.Element = window.Element as any;
global.Node = window.Node as any;
global.DocumentFragment = window.DocumentFragment as any;
global.Text = window.Text as any;
</file>

<file path="Dockerfile.dev">
# Use the official Bun image as a base
FROM oven/bun:1.2

# Set the working directory
WORKDIR /app

# Copy dependency manifests and config files
COPY package.json bun.lock ./
COPY tsconfig.json ./
COPY vite.config.ts ./
COPY components.json ./

# Install dependencies -- this layer will be cached
RUN bun install

# Copy the rest of the source code
COPY frontend/ ./frontend/

# Copy entrypoint script
COPY docker/entrypoint-dev.sh /entrypoint-dev.sh
RUN chmod +x /entrypoint-dev.sh

# The command to run when the container starts
# Use entrypoint to ensure symlink is created
ENTRYPOINT ["/entrypoint-dev.sh"]
CMD ["bun", "run", "dev", "--host", "0.0.0.0"]
</file>

<file path="Gemfile">
source 'https://rubygems.org'

ruby '3.4.5'

# Testing framework
gem 'rspec', '~> 3.12'
gem 'factory_bot', '~> 6.4'
gem 'faker', '~> 3.2'

# Development and test gems
group :development, :test do
  gem 'pry', '~> 0.14'
  gem 'rubocop', '~> 1.57'
  gem 'simplecov', '~> 0.22', require: false
end

# Add your gems here
</file>

<file path="backend/watson/settings/base.py">
"""
Django settings for watson project.

Generated by 'django-admin startproject' using Django 5.2.6.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.2/ref/settings/
"""

import os
from pathlib import Path
import dj_database_url

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = os.environ.get('SECRET_KEY', 'django-insecure-jvb2pf6e&e54kfq7h=v!)$8osg0w3s_-=e#clij39xkzn59@_4')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = os.environ.get('DEBUG', 'true').lower() == 'true'

ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', 'localhost,127.0.0.1').split(',')

USE_X_FORWARDED_HOST = os.environ.get('USE_X_FORWARDED_HOST', 'false').lower() == 'true'


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Third party apps
    'rest_framework',
    'corsheaders',
    # Watson apps
    'core',
    'reviews',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'watson.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'watson.wsgi.application'


# Database
# https://docs.djangoproject.com/en/5.2/ref/settings/#databases

if 'DATABASE_URL' in os.environ:
    # Use the DATABASE_URL from the environment, parsing it with dj-database-url
    DATABASES = {
        'default': dj_database_url.config(conn_max_age=600, conn_health_checks=True)
    }
else:
    # Fallback to a local SQLite database if DATABASE_URL is not set
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': BASE_DIR / 'db.sqlite3',
        }
    }

# DATABASES = {
#     'default': {
#         'ENGINE': 'django.db.backends.postgresql',
#         'NAME': os.environ.get('DB_NAME', 'watson_dev'),
#         'USER': os.environ.get('DB_USER', 'postgres'),
#         'PASSWORD': os.environ.get('DB_PASSWORD', ''),
#         'HOST': os.environ.get('DB_HOST', 'localhost'),
#         'PORT': os.environ.get('DB_PORT', '5432'),
#     }
# } if os.environ.get('DATABASE_URL') else {
#     'default': {
#         'ENGINE': 'django.db.backends.sqlite3',
#         'NAME': BASE_DIR / 'db.sqlite3',
#     }
# }


# Password validation
# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/5.2/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.2/howto/static-files/

STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'

# Additional static files directories
STATICFILES_DIRS = [
    BASE_DIR / 'static',
]

# Static file storage and optimization
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'

# Production static file settings
if not DEBUG:
    STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'

# Default primary key field type
# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# Django REST Framework configuration
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.IsAuthenticated',
    ],
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.SessionAuthentication',
    ],
    'DEFAULT_RENDERER_CLASSES': [
        'rest_framework.renderers.JSONRenderer',
    ],
    'DEFAULT_PARSER_CLASSES': [
        'rest_framework.parsers.JSONParser',
    ],
}

# CORS configuration for development
CORS_ALLOWED_ORIGINS = [
    "http://localhost:8881",  # Bun frontend dev port
    "http://127.0.0.1:8881",
]

CORS_ALLOW_CREDENTIALS = True

# Development-specific settings
if DEBUG:
    CORS_ALLOW_ALL_ORIGINS = True
</file>

<file path="frontend/src/components/ui/sparkles-preview.tsx">
import { SparklesCore } from "./sparkles";


export function SparklesPreview() {
  return (
    <div className="h-[40rem] w-full bg-black flex flex-col items-center justify-center overflow-hidden rounded-md">
      <h1 className="md:text-7xl text-5xl lg:text-9xl font-bold text-center text-white relative z-20">
        Watson <span className="text-primary-500">AI</span> <span className="text-primary-500 font-normal text-4xl">v1.0</span>
      </h1>
      <div className="w-[40rem] h-40 relative">
        {/* Gradients */}
        <div className="absolute inset-x-20 top-0 bg-gradient-to-r from-transparent via-indigo-500 to-transparent h-[2px] w-3/4 blur-sm" />
        <div className="absolute inset-x-20 top-0 bg-gradient-to-r from-transparent via-indigo-500 to-transparent h-px w-3/4" />
        <div className="absolute inset-x-60 top-0 bg-gradient-to-r from-transparent via-sky-500 to-transparent h-[5px] w-1/4 blur-sm" />
        <div className="absolute inset-x-60 top-0 bg-gradient-to-r from-transparent via-sky-500 to-transparent h-px w-1/4" />

        {/* Core component */}
        <SparklesCore
          background="transparent"
          minSize={0.4}
          maxSize={1}
          particleDensity={1200}
          className="w-full h-full"
          particleColor="#FFFFFF"
        />

        {/* Radial Gradient to prevent sharp edges */}
        <div className="absolute inset-0 w-full h-full bg-black [mask-image:radial-gradient(350px_200px_at_top,transparent_20%,white)]">
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/sparkles.tsx">
import React, { useId, useMemo } from "react";
import { useEffect, useState } from "react";
import Particles, { initParticlesEngine } from "@tsparticles/react";
import type { Container, SingleOrMultiple } from "@tsparticles/engine";
import { loadSlim } from "@tsparticles/slim";
import { cn } from "@/lib/utils";
import { motion, useAnimation } from "framer-motion";

type ParticlesProps = {
  id?: string;
  className?: string;
  background?: string;
  particleSize?: number;
  minSize?: number;
  maxSize?: number;
  speed?: number;
  particleColor?: string;
  particleDensity?: number;
};
export const SparklesCore = (props: ParticlesProps) => {
  const {
    id,
    className,
    background,
    minSize,
    maxSize,
    speed,
    particleColor,
    particleDensity,
  } = props;
  const [init, setInit] = useState(false);
  useEffect(() => {
    initParticlesEngine(async (engine) => {
      await loadSlim(engine);
    }).then(() => {
      setInit(true);
    });
  }, []);
  const controls = useAnimation();

  const particlesLoaded = async (container?: Container) => {
    if (container) {
      controls.start({
        opacity: 1,
        transition: {
          duration: 1,
        },
      });
    }
  };

  const generatedId = useId();
  return (
    <motion.div animate={controls} className={cn("opacity-0", className)}>
      {init && (
        <Particles
          id={id || generatedId}
          className={cn("h-full w-full")}
          particlesLoaded={particlesLoaded}
          options={{
            background: {
              color: {
                value: background || "#0d47a1",
              },
            },
            fullScreen: {
              enable: false,
              zIndex: 1,
            },

            fpsLimit: 120,
            interactivity: {
              events: {
                onClick: {
                  enable: true,
                  mode: "push",
                },
                onHover: {
                  enable: false,
                  mode: "repulse",
                },
                resize: true as any,
              },
              modes: {
                push: {
                  quantity: 4,
                },
                repulse: {
                  distance: 200,
                  duration: 0.4,
                },
              },
            },
            particles: {
              bounce: {
                horizontal: {
                  value: 1,
                },
                vertical: {
                  value: 1,
                },
              },
              collisions: {
                absorb: {
                  speed: 2,
                },
                bounce: {
                  horizontal: {
                    value: 1,
                  },
                  vertical: {
                    value: 1,
                  },
                },
                enable: false,
                maxSpeed: 50,
                mode: "bounce",
                overlap: {
                  enable: true,
                  retries: 0,
                },
              },
              color: {
                value: particleColor || "#ffffff",
                animation: {
                  h: {
                    count: 0,
                    enable: false,
                    speed: 1,
                    decay: 0,
                    delay: 0,
                    sync: true,
                    offset: 0,
                  },
                  s: {
                    count: 0,
                    enable: false,
                    speed: 1,
                    decay: 0,
                    delay: 0,
                    sync: true,
                    offset: 0,
                  },
                  l: {
                    count: 0,
                    enable: false,
                    speed: 1,
                    decay: 0,
                    delay: 0,
                    sync: true,
                    offset: 0,
                  },
                },
              },
              effect: {
                close: true,
                fill: true,
                options: {},
                type: {} as SingleOrMultiple<string> | undefined,
              },
              groups: {},
              move: {
                angle: {
                  offset: 0,
                  value: 90,
                },
                attract: {
                  distance: 200,
                  enable: false,
                  rotate: {
                    x: 3000,
                    y: 3000,
                  },
                },
                center: {
                  x: 50,
                  y: 50,
                  mode: "percent",
                  radius: 0,
                },
                decay: 0,
                distance: {},
                direction: "none",
                drift: 0,
                enable: true,
                gravity: {
                  acceleration: 9.81,
                  enable: false,
                  inverse: false,
                  maxSpeed: 50,
                },
                path: {
                  clamp: true,
                  delay: {
                    value: 0,
                  },
                  enable: false,
                  options: {},
                },
                outModes: {
                  default: "out",
                },
                random: false,
                size: false,
                speed: {
                  min: 0.1,
                  max: 1,
                },
                spin: {
                  acceleration: 0,
                  enable: false,
                },
                straight: false,
                trail: {
                  enable: false,
                  length: 10,
                  fill: {},
                },
                vibrate: false,
                warp: false,
              },
              number: {
                density: {
                  enable: true,
                  width: 400,
                  height: 400,
                },
                limit: {
                  mode: "delete",
                  value: 0,
                },
                value: particleDensity || 120,
              },
              opacity: {
                value: {
                  min: 0.1,
                  max: 1,
                },
                animation: {
                  count: 0,
                  enable: true,
                  speed: speed || 4,
                  decay: 0,
                  delay: 0,
                  sync: false,
                  mode: "auto",
                  startValue: "random",
                  destroy: "none",
                },
              },
              reduceDuplicates: false,
              shadow: {
                blur: 0,
                color: {
                  value: "#000",
                },
                enable: false,
                offset: {
                  x: 0,
                  y: 0,
                },
              },
              shape: {
                close: true,
                fill: true,
                options: {},
                type: "circle",
              },
              size: {
                value: {
                  min: minSize || 1,
                  max: maxSize || 3,
                },
                animation: {
                  count: 0,
                  enable: false,
                  speed: 5,
                  decay: 0,
                  delay: 0,
                  sync: false,
                  mode: "auto",
                  startValue: "random",
                  destroy: "none",
                },
              },
              stroke: {
                width: 0,
              },
              zIndex: {
                value: 0,
                opacityRate: 1,
                sizeRate: 1,
                velocityRate: 1,
              },
              destroy: {
                bounds: {},
                mode: "none",
                split: {
                  count: 1,
                  factor: {
                    value: 3,
                  },
                  rate: {
                    value: {
                      min: 4,
                      max: 9,
                    },
                  },
                  sizeOffset: true,
                },
              },
              roll: {
                darken: {
                  enable: false,
                  value: 0,
                },
                enable: false,
                enlighten: {
                  enable: false,
                  value: 0,
                },
                mode: "vertical",
                speed: 25,
              },
              tilt: {
                value: 0,
                animation: {
                  enable: false,
                  speed: 0,
                  decay: 0,
                  sync: false,
                },
                direction: "clockwise",
                enable: false,
              },
              twinkle: {
                lines: {
                  enable: false,
                  frequency: 0.05,
                  opacity: 1,
                },
                particles: {
                  enable: false,
                  frequency: 0.05,
                  opacity: 1,
                },
              },
              wobble: {
                distance: 5,
                enable: false,
                speed: {
                  angle: 50,
                  move: 10,
                },
              },
              life: {
                count: 0,
                delay: {
                  value: 0,
                  sync: false,
                },
                duration: {
                  value: 0,
                  sync: false,
                },
              },
              rotate: {
                value: 0,
                animation: {
                  enable: false,
                  speed: 0,
                  decay: 0,
                  sync: false,
                },
                direction: "clockwise",
                path: false,
              },
              orbit: {
                animation: {
                  count: 0,
                  enable: false,
                  speed: 1,
                  decay: 0,
                  delay: 0,
                  sync: false,
                },
                enable: false,
                opacity: 1,
                rotation: {
                  value: 45,
                },
                width: 1,
              },
              links: {
                blink: false,
                color: {
                  value: "#fff",
                },
                consent: false,
                distance: 100,
                enable: false,
                frequency: 1,
                opacity: 1,
                shadow: {
                  blur: 5,
                  color: {
                    value: "#000",
                  },
                  enable: false,
                },
                triangles: {
                  enable: false,
                  frequency: 1,
                },
                width: 1,
                warp: false,
              },
              repulse: {
                value: 0,
                enabled: false,
                distance: 1,
                duration: 1,
                factor: 1,
                speed: 1,
              },
            },
            detectRetina: true,
          }}
        />
      )}
    </motion.div>
  );
};
</file>

<file path="frontend/src/styles/globals.css">
/**
 * Watson Application Global Styles
 * Imports TailwindCSS and defines custom styles for clinical application
 */

/* Import Inter font from Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');
@import "tailwindcss";
@import "tw-animate-css";
/*---break---
 */
@custom-variant dark (&:is(.dark *));

@source "../**/*.{html,js,ts,jsx,tsx}";

@theme {
  --font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-mono: 'JetBrains Mono', ui-monospace, 'Fira Code', monospace;

  /* Watson brand colors for clinical application */
  --color-primary-50: #f0f9ff;
  --color-primary-100: #e0f2fe;
  --color-primary-200: #bae6fd;
  --color-primary-300: #7dd3fc;
  --color-primary-400: #38bdf8;
  --color-primary-500: #0ea5e9;
  --color-primary-600: #0284c7;
  --color-primary-700: #0369a1;
  --color-primary-800: #075985;
  --color-primary-900: #0c4a6e;

  /* Clinical-appropriate neutral colors */
  --color-clinical-50: #f8fafc;
  --color-clinical-100: #f1f5f9;
  --color-clinical-200: #e2e8f0;
  --color-clinical-300: #cbd5e1;
  --color-clinical-400: #94a3b8;
  --color-clinical-500: #64748b;
  --color-clinical-600: #475569;
  --color-clinical-700: #334155;
  --color-clinical-800: #1e293b;
  --color-clinical-900: #0f172a;

  /* Status colors for clinical context */
  --color-success-50: #f0fdf4;
  --color-success-100: #dcfce7;
  --color-success-200: #bbf7d0;
  --color-success-300: #86efac;
  --color-success-400: #4ade80;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;
  --color-success-700: #15803d;
  --color-success-800: #166534;
  --color-success-900: #14532d;

  --color-warning-50: #fffbeb;
  --color-warning-100: #fef3c7;
  --color-warning-200: #fde68a;
  --color-warning-300: #fcd34d;
  --color-warning-400: #fbbf24;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  --color-warning-700: #b45309;
  --color-warning-800: #92400e;
  --color-warning-900: #78350f;

  --color-error-50: #fef2f2;
  --color-error-100: #fee2e2;
  --color-error-200: #fecaca;
  --color-error-300: #fca5a5;
  --color-error-400: #f87171;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;
  --color-error-700: #b91c1c;
  --color-error-800: #991b1b;
  --color-error-900: #7f1d1d;
}

/* Base styles for clinical application */
@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply font-sans text-clinical-800 bg-clinical-50 antialiased;
    @apply selection:bg-primary-100 selection:text-primary-800;
  }

  /* Ensure proper focus outlines for accessibility */
  *:focus {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  /* Button focus states */
  button:focus,
  [role="button"]:focus {
    @apply ring-2 ring-primary-500 ring-offset-2;
  }
}

/* Component layer for reusable patterns */
@layer components {

  /* Clinical card styling */
  .watson-card {
    @apply bg-white border border-clinical-200 rounded-lg shadow-sm;
    @apply hover:shadow-md transition-shadow duration-200;
  }

  /* Primary button styling */
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white;
    @apply px-4 py-2 rounded-md font-medium;
    @apply focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
    @apply transition-colors duration-200;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Secondary button styling */
  .btn-secondary {
    @apply bg-white border border-clinical-300 text-clinical-700;
    @apply hover:bg-clinical-50 hover:border-clinical-400;
    @apply px-4 py-2 rounded-md font-medium;
    @apply focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
    @apply transition-colors duration-200;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Clinical input styling */
  .input-clinical {
    @apply block w-full px-3 py-2 border border-clinical-300 rounded-md;
    @apply focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
    @apply placeholder-clinical-400 text-clinical-900;
    @apply transition-colors duration-200;
  }

  /* Navigation link styling */
  .nav-link {
    @apply text-clinical-600 hover:text-primary-600;
    @apply px-3 py-2 rounded-md text-sm font-medium;
    @apply transition-colors duration-200;
  }

  .nav-link.active {
    @apply text-primary-600 bg-primary-50;
  }

  /* Clinical status indicators */
  .status-success {
    @apply bg-success-50 text-success-800 border border-success-200;
    @apply px-2 py-1 rounded-full text-xs font-medium;
  }

  .status-warning {
    @apply bg-warning-50 text-warning-800 border border-warning-200;
    @apply px-2 py-1 rounded-full text-xs font-medium;
  }

  .status-error {
    @apply bg-error-50 text-error-800 border border-error-200;
    @apply px-2 py-1 rounded-full text-xs font-medium;
  }
}

/* Utility layer for custom utilities */
@layer utilities {

  /* Clinical spacing utilities */
  .section-padding {
    @apply py-12 px-4 sm:px-6 lg:px-8;
  }

  .container-clinical {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin rounded-full border-2 border-clinical-200 border-t-primary-600;
  }

  /* Glassmorphism effect for modern UI */
  .glass {
    @apply backdrop-blur-sm bg-white/80 border border-white/20;
  }

  /* Text gradient for branding */
  .text-gradient {
    @apply bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent;
  }
}

/* Dark mode support (for future enhancement) */
@media (prefers-color-scheme: dark) {
  .dark {
    @apply bg-clinical-900 text-clinical-100;
  }
}

/*---break---
 */
@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/*---break---
 */
:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

/*---break---
 */
.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

/*---break---
 */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}
</file>

<file path="frontend/src/index.css">
/* Watson Frontend Styles */
@import './styles/_variables.scss';
@import './styles/_keyframe-animations.scss';

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  line-height: 1.6;
  color: #333;
  background-color: #000;
}

.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 2rem;
  text-align: center;
}

.app-header h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.app-header p {
  font-size: 1.2rem;
  opacity: 0.9;
}

.app-main {
  flex: 1;
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
}

.editor-container {
  background: white;
  border-radius: 8px;
  padding: 2rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.editor-container h2 {
  margin-bottom: 1rem;
  color: #444;
}

/* TipTap Editor Styles */
.tiptap-editor {
  border: 1px solid #e1e5e9;
  border-radius: 8px;
  overflow: hidden;
}

.editor-toolbar {
  border-bottom: 1px solid #e1e5e9;
  padding: 0.5rem;
  display: flex;
  gap: 0.5rem;
  background: #f8f9fa;
}

.editor-toolbar button {
  padding: 0.5rem 1rem;
  border: 1px solid #ddd;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.editor-toolbar button:hover {
  background: #e9ecef;
}

.editor-toolbar button.is-active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

.editor-toolbar button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* TipTap ProseMirror content styles */
.ProseMirror {
  padding: 1rem;
  min-height: 400px;
  outline: none;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  color: #333;
}

.ProseMirror p {
  margin-bottom: 1rem;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5rem;
  margin-bottom: 1rem;
}

.ProseMirror li {
  margin-bottom: 0.25rem;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #adb5bd;
  pointer-events: none;
  height: 0;
}

/* Responsive design */
@media (max-width: 768px) {
  .app-header {
    padding: 1rem;
  }

  .app-header h1 {
    font-size: 2rem;
  }

  .app-main {
    padding: 1rem;
  }

  .editor-container {
    padding: 1rem;
  }

  .editor-toolbar {
    flex-wrap: wrap;
  }
}
</file>

<file path="CLAUDE.md">
# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## Project Overview

**Watson** is a clinical LLM output review and curation tool for psychotherapy and well-being applications. It provides an environment for clinicians to review, edit, classify, and refine model-generated clinical summaries through a structured workflow: review → edit/classify → submit → diff → analytics → export.

This is a multi-language project supporting:
- **Backend**: Django 5 + DRF + HTMX (planned)
- **Frontend**: TypeScript/React with TipTap editor (using Bun)
- **Scripting**: Python with UV package manager
- **Additional**: Ruby support

---

## Development Environment Setup

### Python (UV)
```bash
# Activate the existing virtual environment
source .venv/bin/activate  # or .venv\Scripts\activate on Windows
# Install dependencies
uv pip install -r requirements.txt  # when requirements.txt is created
```

### TypeScript/JavaScript (Bun)
```bash
# Install dependencies
bun install
# Development server (when TypeScript/frontend code is added)
bun --hot ./index.ts
```

### Ruby
```bash
# Install gems
bundle install
```

---

## Commands

### Bun (Primary JavaScript/TypeScript Runtime)

**Use Bun as the primary runtime with Vite for frontend development.**

- Use `bun <file>` instead of `node <file>` or `ts-node <file>`
- Use `bun test` to run tests
- Use `vite` for frontend development server and builds
- Use `bun install` instead of `npm install` or `yarn install` or `pnpm install`
- Use `bun run <script>` instead of `npm run <script>` or `yarn run <script>` or `pnpm run <script>`
- Bun automatically loads .env, so don't use dotenv

### Python
- Use `python main.py` to run the main Python script
- UV is the preferred package manager for Python dependencies

### Ruby
- Use `bundle exec` to run Ruby commands with proper gem dependencies

---

## Architecture

### Core Workflow
1. **Seed**: Document + LLMOutput loaded
2. **Edit**: Clinician edits in TipTap rich editor, applies classification labels
3. **Submit**: Backend computes diffs (token + structural), stores immutable record
4. **Review/Diff**: Diff viewer shows before/after changes  
5. **Analytics**: Dashboard of change rates + label frequencies
6. **Export**: Generate research datasets (JSONL/CSV bundles)

### Data Model (Planned)
- **Document** – source clinical note (raw JSON)
- **LLMOutput** – model-generated summary tied to a Document
- **Edit** – clinician revision with diffs, edited JSON, status
- **Label** – taxonomy of issue types (hallucination, missing_risk, etc.)
- **EditLabel** – join table for applied labels

### Key Endpoints (Planned)
- `GET /outputs/:id` → view output snapshot
- `POST /edits` → create draft edit
- `PUT /edits/:id` → save draft changes
- `POST /edits/:id/submit` → finalize, compute diffs
- `GET /edits/:id/diff` → return/render diff
- `GET /analytics/basic` → JSON for dashboard
- `POST /exports` → create export bundle

---

## Frontend Development (Vite + React + Bun)

Use Vite for frontend development and building with Bun as the JavaScript runtime. This provides optimal integration with Tailwind CSS, component libraries, and modern tooling.

### Development Commands
- `bun run dev` - Start Vite development server with HMR
- `bun run build` - Build production assets with Vite
- `vite` - Direct Vite command for development server

### Bun APIs (Preferred for Backend/Scripts)
- `Bun.serve()` for HTTP server with WebSocket support (instead of Express)
- `bun:sqlite` for SQLite (instead of better-sqlite3)
- `Bun.redis` for Redis (instead of ioredis)  
- `Bun.sql` for Postgres (instead of pg or postgres.js)
- Built-in `WebSocket` (instead of ws library)
- `Bun.file` over `node:fs` readFile/writeFile
- `Bun.$` for shell commands (instead of execa)

### Testing
```ts
import { test, expect } from "bun:test";

test("example test", () => {
  expect(1).toBe(1);
});
```

### Frontend Structure
- Vite handles TypeScript/JSX transpilation and bundling
- Tailwind CSS integration through PostCSS
- Component library support with proper build pipeline
- API proxy configuration for backend integration

---

## TypeScript Configuration

The project uses modern TypeScript with:
- ESNext target and lib
- React JSX transform
- Strict type checking enabled
- Bundler module resolution
- No emit (bundler handles compilation)

---

## Authentication

**Centralized Auth** via `passport.oceanheart.ai` JWTs with RS256 verification middleware.

---

## Documentation

Project specifications and PRDs are located in `docs/specs/`. Current documentation includes:
- Integration specifications for visual design systems
- Oceanheart Passport integration
- Style guide specifications
</file>

<file path="docker-compose.yml">
services:
  database:
    image: postgres:15-alpine
    environment:
      POSTG-RES_DB: watson_dev
      POSTGRES_USER: watson
      POSTGRES_PASSWORD: watson_dev_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./docker/init-db.sql:/docker-entrypoint-initdb.d/init-db.sql
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -d watson_dev -U watson"]
      interval: 5s
      timeout: 5s
      retries: 10

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

  watson:
    build:
      context: .
      dockerfile: Dockerfile
    command: >
      sh -c "/entrypoint.sh /app/backend/.venv/bin/python /app/backend/manage.py runserver 0.0.0.0:8000"
    ports:
      - "8888:8000"
    environment:
      DATABASE_URL: postgresql://watson:watson_dev_password@database:5432/watson_dev
      REDIS_URL: redis://redis:6379/0
      DEBUG: "true"
      SECRET_KEY: "docker-dev-secret-key-change-in-production"
      ALLOWED_HOSTS: "localhost,127.0.0.1,watson"
      # --- Use base settings for development ---
      DJANGO_SETTINGS_MODULE: "watson.settings.base"
      # --- Add USE_X_FORWARDED_HOST for Caddy proxy ---
      USE_X_FORWARDED_HOST: "True"
      SECURE_SSL_REDIRECT: "false"
      DJANGO_SUPERUSER_USERNAME: "admin"
      DJANGO_SUPERUSER_EMAIL: "admin@watson.local"
      DJANGO_SUPERUSER_PASSWORD: "admin123"
    depends_on:
      database:
        condition: service_healthy
      redis:
        condition: service_healthy
    volumes:
      # --- THE CRITICAL FIX ---
      # 1. Mount the local backend code into the container for live reloading.
      - ./backend:/app/backend
      # 2. Use a NAMED volume for the .venv. This "overlays" the venv from the
      #    image on top of the mounted code, preserving the dependencies.
      - venv_volume:/app/backend/.venv
    healthcheck:
      test: ["CMD", "/healthcheck.sh"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s

  frontend-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    profiles:
      - dev
    ports:
      - "8881:3000"
    environment:
      VITE_API_URL: "http://watson:8000"
    volumes:
      - ./frontend:/app/frontend
      - ./package.json:/app/package.json
      - ./bun.lock:/app/bun.lock
      - ./tsconfig.json:/app/tsconfig.json
      - ./vite.config.ts:/app/vite.config.ts
      - ./components.json:/app/components.json
      - node_modules:/app/node_modules
    depends_on:
      - watson

  caddy:
    image: caddy:2
    profiles:
      - dev
    ports:
      - "3321:3321"
    volumes:
      - ./docker/caddy/Caddyfile.compose.local:/etc/caddy/Caddyfile:ro
    depends_on:
      watson:
        condition: service_started
      frontend-dev:
        condition: service_started

volumes:
  postgres_data:
  redis_data:
  # --- Define the named volume for the venv ---
  venv_volume:
  # --- Define the named volume for node_modules ---
  node_modules:
</file>

<file path="README.md">
# Watson

**Clinical LLM Output Review & Curation Tool**
*(part of Oceanheart.ai)*

---

## 1. Overview

**Watson** is a prototype application exploring how clinicians can effectively **review and refine LLM outputs** in psychotherapy and related well-being fields.
It provides an environment to:

* Review a model-generated **clinical summary** or note.
* **Edit** the text or per-section content with a rich editor.
* **Classify/label** issues (e.g., hallucination, missing risk content).
* **Submit** the review, generating a structured **diff**.
* View **basic analytics** (change rates, label frequencies).
* **Export** collected datasets for research and iteration.

The focus is on **process evaluation**, not clinical deployment.

---

## 2. Key Features

* **Rich text editing** (TipTap/ProseMirror) with support for strike-through, insertions, and sectioned content.
* **Labeling/classification panel** to tag issues in outputs.
* **Server-side diffing** (token + structural JSON) when edits are submitted.
* **Basic analytics dashboard**: change rates, label frequency, per-section heatmap.
* **Dataset export** (JSONL/CSV in a zip bundle with manifest).
* **Django Admin console** for operational review and curation.
* **Centralized Auth** via `passport.oceanheart.ai` JWTs.

---

## 3. Tech Stack

| Layer      | Technology                          | Notes                                             |
| ---------- | ----------------------------------- | ------------------------------------------------- |
| Backend    | **Django 5** + DRF + HTMX           | Batteries-included MVC; lightweight interactivity |
| Frontend   | **TipTap** editor                   | ProseMirror-based rich-text editing               |
| Database   | **Postgres (Neon)**                 | JSONB for flexible storage + relational joins     |
| Auth       | **JWT from passport.oceanheart.ai** | RS256 verification middleware                     |
| Deployment | Render / Railway / Fly              | App server + Neon DB                              |
| Diffing    | `difflib`, `jsondiff`               | Token-level + structural JSON                     |

---

## 4. Data Model

* **Document** – source clinical note (raw JSON).
* **LLMOutput** – model-generated summary tied to a Document.
* **Edit** – clinician revision of an LLMOutput (with `edited_json`, diffs, status).
* **Label** – taxonomy of issue types (e.g., hallucination, missing\_risk).
* **EditLabel** – join table: which labels were applied to an Edit.

---

## 5. Core Workflow

1. **Seed**: A Document + LLMOutput is loaded.
2. **Edit**: Clinician opens the LLMOutput in TipTap, edits text/sections, applies labels.
3. **Submit**: Backend computes diffs (token + structural), stores immutable record.
4. **Review/Diff**: Diff viewer shows before/after changes.
5. **Analytics**: Simple dashboard of change rates + label frequencies.
6. **Export**: Generate a zip containing JSONL files of documents, outputs, edits, labels, and diffs.

---

## 6. Endpoints

* `GET /outputs/:id` → view output snapshot.
* `POST /edits` → create draft edit.
* `PUT /edits/:id` → save draft changes.
* `POST /edits/:id/submit` → finalize, compute diffs.
* `GET /edits/:id/diff` → return/render diff.
* `GET /analytics/basic` → JSON for dashboard.
* `POST /exports` → create export bundle.
* `GET /exports/:id` → download export.

---

## 7. Diffing

* **Text diff**: tokenized diff with insert/delete/replace ops.
* **Structural diff**: JSON node add/remove/replace/move with JSON pointers.
* Both are stored in `Edit.diff_text_json` and `Edit.diff_struct_json`.

---

## 8. Analytics (MVP)

* Change rate per section.
* Net length delta.
* Most frequent labels.
* Submission counts per clinician.

---

## 9. Export Format

```
manifest.json           # version, filters, timestamp, app_commit
documents.jsonl         # {doc_id, source, raw_json}
outputs.jsonl           # {output_id, doc_id, model, output_json, created_at}
edits.jsonl             # {edit_id, output_id, clinician_hash, edited_json,
                        #  diff_text_json, diff_struct_json, status}
labels.jsonl            # {edit_id, label_key, value}
README.txt
```

* Clinician IDs are hashed/salted.
* PHI should be stripped from raw documents before ingestion.

---

## 10. Installation

### Prerequisites

* Python 3.11+
* Postgres DB (Neon recommended)
* Node/npm (for TipTap assets)
* Redis (optional, for background tasks)

### Setup

```bash
git clone https://github.com/oceanheart-ai/watson
cd watson
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# env vars
export DATABASE_URL=postgresql://user:pass@host/db
export PASSPORT_JWKS_URL=https://passport.oceanheart.ai/.well-known/jwks.json

python manage.py migrate
python manage.py runserver
```

Frontend assets (TipTap) load via npm in `static/`.

---

## 11. Django Admin

* Manage Labels taxonomy.
* Review Edits inline with LLMOutputs.
* Diff preview widget in `EditAdmin`.
* Bulk export selected edits.

---

## 12. Roadmap

* **v0**: Review → Edit/Label → Submit → Diff → Analytics → Export.
* **v1**: Per-section editing; richer analytics; taxonomy versioning.
* **v2**: Multi-reviewer workflows, assignments, collaborative editing.

---

## 13. License

MIT License © 2025 Oceanheart.ai / Rick “Kai” Hallett.
See LICENSE for details.

---

## 14. Contact

* Website: [www.oceanheart.ai](https://www.oceanheart.ai)
* Lead developer: **Rick “Kai” Hallett**
* Email: [hello@oceanheart.ai](mailto:hello@oceanheart.ai)

---

Would you like me to also generate a **matching portfolio carousel card** (like I did for Preflight) with title/description/tech for Watson?


## Setup

### Python (UV)
```bash
uv venv
source .venv/bin/activate  # or .venv\Scripts\activate on Windows
```

### TypeScript/JavaScript (Bun)
```bash
bun install
bun run dev
```

### Ruby
```bash
bundle install
```

## Development

[Add development instructions here]

## Contributing

[Add contributing guidelines here]
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    // Environment setup & latest features
    "lib": [
      "ESNext",
      "DOM",
      "DOM.Iterable"
    ],
    "target": "ESNext",
    "module": "Preserve",
    "moduleDetection": "force",
    "jsx": "react-jsx",
    "allowJs": true,
    // Bundler mode
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "noEmit": true,
    // Best practices
    "strict": true,
    "skipLibCheck": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitOverride": true,
    // Some stricter flags (disabled by default)
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noPropertyAccessFromIndexSignature": false,
    // Path aliases
    "baseUrl": ".",
    "paths": {
      "@/*": [
        "./frontend/src/*"
      ]
    }
  },
  "include": [
    "frontend/**/*",
    "scripts/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "build",
    "backend"
  ]
}
</file>

<file path="docs/specs/001-build-change-log.md">
# Change Log: Watson Build System - Phase 1
## Date: 2025-09-12

## Overview

This change log tracks all modifications made during the implementation of Phase 1 (Development Workflow) of the Watson build system.

## Files Modified

### pyproject.toml
- **Change**: Added Django dependencies and hatchling build configuration
- **Rationale**: Enable Django 5.2+ with REST framework and PostgreSQL support
- **Impact**: Python package management and build system setup
- **Commit**: 8b8ba55

### package.json  
- **Change**: Added React, TipTap, and TypeScript dependencies with Bun scripts
- **Rationale**: Enable modern React frontend with rich text editing capabilities
- **Impact**: Frontend development workflow and dependency management
- **Commit**: dde6033

### backend/watson/settings.py
- **Change**: Added environment-based configuration, REST framework, and CORS setup  
- **Rationale**: Support development/production environments and frontend integration
- **Impact**: Django application configuration and API functionality
- **Commit**: 8b8ba55

### .env.dev
- **Change**: Created development environment variables template
- **Rationale**: Secure configuration management for development
- **Impact**: Environment setup and configuration consistency
- **Commit**: dde6033

### frontend/src/main.tsx
- **Change**: Created React 18 application entry point
- **Rationale**: Modern React application bootstrap
- **Impact**: Frontend application initialization
- **Commit**: dde6033

### frontend/src/App.tsx
- **Change**: Main React application component with TipTap editor integration
- **Rationale**: Clinical review interface with rich text editing
- **Impact**: Core application functionality
- **Commit**: dde6033

### frontend/src/components/TipTapEditor.tsx
- **Change**: Rich text editor component for clinical review workflow
- **Rationale**: Enable advanced text editing with formatting and review capabilities
- **Impact**: Primary user interface for clinical content editing
- **Commit**: dde6033

### frontend/src/index.css
- **Change**: Responsive CSS styling for Watson application
- **Rationale**: Professional UI/UX for clinical environment
- **Impact**: Visual design and user experience
- **Commit**: dde6033

### frontend/index.html
- **Change**: HTML template for React application
- **Rationale**: Single-page application entry point
- **Impact**: Application loading and structure
- **Commit**: dde6033

### frontend/index.ts
- **Change**: Bun server with HMR and API proxy functionality
- **Rationale**: Development server with hot reloading and backend integration
- **Impact**: Development workflow and frontend-backend communication
- **Commit**: dde6033

### scripts/dev-backend.sh
- **Change**: Django development server startup script
- **Rationale**: Automated backend development environment setup
- **Impact**: Developer experience and consistency
- **Commit**: dde6033

### scripts/dev-frontend.sh
- **Change**: Bun frontend development server script
- **Rationale**: Automated frontend development with HMR
- **Impact**: Frontend development workflow
- **Commit**: dde6033

### scripts/dev.sh
- **Change**: Unified development startup script for both services
- **Rationale**: Single command to start entire development environment
- **Impact**: Developer productivity and ease of use
- **Commit**: Final commit

### scripts/health-check.sh
- **Change**: Comprehensive development environment health verification
- **Rationale**: Ensure all dependencies and services are properly configured
- **Impact**: Development environment reliability and debugging
- **Commit**: Final commit

## Django Applications Created

### backend/core/
- **Change**: Core Django application for base functionality
- **Rationale**: Central location for shared models and utilities
- **Impact**: Application architecture and organization
- **Commit**: 8b8ba55

### backend/reviews/
- **Change**: Reviews Django application for clinical review workflow
- **Rationale**: Dedicated app for LLM output review functionality
- **Impact**: Feature separation and maintainability  
- **Commit**: 8b8ba55

## Dependencies Added/Removed

### Python Dependencies Added
- django>=5.0 - Web framework
- djangorestframework>=3.14.0 - REST API functionality
- django-cors-headers>=4.0.0 - CORS support for frontend integration
- psycopg2-binary>=2.9.0 - PostgreSQL database adapter
- python-jose[cryptography]>=3.3.0 - JWT authentication support
- requests>=2.28.0 - HTTP client for external API calls

### Frontend Dependencies Added
- react@^18.2.0 - UI framework
- react-dom@^18.2.0 - DOM rendering for React
- @tiptap/core@^2.1.0 - Rich text editor core
- @tiptap/react@^2.1.0 - React integration for TipTap
- @tiptap/starter-kit@^2.1.0 - Basic editing functionality
- @tiptap/extension-collaboration@^2.1.0 - Collaboration features
- @tiptap/extension-placeholder@^2.1.0 - Editor placeholder text
- @types/react@^18.2.0 - TypeScript definitions
- @types/react-dom@^18.2.0 - TypeScript definitions
- typescript@^5.0.0 - TypeScript compiler

## Breaking Changes

*No breaking changes - this is initial implementation*

## Implementation Notes

- **Phase**: 2 (Build Pipeline) - ✅ **COMPLETE**  
- **Started**: 2025-09-12
- **Completed**: 2025-09-12
- **Focus**: Production builds, asset optimization, environment configuration, validation
- **Target Languages**: Python (Django), TypeScript (Bun), Ruby (prepared)
- **Success Criteria**: All 4 success criteria achieved ✅

## Commit History

### 8b8ba55 - Backend Infrastructure
```
feat(backend): initialize Django project structure with core and reviews apps
- Add Django 5.2.6 project with REST framework and CORS support
- Configure environment-based settings for development/production  
- Create core and reviews Django applications
- Update pyproject.toml with Django dependencies and hatchling config
- Add PostgreSQL support with SQLite fallback for development
```

### dde6033 - Frontend & Development Workflow
```
feat(frontend): add React frontend with TipTap editor and Bun HMR server
- Create React 18 frontend with TypeScript support
- Implement TipTap rich text editor for clinical review workflow
- Add Bun development server with Hot Module Reloading
- Include frontend development script with environment loading
- Configure API proxy to Django backend on localhost:8888
- Add responsive CSS styling for clinical review interface
- Update package.json with TipTap and React dependencies
```

### 67feb90 - Development Scripts & Health Checks (Phase 1 Complete)
```
feat(build): add unified development workflow and health checks
- Create unified development startup script (scripts/dev.sh)
- Add comprehensive health check system (scripts/health-check.sh)  
- Enable single-command development environment startup
- Implement concurrent frontend/backend service management
- Add environment verification and port availability checks
- Complete Phase 1 development workflow implementation
```

### Phase 2 Commits - Production Build Pipeline

#### Updated Package.json & Build Configuration
```
feat(build): enhance TypeScript build pipeline with Bun optimization
- Add environment-specific build scripts (build, build:clean, build:frontend, build:backend)
- Configure production optimization with code splitting and minification
- Add build validation script integration (validate:build)
- Update dependencies for production build workflow
```

#### Build Configuration & Optimization Scripts
```
feat(build): add build configuration and asset optimization
- Create build.config.ts with production optimization settings
- Add build-production.sh for comprehensive production builds
- Implement optimize-assets.sh for compression analysis and recommendations
- Configure Django static file management with ManifestStaticFilesStorage
```

#### Build Validation & Security
```  
feat(build): implement comprehensive build validation system
- Create validate-build.js with security and integrity checks
- Add file validation, bundle analysis, and Django static verification
- Implement development artifact detection and security scanning
- Generate detailed validation reports with actionable recommendations
```

#### Environment-Specific Configuration
```
feat(build): add environment-specific build configurations
- Create .env.production and .env.staging environment files
- Implement build-env.sh for environment-aware build process
- Add conditional optimization levels (basic/full/aggressive)  
- Configure security settings per environment (SSL, cookies, etc.)
- Enable/disable source maps based on environment
```

#### TypeScript & Frontend Improvements
```
fix(frontend): resolve TypeScript compilation issues
- Update tsconfig.json with DOM libraries and proper includes
- Add frontend/types.d.ts for HTML module declarations
- Fix HTML import syntax for Bun compatibility
- Resolve build pipeline TypeScript errors
```
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { resolve } from 'path';
import tailwindcss from '@tailwindcss/vite'


export default defineConfig({
  plugins: [react(), tailwindcss()],
  root: './frontend',
  build: {
    outDir: '../dist/static',
    emptyOutDir: true
  },
  server: {
    host: '0.0.0.0',
    port: 3000,
    proxy: {
      '/api': {
        target: process.env.VITE_API_URL || 'http://localhost:8888',
        changeOrigin: true,
        secure: false
      },
      '/admin': {
        target: process.env.VITE_API_URL || 'http://localhost:8888', 
        changeOrigin: true,
        secure: false
      }
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, './frontend/src')
    },
    extensions: ['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json']
  },
  optimizeDeps: {
    include: ['@tsparticles/react', '@tsparticles/slim', '@tsparticles/engine']
  }
});
</file>

<file path="docker/entrypoint.sh">
#!/bin/bash
# Watson Docker Entrypoint Script

set -e

echo "🚀 Starting Watson Application"
echo "================================"

# Ensure venv binaries are preferred
export PATH="/app/backend/.venv/bin:$PATH"
VENV_PY="/app/backend/.venv/bin/python"
if [ ! -x "$VENV_PY" ]; then
  echo "⚠️  Venv python not found at $VENV_PY, using system python"
  VENV_PY="python"
fi

cd /app/backend

# --- NEW: Wait-for-it loop ---
# This loop will attempt to connect to the database until it succeeds.
echo "📊 Waiting for database to be ready..."
until "$VENV_PY" manage.py check --database default; do
  >&2 echo "Postgres is unavailable - sleeping"
  sleep 1
done
>&2 echo "Postgres is up - continuing..."
# --- END NEW ---

# Run database migrations
echo "🔄 Running database migrations..."
"$VENV_PY" manage.py migrate --noinput

# Collect static files
echo "📁 Collecting static files..."
"$VENV_PY" manage.py collectstatic --noinput --clear --verbosity 0

# Create superuser if specified
if [[ $DJANGO_SUPERUSER_EMAIL ]]; then
    echo "👤 Creating superuser..."
    "$VENV_PY" manage.py createsuperuser \
        --noinput \
        --username $DJANGO_SUPERUSER_USERNAME \
        --email $DJANGO_SUPERUSER_EMAIL || true
fi

echo "✅ Watson application setup complete!"
echo ""

# Execute the main command passed to the container
exec "$@"
</file>

<file path="docs/specs/001-build-implementation-report.md">
# Implementation Report: Watson Build System - Phase 1
## Date: 2025-09-12
## PRD: 001-build.prd.spec

## Overview

This report tracks the implementation of **Phase 1: Development Workflow** for the Watson build system. Phase 1 focuses on establishing hot reloading, development servers, and local testing infrastructure for the multi-language project.

## Phase 1 Scope

**Key Features to Implement**:
- Django development server with hot reload
- Bun-based frontend development with HMR  
- File watching for automatic rebuilds
- Local database setup and migrations
- Development environment health checks

**Success Criteria**:
- Changes to Python code trigger Django reload
- Frontend changes reflect immediately in browser
- Database migrations run automatically
- All services can start with single command

## Phases Completed

- [x] Phase 1: Development Workflow Setup
  - Tasks: Django project structure, React frontend with TipTap, HMR setup, unified dev script, health checks
  - Commits: 8b8ba55, dde6033, and final commit

## Task Details Completed

### 1. Django Project Structure ✅
- Created Django 5.2.6 project with REST framework integration
- Configured environment-based settings for development/production
- Added PostgreSQL support with SQLite fallback
- Created `core` and `reviews` Django applications
- Updated pyproject.toml with proper dependencies

### 2. React Frontend with TipTap Editor ✅
- Implemented React 18 frontend with TypeScript
- Integrated TipTap rich text editor for clinical review workflow
- Added responsive CSS styling
- Configured package.json with all necessary dependencies

### 3. Bun Development Server with HMR ✅
- Created Bun server with Hot Module Reloading
- Configured API proxy to Django backend
- Implemented file watching for automatic rebuilds

### 4. Development Scripts ✅
- `scripts/dev-backend.sh` - Django development server
- `scripts/dev-frontend.sh` - Bun frontend server  
- `scripts/dev.sh` - Unified development startup (single command)
- `scripts/health-check.sh` - Environment verification

### 5. Environment Configuration ✅
- Created `.env.dev` for development environment variables
- Configured CORS for frontend-backend communication
- Set up proper port assignments (8881 frontend, 8888 backend)

## Success Criteria Achievement

✅ **Django development server with hot reload** - Complete  
✅ **Bun-based frontend development with HMR** - Complete  
✅ **File watching for automatic rebuilds** - Complete  
✅ **All services can start with single command** - `./scripts/dev.sh`  
✅ **Development environment health checks** - `./scripts/health-check.sh`  

## Testing Summary

- Tests written: 0 (testing infrastructure planned for Phase 3)
- Tests passing: N/A
- Manual verification: ✅ Complete - Health check passes 23/23 checks
- Environment setup: ✅ All dependencies and scripts verified

## Challenges & Solutions

### Challenge 1: Hatchling Build Configuration
- **Issue**: UV installation failed due to missing package configuration
- **Solution**: Added `[tool.hatch.build.targets.wheel]` with `packages = ["backend"]` to pyproject.toml

### Challenge 2: Multi-language Development Workflow
- **Issue**: Managing Python (UV), TypeScript (Bun), and Ruby environments
- **Solution**: Created unified development script with proper environment activation and concurrent service startup

### Challenge 3: Frontend-Backend Integration
- **Issue**: CORS configuration for API communication during development  
- **Solution**: Added django-cors-headers with development-friendly settings and API proxy in Bun server

## Critical Security Notes

- **Authentication/Authorization changes**: Configured JWT preparation for passport.oceanheart.ai integration (future)
- **Data validation changes**: Django REST Framework configured with authentication requirements
- **Input sanitization**: TipTap editor configured with safe defaults, Django CSRF protection enabled
- **Environment variables**: Secure handling of sensitive configuration via .env files

## Next Steps

### Phase 2: Build Pipeline (Next)
- TypeScript transpilation and bundling optimization
- Python package building for production
- Static asset processing and CDN preparation
- Environment-specific configuration management

### Phase 3: Testing Infrastructure ✅ Complete
- Django test suite with in-memory SQLite database
- Bun test runner with TypeScript and component testing
- Ruby RSpec framework with SimpleCov coverage
- Comprehensive test database isolation
- Multi-platform coverage reporting
- CI/CD integration with GitHub Actions
- Pre-commit hooks for quality assurance

### Technical Debt Identified
- Add proper error boundaries in React components
- Implement proper logging configuration
- Add database connection pooling for production
- Create Docker configuration for deployment consistency

## Implementation Status

**Status**: ✅ **Phase 4 Complete**  
**Started**: 2025-09-12  
**Completed**: 2025-09-12  
**Phase**: 4 (Deployment Automation)  
**All Success Criteria**: ✅ Achieved

## Phase 2 Implementation Details

### Key Features Implemented ✅

#### 1. TypeScript Transpilation and Bundling with Bun ✅
- Enhanced package.json with optimized build scripts
- Created build.config.ts for production optimization settings
- Implemented code splitting, minification, and tree shaking
- Added source map generation for debugging (environment-specific)

#### 2. Python Package Building and Optimization ✅
- Updated Django settings for static file management
- Configured ManifestStaticFilesStorage for production
- Implemented proper STATIC_ROOT and STATICFILES_DIRS
- Added static file collection and optimization

#### 3. Static Asset Processing and Optimization ✅
- Built asset optimization analysis script (optimize-assets.sh)
- Implemented compression testing and size analysis
- Added cache-busting recommendations
- Generated optimization reports with performance metrics

#### 4. Build Artifact Validation ✅
- Created comprehensive build validation script (validate-build.js)
- Implemented security checks for production builds
- Added file integrity and size validation
- Generated detailed validation reports with error/warning summary

#### 5. Environment-Specific Configuration ✅
- Created .env files for development, staging, and production
- Implemented environment-aware build script (build-env.sh)
- Added conditional optimization levels per environment
- Configured security settings per environment

### Production Build Results

**Environment Builds:**
- **Development**: Basic optimization, source maps included, console.log allowed
- **Staging**: Full optimization, source maps included, reduced security
- **Production**: Aggressive optimization, no source maps, maximum security

**Bundle Sizes:**
- JavaScript (production): 443.7KB (gzipped: ~137KB)
- CSS: 1.7KB
- Total static files: 165

**Validation Results:**
- Production build: ✅ 0 errors, 2 warnings
- Staging build: ✅ 0 errors, 6 warnings  
- Development build: ✅ 0 errors, minimal warnings

### Phase 2 Success Criteria Achievement

✅ **Production builds complete without errors** - All environment builds successful  
✅ **Static assets are properly optimized** - 30.9% compression ratio achieved  
✅ **Build artifacts are deployment-ready** - Full validation passing  
✅ **Build process is deterministic** - Environment-specific configurations ensure consistency

## Phase 3 Implementation Details

### Key Features Implemented ✅

#### 1. Django Test Suite with Database Isolation ✅
- Reorganized Django settings into modular structure (base.py, test.py, production.py)
- Configured test-specific settings with in-memory SQLite database
- Implemented DisableMigrations class for faster test execution
- Added django-coverage-plugin for accurate coverage reporting
- Created comprehensive test examples in backend/core/test_models.py
- Set up automated test database creation and destruction

#### 2. Bun Test Runner for TypeScript/JavaScript ✅
- Configured Bun test runner with TypeScript support
- Created test configuration with DOM simulation using happy-dom
- Implemented component logic testing for React components
- Added validation utilities testing with security-focused test cases
- Set up frontend test structure with proper TypeScript types
- Created test scripts for different test scenarios

#### 3. Ruby Test Framework with RSpec ✅
- Updated Gemfile with RSpec, FactoryBot, and Faker dependencies
- Configured SimpleCov for comprehensive coverage reporting (100% achieved)
- Created ReviewValidator utility class with medical content processing
- Implemented security-focused HTML sanitization testing
- Added medical terminology extraction with pattern matching
- Set up Ruby test environment with coverage thresholds

#### 4. Test Database Isolation and Management ✅
- Django: In-memory SQLite with automatic creation/destruction per test run
- Bun: DOM simulation environment for component testing
- Ruby: Independent test execution with no shared state
- Implemented proper test data cleanup and isolation
- Added factory patterns for test data generation
- Configured test-specific environment variables

#### 5. Multi-Platform Coverage Reporting ✅
- Django: HTML coverage reports with 72% baseline coverage
- Ruby: SimpleCov with 100% coverage for utility classes
- Frontend: Bun test coverage integration
- Created unified coverage reporting script (scripts/coverage-report.sh)
- Added coverage thresholds and failure conditions
- Generated HTML reports for visual coverage analysis

#### 6. CI/CD Integration Scripts ✅
- Created GitHub Actions workflow (.github/workflows/test.yml)
- Implemented multi-platform testing (Python, Node.js/Bun, Ruby)
- Added database services for integration testing
- Created local CI simulation script (scripts/ci-local.sh)
- Implemented pre-commit hooks for quality assurance
- Added caching strategies for faster CI builds

### Testing Infrastructure Results

**Test Execution Summary:**
- **Frontend (Bun)**: 10 tests passing across 2 files
- **Backend (Django)**: 2 core model tests with database isolation
- **Ruby (RSpec)**: 16 tests with 100% coverage on utility classes

**Coverage Analysis:**
- **Django Coverage**: 72% overall (123 statements, 34 missed)
- **Ruby Coverage**: 100% (20/20 lines covered)
- **Frontend Coverage**: Bun test runner integrated

**CI/CD Pipeline Features:**
- **GitHub Actions**: Multi-platform testing with PostgreSQL service
- **Local CI Simulation**: Complete pipeline validation
- **Pre-commit Hooks**: Type checking + essential test subset
- **Coverage Integration**: Codecov upload for Django and Ruby

### Phase 3 Success Criteria Achievement

✅ **Comprehensive testing setup across all platforms** - Django, Bun, and Ruby test suites operational  
✅ **Database isolation for reliable testing** - In-memory SQLite with proper cleanup  
✅ **Coverage reporting with quality gates** - Multi-platform coverage analysis  
✅ **CI/CD integration ready for deployment** - GitHub Actions workflow with all services  
✅ **Development workflow optimization** - Pre-commit hooks and local CI simulation

## Phase 4 Implementation Details

### Key Features Implemented ✅

#### 1. Docker Containerization for Multi-Service Architecture ✅
- Created multi-stage Dockerfile supporting Django, Bun frontend, and Ruby services
- Implemented production-ready container with non-root user security
- Added comprehensive Docker Compose configuration for local development
- Created entrypoint script with automated migration and static file collection
- Implemented health check script with database and HTTP endpoint validation
- Configured Gunicorn for production WSGI serving with optimal worker configuration

#### 2. Cloud Platform Deployment Scripts ✅
- Railway deployment configuration with service definitions and environment management
- Render.com Blueprint specification with PostgreSQL and Redis integration
- Fly.io configuration with health checks and release commands
- Unified deployment automation script supporting multiple platforms (Railway, Render, Fly.io, Docker)
- Environment validation with branch checking and test execution requirements
- Automated deployment workflow with dry-run capabilities and platform auto-detection

#### 3. Database Migration Automation ✅
- Comprehensive migration script with backup and rollback capabilities
- Environment-specific migration execution (development, staging, production)
- Automated database backup creation before production migrations
- Migration validation with integrity checks and query testing
- Rollback procedures with backup file management
- Migration logging and error handling with detailed status reporting

#### 4. Environment Configuration Management ✅
- Production environment template with security-focused configurations
- Staging environment template with debug capabilities enabled
- Environment variable management for DATABASE_URL, Redis, and external services
- Security header configuration for production deployments
- AWS S3 integration templates for static asset storage
- Email configuration templates for SMTP and development backends

#### 5. Health Checks and Monitoring System ✅
- Django health check endpoints (/health/ and /ready/) with database validation
- Comprehensive monitoring script with system resource checking
- HTTP endpoint validation with configurable timeouts
- Database connection monitoring through Django ORM
- Static file availability verification
- Disk space and memory usage monitoring with alerting thresholds
- Process status checking for Django/Gunicorn workers

#### 6. Rollback Procedures and Testing ✅
- Multi-platform rollback automation (Docker, Fly.io, Railway, Render)
- Database rollback with backup file restoration
- Application version rollback with container/deployment management  
- Full system rollback combining database and application rollback
- Rollback testing with dry-run capabilities
- Platform auto-detection for appropriate rollback strategies
- Post-rollback health validation and verification

### Deployment Infrastructure Results

**Docker Configuration:**
- **Multi-stage build**: Frontend (Bun) → Backend (Python/UV) → Ruby → Production image
- **Security**: Non-root user execution, minimal attack surface
- **Health checks**: 30-second intervals with database and HTTP validation
- **Production ready**: Gunicorn WSGI server with 3 workers default

**Cloud Platform Support:**
- **Railway**: JSON configuration with PostgreSQL and Redis services
- **Render**: Blueprint YAML with managed database and Redis
- **Fly.io**: TOML configuration with release commands and health checks  
- **Docker**: Local development with compose orchestration

**Migration System:**
- **Backup automation**: Timestamped SQL dumps before migrations
- **Environment safety**: Production branch validation and test execution
- **Rollback capability**: Automated restore from backup files
- **Validation**: Database integrity and migration status verification

**Monitoring Coverage:**
- **HTTP endpoints**: Health and readiness checks with status codes
- **Database**: Connection validation and migration status
- **System resources**: Disk space (80%/90% thresholds) and memory usage
- **Process monitoring**: Django/Gunicorn worker status verification
- **Alerting**: Email notifications for critical failures

### Phase 4 Success Criteria Achievement

✅ **Automated deployment to staging/production** - Multi-platform deployment scripts with Railway, Render, Fly.io support  
✅ **Database migrations execute safely** - Automated migration system with backup and rollback capabilities  
✅ **Health checks validate deployment** - Comprehensive monitoring with HTTP, database, and system resource validation  
✅ **Rollback procedures tested** - Multi-platform rollback automation with dry-run testing and platform auto-detection
</file>

<file path="frontend/src/App.tsx">
import React, { useEffect, useState } from 'react';
import { LandingPage } from './pages/LandingPage';
import { AppLayout } from './pages/AppLayout';
import { ProtectedRoute } from './components/auth/ProtectedRoute';

function App() {
  const [currentPath, setCurrentPath] = useState(window.location.pathname);

  useEffect(() => {
    // Handle browser navigation
    const handlePopState = () => {
      setCurrentPath(window.location.pathname);
    };

    window.addEventListener('popstate', handlePopState);
    return () => window.removeEventListener('popstate', handlePopState);
  }, []);

  // Simple routing based on pathname
  if (currentPath === '/app' || currentPath.startsWith('/app/')) {
    return (
      <ProtectedRoute>
        <AppLayout />
      </ProtectedRoute>
    );
  }

  // Default to landing page
  return <LandingPage />;
}

export default App;
</file>

<file path="pyproject.toml">
[project]
name = "watson-oceanheart-ai"
version = "0.1.0"
description = "Clinical LLM output review and curation tool"
requires-python = ">=3.11"
dependencies = [
    "django>=5.0",
    "djangorestframework>=3.14.0",
    "django-cors-headers>=4.0.0",
    "psycopg2-binary>=2.9.0",
    "python-jose[cryptography]>=3.3.0",
    "requests>=2.28.0",
    # Testing dependencies
    "factory-boy>=3.3.0",
    "faker>=21.0.0",
    "coverage>=7.3.0",
    "django-coverage-plugin>=3.1.0",
    # Production dependencies
    "gunicorn>=21.2.0",
    "whitenoise>=6.6.0",
    "dj-database-url>=3.0.1",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["backend"]
</file>

<file path="Dockerfile">
# Watson Multi-Stage Docker Build
# Supports Django backend, Bun frontend, and Ruby services

FROM oven/bun:1.1 as frontend-builder
WORKDIR /app

# Copy frontend source and configurations
COPY package.json bun.lock ./
COPY tsconfig.json ./
COPY vite.config.ts ./
COPY components.json ./
COPY frontend/ ./frontend/

# Install dependencies 
RUN bun install

# Create symlink so frontend can find node_modules (since vite root is ./frontend)
RUN ln -sf /app/node_modules /app/frontend/node_modules

# Build frontend assets
RUN bun run build:clean && bun run build:frontend

# Python/Django stage
FROM python:3.11-slim as backend-base

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    libpq-dev \
    curl \
    && rm -rf /var/lib/apt/lists/*

# (Optional) Install tools; we'll use Python venv + pip for reliability

WORKDIR /app

# Copy Python requirements
COPY pyproject.toml ./
COPY backend/ ./backend/

# Create virtual environment and install all dependencies from pyproject.toml
RUN python -m venv /app/backend/.venv \
    && /app/backend/.venv/bin/pip install --upgrade pip \
    && /app/backend/.venv/bin/pip install -e /app

# # Ruby services stage
# FROM ruby:3.4.5-slim as ruby-services

# WORKDIR /app

# # Install system dependencies for Ruby
# RUN apt-get update && apt-get install -y \
#     build-essential \
#     && rm -rf /var/lib/apt/lists/*

# # Copy Ruby configuration
# COPY Gemfile Gemfile.lock ./
# COPY lib/ ./lib/
# COPY scripts/ ./scripts/

# # Install Ruby dependencies
# RUN bundle config set --local path 'vendor/bundle' && \
#     bundle install --jobs 4 --retry 3

# Final production stage
FROM python:3.11-slim

# Install runtime and minimal build dependencies
RUN apt-get update && apt-get install -y \
    libpq5 \
    libpq-dev \
    build-essential \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Create app user
RUN groupadd -g 999 app && \
    useradd -r -u 999 -g app app

WORKDIR /app

# Copy backend source, venv, and project metadata from backend-base
COPY --from=backend-base /app/backend /app/backend
COPY --from=backend-base /app/pyproject.toml /app/

# Copy built frontend assets
COPY --from=frontend-builder /app/dist /app/backend/staticfiles/

# Copy Ruby services (commented out until Ruby stage is enabled)
# COPY --from=ruby-services /app/vendor /app/vendor
# COPY --from=ruby-services /app/lib /app/lib
# COPY --from=ruby-services /app/scripts /app/scripts
# COPY --from=ruby-services /app/Gemfile* /app/

# Copy configuration files
COPY docker/entrypoint.sh /entrypoint.sh
COPY docker/healthcheck.sh /healthcheck.sh

# Set permissions and create log directory
RUN chmod +x /entrypoint.sh /healthcheck.sh && \
    mkdir -p /var/log/watson && \
    # Create static directory if it doesn't exist
    mkdir -p /app/backend/watson/static && \
    chown -R app:app /app /var/log/watson && \
    # Fix venv symlinks after chown (they point to system python)
    ln -sf /usr/local/bin/python /app/backend/.venv/bin/python && \
    ln -sf python /app/backend/.venv/bin/python3 && \
    ln -sf python /app/backend/.venv/bin/python3.11 && \
    chmod +x /app/backend/.venv/bin/*

# Set environment variables
ENV PATH="/app/backend/.venv/bin:$PATH"
ENV DJANGO_SETTINGS_MODULE=watson.settings.production
ENV PYTHONPATH=/app/backend

# Pre-collect static files during build for production
RUN cd /app/backend && \
    # Set minimal environment variables needed for collectstatic
    export SECRET_KEY="build-time-secret" && \
    export DEBUG="false" && \
    export ALLOWED_HOSTS="localhost" && \
    export DJANGO_SETTINGS_MODULE="watson.settings.base" && \
    # Run collectstatic without requiring database - use base settings to avoid production constraints
    /app/backend/.venv/bin/python manage.py collectstatic --noinput --clear || true

# Switch to non-root user
USER app

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD /healthcheck.sh

# Expose port
EXPOSE 8000

# Use entrypoint script
ENTRYPOINT ["/entrypoint.sh"]
CMD ["/app/backend/.venv/bin/gunicorn", "--bind", "0.0.0.0:8000", "--workers", "3", "watson.wsgi:application"]
</file>

<file path="package.json">
{
  "name": "watson.oceanheart.ai",
  "version": "0.1.0",
  "type": "module",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "bun run build:clean && bun run build:frontend && bun run build:backend",
    "build:clean": "rm -rf dist build",
    "build:frontend": "vite build",
    "build:backend": "cd backend && python manage.py collectstatic --noinput",
    "build:prod": "NODE_ENV=production bun run build",
    "test": "bun test frontend/ --preload ./bun.test.config.ts",
    "test:backend": "cd backend && DJANGO_ENVIRONMENT=test ../.venv/bin/python manage.py test --verbosity=2",
    "test:ruby": "bundle exec rspec --format documentation",
    "test:all": "bun run test && bun run test:backend && bun run test:ruby",
    "test:coverage": "bun run test:coverage:frontend && bun run test:coverage:backend && bun run test:coverage:ruby",
    "test:coverage:frontend": "bun test frontend/ --coverage",
    "test:coverage:backend": "cd backend && DJANGO_ENVIRONMENT=test ../.venv/bin/python -m coverage run --source='.' manage.py test && ../.venv/bin/python -m coverage report && ../.venv/bin/python -m coverage html",
    "test:coverage:ruby": "bundle exec rspec",
    "coverage": "./scripts/coverage-report.sh",
    "ci:local": "./scripts/ci-local.sh",
    "pre-commit": "./scripts/pre-commit-hook.sh",
    "deploy": "./deploy/deploy.sh",
    "migrate": "./scripts/migrate.sh",
    "monitor": "./scripts/monitor.sh",
    "rollback": "./scripts/rollback.sh",
    "docker:build": "docker build -t watson-oceanheart-ai .",
    "docker:up": "docker-compose up -d",
    "docker:down": "docker-compose down",
    "docker:logs": "docker-compose logs -f",
    "typecheck": "tsc --noEmit",
    "frontend:dev": "vite",
    "validate:build": "node scripts/validate-build.js",
    "dev-docker": "vite --host 0.0.0.0",
    "build:vercel": "vite build",
    "preview:vercel": "vite preview"
  },
  "dependencies": {
    "@floating-ui/react": "^0.27.16",
    "@radix-ui/react-alert-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-slot": "^1.2.3",
    "@tailwindcss/vite": "^4.1.13",
    "@tiptap/core": "^3.4.2",
    "@tiptap/extension-collaboration": "^3.4.2",
    "@tiptap/extension-highlight": "^3.4.2",
    "@tiptap/extension-horizontal-rule": "^3.4.2",
    "@tiptap/extension-image": "^3.4.2",
    "@tiptap/extension-list": "^3.4.2",
    "@tiptap/extension-placeholder": "^3.4.2",
    "@tiptap/extension-subscript": "^3.4.2",
    "@tiptap/extension-superscript": "^3.4.2",
    "@tiptap/extension-text-align": "^3.4.2",
    "@tiptap/extension-typography": "^3.4.2",
    "@tiptap/extensions": "^3.4.2",
    "@tiptap/pm": "^3.4.2",
    "@tiptap/react": "^3.4.2",
    "@tiptap/starter-kit": "^3.4.2",
    "@tsparticles/engine": "^3.9.1",
    "@tsparticles/react": "^3.0.0",
    "@tsparticles/slim": "^3.9.1",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^12.23.12",
    "lodash.throttle": "^4.1.1",
    "lucide-react": "^0.544.0",
    "motion": "^12.23.12",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-hotkeys-hook": "^5.1.0",
    "react-textarea-autosize": "^8.5.9",
    "tailwind-merge": "^3.3.1",
    "tailwindcss": "^4.1.13"
  },
  "devDependencies": {
    "@tailwindcss/typography": "^0.5.16",
    "@testing-library/jest-dom": "^6.8.0",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^14.6.1",
    "@types/bun": "latest",
    "@types/lodash.throttle": "^4.1.9",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@vitejs/plugin-react": "^5.0.2",
    "autoprefixer": "^10.4.21",
    "happy-dom": "^18.0.1",
    "sass-embedded": "^1.92.1",
    "shadcn": "^3.2.1",
    "tw-animate-css": "^1.3.8",
    "typescript": "^5.0.0",
    "vite": "^7.1.5"
  },
  "build": {
    "target": "browser",
    "outdir": "./dist",
    "entryPoints": [
      "./frontend/src/main.tsx"
    ],
    "splitting": true,
    "format": "esm"
  }
}
</file>

</files>
